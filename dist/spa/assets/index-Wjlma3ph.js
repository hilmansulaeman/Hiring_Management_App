function l$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var jN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ij(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var zv={exports:{}},ch={},Gv={exports:{}},Ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UN;function Oj(){if(UN)return Ct;UN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=h&&Y[h]||Y["@@iterator"],typeof Y=="function"?Y:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(Y,G,re){this.props=Y,this.context=G,this.refs=x,this.updater=re||g}v.prototype.isReactComponent={},v.prototype.setState=function(Y,G){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,G,"setState")},v.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function S(){}S.prototype=v.prototype;function N(Y,G,re){this.props=Y,this.context=G,this.refs=x,this.updater=re||g}var _=N.prototype=new S;_.constructor=N,y(_,v.prototype),_.isPureReactComponent=!0;var I=Array.isArray,A=Object.prototype.hasOwnProperty,M={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function W(Y,G,re){var ce,xe={},Ce=null,ye=null;if(G!=null)for(ce in G.ref!==void 0&&(ye=G.ref),G.key!==void 0&&(Ce=""+G.key),G)A.call(G,ce)&&!L.hasOwnProperty(ce)&&(xe[ce]=G[ce]);var Ee=arguments.length-2;if(Ee===1)xe.children=re;else if(1<Ee){for(var ke=Array(Ee),De=0;De<Ee;De++)ke[De]=arguments[De+2];xe.children=ke}if(Y&&Y.defaultProps)for(ce in Ee=Y.defaultProps,Ee)xe[ce]===void 0&&(xe[ce]=Ee[ce]);return{$$typeof:e,type:Y,key:Ce,ref:ye,props:xe,_owner:M.current}}function j(Y,G){return{$$typeof:e,type:Y.type,key:G,ref:Y.ref,props:Y.props,_owner:Y._owner}}function U(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function P(Y){var G={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(re){return G[re]})}var X=/\/+/g;function ae(Y,G){return typeof Y=="object"&&Y!==null&&Y.key!=null?P(""+Y.key):G.toString(36)}function ee(Y,G,re,ce,xe){var Ce=typeof Y;(Ce==="undefined"||Ce==="boolean")&&(Y=null);var ye=!1;if(Y===null)ye=!0;else switch(Ce){case"string":case"number":ye=!0;break;case"object":switch(Y.$$typeof){case e:case t:ye=!0}}if(ye)return ye=Y,xe=xe(ye),Y=ce===""?"."+ae(ye,0):ce,I(xe)?(re="",Y!=null&&(re=Y.replace(X,"$&/")+"/"),ee(xe,G,re,"",function(De){return De})):xe!=null&&(U(xe)&&(xe=j(xe,re+(!xe.key||ye&&ye.key===xe.key?"":(""+xe.key).replace(X,"$&/")+"/")+Y)),G.push(xe)),1;if(ye=0,ce=ce===""?".":ce+":",I(Y))for(var Ee=0;Ee<Y.length;Ee++){Ce=Y[Ee];var ke=ce+ae(Ce,Ee);ye+=ee(Ce,G,re,ke,xe)}else if(ke=p(Y),typeof ke=="function")for(Y=ke.call(Y),Ee=0;!(Ce=Y.next()).done;)Ce=Ce.value,ke=ce+ae(Ce,Ee++),ye+=ee(Ce,G,re,ke,xe);else if(Ce==="object")throw G=String(Y),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ye}function ie(Y,G,re){if(Y==null)return Y;var ce=[],xe=0;return ee(Y,ce,"","",function(Ce){return G.call(re,Ce,xe++)}),ce}function le(Y){if(Y._status===-1){var G=Y._result;G=G(),G.then(function(re){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=re)},function(re){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=re)}),Y._status===-1&&(Y._status=0,Y._result=G)}if(Y._status===1)return Y._result.default;throw Y._result}var we={current:null},te={transition:null},oe={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:te,ReactCurrentOwner:M};function pe(){throw Error("act(...) is not supported in production builds of React.")}return Ct.Children={map:ie,forEach:function(Y,G,re){ie(Y,function(){G.apply(this,arguments)},re)},count:function(Y){var G=0;return ie(Y,function(){G++}),G},toArray:function(Y){return ie(Y,function(G){return G})||[]},only:function(Y){if(!U(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Ct.Component=v,Ct.Fragment=n,Ct.Profiler=s,Ct.PureComponent=N,Ct.StrictMode=r,Ct.Suspense=l,Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ct.act=pe,Ct.cloneElement=function(Y,G,re){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var ce=y({},Y.props),xe=Y.key,Ce=Y.ref,ye=Y._owner;if(G!=null){if(G.ref!==void 0&&(Ce=G.ref,ye=M.current),G.key!==void 0&&(xe=""+G.key),Y.type&&Y.type.defaultProps)var Ee=Y.type.defaultProps;for(ke in G)A.call(G,ke)&&!L.hasOwnProperty(ke)&&(ce[ke]=G[ke]===void 0&&Ee!==void 0?Ee[ke]:G[ke])}var ke=arguments.length-2;if(ke===1)ce.children=re;else if(1<ke){Ee=Array(ke);for(var De=0;De<ke;De++)Ee[De]=arguments[De+2];ce.children=Ee}return{$$typeof:e,type:Y.type,key:xe,ref:Ce,props:ce,_owner:ye}},Ct.createContext=function(Y){return Y={$$typeof:a,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:o,_context:Y},Y.Consumer=Y},Ct.createElement=W,Ct.createFactory=function(Y){var G=W.bind(null,Y);return G.type=Y,G},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(Y){return{$$typeof:i,render:Y}},Ct.isValidElement=U,Ct.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:le}},Ct.memo=function(Y,G){return{$$typeof:c,type:Y,compare:G===void 0?null:G}},Ct.startTransition=function(Y){var G=te.transition;te.transition={};try{Y()}finally{te.transition=G}},Ct.unstable_act=pe,Ct.useCallback=function(Y,G){return we.current.useCallback(Y,G)},Ct.useContext=function(Y){return we.current.useContext(Y)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(Y){return we.current.useDeferredValue(Y)},Ct.useEffect=function(Y,G){return we.current.useEffect(Y,G)},Ct.useId=function(){return we.current.useId()},Ct.useImperativeHandle=function(Y,G,re){return we.current.useImperativeHandle(Y,G,re)},Ct.useInsertionEffect=function(Y,G){return we.current.useInsertionEffect(Y,G)},Ct.useLayoutEffect=function(Y,G){return we.current.useLayoutEffect(Y,G)},Ct.useMemo=function(Y,G){return we.current.useMemo(Y,G)},Ct.useReducer=function(Y,G,re){return we.current.useReducer(Y,G,re)},Ct.useRef=function(Y){return we.current.useRef(Y)},Ct.useState=function(Y){return we.current.useState(Y)},Ct.useSyncExternalStore=function(Y,G,re){return we.current.useSyncExternalStore(Y,G,re)},Ct.useTransition=function(){return we.current.useTransition()},Ct.version="18.3.1",Ct}var WN;function Ay(){return WN||(WN=1,Gv.exports=Oj()),Gv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN;function Aj(){if(VN)return ch;VN=1;var e=Ay(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(i,l,c){var f,h={},p=null,g=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(g=l.ref);for(f in l)r.call(l,f)&&!o.hasOwnProperty(f)&&(h[f]=l[f]);if(i&&i.defaultProps)for(f in l=i.defaultProps,l)h[f]===void 0&&(h[f]=l[f]);return{$$typeof:t,type:i,key:p,ref:g,props:h,_owner:s.current}}return ch.Fragment=n,ch.jsx=a,ch.jsxs=a,ch}var zN;function Pj(){return zN||(zN=1,zv.exports=Aj()),zv.exports}var C=Pj(),T=Ay();const he=Yb(T),Qb=l$({__proto__:null,default:he},[T]),Dj=1,Fj=1e6;let Hv=0;function Lj(){return Hv=(Hv+1)%Number.MAX_SAFE_INTEGER,Hv.toString()}const qv=new Map,GN=e=>{if(qv.has(e))return;const t=setTimeout(()=>{qv.delete(e),Oh({type:"REMOVE_TOAST",toastId:e})},Fj);qv.set(e,t)},Mj=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Dj)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?GN(n):e.toasts.forEach(r=>{GN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Eg=[];let Ng={toasts:[]};function Oh(e){Ng=Mj(Ng,e),Eg.forEach(t=>{t(Ng)})}function Ch({...e}){const t=Lj(),n=s=>Oh({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Oh({type:"DISMISS_TOAST",toastId:t});return Oh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function Zb(){const[e,t]=T.useState(Ng);return T.useEffect(()=>(Eg.push(t),()=>{const n=Eg.indexOf(t);n>-1&&Eg.splice(n,1)}),[e]),{...e,toast:Ch,dismiss:n=>Oh({type:"DISMISS_TOAST",toastId:n})}}var Kv={exports:{}},ds={},Xv={exports:{}},Yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN;function Bj(){return HN||(HN=1,(function(e){function t(te,oe){var pe=te.length;te.push(oe);e:for(;0<pe;){var Y=pe-1>>>1,G=te[Y];if(0<s(G,oe))te[Y]=oe,te[pe]=G,pe=Y;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var oe=te[0],pe=te.pop();if(pe!==oe){te[0]=pe;e:for(var Y=0,G=te.length,re=G>>>1;Y<re;){var ce=2*(Y+1)-1,xe=te[ce],Ce=ce+1,ye=te[Ce];if(0>s(xe,pe))Ce<G&&0>s(ye,xe)?(te[Y]=ye,te[Ce]=pe,Y=Ce):(te[Y]=xe,te[ce]=pe,Y=ce);else if(Ce<G&&0>s(ye,pe))te[Y]=ye,te[Ce]=pe,Y=Ce;else break e}}return oe}function s(te,oe){var pe=te.sortIndex-oe.sortIndex;return pe!==0?pe:te.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var l=[],c=[],f=1,h=null,p=3,g=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(te){for(var oe=n(c);oe!==null;){if(oe.callback===null)r(c);else if(oe.startTime<=te)r(c),oe.sortIndex=oe.expirationTime,t(l,oe);else break;oe=n(c)}}function I(te){if(x=!1,_(te),!y)if(n(l)!==null)y=!0,le(A);else{var oe=n(c);oe!==null&&we(I,oe.startTime-te)}}function A(te,oe){y=!1,x&&(x=!1,S(W),W=-1),g=!0;var pe=p;try{for(_(oe),h=n(l);h!==null&&(!(h.expirationTime>oe)||te&&!P());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,p=h.priorityLevel;var G=Y(h.expirationTime<=oe);oe=e.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),_(oe)}else r(l);h=n(l)}if(h!==null)var re=!0;else{var ce=n(c);ce!==null&&we(I,ce.startTime-oe),re=!1}return re}finally{h=null,p=pe,g=!1}}var M=!1,L=null,W=-1,j=5,U=-1;function P(){return!(e.unstable_now()-U<j)}function X(){if(L!==null){var te=e.unstable_now();U=te;var oe=!0;try{oe=L(!0,te)}finally{oe?ae():(M=!1,L=null)}}else M=!1}var ae;if(typeof N=="function")ae=function(){N(X)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,ie=ee.port2;ee.port1.onmessage=X,ae=function(){ie.postMessage(null)}}else ae=function(){v(X,0)};function le(te){L=te,M||(M=!0,ae())}function we(te,oe){W=v(function(){te(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){y||g||(y=!0,le(A))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(te){switch(p){case 1:case 2:case 3:var oe=3;break;default:oe=p}var pe=p;p=oe;try{return te()}finally{p=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,oe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=p;p=te;try{return oe()}finally{p=pe}},e.unstable_scheduleCallback=function(te,oe,pe){var Y=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Y+pe:Y):pe=Y,te){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=pe+G,te={id:f++,callback:oe,priorityLevel:te,startTime:pe,expirationTime:G,sortIndex:-1},pe>Y?(te.sortIndex=pe,t(c,te),n(l)===null&&te===n(c)&&(x?(S(W),W=-1):x=!0,we(I,pe-Y))):(te.sortIndex=G,t(l,te),y||g||(y=!0,le(A))),te},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(te){var oe=p;return function(){var pe=p;p=oe;try{return te.apply(this,arguments)}finally{p=pe}}}})(Yv)),Yv}var qN;function jj(){return qN||(qN=1,Xv.exports=Bj()),Xv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN;function Uj(){if(KN)return ds;KN=1;var e=Ay(),t=jj();function n(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(u,d){a(u,d),a(u+"Capture",d)}function a(u,d){for(s[u]=d,u=0;u<d.length;u++)r.add(d[u])}var i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function p(u){return l.call(h,u)?!0:l.call(f,u)?!1:c.test(u)?h[u]=!0:(f[u]=!0,!1)}function g(u,d,m,b){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:m!==null?!m.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function y(u,d,m,b){if(d===null||typeof d>"u"||g(u,d,m,b))return!0;if(b)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function x(u,d,m,b,E,$,F){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=E,this.mustUseProperty=m,this.propertyName=u,this.type=d,this.sanitizeURL=$,this.removeEmptyString=F}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){v[u]=new x(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];v[d]=new x(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){v[u]=new x(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){v[u]=new x(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){v[u]=new x(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){v[u]=new x(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){v[u]=new x(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){v[u]=new x(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){v[u]=new x(u,5,!1,u.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function N(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(S,N);v[d]=new x(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(S,N);v[d]=new x(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(S,N);v[d]=new x(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){v[u]=new x(u,1,!1,u.toLowerCase(),null,!1,!1)}),v.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){v[u]=new x(u,1,!1,u.toLowerCase(),null,!0,!0)});function _(u,d,m,b){var E=v.hasOwnProperty(d)?v[d]:null;(E!==null?E.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,m,E,b)&&(m=null),b||E===null?p(d)&&(m===null?u.removeAttribute(d):u.setAttribute(d,""+m)):E.mustUseProperty?u[E.propertyName]=m===null?E.type===3?!1:"":m:(d=E.attributeName,b=E.attributeNamespace,m===null?u.removeAttribute(d):(E=E.type,m=E===3||E===4&&m===!0?"":""+m,b?u.setAttributeNS(b,d,m):u.setAttribute(d,m))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),M=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),P=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),te=Symbol.iterator;function oe(u){return u===null||typeof u!="object"?null:(u=te&&u[te]||u["@@iterator"],typeof u=="function"?u:null)}var pe=Object.assign,Y;function G(u){if(Y===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);Y=d&&d[1]||""}return`
`+Y+u}var re=!1;function ce(u,d){if(!u||re)return"";re=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ge){var b=ge}Reflect.construct(u,[],d)}else{try{d.call()}catch(ge){b=ge}u.call(d.prototype)}else{try{throw Error()}catch(ge){b=ge}u()}}catch(ge){if(ge&&b&&typeof ge.stack=="string"){for(var E=ge.stack.split(`
`),$=b.stack.split(`
`),F=E.length-1,K=$.length-1;1<=F&&0<=K&&E[F]!==$[K];)K--;for(;1<=F&&0<=K;F--,K--)if(E[F]!==$[K]){if(F!==1||K!==1)do if(F--,K--,0>K||E[F]!==$[K]){var J=`
`+E[F].replace(" at new "," at ");return u.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",u.displayName)),J}while(1<=F&&0<=K);break}}}finally{re=!1,Error.prepareStackTrace=m}return(u=u?u.displayName||u.name:"")?G(u):""}function xe(u){switch(u.tag){case 5:return G(u.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return u=ce(u.type,!1),u;case 11:return u=ce(u.type.render,!1),u;case 1:return u=ce(u.type,!0),u;default:return""}}function Ce(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case L:return"Fragment";case M:return"Portal";case j:return"Profiler";case W:return"StrictMode";case ae:return"Suspense";case ee:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case P:return(u.displayName||"Context")+".Consumer";case U:return(u._context.displayName||"Context")+".Provider";case X:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case ie:return d=u.displayName||null,d!==null?d:Ce(u.type)||"Memo";case le:d=u._payload,u=u._init;try{return Ce(u(d))}catch{}}return null}function ye(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(d);case 8:return d===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Ee(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ke(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function De(u){var d=ke(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),b=""+u[d];if(!u.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,$=m.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return E.call(this)},set:function(F){b=""+F,$.call(this,F)}}),Object.defineProperty(u,d,{enumerable:m.enumerable}),{getValue:function(){return b},setValue:function(F){b=""+F},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Ze(u){u._valueTracker||(u._valueTracker=De(u))}function ht(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var m=d.getValue(),b="";return u&&(b=ke(u)?u.checked?"true":"false":u.value),u=b,u!==m?(d.setValue(u),!0):!1}function dt(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Rt(u,d){var m=d.checked;return pe({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??u._wrapperState.initialChecked})}function Mr(u,d){var m=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;m=Ee(d.value!=null?d.value:m),u._wrapperState={initialChecked:b,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Br(u,d){d=d.checked,d!=null&&_(u,"checked",d,!1)}function vr(u,d){Br(u,d);var m=Ee(d.value),b=d.type;if(m!=null)b==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+m):u.value!==""+m&&(u.value=""+m);else if(b==="submit"||b==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?aa(u,d.type,m):d.hasOwnProperty("defaultValue")&&aa(u,d.type,Ee(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function eo(u,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,m||d===u.value||(u.value=d),u.defaultValue=d}m=u.name,m!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,m!==""&&(u.name=m)}function aa(u,d,m){(d!=="number"||dt(u.ownerDocument)!==u)&&(m==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+m&&(u.defaultValue=""+m))}var ks=Array.isArray;function ur(u,d,m,b){if(u=u.options,d){d={};for(var E=0;E<m.length;E++)d["$"+m[E]]=!0;for(m=0;m<u.length;m++)E=d.hasOwnProperty("$"+u[m].value),u[m].selected!==E&&(u[m].selected=E),E&&b&&(u[m].defaultSelected=!0)}else{for(m=""+Ee(m),d=null,E=0;E<u.length;E++){if(u[E].value===m){u[E].selected=!0,b&&(u[E].defaultSelected=!0);return}d!==null||u[E].disabled||(d=u[E])}d!==null&&(d.selected=!0)}}function $s(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return pe({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function cr(u,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(n(92));if(ks(m)){if(1<m.length)throw Error(n(93));m=m[0]}d=m}d==null&&(d=""),m=d}u._wrapperState={initialValue:Ee(m)}}function xr(u,d){var m=Ee(d.value),b=Ee(d.defaultValue);m!=null&&(m=""+m,m!==u.value&&(u.value=m),d.defaultValue==null&&u.defaultValue!==m&&(u.defaultValue=m)),b!=null&&(u.defaultValue=""+b)}function Ua(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function Sn(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wr(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?Sn(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var ia,Wa=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,b,E){MSApp.execUnsafeLocalFunction(function(){return u(d,m,b,E)})}:u})(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=ia.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function es(u,d){if(d){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=d;return}}u.textContent=d}var to={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Va=["Webkit","ms","Moz","O"];Object.keys(to).forEach(function(u){Va.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),to[d]=to[u]})});function ts(u,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||to.hasOwnProperty(u)&&to[u]?(""+d).trim():d+"px"}function jr(u,d){u=u.style;for(var m in d)if(d.hasOwnProperty(m)){var b=m.indexOf("--")===0,E=ts(m,d[m],b);m==="float"&&(m="cssFloat"),b?u.setProperty(m,E):u[m]=E}}var za=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ur(u,d){if(d){if(za[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function la(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lt=null;function xt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Je=null,St=null,qt=null;function ut(u){if(u=Xf(u)){if(typeof Je!="function")throw Error(n(280));var d=u.stateNode;d&&(d=um(d),Je(u.stateNode,u.type,d))}}function Ga(u){St?qt?qt.push(u):qt=[u]:St=u}function Ye(){if(St){var u=St,d=qt;if(qt=St=null,ut(u),d)for(u=0;u<d.length;u++)ut(d[u])}}function Nt(u,d){return u(d)}function It(){}var an=!1;function Un(u,d,m){if(an)return u(d,m);an=!0;try{return Nt(u,d,m)}finally{an=!1,(St!==null||qt!==null)&&(It(),Ye())}}function br(u,d){var m=u.stateNode;if(m===null)return null;var b=um(m);if(b===null)return null;m=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(u=u.type,b=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!b;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(n(231,d,typeof m));return m}var Yn=!1;if(i)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Yn=!1}function On(u,d,m,b,E,$,F,K,J){var ge=Array.prototype.slice.call(arguments,3);try{d.apply(m,ge)}catch(Ne){this.onError(Ne)}}var _s=!1,Vl=null,Yt=!1,ns=null,Of={onError:function(u){_s=!0,Vl=u}};function u1(u,d,m,b,E,$,F,K,J){_s=!1,Vl=null,On.apply(Of,arguments)}function bc(u,d,m,b,E,$,F,K,J){if(u1.apply(this,arguments),_s){if(_s){var ge=Vl;_s=!1,Vl=null}else throw Error(n(198));Yt||(Yt=!0,ns=ge)}}function _o(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function zl(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function _i(u){if(_o(u)!==u)throw Error(n(188))}function Up(u){var d=u.alternate;if(!d){if(d=_o(u),d===null)throw Error(n(188));return d!==u?null:u}for(var m=u,b=d;;){var E=m.return;if(E===null)break;var $=E.alternate;if($===null){if(b=E.return,b!==null){m=b;continue}break}if(E.child===$.child){for($=E.child;$;){if($===m)return _i(E),u;if($===b)return _i(E),d;$=$.sibling}throw Error(n(188))}if(m.return!==b.return)m=E,b=$;else{for(var F=!1,K=E.child;K;){if(K===m){F=!0,m=E,b=$;break}if(K===b){F=!0,b=E,m=$;break}K=K.sibling}if(!F){for(K=$.child;K;){if(K===m){F=!0,m=$,b=E;break}if(K===b){F=!0,b=$,m=E;break}K=K.sibling}if(!F)throw Error(n(189))}}if(m.alternate!==b)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?u:d}function Sc(u){return u=Up(u),u!==null?Cc(u):null}function Cc(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=Cc(u);if(d!==null)return d;u=u.sibling}return null}var Af=t.unstable_scheduleCallback,rs=t.unstable_cancelCallback,no=t.unstable_shouldYield,Gl=t.unstable_requestPaint,tn=t.unstable_now,Pf=t.unstable_getCurrentPriorityLevel,Ec=t.unstable_ImmediatePriority,Hl=t.unstable_UserBlockingPriority,Wr=t.unstable_NormalPriority,Wp=t.unstable_LowPriority,ql=t.unstable_IdlePriority,Vr=null,zr=null;function c1(u){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Vr,u,void 0,(u.current.flags&128)===128)}catch{}}var ss=Math.clz32?Math.clz32:f1,Df=Math.log,d1=Math.LN2;function f1(u){return u>>>=0,u===0?32:31-(Df(u)/d1|0)|0}var Kl=64,Xl=4194304;function Ri(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Yl(u,d){var m=u.pendingLanes;if(m===0)return 0;var b=0,E=u.suspendedLanes,$=u.pingedLanes,F=m&268435455;if(F!==0){var K=F&~E;K!==0?b=Ri(K):($&=F,$!==0&&(b=Ri($)))}else F=m&~E,F!==0?b=Ri(F):$!==0&&(b=Ri($));if(b===0)return 0;if(d!==0&&d!==b&&(d&E)===0&&(E=b&-b,$=d&-d,E>=$||E===16&&($&4194240)!==0))return d;if((b&4)!==0&&(b|=m&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=b;0<d;)m=31-ss(d),E=1<<m,b|=u[m],d&=~E;return b}function Sr(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vp(u,d){for(var m=u.suspendedLanes,b=u.pingedLanes,E=u.expirationTimes,$=u.pendingLanes;0<$;){var F=31-ss($),K=1<<F,J=E[F];J===-1?((K&m)===0||(K&b)!==0)&&(E[F]=Sr(K,d)):J<=d&&(u.expiredLanes|=K),$&=~K}}function Nc(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Ql(){var u=Kl;return Kl<<=1,(Kl&4194240)===0&&(Kl=64),u}function Tc(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function Ii(u,d,m){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-ss(d),u[d]=m}function h1(u,d){var m=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var b=u.eventTimes;for(u=u.expirationTimes;0<m;){var E=31-ss(m),$=1<<E;d[E]=0,b[E]=-1,u[E]=-1,m&=~$}}function Ff(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var b=31-ss(m),E=1<<b;E&d|u[b]&d&&(u[b]|=d),m&=~E}}var Dt=0;function Lf(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var Zl,kc,Mf,Oi,zp,Bf=!1,$c=[],ua=null,ro=null,os=null,Jl=new Map,eu=new Map,ca=[],p1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(u,d){switch(u){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Jl.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":eu.delete(d.pointerId)}}function Ai(u,d,m,b,E,$){return u===null||u.nativeEvent!==$?(u={blockedOn:d,domEventName:m,eventSystemFlags:b,nativeEvent:$,targetContainers:[E]},d!==null&&(d=Xf(d),d!==null&&kc(d)),u):(u.eventSystemFlags|=b,d=u.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),u)}function Gp(u,d,m,b,E){switch(d){case"focusin":return ua=Ai(ua,u,d,m,b,E),!0;case"dragenter":return ro=Ai(ro,u,d,m,b,E),!0;case"mouseover":return os=Ai(os,u,d,m,b,E),!0;case"pointerover":var $=E.pointerId;return Jl.set($,Ai(Jl.get($)||null,u,d,m,b,E)),!0;case"gotpointercapture":return $=E.pointerId,eu.set($,Ai(eu.get($)||null,u,d,m,b,E)),!0}return!1}function Pi(u){var d=iu(u.target);if(d!==null){var m=_o(d);if(m!==null){if(d=m.tag,d===13){if(d=zl(m),d!==null){u.blockedOn=d,zp(u.priority,function(){Mf(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Cr(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var m=Ic(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(m===null){m=u.nativeEvent;var b=new m.constructor(m.type,m);lt=b,m.target.dispatchEvent(b),lt=null}else return d=Xf(m),d!==null&&kc(d),u.blockedOn=m,!1;d.shift()}return!0}function Hp(u,d,m){Cr(u)&&m.delete(d)}function m1(){Bf=!1,ua!==null&&Cr(ua)&&(ua=null),ro!==null&&Cr(ro)&&(ro=null),os!==null&&Cr(os)&&(os=null),Jl.forEach(Hp),eu.forEach(Hp)}function Di(u,d){u.blockedOn===d&&(u.blockedOn=null,Bf||(Bf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,m1)))}function Fi(u){function d(E){return Di(E,u)}if(0<$c.length){Di($c[0],u);for(var m=1;m<$c.length;m++){var b=$c[m];b.blockedOn===u&&(b.blockedOn=null)}}for(ua!==null&&Di(ua,u),ro!==null&&Di(ro,u),os!==null&&Di(os,u),Jl.forEach(d),eu.forEach(d),m=0;m<ca.length;m++)b=ca[m],b.blockedOn===u&&(b.blockedOn=null);for(;0<ca.length&&(m=ca[0],m.blockedOn===null);)Pi(m),m.blockedOn===null&&ca.shift()}var da=I.ReactCurrentBatchConfig,Li=!0;function Mi(u,d,m,b){var E=Dt,$=da.transition;da.transition=null;try{Dt=1,tu(u,d,m,b)}finally{Dt=E,da.transition=$}}function qp(u,d,m,b){var E=Dt,$=da.transition;da.transition=null;try{Dt=4,tu(u,d,m,b)}finally{Dt=E,da.transition=$}}function tu(u,d,m,b){if(Li){var E=Ic(u,d,m,b);if(E===null)P1(u,d,b,Rc,m),_c(u,b);else if(Gp(E,u,d,m,b))b.stopPropagation();else if(_c(u,b),d&4&&-1<p1.indexOf(u)){for(;E!==null;){var $=Xf(E);if($!==null&&Zl($),$=Ic(u,d,m,b),$===null&&P1(u,d,b,Rc,m),$===E)break;E=$}E!==null&&b.stopPropagation()}else P1(u,d,b,null,m)}}var Rc=null;function Ic(u,d,m,b){if(Rc=null,u=xt(b),u=iu(u),u!==null)if(d=_o(u),d===null)u=null;else if(m=d.tag,m===13){if(u=zl(d),u!==null)return u;u=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return Rc=u,null}function Ha(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pf()){case Ec:return 1;case Hl:return 4;case Wr:case Wp:return 16;case ql:return 536870912;default:return 16}default:return 16}}var Ro=null,Oc=null,Ac=null;function jf(){if(Ac)return Ac;var u,d=Oc,m=d.length,b,E="value"in Ro?Ro.value:Ro.textContent,$=E.length;for(u=0;u<m&&d[u]===E[u];u++);var F=m-u;for(b=1;b<=F&&d[m-b]===E[$-b];b++);return Ac=E.slice(u,1<b?1-b:void 0)}function qa(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function nu(){return!0}function Kp(){return!1}function Er(u){function d(m,b,E,$,F){this._reactName=m,this._targetInst=E,this.type=b,this.nativeEvent=$,this.target=F,this.currentTarget=null;for(var K in u)u.hasOwnProperty(K)&&(m=u[K],this[K]=m?m($):$[K]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?nu:Kp,this.isPropagationStopped=Kp,this}return pe(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),d}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pc=Er(Ka),Bi=pe({},Ka,{view:0,detail:0}),Uf=Er(Bi),Dc,Wf,ru,Fc=pe({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:k,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ru&&(ru&&u.type==="mousemove"?(Dc=u.screenX-ru.screenX,Wf=u.screenY-ru.screenY):Wf=Dc=0,ru=u),Dc)},movementY:function(u){return"movementY"in u?u.movementY:Wf}}),Xp=Er(Fc),Yp=pe({},Fc,{dataTransfer:0}),g1=Er(Yp),y1=pe({},Bi,{relatedTarget:0}),su=Er(y1),x1=pe({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),w1=Er(x1),b1=pe({},Ka,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Lc=Er(b1),S1=pe({},Ka,{data:0}),Qp=Er(S1),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=Jp[u])?!!d[u]:!1}function k(){return w}var O=pe({},Bi,{key:function(u){if(u.key){var d=C1[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=qa(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Zp[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:k,charCode:function(u){return u.type==="keypress"?qa(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?qa(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),D=Er(O),z=pe({},Fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q=Er(z),H=pe({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:k}),ne=Er(H),me=pe({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),Te=Er(me),Ae=pe({},Fc,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),at=Er(Ae),He=[9,13,27,32],Fe=i&&"CompositionEvent"in window,tt=null;i&&"documentMode"in document&&(tt=document.documentMode);var pt=i&&"TextEvent"in window&&!tt,Ht=i&&(!Fe||tt&&8<tt&&11>=tt),Wt=" ",An=!1;function Gr(u,d){switch(u){case"keyup":return He.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dr(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var wt=!1;function Vn(u,d){switch(u){case"compositionend":return dr(d);case"keypress":return d.which!==32?null:(An=!0,Wt);case"textInput":return u=d.data,u===Wt&&An?null:u;default:return null}}function fa(u,d){if(wt)return u==="compositionend"||!Fe&&Gr(u,d)?(u=jf(),Ac=Oc=Ro=null,wt=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ht&&d.locale!=="ko"?null:d.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function em(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!E1[u.type]:d==="textarea"}function tm(u,d,m,b){Ga(b),d=am(d,"onChange"),0<d.length&&(m=new Pc("onChange","change",null,m,b),u.push({event:m,listeners:d}))}var ou=null,au=null;function Mc(u){nE(u,0)}function nm(u){var d=Vc(u);if(ht(d))return u}function OB(u,d){if(u==="change")return d}var BC=!1;if(i){var N1;if(i){var T1="oninput"in document;if(!T1){var jC=document.createElement("div");jC.setAttribute("oninput","return;"),T1=typeof jC.oninput=="function"}N1=T1}else N1=!1;BC=N1&&(!document.documentMode||9<document.documentMode)}function UC(){ou&&(ou.detachEvent("onpropertychange",WC),au=ou=null)}function WC(u){if(u.propertyName==="value"&&nm(au)){var d=[];tm(d,au,u,xt(u)),Un(Mc,d)}}function AB(u,d,m){u==="focusin"?(UC(),ou=d,au=m,ou.attachEvent("onpropertychange",WC)):u==="focusout"&&UC()}function PB(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return nm(au)}function DB(u,d){if(u==="click")return nm(d)}function FB(u,d){if(u==="input"||u==="change")return nm(d)}function LB(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Io=typeof Object.is=="function"?Object.is:LB;function Vf(u,d){if(Io(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),b=Object.keys(d);if(m.length!==b.length)return!1;for(b=0;b<m.length;b++){var E=m[b];if(!l.call(d,E)||!Io(u[E],d[E]))return!1}return!0}function VC(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function zC(u,d){var m=VC(u);u=0;for(var b;m;){if(m.nodeType===3){if(b=u+m.textContent.length,u<=d&&b>=d)return{node:m,offset:d-u};u=b}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=VC(m)}}function GC(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?GC(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function HC(){for(var u=window,d=dt();d instanceof u.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)u=d.contentWindow;else break;d=dt(u.document)}return d}function k1(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function MB(u){var d=HC(),m=u.focusedElem,b=u.selectionRange;if(d!==m&&m&&m.ownerDocument&&GC(m.ownerDocument.documentElement,m)){if(b!==null&&k1(m)){if(d=b.start,u=b.end,u===void 0&&(u=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(u,m.value.length);else if(u=(d=m.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var E=m.textContent.length,$=Math.min(b.start,E);b=b.end===void 0?$:Math.min(b.end,E),!u.extend&&$>b&&(E=b,b=$,$=E),E=zC(m,$);var F=zC(m,b);E&&F&&(u.rangeCount!==1||u.anchorNode!==E.node||u.anchorOffset!==E.offset||u.focusNode!==F.node||u.focusOffset!==F.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),u.removeAllRanges(),$>b?(u.addRange(d),u.extend(F.node,F.offset)):(d.setEnd(F.node,F.offset),u.addRange(d)))}}for(d=[],u=m;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)u=d[m],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var BB=i&&"documentMode"in document&&11>=document.documentMode,Bc=null,$1=null,zf=null,_1=!1;function qC(u,d,m){var b=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;_1||Bc==null||Bc!==dt(b)||(b=Bc,"selectionStart"in b&&k1(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),zf&&Vf(zf,b)||(zf=b,b=am($1,"onSelect"),0<b.length&&(d=new Pc("onSelect","select",null,d,m),u.push({event:d,listeners:b}),d.target=Bc)))}function rm(u,d){var m={};return m[u.toLowerCase()]=d.toLowerCase(),m["Webkit"+u]="webkit"+d,m["Moz"+u]="moz"+d,m}var jc={animationend:rm("Animation","AnimationEnd"),animationiteration:rm("Animation","AnimationIteration"),animationstart:rm("Animation","AnimationStart"),transitionend:rm("Transition","TransitionEnd")},R1={},KC={};i&&(KC=document.createElement("div").style,"AnimationEvent"in window||(delete jc.animationend.animation,delete jc.animationiteration.animation,delete jc.animationstart.animation),"TransitionEvent"in window||delete jc.transitionend.transition);function sm(u){if(R1[u])return R1[u];if(!jc[u])return u;var d=jc[u],m;for(m in d)if(d.hasOwnProperty(m)&&m in KC)return R1[u]=d[m];return u}var XC=sm("animationend"),YC=sm("animationiteration"),QC=sm("animationstart"),ZC=sm("transitionend"),JC=new Map,eE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(u,d){JC.set(u,d),o(d,[u])}for(var I1=0;I1<eE.length;I1++){var O1=eE[I1],jB=O1.toLowerCase(),UB=O1[0].toUpperCase()+O1.slice(1);ji(jB,"on"+UB)}ji(XC,"onAnimationEnd"),ji(YC,"onAnimationIteration"),ji(QC,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(ZC,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gf));function tE(u,d,m){var b=u.type||"unknown-event";u.currentTarget=m,bc(b,d,void 0,u),u.currentTarget=null}function nE(u,d){d=(d&4)!==0;for(var m=0;m<u.length;m++){var b=u[m],E=b.event;b=b.listeners;e:{var $=void 0;if(d)for(var F=b.length-1;0<=F;F--){var K=b[F],J=K.instance,ge=K.currentTarget;if(K=K.listener,J!==$&&E.isPropagationStopped())break e;tE(E,K,ge),$=J}else for(F=0;F<b.length;F++){if(K=b[F],J=K.instance,ge=K.currentTarget,K=K.listener,J!==$&&E.isPropagationStopped())break e;tE(E,K,ge),$=J}}}if(Yt)throw u=ns,Yt=!1,ns=null,u}function nn(u,d){var m=d[j1];m===void 0&&(m=d[j1]=new Set);var b=u+"__bubble";m.has(b)||(rE(d,u,2,!1),m.add(b))}function A1(u,d,m){var b=0;d&&(b|=4),rE(m,u,b,d)}var om="_reactListening"+Math.random().toString(36).slice(2);function Hf(u){if(!u[om]){u[om]=!0,r.forEach(function(m){m!=="selectionchange"&&(WB.has(m)||A1(m,!1,u),A1(m,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[om]||(d[om]=!0,A1("selectionchange",!1,d))}}function rE(u,d,m,b){switch(Ha(d)){case 1:var E=Mi;break;case 4:E=qp;break;default:E=tu}m=E.bind(null,d,m,u),E=void 0,!Yn||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),b?E!==void 0?u.addEventListener(d,m,{capture:!0,passive:E}):u.addEventListener(d,m,!0):E!==void 0?u.addEventListener(d,m,{passive:E}):u.addEventListener(d,m,!1)}function P1(u,d,m,b,E){var $=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var F=b.tag;if(F===3||F===4){var K=b.stateNode.containerInfo;if(K===E||K.nodeType===8&&K.parentNode===E)break;if(F===4)for(F=b.return;F!==null;){var J=F.tag;if((J===3||J===4)&&(J=F.stateNode.containerInfo,J===E||J.nodeType===8&&J.parentNode===E))return;F=F.return}for(;K!==null;){if(F=iu(K),F===null)return;if(J=F.tag,J===5||J===6){b=$=F;continue e}K=K.parentNode}}b=b.return}Un(function(){var ge=$,Ne=xt(m),$e=[];e:{var Se=JC.get(u);if(Se!==void 0){var Me=Pc,Ue=u;switch(u){case"keypress":if(qa(m)===0)break e;case"keydown":case"keyup":Me=D;break;case"focusin":Ue="focus",Me=su;break;case"focusout":Ue="blur",Me=su;break;case"beforeblur":case"afterblur":Me=su;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Xp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=g1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=ne;break;case XC:case YC:case QC:Me=w1;break;case ZC:Me=Te;break;case"scroll":Me=Uf;break;case"wheel":Me=at;break;case"copy":case"cut":case"paste":Me=Lc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=q}var Ve=(d&4)!==0,kn=!Ve&&u==="scroll",ue=Ve?Se!==null?Se+"Capture":null:Se;Ve=[];for(var se=ge,fe;se!==null;){fe=se;var Re=fe.stateNode;if(fe.tag===5&&Re!==null&&(fe=Re,ue!==null&&(Re=br(se,ue),Re!=null&&Ve.push(qf(se,Re,fe)))),kn)break;se=se.return}0<Ve.length&&(Se=new Me(Se,Ue,null,m,Ne),$e.push({event:Se,listeners:Ve}))}}if((d&7)===0){e:{if(Se=u==="mouseover"||u==="pointerover",Me=u==="mouseout"||u==="pointerout",Se&&m!==lt&&(Ue=m.relatedTarget||m.fromElement)&&(iu(Ue)||Ue[Xa]))break e;if((Me||Se)&&(Se=Ne.window===Ne?Ne:(Se=Ne.ownerDocument)?Se.defaultView||Se.parentWindow:window,Me?(Ue=m.relatedTarget||m.toElement,Me=ge,Ue=Ue?iu(Ue):null,Ue!==null&&(kn=_o(Ue),Ue!==kn||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(Me=null,Ue=ge),Me!==Ue)){if(Ve=Xp,Re="onMouseLeave",ue="onMouseEnter",se="mouse",(u==="pointerout"||u==="pointerover")&&(Ve=q,Re="onPointerLeave",ue="onPointerEnter",se="pointer"),kn=Me==null?Se:Vc(Me),fe=Ue==null?Se:Vc(Ue),Se=new Ve(Re,se+"leave",Me,m,Ne),Se.target=kn,Se.relatedTarget=fe,Re=null,iu(Ne)===ge&&(Ve=new Ve(ue,se+"enter",Ue,m,Ne),Ve.target=fe,Ve.relatedTarget=kn,Re=Ve),kn=Re,Me&&Ue)t:{for(Ve=Me,ue=Ue,se=0,fe=Ve;fe;fe=Uc(fe))se++;for(fe=0,Re=ue;Re;Re=Uc(Re))fe++;for(;0<se-fe;)Ve=Uc(Ve),se--;for(;0<fe-se;)ue=Uc(ue),fe--;for(;se--;){if(Ve===ue||ue!==null&&Ve===ue.alternate)break t;Ve=Uc(Ve),ue=Uc(ue)}Ve=null}else Ve=null;Me!==null&&sE($e,Se,Me,Ve,!1),Ue!==null&&kn!==null&&sE($e,kn,Ue,Ve,!0)}}e:{if(Se=ge?Vc(ge):window,Me=Se.nodeName&&Se.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Se.type==="file")var Ge=OB;else if(em(Se))if(BC)Ge=FB;else{Ge=PB;var rt=AB}else(Me=Se.nodeName)&&Me.toLowerCase()==="input"&&(Se.type==="checkbox"||Se.type==="radio")&&(Ge=DB);if(Ge&&(Ge=Ge(u,ge))){tm($e,Ge,m,Ne);break e}rt&&rt(u,Se,ge),u==="focusout"&&(rt=Se._wrapperState)&&rt.controlled&&Se.type==="number"&&aa(Se,"number",Se.value)}switch(rt=ge?Vc(ge):window,u){case"focusin":(em(rt)||rt.contentEditable==="true")&&(Bc=rt,$1=ge,zf=null);break;case"focusout":zf=$1=Bc=null;break;case"mousedown":_1=!0;break;case"contextmenu":case"mouseup":case"dragend":_1=!1,qC($e,m,Ne);break;case"selectionchange":if(BB)break;case"keydown":case"keyup":qC($e,m,Ne)}var st;if(Fe)e:{switch(u){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else wt?Gr(u,m)&&(ct="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(ct="onCompositionStart");ct&&(Ht&&m.locale!=="ko"&&(wt||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&wt&&(st=jf()):(Ro=Ne,Oc="value"in Ro?Ro.value:Ro.textContent,wt=!0)),rt=am(ge,ct),0<rt.length&&(ct=new Qp(ct,u,null,m,Ne),$e.push({event:ct,listeners:rt}),st?ct.data=st:(st=dr(m),st!==null&&(ct.data=st)))),(st=pt?Vn(u,m):fa(u,m))&&(ge=am(ge,"onBeforeInput"),0<ge.length&&(Ne=new Qp("onBeforeInput","beforeinput",null,m,Ne),$e.push({event:Ne,listeners:ge}),Ne.data=st))}nE($e,d)})}function qf(u,d,m){return{instance:u,listener:d,currentTarget:m}}function am(u,d){for(var m=d+"Capture",b=[];u!==null;){var E=u,$=E.stateNode;E.tag===5&&$!==null&&(E=$,$=br(u,m),$!=null&&b.unshift(qf(u,$,E)),$=br(u,d),$!=null&&b.push(qf(u,$,E))),u=u.return}return b}function Uc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function sE(u,d,m,b,E){for(var $=d._reactName,F=[];m!==null&&m!==b;){var K=m,J=K.alternate,ge=K.stateNode;if(J!==null&&J===b)break;K.tag===5&&ge!==null&&(K=ge,E?(J=br(m,$),J!=null&&F.unshift(qf(m,J,K))):E||(J=br(m,$),J!=null&&F.push(qf(m,J,K)))),m=m.return}F.length!==0&&u.push({event:d,listeners:F})}var VB=/\r\n?/g,zB=/\u0000|\uFFFD/g;function oE(u){return(typeof u=="string"?u:""+u).replace(VB,`
`).replace(zB,"")}function im(u,d,m){if(d=oE(d),oE(u)!==d&&m)throw Error(n(425))}function lm(){}var D1=null,F1=null;function L1(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var M1=typeof setTimeout=="function"?setTimeout:void 0,GB=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,HB=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(u){return aE.resolve(null).then(u).catch(qB)}:M1;function qB(u){setTimeout(function(){throw u})}function B1(u,d){var m=d,b=0;do{var E=m.nextSibling;if(u.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"){if(b===0){u.removeChild(E),Fi(d);return}b--}else m!=="$"&&m!=="$?"&&m!=="$!"||b++;m=E}while(m);Fi(d)}function Ui(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function iE(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return u;d--}else m==="/$"&&d++}u=u.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),ha="__reactFiber$"+Wc,Kf="__reactProps$"+Wc,Xa="__reactContainer$"+Wc,j1="__reactEvents$"+Wc,KB="__reactListeners$"+Wc,XB="__reactHandles$"+Wc;function iu(u){var d=u[ha];if(d)return d;for(var m=u.parentNode;m;){if(d=m[Xa]||m[ha]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(u=iE(u);u!==null;){if(m=u[ha])return m;u=iE(u)}return d}u=m,m=u.parentNode}return null}function Xf(u){return u=u[ha]||u[Xa],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Vc(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function um(u){return u[Kf]||null}var U1=[],zc=-1;function Wi(u){return{current:u}}function rn(u){0>zc||(u.current=U1[zc],U1[zc]=null,zc--)}function Qt(u,d){zc++,U1[zc]=u.current,u.current=d}var Vi={},Nr=Wi(Vi),as=Wi(!1),lu=Vi;function Gc(u,d){var m=u.type.contextTypes;if(!m)return Vi;var b=u.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var E={},$;for($ in m)E[$]=d[$];return b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function is(u){return u=u.childContextTypes,u!=null}function cm(){rn(as),rn(Nr)}function lE(u,d,m){if(Nr.current!==Vi)throw Error(n(168));Qt(Nr,d),Qt(as,m)}function uE(u,d,m){var b=u.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return m;b=b.getChildContext();for(var E in b)if(!(E in d))throw Error(n(108,ye(u)||"Unknown",E));return pe({},m,b)}function dm(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||Vi,lu=Nr.current,Qt(Nr,u),Qt(as,as.current),!0}function cE(u,d,m){var b=u.stateNode;if(!b)throw Error(n(169));m?(u=uE(u,d,lu),b.__reactInternalMemoizedMergedChildContext=u,rn(as),rn(Nr),Qt(Nr,u)):rn(as),Qt(as,m)}var Ya=null,fm=!1,W1=!1;function dE(u){Ya===null?Ya=[u]:Ya.push(u)}function YB(u){fm=!0,dE(u)}function zi(){if(!W1&&Ya!==null){W1=!0;var u=0,d=Dt;try{var m=Ya;for(Dt=1;u<m.length;u++){var b=m[u];do b=b(!0);while(b!==null)}Ya=null,fm=!1}catch(E){throw Ya!==null&&(Ya=Ya.slice(u+1)),Af(Ec,zi),E}finally{Dt=d,W1=!1}}return null}var Hc=[],qc=0,hm=null,pm=0,so=[],oo=0,uu=null,Qa=1,Za="";function cu(u,d){Hc[qc++]=pm,Hc[qc++]=hm,hm=u,pm=d}function fE(u,d,m){so[oo++]=Qa,so[oo++]=Za,so[oo++]=uu,uu=u;var b=Qa;u=Za;var E=32-ss(b)-1;b&=~(1<<E),m+=1;var $=32-ss(d)+E;if(30<$){var F=E-E%5;$=(b&(1<<F)-1).toString(32),b>>=F,E-=F,Qa=1<<32-ss(d)+E|m<<E|b,Za=$+u}else Qa=1<<$|m<<E|b,Za=u}function V1(u){u.return!==null&&(cu(u,1),fE(u,1,0))}function z1(u){for(;u===hm;)hm=Hc[--qc],Hc[qc]=null,pm=Hc[--qc],Hc[qc]=null;for(;u===uu;)uu=so[--oo],so[oo]=null,Za=so[--oo],so[oo]=null,Qa=so[--oo],so[oo]=null}var Rs=null,Is=null,ln=!1,Oo=null;function hE(u,d){var m=uo(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=u,d=u.deletions,d===null?(u.deletions=[m],u.flags|=16):d.push(m)}function pE(u,d){switch(u.tag){case 5:var m=u.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,Rs=u,Is=Ui(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,Rs=u,Is=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=uu!==null?{id:Qa,overflow:Za}:null,u.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=uo(18,null,null,0),m.stateNode=d,m.return=u,u.child=m,Rs=u,Is=null,!0):!1;default:return!1}}function G1(u){return(u.mode&1)!==0&&(u.flags&128)===0}function H1(u){if(ln){var d=Is;if(d){var m=d;if(!pE(u,d)){if(G1(u))throw Error(n(418));d=Ui(m.nextSibling);var b=Rs;d&&pE(u,d)?hE(b,m):(u.flags=u.flags&-4097|2,ln=!1,Rs=u)}}else{if(G1(u))throw Error(n(418));u.flags=u.flags&-4097|2,ln=!1,Rs=u}}}function mE(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Rs=u}function mm(u){if(u!==Rs)return!1;if(!ln)return mE(u),ln=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!L1(u.type,u.memoizedProps)),d&&(d=Is)){if(G1(u))throw gE(),Error(n(418));for(;d;)hE(u,d),d=Ui(d.nextSibling)}if(mE(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var m=u.data;if(m==="/$"){if(d===0){Is=Ui(u.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}u=u.nextSibling}Is=null}}else Is=Rs?Ui(u.stateNode.nextSibling):null;return!0}function gE(){for(var u=Is;u;)u=Ui(u.nextSibling)}function Kc(){Is=Rs=null,ln=!1}function q1(u){Oo===null?Oo=[u]:Oo.push(u)}var QB=I.ReactCurrentBatchConfig;function Yf(u,d,m){if(u=m.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var b=m.stateNode}if(!b)throw Error(n(147,u));var E=b,$=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(F){var K=E.refs;F===null?delete K[$]:K[$]=F},d._stringRef=$,d)}if(typeof u!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,u))}return u}function gm(u,d){throw u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function yE(u){var d=u._init;return d(u._payload)}function vE(u){function d(ue,se){if(u){var fe=ue.deletions;fe===null?(ue.deletions=[se],ue.flags|=16):fe.push(se)}}function m(ue,se){if(!u)return null;for(;se!==null;)d(ue,se),se=se.sibling;return null}function b(ue,se){for(ue=new Map;se!==null;)se.key!==null?ue.set(se.key,se):ue.set(se.index,se),se=se.sibling;return ue}function E(ue,se){return ue=Zi(ue,se),ue.index=0,ue.sibling=null,ue}function $(ue,se,fe){return ue.index=fe,u?(fe=ue.alternate,fe!==null?(fe=fe.index,fe<se?(ue.flags|=2,se):fe):(ue.flags|=2,se)):(ue.flags|=1048576,se)}function F(ue){return u&&ue.alternate===null&&(ue.flags|=2),ue}function K(ue,se,fe,Re){return se===null||se.tag!==6?(se=Mv(fe,ue.mode,Re),se.return=ue,se):(se=E(se,fe),se.return=ue,se)}function J(ue,se,fe,Re){var Ge=fe.type;return Ge===L?Ne(ue,se,fe.props.children,Re,fe.key):se!==null&&(se.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===le&&yE(Ge)===se.type)?(Re=E(se,fe.props),Re.ref=Yf(ue,se,fe),Re.return=ue,Re):(Re=jm(fe.type,fe.key,fe.props,null,ue.mode,Re),Re.ref=Yf(ue,se,fe),Re.return=ue,Re)}function ge(ue,se,fe,Re){return se===null||se.tag!==4||se.stateNode.containerInfo!==fe.containerInfo||se.stateNode.implementation!==fe.implementation?(se=Bv(fe,ue.mode,Re),se.return=ue,se):(se=E(se,fe.children||[]),se.return=ue,se)}function Ne(ue,se,fe,Re,Ge){return se===null||se.tag!==7?(se=vu(fe,ue.mode,Re,Ge),se.return=ue,se):(se=E(se,fe),se.return=ue,se)}function $e(ue,se,fe){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Mv(""+se,ue.mode,fe),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case A:return fe=jm(se.type,se.key,se.props,null,ue.mode,fe),fe.ref=Yf(ue,null,se),fe.return=ue,fe;case M:return se=Bv(se,ue.mode,fe),se.return=ue,se;case le:var Re=se._init;return $e(ue,Re(se._payload),fe)}if(ks(se)||oe(se))return se=vu(se,ue.mode,fe,null),se.return=ue,se;gm(ue,se)}return null}function Se(ue,se,fe,Re){var Ge=se!==null?se.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number")return Ge!==null?null:K(ue,se,""+fe,Re);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:return fe.key===Ge?J(ue,se,fe,Re):null;case M:return fe.key===Ge?ge(ue,se,fe,Re):null;case le:return Ge=fe._init,Se(ue,se,Ge(fe._payload),Re)}if(ks(fe)||oe(fe))return Ge!==null?null:Ne(ue,se,fe,Re,null);gm(ue,fe)}return null}function Me(ue,se,fe,Re,Ge){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return ue=ue.get(fe)||null,K(se,ue,""+Re,Ge);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case A:return ue=ue.get(Re.key===null?fe:Re.key)||null,J(se,ue,Re,Ge);case M:return ue=ue.get(Re.key===null?fe:Re.key)||null,ge(se,ue,Re,Ge);case le:var rt=Re._init;return Me(ue,se,fe,rt(Re._payload),Ge)}if(ks(Re)||oe(Re))return ue=ue.get(fe)||null,Ne(se,ue,Re,Ge,null);gm(se,Re)}return null}function Ue(ue,se,fe,Re){for(var Ge=null,rt=null,st=se,ct=se=0,Jn=null;st!==null&&ct<fe.length;ct++){st.index>ct?(Jn=st,st=null):Jn=st.sibling;var Ft=Se(ue,st,fe[ct],Re);if(Ft===null){st===null&&(st=Jn);break}u&&st&&Ft.alternate===null&&d(ue,st),se=$(Ft,se,ct),rt===null?Ge=Ft:rt.sibling=Ft,rt=Ft,st=Jn}if(ct===fe.length)return m(ue,st),ln&&cu(ue,ct),Ge;if(st===null){for(;ct<fe.length;ct++)st=$e(ue,fe[ct],Re),st!==null&&(se=$(st,se,ct),rt===null?Ge=st:rt.sibling=st,rt=st);return ln&&cu(ue,ct),Ge}for(st=b(ue,st);ct<fe.length;ct++)Jn=Me(st,ue,ct,fe[ct],Re),Jn!==null&&(u&&Jn.alternate!==null&&st.delete(Jn.key===null?ct:Jn.key),se=$(Jn,se,ct),rt===null?Ge=Jn:rt.sibling=Jn,rt=Jn);return u&&st.forEach(function(Ji){return d(ue,Ji)}),ln&&cu(ue,ct),Ge}function Ve(ue,se,fe,Re){var Ge=oe(fe);if(typeof Ge!="function")throw Error(n(150));if(fe=Ge.call(fe),fe==null)throw Error(n(151));for(var rt=Ge=null,st=se,ct=se=0,Jn=null,Ft=fe.next();st!==null&&!Ft.done;ct++,Ft=fe.next()){st.index>ct?(Jn=st,st=null):Jn=st.sibling;var Ji=Se(ue,st,Ft.value,Re);if(Ji===null){st===null&&(st=Jn);break}u&&st&&Ji.alternate===null&&d(ue,st),se=$(Ji,se,ct),rt===null?Ge=Ji:rt.sibling=Ji,rt=Ji,st=Jn}if(Ft.done)return m(ue,st),ln&&cu(ue,ct),Ge;if(st===null){for(;!Ft.done;ct++,Ft=fe.next())Ft=$e(ue,Ft.value,Re),Ft!==null&&(se=$(Ft,se,ct),rt===null?Ge=Ft:rt.sibling=Ft,rt=Ft);return ln&&cu(ue,ct),Ge}for(st=b(ue,st);!Ft.done;ct++,Ft=fe.next())Ft=Me(st,ue,ct,Ft.value,Re),Ft!==null&&(u&&Ft.alternate!==null&&st.delete(Ft.key===null?ct:Ft.key),se=$(Ft,se,ct),rt===null?Ge=Ft:rt.sibling=Ft,rt=Ft);return u&&st.forEach(function(Rj){return d(ue,Rj)}),ln&&cu(ue,ct),Ge}function kn(ue,se,fe,Re){if(typeof fe=="object"&&fe!==null&&fe.type===L&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case A:e:{for(var Ge=fe.key,rt=se;rt!==null;){if(rt.key===Ge){if(Ge=fe.type,Ge===L){if(rt.tag===7){m(ue,rt.sibling),se=E(rt,fe.props.children),se.return=ue,ue=se;break e}}else if(rt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===le&&yE(Ge)===rt.type){m(ue,rt.sibling),se=E(rt,fe.props),se.ref=Yf(ue,rt,fe),se.return=ue,ue=se;break e}m(ue,rt);break}else d(ue,rt);rt=rt.sibling}fe.type===L?(se=vu(fe.props.children,ue.mode,Re,fe.key),se.return=ue,ue=se):(Re=jm(fe.type,fe.key,fe.props,null,ue.mode,Re),Re.ref=Yf(ue,se,fe),Re.return=ue,ue=Re)}return F(ue);case M:e:{for(rt=fe.key;se!==null;){if(se.key===rt)if(se.tag===4&&se.stateNode.containerInfo===fe.containerInfo&&se.stateNode.implementation===fe.implementation){m(ue,se.sibling),se=E(se,fe.children||[]),se.return=ue,ue=se;break e}else{m(ue,se);break}else d(ue,se);se=se.sibling}se=Bv(fe,ue.mode,Re),se.return=ue,ue=se}return F(ue);case le:return rt=fe._init,kn(ue,se,rt(fe._payload),Re)}if(ks(fe))return Ue(ue,se,fe,Re);if(oe(fe))return Ve(ue,se,fe,Re);gm(ue,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"?(fe=""+fe,se!==null&&se.tag===6?(m(ue,se.sibling),se=E(se,fe),se.return=ue,ue=se):(m(ue,se),se=Mv(fe,ue.mode,Re),se.return=ue,ue=se),F(ue)):m(ue,se)}return kn}var Xc=vE(!0),xE=vE(!1),ym=Wi(null),vm=null,Yc=null,K1=null;function X1(){K1=Yc=vm=null}function Y1(u){var d=ym.current;rn(ym),u._currentValue=d}function Q1(u,d,m){for(;u!==null;){var b=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),u===m)break;u=u.return}}function Qc(u,d){vm=u,K1=Yc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(ls=!0),u.firstContext=null)}function ao(u){var d=u._currentValue;if(K1!==u)if(u={context:u,memoizedValue:d,next:null},Yc===null){if(vm===null)throw Error(n(308));Yc=u,vm.dependencies={lanes:0,firstContext:u}}else Yc=Yc.next=u;return d}var du=null;function Z1(u){du===null?du=[u]:du.push(u)}function wE(u,d,m,b){var E=d.interleaved;return E===null?(m.next=m,Z1(d)):(m.next=E.next,E.next=m),d.interleaved=m,Ja(u,b)}function Ja(u,d){u.lanes|=d;var m=u.alternate;for(m!==null&&(m.lanes|=d),m=u,u=u.return;u!==null;)u.childLanes|=d,m=u.alternate,m!==null&&(m.childLanes|=d),m=u,u=u.return;return m.tag===3?m.stateNode:null}var Gi=!1;function J1(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bE(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ei(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Hi(u,d,m){var b=u.updateQueue;if(b===null)return null;if(b=b.shared,(At&2)!==0){var E=b.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),b.pending=d,Ja(u,m)}return E=b.interleaved,E===null?(d.next=d,Z1(b)):(d.next=E.next,E.next=d),b.interleaved=d,Ja(u,m)}function xm(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var b=d.lanes;b&=u.pendingLanes,m|=b,d.lanes=m,Ff(u,m)}}function SE(u,d){var m=u.updateQueue,b=u.alternate;if(b!==null&&(b=b.updateQueue,m===b)){var E=null,$=null;if(m=m.firstBaseUpdate,m!==null){do{var F={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};$===null?E=$=F:$=$.next=F,m=m.next}while(m!==null);$===null?E=$=d:$=$.next=d}else E=$=d;m={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:$,shared:b.shared,effects:b.effects},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}function wm(u,d,m,b){var E=u.updateQueue;Gi=!1;var $=E.firstBaseUpdate,F=E.lastBaseUpdate,K=E.shared.pending;if(K!==null){E.shared.pending=null;var J=K,ge=J.next;J.next=null,F===null?$=ge:F.next=ge,F=J;var Ne=u.alternate;Ne!==null&&(Ne=Ne.updateQueue,K=Ne.lastBaseUpdate,K!==F&&(K===null?Ne.firstBaseUpdate=ge:K.next=ge,Ne.lastBaseUpdate=J))}if($!==null){var $e=E.baseState;F=0,Ne=ge=J=null,K=$;do{var Se=K.lane,Me=K.eventTime;if((b&Se)===Se){Ne!==null&&(Ne=Ne.next={eventTime:Me,lane:0,tag:K.tag,payload:K.payload,callback:K.callback,next:null});e:{var Ue=u,Ve=K;switch(Se=d,Me=m,Ve.tag){case 1:if(Ue=Ve.payload,typeof Ue=="function"){$e=Ue.call(Me,$e,Se);break e}$e=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Ve.payload,Se=typeof Ue=="function"?Ue.call(Me,$e,Se):Ue,Se==null)break e;$e=pe({},$e,Se);break e;case 2:Gi=!0}}K.callback!==null&&K.lane!==0&&(u.flags|=64,Se=E.effects,Se===null?E.effects=[K]:Se.push(K))}else Me={eventTime:Me,lane:Se,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Ne===null?(ge=Ne=Me,J=$e):Ne=Ne.next=Me,F|=Se;if(K=K.next,K===null){if(K=E.shared.pending,K===null)break;Se=K,K=Se.next,Se.next=null,E.lastBaseUpdate=Se,E.shared.pending=null}}while(!0);if(Ne===null&&(J=$e),E.baseState=J,E.firstBaseUpdate=ge,E.lastBaseUpdate=Ne,d=E.shared.interleaved,d!==null){E=d;do F|=E.lane,E=E.next;while(E!==d)}else $===null&&(E.shared.lanes=0);pu|=F,u.lanes=F,u.memoizedState=$e}}function CE(u,d,m){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var b=u[d],E=b.callback;if(E!==null){if(b.callback=null,b=m,typeof E!="function")throw Error(n(191,E));E.call(b)}}}var Qf={},pa=Wi(Qf),Zf=Wi(Qf),Jf=Wi(Qf);function fu(u){if(u===Qf)throw Error(n(174));return u}function ev(u,d){switch(Qt(Jf,d),Qt(Zf,u),Qt(pa,Qf),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:wr(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=wr(d,u)}rn(pa),Qt(pa,d)}function Zc(){rn(pa),rn(Zf),rn(Jf)}function EE(u){fu(Jf.current);var d=fu(pa.current),m=wr(d,u.type);d!==m&&(Qt(Zf,u),Qt(pa,m))}function tv(u){Zf.current===u&&(rn(pa),rn(Zf))}var yn=Wi(0);function bm(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var nv=[];function rv(){for(var u=0;u<nv.length;u++)nv[u]._workInProgressVersionPrimary=null;nv.length=0}var Sm=I.ReactCurrentDispatcher,sv=I.ReactCurrentBatchConfig,hu=0,vn=null,zn=null,Qn=null,Cm=!1,eh=!1,th=0,ZB=0;function Tr(){throw Error(n(321))}function ov(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!Io(u[m],d[m]))return!1;return!0}function av(u,d,m,b,E,$){if(hu=$,vn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Sm.current=u===null||u.memoizedState===null?nj:rj,u=m(b,E),eh){$=0;do{if(eh=!1,th=0,25<=$)throw Error(n(301));$+=1,Qn=zn=null,d.updateQueue=null,Sm.current=sj,u=m(b,E)}while(eh)}if(Sm.current=Tm,d=zn!==null&&zn.next!==null,hu=0,Qn=zn=vn=null,Cm=!1,d)throw Error(n(300));return u}function iv(){var u=th!==0;return th=0,u}function ma(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?vn.memoizedState=Qn=u:Qn=Qn.next=u,Qn}function io(){if(zn===null){var u=vn.alternate;u=u!==null?u.memoizedState:null}else u=zn.next;var d=Qn===null?vn.memoizedState:Qn.next;if(d!==null)Qn=d,zn=u;else{if(u===null)throw Error(n(310));zn=u,u={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Qn===null?vn.memoizedState=Qn=u:Qn=Qn.next=u}return Qn}function nh(u,d){return typeof d=="function"?d(u):d}function lv(u){var d=io(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var b=zn,E=b.baseQueue,$=m.pending;if($!==null){if(E!==null){var F=E.next;E.next=$.next,$.next=F}b.baseQueue=E=$,m.pending=null}if(E!==null){$=E.next,b=b.baseState;var K=F=null,J=null,ge=$;do{var Ne=ge.lane;if((hu&Ne)===Ne)J!==null&&(J=J.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),b=ge.hasEagerState?ge.eagerState:u(b,ge.action);else{var $e={lane:Ne,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};J===null?(K=J=$e,F=b):J=J.next=$e,vn.lanes|=Ne,pu|=Ne}ge=ge.next}while(ge!==null&&ge!==$);J===null?F=b:J.next=K,Io(b,d.memoizedState)||(ls=!0),d.memoizedState=b,d.baseState=F,d.baseQueue=J,m.lastRenderedState=b}if(u=m.interleaved,u!==null){E=u;do $=E.lane,vn.lanes|=$,pu|=$,E=E.next;while(E!==u)}else E===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function uv(u){var d=io(),m=d.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=u;var b=m.dispatch,E=m.pending,$=d.memoizedState;if(E!==null){m.pending=null;var F=E=E.next;do $=u($,F.action),F=F.next;while(F!==E);Io($,d.memoizedState)||(ls=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),m.lastRenderedState=$}return[$,b]}function NE(){}function TE(u,d){var m=vn,b=io(),E=d(),$=!Io(b.memoizedState,E);if($&&(b.memoizedState=E,ls=!0),b=b.queue,cv(_E.bind(null,m,b,u),[u]),b.getSnapshot!==d||$||Qn!==null&&Qn.memoizedState.tag&1){if(m.flags|=2048,rh(9,$E.bind(null,m,b,E,d),void 0,null),Zn===null)throw Error(n(349));(hu&30)!==0||kE(m,d,E)}return E}function kE(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=vn.updateQueue,d===null?(d={lastEffect:null,stores:null},vn.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function $E(u,d,m,b){d.value=m,d.getSnapshot=b,RE(d)&&IE(u)}function _E(u,d,m){return m(function(){RE(d)&&IE(u)})}function RE(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!Io(u,m)}catch{return!0}}function IE(u){var d=Ja(u,1);d!==null&&Fo(d,u,1,-1)}function OE(u){var d=ma();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:u},d.queue=u,u=u.dispatch=tj.bind(null,vn,u),[d.memoizedState,u]}function rh(u,d,m,b){return u={tag:u,create:d,destroy:m,deps:b,next:null},d=vn.updateQueue,d===null?(d={lastEffect:null,stores:null},vn.updateQueue=d,d.lastEffect=u.next=u):(m=d.lastEffect,m===null?d.lastEffect=u.next=u:(b=m.next,m.next=u,u.next=b,d.lastEffect=u)),u}function AE(){return io().memoizedState}function Em(u,d,m,b){var E=ma();vn.flags|=u,E.memoizedState=rh(1|d,m,void 0,b===void 0?null:b)}function Nm(u,d,m,b){var E=io();b=b===void 0?null:b;var $=void 0;if(zn!==null){var F=zn.memoizedState;if($=F.destroy,b!==null&&ov(b,F.deps)){E.memoizedState=rh(d,m,$,b);return}}vn.flags|=u,E.memoizedState=rh(1|d,m,$,b)}function PE(u,d){return Em(8390656,8,u,d)}function cv(u,d){return Nm(2048,8,u,d)}function DE(u,d){return Nm(4,2,u,d)}function FE(u,d){return Nm(4,4,u,d)}function LE(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function ME(u,d,m){return m=m!=null?m.concat([u]):null,Nm(4,4,LE.bind(null,d,u),m)}function dv(){}function BE(u,d){var m=io();d=d===void 0?null:d;var b=m.memoizedState;return b!==null&&d!==null&&ov(d,b[1])?b[0]:(m.memoizedState=[u,d],u)}function jE(u,d){var m=io();d=d===void 0?null:d;var b=m.memoizedState;return b!==null&&d!==null&&ov(d,b[1])?b[0]:(u=u(),m.memoizedState=[u,d],u)}function UE(u,d,m){return(hu&21)===0?(u.baseState&&(u.baseState=!1,ls=!0),u.memoizedState=m):(Io(m,d)||(m=Ql(),vn.lanes|=m,pu|=m,u.baseState=!0),d)}function JB(u,d){var m=Dt;Dt=m!==0&&4>m?m:4,u(!0);var b=sv.transition;sv.transition={};try{u(!1),d()}finally{Dt=m,sv.transition=b}}function WE(){return io().memoizedState}function ej(u,d,m){var b=Yi(u);if(m={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null},VE(u))zE(d,m);else if(m=wE(u,d,m,b),m!==null){var E=qr();Fo(m,u,b,E),GE(m,d,b)}}function tj(u,d,m){var b=Yi(u),E={lane:b,action:m,hasEagerState:!1,eagerState:null,next:null};if(VE(u))zE(d,E);else{var $=u.alternate;if(u.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var F=d.lastRenderedState,K=$(F,m);if(E.hasEagerState=!0,E.eagerState=K,Io(K,F)){var J=d.interleaved;J===null?(E.next=E,Z1(d)):(E.next=J.next,J.next=E),d.interleaved=E;return}}catch{}finally{}m=wE(u,d,E,b),m!==null&&(E=qr(),Fo(m,u,b,E),GE(m,d,b))}}function VE(u){var d=u.alternate;return u===vn||d!==null&&d===vn}function zE(u,d){eh=Cm=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function GE(u,d,m){if((m&4194240)!==0){var b=d.lanes;b&=u.pendingLanes,m|=b,d.lanes=m,Ff(u,m)}}var Tm={readContext:ao,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},nj={readContext:ao,useCallback:function(u,d){return ma().memoizedState=[u,d===void 0?null:d],u},useContext:ao,useEffect:PE,useImperativeHandle:function(u,d,m){return m=m!=null?m.concat([u]):null,Em(4194308,4,LE.bind(null,d,u),m)},useLayoutEffect:function(u,d){return Em(4194308,4,u,d)},useInsertionEffect:function(u,d){return Em(4,2,u,d)},useMemo:function(u,d){var m=ma();return d=d===void 0?null:d,u=u(),m.memoizedState=[u,d],u},useReducer:function(u,d,m){var b=ma();return d=m!==void 0?m(d):d,b.memoizedState=b.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},b.queue=u,u=u.dispatch=ej.bind(null,vn,u),[b.memoizedState,u]},useRef:function(u){var d=ma();return u={current:u},d.memoizedState=u},useState:OE,useDebugValue:dv,useDeferredValue:function(u){return ma().memoizedState=u},useTransition:function(){var u=OE(!1),d=u[0];return u=JB.bind(null,u[1]),ma().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,m){var b=vn,E=ma();if(ln){if(m===void 0)throw Error(n(407));m=m()}else{if(m=d(),Zn===null)throw Error(n(349));(hu&30)!==0||kE(b,d,m)}E.memoizedState=m;var $={value:m,getSnapshot:d};return E.queue=$,PE(_E.bind(null,b,$,u),[u]),b.flags|=2048,rh(9,$E.bind(null,b,$,m,d),void 0,null),m},useId:function(){var u=ma(),d=Zn.identifierPrefix;if(ln){var m=Za,b=Qa;m=(b&~(1<<32-ss(b)-1)).toString(32)+m,d=":"+d+"R"+m,m=th++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=ZB++,d=":"+d+"r"+m.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},rj={readContext:ao,useCallback:BE,useContext:ao,useEffect:cv,useImperativeHandle:ME,useInsertionEffect:DE,useLayoutEffect:FE,useMemo:jE,useReducer:lv,useRef:AE,useState:function(){return lv(nh)},useDebugValue:dv,useDeferredValue:function(u){var d=io();return UE(d,zn.memoizedState,u)},useTransition:function(){var u=lv(nh)[0],d=io().memoizedState;return[u,d]},useMutableSource:NE,useSyncExternalStore:TE,useId:WE,unstable_isNewReconciler:!1},sj={readContext:ao,useCallback:BE,useContext:ao,useEffect:cv,useImperativeHandle:ME,useInsertionEffect:DE,useLayoutEffect:FE,useMemo:jE,useReducer:uv,useRef:AE,useState:function(){return uv(nh)},useDebugValue:dv,useDeferredValue:function(u){var d=io();return zn===null?d.memoizedState=u:UE(d,zn.memoizedState,u)},useTransition:function(){var u=uv(nh)[0],d=io().memoizedState;return[u,d]},useMutableSource:NE,useSyncExternalStore:TE,useId:WE,unstable_isNewReconciler:!1};function Ao(u,d){if(u&&u.defaultProps){d=pe({},d),u=u.defaultProps;for(var m in u)d[m]===void 0&&(d[m]=u[m]);return d}return d}function fv(u,d,m,b){d=u.memoizedState,m=m(b,d),m=m==null?d:pe({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var km={isMounted:function(u){return(u=u._reactInternals)?_o(u)===u:!1},enqueueSetState:function(u,d,m){u=u._reactInternals;var b=qr(),E=Yi(u),$=ei(b,E);$.payload=d,m!=null&&($.callback=m),d=Hi(u,$,E),d!==null&&(Fo(d,u,E,b),xm(d,u,E))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var b=qr(),E=Yi(u),$=ei(b,E);$.tag=1,$.payload=d,m!=null&&($.callback=m),d=Hi(u,$,E),d!==null&&(Fo(d,u,E,b),xm(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=qr(),b=Yi(u),E=ei(m,b);E.tag=2,d!=null&&(E.callback=d),d=Hi(u,E,b),d!==null&&(Fo(d,u,b,m),xm(d,u,b))}};function HE(u,d,m,b,E,$,F){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(b,$,F):d.prototype&&d.prototype.isPureReactComponent?!Vf(m,b)||!Vf(E,$):!0}function qE(u,d,m){var b=!1,E=Vi,$=d.contextType;return typeof $=="object"&&$!==null?$=ao($):(E=is(d)?lu:Nr.current,b=d.contextTypes,$=(b=b!=null)?Gc(u,E):Vi),d=new d(m,$),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=km,u.stateNode=d,d._reactInternals=u,b&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=$),d}function KE(u,d,m,b){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,b),d.state!==u&&km.enqueueReplaceState(d,d.state,null)}function hv(u,d,m,b){var E=u.stateNode;E.props=m,E.state=u.memoizedState,E.refs={},J1(u);var $=d.contextType;typeof $=="object"&&$!==null?E.context=ao($):($=is(d)?lu:Nr.current,E.context=Gc(u,$)),E.state=u.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(fv(u,d,$,m),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&km.enqueueReplaceState(E,E.state,null),wm(u,m,E,b),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}function Jc(u,d){try{var m="",b=d;do m+=xe(b),b=b.return;while(b);var E=m}catch($){E=`
Error generating stack: `+$.message+`
`+$.stack}return{value:u,source:d,stack:E,digest:null}}function pv(u,d,m){return{value:u,source:null,stack:m??null,digest:d??null}}function mv(u,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var oj=typeof WeakMap=="function"?WeakMap:Map;function XE(u,d,m){m=ei(-1,m),m.tag=3,m.payload={element:null};var b=d.value;return m.callback=function(){Pm||(Pm=!0,Rv=b),mv(u,d)},m}function YE(u,d,m){m=ei(-1,m),m.tag=3;var b=u.type.getDerivedStateFromError;if(typeof b=="function"){var E=d.value;m.payload=function(){return b(E)},m.callback=function(){mv(u,d)}}var $=u.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(m.callback=function(){mv(u,d),typeof b!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var F=d.stack;this.componentDidCatch(d.value,{componentStack:F!==null?F:""})}),m}function QE(u,d,m){var b=u.pingCache;if(b===null){b=u.pingCache=new oj;var E=new Set;b.set(d,E)}else E=b.get(d),E===void 0&&(E=new Set,b.set(d,E));E.has(m)||(E.add(m),u=xj.bind(null,u,d,m),d.then(u,u))}function ZE(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function JE(u,d,m,b,E){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=ei(-1,1),d.tag=2,Hi(m,d,1))),m.lanes|=1),u):(u.flags|=65536,u.lanes=E,u)}var aj=I.ReactCurrentOwner,ls=!1;function Hr(u,d,m,b){d.child=u===null?xE(d,null,m,b):Xc(d,u.child,m,b)}function eN(u,d,m,b,E){m=m.render;var $=d.ref;return Qc(d,E),b=av(u,d,m,b,$,E),m=iv(),u!==null&&!ls?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,ti(u,d,E)):(ln&&m&&V1(d),d.flags|=1,Hr(u,d,b,E),d.child)}function tN(u,d,m,b,E){if(u===null){var $=m.type;return typeof $=="function"&&!Lv($)&&$.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=$,nN(u,d,$,b,E)):(u=jm(m.type,null,b,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if($=u.child,(u.lanes&E)===0){var F=$.memoizedProps;if(m=m.compare,m=m!==null?m:Vf,m(F,b)&&u.ref===d.ref)return ti(u,d,E)}return d.flags|=1,u=Zi($,b),u.ref=d.ref,u.return=d,d.child=u}function nN(u,d,m,b,E){if(u!==null){var $=u.memoizedProps;if(Vf($,b)&&u.ref===d.ref)if(ls=!1,d.pendingProps=b=$,(u.lanes&E)!==0)(u.flags&131072)!==0&&(ls=!0);else return d.lanes=u.lanes,ti(u,d,E)}return gv(u,d,m,b,E)}function rN(u,d,m){var b=d.pendingProps,E=b.children,$=u!==null?u.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(td,Os),Os|=m;else{if((m&1073741824)===0)return u=$!==null?$.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,Qt(td,Os),Os|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=$!==null?$.baseLanes:m,Qt(td,Os),Os|=b}else $!==null?(b=$.baseLanes|m,d.memoizedState=null):b=m,Qt(td,Os),Os|=b;return Hr(u,d,E,m),d.child}function sN(u,d){var m=d.ref;(u===null&&m!==null||u!==null&&u.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function gv(u,d,m,b,E){var $=is(m)?lu:Nr.current;return $=Gc(d,$),Qc(d,E),m=av(u,d,m,b,$,E),b=iv(),u!==null&&!ls?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,ti(u,d,E)):(ln&&b&&V1(d),d.flags|=1,Hr(u,d,m,E),d.child)}function oN(u,d,m,b,E){if(is(m)){var $=!0;dm(d)}else $=!1;if(Qc(d,E),d.stateNode===null)_m(u,d),qE(d,m,b),hv(d,m,b,E),b=!0;else if(u===null){var F=d.stateNode,K=d.memoizedProps;F.props=K;var J=F.context,ge=m.contextType;typeof ge=="object"&&ge!==null?ge=ao(ge):(ge=is(m)?lu:Nr.current,ge=Gc(d,ge));var Ne=m.getDerivedStateFromProps,$e=typeof Ne=="function"||typeof F.getSnapshotBeforeUpdate=="function";$e||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(K!==b||J!==ge)&&KE(d,F,b,ge),Gi=!1;var Se=d.memoizedState;F.state=Se,wm(d,b,F,E),J=d.memoizedState,K!==b||Se!==J||as.current||Gi?(typeof Ne=="function"&&(fv(d,m,Ne,b),J=d.memoizedState),(K=Gi||HE(d,m,K,b,Se,J,ge))?($e||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(d.flags|=4194308)):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=J),F.props=b,F.state=J,F.context=ge,b=K):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{F=d.stateNode,bE(u,d),K=d.memoizedProps,ge=d.type===d.elementType?K:Ao(d.type,K),F.props=ge,$e=d.pendingProps,Se=F.context,J=m.contextType,typeof J=="object"&&J!==null?J=ao(J):(J=is(m)?lu:Nr.current,J=Gc(d,J));var Me=m.getDerivedStateFromProps;(Ne=typeof Me=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(K!==$e||Se!==J)&&KE(d,F,b,J),Gi=!1,Se=d.memoizedState,F.state=Se,wm(d,b,F,E);var Ue=d.memoizedState;K!==$e||Se!==Ue||as.current||Gi?(typeof Me=="function"&&(fv(d,m,Me,b),Ue=d.memoizedState),(ge=Gi||HE(d,m,ge,b,Se,Ue,J)||!1)?(Ne||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(b,Ue,J),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(b,Ue,J)),typeof F.componentDidUpdate=="function"&&(d.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof F.componentDidUpdate!="function"||K===u.memoizedProps&&Se===u.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||K===u.memoizedProps&&Se===u.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=Ue),F.props=b,F.state=Ue,F.context=J,b=ge):(typeof F.componentDidUpdate!="function"||K===u.memoizedProps&&Se===u.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||K===u.memoizedProps&&Se===u.memoizedState||(d.flags|=1024),b=!1)}return yv(u,d,m,b,$,E)}function yv(u,d,m,b,E,$){sN(u,d);var F=(d.flags&128)!==0;if(!b&&!F)return E&&cE(d,m,!1),ti(u,d,$);b=d.stateNode,aj.current=d;var K=F&&typeof m.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,u!==null&&F?(d.child=Xc(d,u.child,null,$),d.child=Xc(d,null,K,$)):Hr(u,d,K,$),d.memoizedState=b.state,E&&cE(d,m,!0),d.child}function aN(u){var d=u.stateNode;d.pendingContext?lE(u,d.pendingContext,d.pendingContext!==d.context):d.context&&lE(u,d.context,!1),ev(u,d.containerInfo)}function iN(u,d,m,b,E){return Kc(),q1(E),d.flags|=256,Hr(u,d,m,b),d.child}var vv={dehydrated:null,treeContext:null,retryLane:0};function xv(u){return{baseLanes:u,cachePool:null,transitions:null}}function lN(u,d,m){var b=d.pendingProps,E=yn.current,$=!1,F=(d.flags&128)!==0,K;if((K=F)||(K=u!==null&&u.memoizedState===null?!1:(E&2)!==0),K?($=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Qt(yn,E&1),u===null)return H1(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(F=b.children,u=b.fallback,$?(b=d.mode,$=d.child,F={mode:"hidden",children:F},(b&1)===0&&$!==null?($.childLanes=0,$.pendingProps=F):$=Um(F,b,0,null),u=vu(u,b,m,null),$.return=d,u.return=d,$.sibling=u,d.child=$,d.child.memoizedState=xv(m),d.memoizedState=vv,u):wv(d,F));if(E=u.memoizedState,E!==null&&(K=E.dehydrated,K!==null))return ij(u,d,F,b,K,E,m);if($){$=b.fallback,F=d.mode,E=u.child,K=E.sibling;var J={mode:"hidden",children:b.children};return(F&1)===0&&d.child!==E?(b=d.child,b.childLanes=0,b.pendingProps=J,d.deletions=null):(b=Zi(E,J),b.subtreeFlags=E.subtreeFlags&14680064),K!==null?$=Zi(K,$):($=vu($,F,m,null),$.flags|=2),$.return=d,b.return=d,b.sibling=$,d.child=b,b=$,$=d.child,F=u.child.memoizedState,F=F===null?xv(m):{baseLanes:F.baseLanes|m,cachePool:null,transitions:F.transitions},$.memoizedState=F,$.childLanes=u.childLanes&~m,d.memoizedState=vv,b}return $=u.child,u=$.sibling,b=Zi($,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=m),b.return=d,b.sibling=null,u!==null&&(m=d.deletions,m===null?(d.deletions=[u],d.flags|=16):m.push(u)),d.child=b,d.memoizedState=null,b}function wv(u,d){return d=Um({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function $m(u,d,m,b){return b!==null&&q1(b),Xc(d,u.child,null,m),u=wv(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function ij(u,d,m,b,E,$,F){if(m)return d.flags&256?(d.flags&=-257,b=pv(Error(n(422))),$m(u,d,F,b)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):($=b.fallback,E=d.mode,b=Um({mode:"visible",children:b.children},E,0,null),$=vu($,E,F,null),$.flags|=2,b.return=d,$.return=d,b.sibling=$,d.child=b,(d.mode&1)!==0&&Xc(d,u.child,null,F),d.child.memoizedState=xv(F),d.memoizedState=vv,$);if((d.mode&1)===0)return $m(u,d,F,null);if(E.data==="$!"){if(b=E.nextSibling&&E.nextSibling.dataset,b)var K=b.dgst;return b=K,$=Error(n(419)),b=pv($,b,void 0),$m(u,d,F,b)}if(K=(F&u.childLanes)!==0,ls||K){if(b=Zn,b!==null){switch(F&-F){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(b.suspendedLanes|F))!==0?0:E,E!==0&&E!==$.retryLane&&($.retryLane=E,Ja(u,E),Fo(b,u,E,-1))}return Fv(),b=pv(Error(n(421))),$m(u,d,F,b)}return E.data==="$?"?(d.flags|=128,d.child=u.child,d=wj.bind(null,u),E._reactRetry=d,null):(u=$.treeContext,Is=Ui(E.nextSibling),Rs=d,ln=!0,Oo=null,u!==null&&(so[oo++]=Qa,so[oo++]=Za,so[oo++]=uu,Qa=u.id,Za=u.overflow,uu=d),d=wv(d,b.children),d.flags|=4096,d)}function uN(u,d,m){u.lanes|=d;var b=u.alternate;b!==null&&(b.lanes|=d),Q1(u.return,d,m)}function bv(u,d,m,b,E){var $=u.memoizedState;$===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:m,tailMode:E}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=b,$.tail=m,$.tailMode=E)}function cN(u,d,m){var b=d.pendingProps,E=b.revealOrder,$=b.tail;if(Hr(u,d,b.children,m),b=yn.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&uN(u,m,d);else if(u.tag===19)uN(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}b&=1}if(Qt(yn,b),(d.mode&1)===0)d.memoizedState=null;else switch(E){case"forwards":for(m=d.child,E=null;m!==null;)u=m.alternate,u!==null&&bm(u)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),bv(d,!1,E,m,$);break;case"backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&bm(u)===null){d.child=E;break}u=E.sibling,E.sibling=m,m=E,E=u}bv(d,!0,m,null,$);break;case"together":bv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function _m(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function ti(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),pu|=d.lanes,(m&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,m=Zi(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=Zi(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function lj(u,d,m){switch(d.tag){case 3:aN(d),Kc();break;case 5:EE(d);break;case 1:is(d.type)&&dm(d);break;case 4:ev(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,E=d.memoizedProps.value;Qt(ym,b._currentValue),b._currentValue=E;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(Qt(yn,yn.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?lN(u,d,m):(Qt(yn,yn.current&1),u=ti(u,d,m),u!==null?u.sibling:null);Qt(yn,yn.current&1);break;case 19:if(b=(m&d.childLanes)!==0,(u.flags&128)!==0){if(b)return cN(u,d,m);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Qt(yn,yn.current),b)break;return null;case 22:case 23:return d.lanes=0,rN(u,d,m)}return ti(u,d,m)}var dN,Sv,fN,hN;dN=function(u,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Sv=function(){},fN=function(u,d,m,b){var E=u.memoizedProps;if(E!==b){u=d.stateNode,fu(pa.current);var $=null;switch(m){case"input":E=Rt(u,E),b=Rt(u,b),$=[];break;case"select":E=pe({},E,{value:void 0}),b=pe({},b,{value:void 0}),$=[];break;case"textarea":E=$s(u,E),b=$s(u,b),$=[];break;default:typeof E.onClick!="function"&&typeof b.onClick=="function"&&(u.onclick=lm)}Ur(m,b);var F;m=null;for(ge in E)if(!b.hasOwnProperty(ge)&&E.hasOwnProperty(ge)&&E[ge]!=null)if(ge==="style"){var K=E[ge];for(F in K)K.hasOwnProperty(F)&&(m||(m={}),m[F]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(s.hasOwnProperty(ge)?$||($=[]):($=$||[]).push(ge,null));for(ge in b){var J=b[ge];if(K=E?.[ge],b.hasOwnProperty(ge)&&J!==K&&(J!=null||K!=null))if(ge==="style")if(K){for(F in K)!K.hasOwnProperty(F)||J&&J.hasOwnProperty(F)||(m||(m={}),m[F]="");for(F in J)J.hasOwnProperty(F)&&K[F]!==J[F]&&(m||(m={}),m[F]=J[F])}else m||($||($=[]),$.push(ge,m)),m=J;else ge==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,K=K?K.__html:void 0,J!=null&&K!==J&&($=$||[]).push(ge,J)):ge==="children"?typeof J!="string"&&typeof J!="number"||($=$||[]).push(ge,""+J):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(s.hasOwnProperty(ge)?(J!=null&&ge==="onScroll"&&nn("scroll",u),$||K===J||($=[])):($=$||[]).push(ge,J))}m&&($=$||[]).push("style",m);var ge=$;(d.updateQueue=ge)&&(d.flags|=4)}},hN=function(u,d,m,b){m!==b&&(d.flags|=4)};function sh(u,d){if(!ln)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:b.sibling=null}}function kr(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,b=0;if(d)for(var E=u.child;E!==null;)m|=E.lanes|E.childLanes,b|=E.subtreeFlags&14680064,b|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)m|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=b,u.childLanes=m,d}function uj(u,d,m){var b=d.pendingProps;switch(z1(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(d),null;case 1:return is(d.type)&&cm(),kr(d),null;case 3:return b=d.stateNode,Zc(),rn(as),rn(Nr),rv(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(u===null||u.child===null)&&(mm(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Oo!==null&&(Av(Oo),Oo=null))),Sv(u,d),kr(d),null;case 5:tv(d);var E=fu(Jf.current);if(m=d.type,u!==null&&d.stateNode!=null)fN(u,d,m,b,E),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(n(166));return kr(d),null}if(u=fu(pa.current),mm(d)){b=d.stateNode,m=d.type;var $=d.memoizedProps;switch(b[ha]=d,b[Kf]=$,u=(d.mode&1)!==0,m){case"dialog":nn("cancel",b),nn("close",b);break;case"iframe":case"object":case"embed":nn("load",b);break;case"video":case"audio":for(E=0;E<Gf.length;E++)nn(Gf[E],b);break;case"source":nn("error",b);break;case"img":case"image":case"link":nn("error",b),nn("load",b);break;case"details":nn("toggle",b);break;case"input":Mr(b,$),nn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!$.multiple},nn("invalid",b);break;case"textarea":cr(b,$),nn("invalid",b)}Ur(m,$),E=null;for(var F in $)if($.hasOwnProperty(F)){var K=$[F];F==="children"?typeof K=="string"?b.textContent!==K&&($.suppressHydrationWarning!==!0&&im(b.textContent,K,u),E=["children",K]):typeof K=="number"&&b.textContent!==""+K&&($.suppressHydrationWarning!==!0&&im(b.textContent,K,u),E=["children",""+K]):s.hasOwnProperty(F)&&K!=null&&F==="onScroll"&&nn("scroll",b)}switch(m){case"input":Ze(b),eo(b,$,!0);break;case"textarea":Ze(b),Ua(b);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(b.onclick=lm)}b=E,d.updateQueue=b,b!==null&&(d.flags|=4)}else{F=E.nodeType===9?E:E.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=Sn(m)),u==="http://www.w3.org/1999/xhtml"?m==="script"?(u=F.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof b.is=="string"?u=F.createElement(m,{is:b.is}):(u=F.createElement(m),m==="select"&&(F=u,b.multiple?F.multiple=!0:b.size&&(F.size=b.size))):u=F.createElementNS(u,m),u[ha]=d,u[Kf]=b,dN(u,d,!1,!1),d.stateNode=u;e:{switch(F=la(m,b),m){case"dialog":nn("cancel",u),nn("close",u),E=b;break;case"iframe":case"object":case"embed":nn("load",u),E=b;break;case"video":case"audio":for(E=0;E<Gf.length;E++)nn(Gf[E],u);E=b;break;case"source":nn("error",u),E=b;break;case"img":case"image":case"link":nn("error",u),nn("load",u),E=b;break;case"details":nn("toggle",u),E=b;break;case"input":Mr(u,b),E=Rt(u,b),nn("invalid",u);break;case"option":E=b;break;case"select":u._wrapperState={wasMultiple:!!b.multiple},E=pe({},b,{value:void 0}),nn("invalid",u);break;case"textarea":cr(u,b),E=$s(u,b),nn("invalid",u);break;default:E=b}Ur(m,E),K=E;for($ in K)if(K.hasOwnProperty($)){var J=K[$];$==="style"?jr(u,J):$==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&Wa(u,J)):$==="children"?typeof J=="string"?(m!=="textarea"||J!=="")&&es(u,J):typeof J=="number"&&es(u,""+J):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(s.hasOwnProperty($)?J!=null&&$==="onScroll"&&nn("scroll",u):J!=null&&_(u,$,J,F))}switch(m){case"input":Ze(u),eo(u,b,!1);break;case"textarea":Ze(u),Ua(u);break;case"option":b.value!=null&&u.setAttribute("value",""+Ee(b.value));break;case"select":u.multiple=!!b.multiple,$=b.value,$!=null?ur(u,!!b.multiple,$,!1):b.defaultValue!=null&&ur(u,!!b.multiple,b.defaultValue,!0);break;default:typeof E.onClick=="function"&&(u.onclick=lm)}switch(m){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return kr(d),null;case 6:if(u&&d.stateNode!=null)hN(u,d,u.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(n(166));if(m=fu(Jf.current),fu(pa.current),mm(d)){if(b=d.stateNode,m=d.memoizedProps,b[ha]=d,($=b.nodeValue!==m)&&(u=Rs,u!==null))switch(u.tag){case 3:im(b.nodeValue,m,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&im(b.nodeValue,m,(u.mode&1)!==0)}$&&(d.flags|=4)}else b=(m.nodeType===9?m:m.ownerDocument).createTextNode(b),b[ha]=d,d.stateNode=b}return kr(d),null;case 13:if(rn(yn),b=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(ln&&Is!==null&&(d.mode&1)!==0&&(d.flags&128)===0)gE(),Kc(),d.flags|=98560,$=!1;else if($=mm(d),b!==null&&b.dehydrated!==null){if(u===null){if(!$)throw Error(n(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(n(317));$[ha]=d}else Kc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;kr(d),$=!1}else Oo!==null&&(Av(Oo),Oo=null),$=!0;if(!$)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(b=b!==null,b!==(u!==null&&u.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||(yn.current&1)!==0?Gn===0&&(Gn=3):Fv())),d.updateQueue!==null&&(d.flags|=4),kr(d),null);case 4:return Zc(),Sv(u,d),u===null&&Hf(d.stateNode.containerInfo),kr(d),null;case 10:return Y1(d.type._context),kr(d),null;case 17:return is(d.type)&&cm(),kr(d),null;case 19:if(rn(yn),$=d.memoizedState,$===null)return kr(d),null;if(b=(d.flags&128)!==0,F=$.rendering,F===null)if(b)sh($,!1);else{if(Gn!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(F=bm(u),F!==null){for(d.flags|=128,sh($,!1),b=F.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=m,m=d.child;m!==null;)$=m,u=b,$.flags&=14680066,F=$.alternate,F===null?($.childLanes=0,$.lanes=u,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=F.childLanes,$.lanes=F.lanes,$.child=F.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=F.memoizedProps,$.memoizedState=F.memoizedState,$.updateQueue=F.updateQueue,$.type=F.type,u=F.dependencies,$.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),m=m.sibling;return Qt(yn,yn.current&1|2),d.child}u=u.sibling}$.tail!==null&&tn()>nd&&(d.flags|=128,b=!0,sh($,!1),d.lanes=4194304)}else{if(!b)if(u=bm(F),u!==null){if(d.flags|=128,b=!0,m=u.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),sh($,!0),$.tail===null&&$.tailMode==="hidden"&&!F.alternate&&!ln)return kr(d),null}else 2*tn()-$.renderingStartTime>nd&&m!==1073741824&&(d.flags|=128,b=!0,sh($,!1),d.lanes=4194304);$.isBackwards?(F.sibling=d.child,d.child=F):(m=$.last,m!==null?m.sibling=F:d.child=F,$.last=F)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=tn(),d.sibling=null,m=yn.current,Qt(yn,b?m&1|2:m&1),d):(kr(d),null);case 22:case 23:return Dv(),b=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Os&1073741824)!==0&&(kr(d),d.subtreeFlags&6&&(d.flags|=8192)):kr(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function cj(u,d){switch(z1(d),d.tag){case 1:return is(d.type)&&cm(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Zc(),rn(as),rn(Nr),rv(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return tv(d),null;case 13:if(rn(yn),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));Kc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return rn(yn),null;case 4:return Zc(),null;case 10:return Y1(d.type._context),null;case 22:case 23:return Dv(),null;case 24:return null;default:return null}}var Rm=!1,$r=!1,dj=typeof WeakSet=="function"?WeakSet:Set,Be=null;function ed(u,d){var m=u.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(b){Cn(u,d,b)}else m.current=null}function Cv(u,d,m){try{m()}catch(b){Cn(u,d,b)}}var pN=!1;function fj(u,d){if(D1=Li,u=HC(),k1(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var b=m.getSelection&&m.getSelection();if(b&&b.rangeCount!==0){m=b.anchorNode;var E=b.anchorOffset,$=b.focusNode;b=b.focusOffset;try{m.nodeType,$.nodeType}catch{m=null;break e}var F=0,K=-1,J=-1,ge=0,Ne=0,$e=u,Se=null;t:for(;;){for(var Me;$e!==m||E!==0&&$e.nodeType!==3||(K=F+E),$e!==$||b!==0&&$e.nodeType!==3||(J=F+b),$e.nodeType===3&&(F+=$e.nodeValue.length),(Me=$e.firstChild)!==null;)Se=$e,$e=Me;for(;;){if($e===u)break t;if(Se===m&&++ge===E&&(K=F),Se===$&&++Ne===b&&(J=F),(Me=$e.nextSibling)!==null)break;$e=Se,Se=$e.parentNode}$e=Me}m=K===-1||J===-1?null:{start:K,end:J}}else m=null}m=m||{start:0,end:0}}else m=null;for(F1={focusedElem:u,selectionRange:m},Li=!1,Be=d;Be!==null;)if(d=Be,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Be=u;else for(;Be!==null;){d=Be;try{var Ue=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var Ve=Ue.memoizedProps,kn=Ue.memoizedState,ue=d.stateNode,se=ue.getSnapshotBeforeUpdate(d.elementType===d.type?Ve:Ao(d.type,Ve),kn);ue.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var fe=d.stateNode.containerInfo;fe.nodeType===1?fe.textContent="":fe.nodeType===9&&fe.documentElement&&fe.removeChild(fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Re){Cn(d,d.return,Re)}if(u=d.sibling,u!==null){u.return=d.return,Be=u;break}Be=d.return}return Ue=pN,pN=!1,Ue}function oh(u,d,m){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var E=b=b.next;do{if((E.tag&u)===u){var $=E.destroy;E.destroy=void 0,$!==void 0&&Cv(d,m,$)}E=E.next}while(E!==b)}}function Im(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&u)===u){var b=m.create;m.destroy=b()}m=m.next}while(m!==d)}}function Ev(u){var d=u.ref;if(d!==null){var m=u.stateNode;switch(u.tag){case 5:u=m;break;default:u=m}typeof d=="function"?d(u):d.current=u}}function mN(u){var d=u.alternate;d!==null&&(u.alternate=null,mN(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[ha],delete d[Kf],delete d[j1],delete d[KB],delete d[XB])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function gN(u){return u.tag===5||u.tag===3||u.tag===4}function yN(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||gN(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Nv(u,d,m){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(u,d):m.insertBefore(u,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(u,m)):(d=m,d.appendChild(u)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=lm));else if(b!==4&&(u=u.child,u!==null))for(Nv(u,d,m),u=u.sibling;u!==null;)Nv(u,d,m),u=u.sibling}function Tv(u,d,m){var b=u.tag;if(b===5||b===6)u=u.stateNode,d?m.insertBefore(u,d):m.appendChild(u);else if(b!==4&&(u=u.child,u!==null))for(Tv(u,d,m),u=u.sibling;u!==null;)Tv(u,d,m),u=u.sibling}var fr=null,Po=!1;function qi(u,d,m){for(m=m.child;m!==null;)vN(u,d,m),m=m.sibling}function vN(u,d,m){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Vr,m)}catch{}switch(m.tag){case 5:$r||ed(m,d);case 6:var b=fr,E=Po;fr=null,qi(u,d,m),fr=b,Po=E,fr!==null&&(Po?(u=fr,m=m.stateNode,u.nodeType===8?u.parentNode.removeChild(m):u.removeChild(m)):fr.removeChild(m.stateNode));break;case 18:fr!==null&&(Po?(u=fr,m=m.stateNode,u.nodeType===8?B1(u.parentNode,m):u.nodeType===1&&B1(u,m),Fi(u)):B1(fr,m.stateNode));break;case 4:b=fr,E=Po,fr=m.stateNode.containerInfo,Po=!0,qi(u,d,m),fr=b,Po=E;break;case 0:case 11:case 14:case 15:if(!$r&&(b=m.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){E=b=b.next;do{var $=E,F=$.destroy;$=$.tag,F!==void 0&&(($&2)!==0||($&4)!==0)&&Cv(m,d,F),E=E.next}while(E!==b)}qi(u,d,m);break;case 1:if(!$r&&(ed(m,d),b=m.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=m.memoizedProps,b.state=m.memoizedState,b.componentWillUnmount()}catch(K){Cn(m,d,K)}qi(u,d,m);break;case 21:qi(u,d,m);break;case 22:m.mode&1?($r=(b=$r)||m.memoizedState!==null,qi(u,d,m),$r=b):qi(u,d,m);break;default:qi(u,d,m)}}function xN(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var m=u.stateNode;m===null&&(m=u.stateNode=new dj),d.forEach(function(b){var E=bj.bind(null,u,b);m.has(b)||(m.add(b),b.then(E,E))})}}function Do(u,d){var m=d.deletions;if(m!==null)for(var b=0;b<m.length;b++){var E=m[b];try{var $=u,F=d,K=F;e:for(;K!==null;){switch(K.tag){case 5:fr=K.stateNode,Po=!1;break e;case 3:fr=K.stateNode.containerInfo,Po=!0;break e;case 4:fr=K.stateNode.containerInfo,Po=!0;break e}K=K.return}if(fr===null)throw Error(n(160));vN($,F,E),fr=null,Po=!1;var J=E.alternate;J!==null&&(J.return=null),E.return=null}catch(ge){Cn(E,d,ge)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)wN(d,u),d=d.sibling}function wN(u,d){var m=u.alternate,b=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Do(d,u),ga(u),b&4){try{oh(3,u,u.return),Im(3,u)}catch(Ve){Cn(u,u.return,Ve)}try{oh(5,u,u.return)}catch(Ve){Cn(u,u.return,Ve)}}break;case 1:Do(d,u),ga(u),b&512&&m!==null&&ed(m,m.return);break;case 5:if(Do(d,u),ga(u),b&512&&m!==null&&ed(m,m.return),u.flags&32){var E=u.stateNode;try{es(E,"")}catch(Ve){Cn(u,u.return,Ve)}}if(b&4&&(E=u.stateNode,E!=null)){var $=u.memoizedProps,F=m!==null?m.memoizedProps:$,K=u.type,J=u.updateQueue;if(u.updateQueue=null,J!==null)try{K==="input"&&$.type==="radio"&&$.name!=null&&Br(E,$),la(K,F);var ge=la(K,$);for(F=0;F<J.length;F+=2){var Ne=J[F],$e=J[F+1];Ne==="style"?jr(E,$e):Ne==="dangerouslySetInnerHTML"?Wa(E,$e):Ne==="children"?es(E,$e):_(E,Ne,$e,ge)}switch(K){case"input":vr(E,$);break;case"textarea":xr(E,$);break;case"select":var Se=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!$.multiple;var Me=$.value;Me!=null?ur(E,!!$.multiple,Me,!1):Se!==!!$.multiple&&($.defaultValue!=null?ur(E,!!$.multiple,$.defaultValue,!0):ur(E,!!$.multiple,$.multiple?[]:"",!1))}E[Kf]=$}catch(Ve){Cn(u,u.return,Ve)}}break;case 6:if(Do(d,u),ga(u),b&4){if(u.stateNode===null)throw Error(n(162));E=u.stateNode,$=u.memoizedProps;try{E.nodeValue=$}catch(Ve){Cn(u,u.return,Ve)}}break;case 3:if(Do(d,u),ga(u),b&4&&m!==null&&m.memoizedState.isDehydrated)try{Fi(d.containerInfo)}catch(Ve){Cn(u,u.return,Ve)}break;case 4:Do(d,u),ga(u);break;case 13:Do(d,u),ga(u),E=u.child,E.flags&8192&&($=E.memoizedState!==null,E.stateNode.isHidden=$,!$||E.alternate!==null&&E.alternate.memoizedState!==null||(_v=tn())),b&4&&xN(u);break;case 22:if(Ne=m!==null&&m.memoizedState!==null,u.mode&1?($r=(ge=$r)||Ne,Do(d,u),$r=ge):Do(d,u),ga(u),b&8192){if(ge=u.memoizedState!==null,(u.stateNode.isHidden=ge)&&!Ne&&(u.mode&1)!==0)for(Be=u,Ne=u.child;Ne!==null;){for($e=Be=Ne;Be!==null;){switch(Se=Be,Me=Se.child,Se.tag){case 0:case 11:case 14:case 15:oh(4,Se,Se.return);break;case 1:ed(Se,Se.return);var Ue=Se.stateNode;if(typeof Ue.componentWillUnmount=="function"){b=Se,m=Se.return;try{d=b,Ue.props=d.memoizedProps,Ue.state=d.memoizedState,Ue.componentWillUnmount()}catch(Ve){Cn(b,m,Ve)}}break;case 5:ed(Se,Se.return);break;case 22:if(Se.memoizedState!==null){CN($e);continue}}Me!==null?(Me.return=Se,Be=Me):CN($e)}Ne=Ne.sibling}e:for(Ne=null,$e=u;;){if($e.tag===5){if(Ne===null){Ne=$e;try{E=$e.stateNode,ge?($=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(K=$e.stateNode,J=$e.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null,K.style.display=ts("display",F))}catch(Ve){Cn(u,u.return,Ve)}}}else if($e.tag===6){if(Ne===null)try{$e.stateNode.nodeValue=ge?"":$e.memoizedProps}catch(Ve){Cn(u,u.return,Ve)}}else if(($e.tag!==22&&$e.tag!==23||$e.memoizedState===null||$e===u)&&$e.child!==null){$e.child.return=$e,$e=$e.child;continue}if($e===u)break e;for(;$e.sibling===null;){if($e.return===null||$e.return===u)break e;Ne===$e&&(Ne=null),$e=$e.return}Ne===$e&&(Ne=null),$e.sibling.return=$e.return,$e=$e.sibling}}break;case 19:Do(d,u),ga(u),b&4&&xN(u);break;case 21:break;default:Do(d,u),ga(u)}}function ga(u){var d=u.flags;if(d&2){try{e:{for(var m=u.return;m!==null;){if(gN(m)){var b=m;break e}m=m.return}throw Error(n(160))}switch(b.tag){case 5:var E=b.stateNode;b.flags&32&&(es(E,""),b.flags&=-33);var $=yN(u);Tv(u,$,E);break;case 3:case 4:var F=b.stateNode.containerInfo,K=yN(u);Nv(u,K,F);break;default:throw Error(n(161))}}catch(J){Cn(u,u.return,J)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function hj(u,d,m){Be=u,bN(u)}function bN(u,d,m){for(var b=(u.mode&1)!==0;Be!==null;){var E=Be,$=E.child;if(E.tag===22&&b){var F=E.memoizedState!==null||Rm;if(!F){var K=E.alternate,J=K!==null&&K.memoizedState!==null||$r;K=Rm;var ge=$r;if(Rm=F,($r=J)&&!ge)for(Be=E;Be!==null;)F=Be,J=F.child,F.tag===22&&F.memoizedState!==null?EN(E):J!==null?(J.return=F,Be=J):EN(E);for(;$!==null;)Be=$,bN($),$=$.sibling;Be=E,Rm=K,$r=ge}SN(u)}else(E.subtreeFlags&8772)!==0&&$!==null?($.return=E,Be=$):SN(u)}}function SN(u){for(;Be!==null;){var d=Be;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:$r||Im(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!$r)if(m===null)b.componentDidMount();else{var E=d.elementType===d.type?m.memoizedProps:Ao(d.type,m.memoizedProps);b.componentDidUpdate(E,m.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&CE(d,$,b);break;case 3:var F=d.updateQueue;if(F!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}CE(d,F,m)}break;case 5:var K=d.stateNode;if(m===null&&d.flags&4){m=K;var J=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&m.focus();break;case"img":J.src&&(m.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ge=d.alternate;if(ge!==null){var Ne=ge.memoizedState;if(Ne!==null){var $e=Ne.dehydrated;$e!==null&&Fi($e)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$r||d.flags&512&&Ev(d)}catch(Se){Cn(d,d.return,Se)}}if(d===u){Be=null;break}if(m=d.sibling,m!==null){m.return=d.return,Be=m;break}Be=d.return}}function CN(u){for(;Be!==null;){var d=Be;if(d===u){Be=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Be=m;break}Be=d.return}}function EN(u){for(;Be!==null;){var d=Be;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Im(4,d)}catch(J){Cn(d,m,J)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var E=d.return;try{b.componentDidMount()}catch(J){Cn(d,E,J)}}var $=d.return;try{Ev(d)}catch(J){Cn(d,$,J)}break;case 5:var F=d.return;try{Ev(d)}catch(J){Cn(d,F,J)}}}catch(J){Cn(d,d.return,J)}if(d===u){Be=null;break}var K=d.sibling;if(K!==null){K.return=d.return,Be=K;break}Be=d.return}}var pj=Math.ceil,Om=I.ReactCurrentDispatcher,kv=I.ReactCurrentOwner,lo=I.ReactCurrentBatchConfig,At=0,Zn=null,Pn=null,hr=0,Os=0,td=Wi(0),Gn=0,ah=null,pu=0,Am=0,$v=0,ih=null,us=null,_v=0,nd=1/0,ni=null,Pm=!1,Rv=null,Ki=null,Dm=!1,Xi=null,Fm=0,lh=0,Iv=null,Lm=-1,Mm=0;function qr(){return(At&6)!==0?tn():Lm!==-1?Lm:Lm=tn()}function Yi(u){return(u.mode&1)===0?1:(At&2)!==0&&hr!==0?hr&-hr:QB.transition!==null?(Mm===0&&(Mm=Ql()),Mm):(u=Dt,u!==0||(u=window.event,u=u===void 0?16:Ha(u.type)),u)}function Fo(u,d,m,b){if(50<lh)throw lh=0,Iv=null,Error(n(185));Ii(u,m,b),((At&2)===0||u!==Zn)&&(u===Zn&&((At&2)===0&&(Am|=m),Gn===4&&Qi(u,hr)),cs(u,b),m===1&&At===0&&(d.mode&1)===0&&(nd=tn()+500,fm&&zi()))}function cs(u,d){var m=u.callbackNode;Vp(u,d);var b=Yl(u,u===Zn?hr:0);if(b===0)m!==null&&rs(m),u.callbackNode=null,u.callbackPriority=0;else if(d=b&-b,u.callbackPriority!==d){if(m!=null&&rs(m),d===1)u.tag===0?YB(TN.bind(null,u)):dE(TN.bind(null,u)),HB(function(){(At&6)===0&&zi()}),m=null;else{switch(Lf(b)){case 1:m=Ec;break;case 4:m=Hl;break;case 16:m=Wr;break;case 536870912:m=ql;break;default:m=Wr}m=PN(m,NN.bind(null,u))}u.callbackPriority=d,u.callbackNode=m}}function NN(u,d){if(Lm=-1,Mm=0,(At&6)!==0)throw Error(n(327));var m=u.callbackNode;if(rd()&&u.callbackNode!==m)return null;var b=Yl(u,u===Zn?hr:0);if(b===0)return null;if((b&30)!==0||(b&u.expiredLanes)!==0||d)d=Bm(u,b);else{d=b;var E=At;At|=2;var $=$N();(Zn!==u||hr!==d)&&(ni=null,nd=tn()+500,gu(u,d));do try{yj();break}catch(K){kN(u,K)}while(!0);X1(),Om.current=$,At=E,Pn!==null?d=0:(Zn=null,hr=0,d=Gn)}if(d!==0){if(d===2&&(E=Nc(u),E!==0&&(b=E,d=Ov(u,E))),d===1)throw m=ah,gu(u,0),Qi(u,b),cs(u,tn()),m;if(d===6)Qi(u,b);else{if(E=u.current.alternate,(b&30)===0&&!mj(E)&&(d=Bm(u,b),d===2&&($=Nc(u),$!==0&&(b=$,d=Ov(u,$))),d===1))throw m=ah,gu(u,0),Qi(u,b),cs(u,tn()),m;switch(u.finishedWork=E,u.finishedLanes=b,d){case 0:case 1:throw Error(n(345));case 2:yu(u,us,ni);break;case 3:if(Qi(u,b),(b&130023424)===b&&(d=_v+500-tn(),10<d)){if(Yl(u,0)!==0)break;if(E=u.suspendedLanes,(E&b)!==b){qr(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=M1(yu.bind(null,u,us,ni),d);break}yu(u,us,ni);break;case 4:if(Qi(u,b),(b&4194240)===b)break;for(d=u.eventTimes,E=-1;0<b;){var F=31-ss(b);$=1<<F,F=d[F],F>E&&(E=F),b&=~$}if(b=E,b=tn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*pj(b/1960))-b,10<b){u.timeoutHandle=M1(yu.bind(null,u,us,ni),b);break}yu(u,us,ni);break;case 5:yu(u,us,ni);break;default:throw Error(n(329))}}}return cs(u,tn()),u.callbackNode===m?NN.bind(null,u):null}function Ov(u,d){var m=ih;return u.current.memoizedState.isDehydrated&&(gu(u,d).flags|=256),u=Bm(u,d),u!==2&&(d=us,us=m,d!==null&&Av(d)),u}function Av(u){us===null?us=u:us.push.apply(us,u)}function mj(u){for(var d=u;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var b=0;b<m.length;b++){var E=m[b],$=E.getSnapshot;E=E.value;try{if(!Io($(),E))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Qi(u,d){for(d&=~$v,d&=~Am,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var m=31-ss(d),b=1<<m;u[m]=-1,d&=~b}}function TN(u){if((At&6)!==0)throw Error(n(327));rd();var d=Yl(u,0);if((d&1)===0)return cs(u,tn()),null;var m=Bm(u,d);if(u.tag!==0&&m===2){var b=Nc(u);b!==0&&(d=b,m=Ov(u,b))}if(m===1)throw m=ah,gu(u,0),Qi(u,d),cs(u,tn()),m;if(m===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,yu(u,us,ni),cs(u,tn()),null}function Pv(u,d){var m=At;At|=1;try{return u(d)}finally{At=m,At===0&&(nd=tn()+500,fm&&zi())}}function mu(u){Xi!==null&&Xi.tag===0&&(At&6)===0&&rd();var d=At;At|=1;var m=lo.transition,b=Dt;try{if(lo.transition=null,Dt=1,u)return u()}finally{Dt=b,lo.transition=m,At=d,(At&6)===0&&zi()}}function Dv(){Os=td.current,rn(td)}function gu(u,d){u.finishedWork=null,u.finishedLanes=0;var m=u.timeoutHandle;if(m!==-1&&(u.timeoutHandle=-1,GB(m)),Pn!==null)for(m=Pn.return;m!==null;){var b=m;switch(z1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&cm();break;case 3:Zc(),rn(as),rn(Nr),rv();break;case 5:tv(b);break;case 4:Zc();break;case 13:rn(yn);break;case 19:rn(yn);break;case 10:Y1(b.type._context);break;case 22:case 23:Dv()}m=m.return}if(Zn=u,Pn=u=Zi(u.current,null),hr=Os=d,Gn=0,ah=null,$v=Am=pu=0,us=ih=null,du!==null){for(d=0;d<du.length;d++)if(m=du[d],b=m.interleaved,b!==null){m.interleaved=null;var E=b.next,$=m.pending;if($!==null){var F=$.next;$.next=E,b.next=F}m.pending=b}du=null}return u}function kN(u,d){do{var m=Pn;try{if(X1(),Sm.current=Tm,Cm){for(var b=vn.memoizedState;b!==null;){var E=b.queue;E!==null&&(E.pending=null),b=b.next}Cm=!1}if(hu=0,Qn=zn=vn=null,eh=!1,th=0,kv.current=null,m===null||m.return===null){Gn=1,ah=d,Pn=null;break}e:{var $=u,F=m.return,K=m,J=d;if(d=hr,K.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var ge=J,Ne=K,$e=Ne.tag;if((Ne.mode&1)===0&&($e===0||$e===11||$e===15)){var Se=Ne.alternate;Se?(Ne.updateQueue=Se.updateQueue,Ne.memoizedState=Se.memoizedState,Ne.lanes=Se.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Me=ZE(F);if(Me!==null){Me.flags&=-257,JE(Me,F,K,$,d),Me.mode&1&&QE($,ge,d),d=Me,J=ge;var Ue=d.updateQueue;if(Ue===null){var Ve=new Set;Ve.add(J),d.updateQueue=Ve}else Ue.add(J);break e}else{if((d&1)===0){QE($,ge,d),Fv();break e}J=Error(n(426))}}else if(ln&&K.mode&1){var kn=ZE(F);if(kn!==null){(kn.flags&65536)===0&&(kn.flags|=256),JE(kn,F,K,$,d),q1(Jc(J,K));break e}}$=J=Jc(J,K),Gn!==4&&(Gn=2),ih===null?ih=[$]:ih.push($),$=F;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var ue=XE($,J,d);SE($,ue);break e;case 1:K=J;var se=$.type,fe=$.stateNode;if(($.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||fe!==null&&typeof fe.componentDidCatch=="function"&&(Ki===null||!Ki.has(fe)))){$.flags|=65536,d&=-d,$.lanes|=d;var Re=YE($,K,d);SE($,Re);break e}}$=$.return}while($!==null)}RN(m)}catch(Ge){d=Ge,Pn===m&&m!==null&&(Pn=m=m.return);continue}break}while(!0)}function $N(){var u=Om.current;return Om.current=Tm,u===null?Tm:u}function Fv(){(Gn===0||Gn===3||Gn===2)&&(Gn=4),Zn===null||(pu&268435455)===0&&(Am&268435455)===0||Qi(Zn,hr)}function Bm(u,d){var m=At;At|=2;var b=$N();(Zn!==u||hr!==d)&&(ni=null,gu(u,d));do try{gj();break}catch(E){kN(u,E)}while(!0);if(X1(),At=m,Om.current=b,Pn!==null)throw Error(n(261));return Zn=null,hr=0,Gn}function gj(){for(;Pn!==null;)_N(Pn)}function yj(){for(;Pn!==null&&!no();)_N(Pn)}function _N(u){var d=AN(u.alternate,u,Os);u.memoizedProps=u.pendingProps,d===null?RN(u):Pn=d,kv.current=null}function RN(u){var d=u;do{var m=d.alternate;if(u=d.return,(d.flags&32768)===0){if(m=uj(m,d,Os),m!==null){Pn=m;return}}else{if(m=cj(m,d),m!==null){m.flags&=32767,Pn=m;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Gn=6,Pn=null;return}}if(d=d.sibling,d!==null){Pn=d;return}Pn=d=u}while(d!==null);Gn===0&&(Gn=5)}function yu(u,d,m){var b=Dt,E=lo.transition;try{lo.transition=null,Dt=1,vj(u,d,m,b)}finally{lo.transition=E,Dt=b}return null}function vj(u,d,m,b){do rd();while(Xi!==null);if((At&6)!==0)throw Error(n(327));m=u.finishedWork;var E=u.finishedLanes;if(m===null)return null;if(u.finishedWork=null,u.finishedLanes=0,m===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var $=m.lanes|m.childLanes;if(h1(u,$),u===Zn&&(Pn=Zn=null,hr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Dm||(Dm=!0,PN(Wr,function(){return rd(),null})),$=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||$){$=lo.transition,lo.transition=null;var F=Dt;Dt=1;var K=At;At|=4,kv.current=null,fj(u,m),wN(m,u),MB(F1),Li=!!D1,F1=D1=null,u.current=m,hj(m),Gl(),At=K,Dt=F,lo.transition=$}else u.current=m;if(Dm&&(Dm=!1,Xi=u,Fm=E),$=u.pendingLanes,$===0&&(Ki=null),c1(m.stateNode),cs(u,tn()),d!==null)for(b=u.onRecoverableError,m=0;m<d.length;m++)E=d[m],b(E.value,{componentStack:E.stack,digest:E.digest});if(Pm)throw Pm=!1,u=Rv,Rv=null,u;return(Fm&1)!==0&&u.tag!==0&&rd(),$=u.pendingLanes,($&1)!==0?u===Iv?lh++:(lh=0,Iv=u):lh=0,zi(),null}function rd(){if(Xi!==null){var u=Lf(Fm),d=lo.transition,m=Dt;try{if(lo.transition=null,Dt=16>u?16:u,Xi===null)var b=!1;else{if(u=Xi,Xi=null,Fm=0,(At&6)!==0)throw Error(n(331));var E=At;for(At|=4,Be=u.current;Be!==null;){var $=Be,F=$.child;if((Be.flags&16)!==0){var K=$.deletions;if(K!==null){for(var J=0;J<K.length;J++){var ge=K[J];for(Be=ge;Be!==null;){var Ne=Be;switch(Ne.tag){case 0:case 11:case 15:oh(8,Ne,$)}var $e=Ne.child;if($e!==null)$e.return=Ne,Be=$e;else for(;Be!==null;){Ne=Be;var Se=Ne.sibling,Me=Ne.return;if(mN(Ne),Ne===ge){Be=null;break}if(Se!==null){Se.return=Me,Be=Se;break}Be=Me}}}var Ue=$.alternate;if(Ue!==null){var Ve=Ue.child;if(Ve!==null){Ue.child=null;do{var kn=Ve.sibling;Ve.sibling=null,Ve=kn}while(Ve!==null)}}Be=$}}if(($.subtreeFlags&2064)!==0&&F!==null)F.return=$,Be=F;else e:for(;Be!==null;){if($=Be,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:oh(9,$,$.return)}var ue=$.sibling;if(ue!==null){ue.return=$.return,Be=ue;break e}Be=$.return}}var se=u.current;for(Be=se;Be!==null;){F=Be;var fe=F.child;if((F.subtreeFlags&2064)!==0&&fe!==null)fe.return=F,Be=fe;else e:for(F=se;Be!==null;){if(K=Be,(K.flags&2048)!==0)try{switch(K.tag){case 0:case 11:case 15:Im(9,K)}}catch(Ge){Cn(K,K.return,Ge)}if(K===F){Be=null;break e}var Re=K.sibling;if(Re!==null){Re.return=K.return,Be=Re;break e}Be=K.return}}if(At=E,zi(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Vr,u)}catch{}b=!0}return b}finally{Dt=m,lo.transition=d}}return!1}function IN(u,d,m){d=Jc(m,d),d=XE(u,d,1),u=Hi(u,d,1),d=qr(),u!==null&&(Ii(u,1,d),cs(u,d))}function Cn(u,d,m){if(u.tag===3)IN(u,u,m);else for(;d!==null;){if(d.tag===3){IN(d,u,m);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Ki===null||!Ki.has(b))){u=Jc(m,u),u=YE(d,u,1),d=Hi(d,u,1),u=qr(),d!==null&&(Ii(d,1,u),cs(d,u));break}}d=d.return}}function xj(u,d,m){var b=u.pingCache;b!==null&&b.delete(d),d=qr(),u.pingedLanes|=u.suspendedLanes&m,Zn===u&&(hr&m)===m&&(Gn===4||Gn===3&&(hr&130023424)===hr&&500>tn()-_v?gu(u,0):$v|=m),cs(u,d)}function ON(u,d){d===0&&((u.mode&1)===0?d=1:(d=Xl,Xl<<=1,(Xl&130023424)===0&&(Xl=4194304)));var m=qr();u=Ja(u,d),u!==null&&(Ii(u,d,m),cs(u,m))}function wj(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),ON(u,m)}function bj(u,d){var m=0;switch(u.tag){case 13:var b=u.stateNode,E=u.memoizedState;E!==null&&(m=E.retryLane);break;case 19:b=u.stateNode;break;default:throw Error(n(314))}b!==null&&b.delete(d),ON(u,m)}var AN;AN=function(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps||as.current)ls=!0;else{if((u.lanes&m)===0&&(d.flags&128)===0)return ls=!1,lj(u,d,m);ls=(u.flags&131072)!==0}else ls=!1,ln&&(d.flags&1048576)!==0&&fE(d,pm,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;_m(u,d),u=d.pendingProps;var E=Gc(d,Nr.current);Qc(d,m),E=av(null,d,b,u,E,m);var $=iv();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,is(b)?($=!0,dm(d)):$=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,J1(d),E.updater=km,d.stateNode=E,E._reactInternals=d,hv(d,b,u,m),d=yv(null,d,b,!0,$,m)):(d.tag=0,ln&&$&&V1(d),Hr(null,d,E,m),d=d.child),d;case 16:b=d.elementType;e:{switch(_m(u,d),u=d.pendingProps,E=b._init,b=E(b._payload),d.type=b,E=d.tag=Cj(b),u=Ao(b,u),E){case 0:d=gv(null,d,b,u,m);break e;case 1:d=oN(null,d,b,u,m);break e;case 11:d=eN(null,d,b,u,m);break e;case 14:d=tN(null,d,b,Ao(b.type,u),m);break e}throw Error(n(306,b,""))}return d;case 0:return b=d.type,E=d.pendingProps,E=d.elementType===b?E:Ao(b,E),gv(u,d,b,E,m);case 1:return b=d.type,E=d.pendingProps,E=d.elementType===b?E:Ao(b,E),oN(u,d,b,E,m);case 3:e:{if(aN(d),u===null)throw Error(n(387));b=d.pendingProps,$=d.memoizedState,E=$.element,bE(u,d),wm(d,b,null,m);var F=d.memoizedState;if(b=F.element,$.isDehydrated)if($={element:b,isDehydrated:!1,cache:F.cache,pendingSuspenseBoundaries:F.pendingSuspenseBoundaries,transitions:F.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){E=Jc(Error(n(423)),d),d=iN(u,d,b,m,E);break e}else if(b!==E){E=Jc(Error(n(424)),d),d=iN(u,d,b,m,E);break e}else for(Is=Ui(d.stateNode.containerInfo.firstChild),Rs=d,ln=!0,Oo=null,m=xE(d,null,b,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Kc(),b===E){d=ti(u,d,m);break e}Hr(u,d,b,m)}d=d.child}return d;case 5:return EE(d),u===null&&H1(d),b=d.type,E=d.pendingProps,$=u!==null?u.memoizedProps:null,F=E.children,L1(b,E)?F=null:$!==null&&L1(b,$)&&(d.flags|=32),sN(u,d),Hr(u,d,F,m),d.child;case 6:return u===null&&H1(d),null;case 13:return lN(u,d,m);case 4:return ev(d,d.stateNode.containerInfo),b=d.pendingProps,u===null?d.child=Xc(d,null,b,m):Hr(u,d,b,m),d.child;case 11:return b=d.type,E=d.pendingProps,E=d.elementType===b?E:Ao(b,E),eN(u,d,b,E,m);case 7:return Hr(u,d,d.pendingProps,m),d.child;case 8:return Hr(u,d,d.pendingProps.children,m),d.child;case 12:return Hr(u,d,d.pendingProps.children,m),d.child;case 10:e:{if(b=d.type._context,E=d.pendingProps,$=d.memoizedProps,F=E.value,Qt(ym,b._currentValue),b._currentValue=F,$!==null)if(Io($.value,F)){if($.children===E.children&&!as.current){d=ti(u,d,m);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var K=$.dependencies;if(K!==null){F=$.child;for(var J=K.firstContext;J!==null;){if(J.context===b){if($.tag===1){J=ei(-1,m&-m),J.tag=2;var ge=$.updateQueue;if(ge!==null){ge=ge.shared;var Ne=ge.pending;Ne===null?J.next=J:(J.next=Ne.next,Ne.next=J),ge.pending=J}}$.lanes|=m,J=$.alternate,J!==null&&(J.lanes|=m),Q1($.return,m,d),K.lanes|=m;break}J=J.next}}else if($.tag===10)F=$.type===d.type?null:$.child;else if($.tag===18){if(F=$.return,F===null)throw Error(n(341));F.lanes|=m,K=F.alternate,K!==null&&(K.lanes|=m),Q1(F,m,d),F=$.sibling}else F=$.child;if(F!==null)F.return=$;else for(F=$;F!==null;){if(F===d){F=null;break}if($=F.sibling,$!==null){$.return=F.return,F=$;break}F=F.return}$=F}Hr(u,d,E.children,m),d=d.child}return d;case 9:return E=d.type,b=d.pendingProps.children,Qc(d,m),E=ao(E),b=b(E),d.flags|=1,Hr(u,d,b,m),d.child;case 14:return b=d.type,E=Ao(b,d.pendingProps),E=Ao(b.type,E),tN(u,d,b,E,m);case 15:return nN(u,d,d.type,d.pendingProps,m);case 17:return b=d.type,E=d.pendingProps,E=d.elementType===b?E:Ao(b,E),_m(u,d),d.tag=1,is(b)?(u=!0,dm(d)):u=!1,Qc(d,m),qE(d,b,E),hv(d,b,E,m),yv(null,d,b,!0,u,m);case 19:return cN(u,d,m);case 22:return rN(u,d,m)}throw Error(n(156,d.tag))};function PN(u,d){return Af(u,d)}function Sj(u,d,m,b){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(u,d,m,b){return new Sj(u,d,m,b)}function Lv(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Cj(u){if(typeof u=="function")return Lv(u)?1:0;if(u!=null){if(u=u.$$typeof,u===X)return 11;if(u===ie)return 14}return 2}function Zi(u,d){var m=u.alternate;return m===null?(m=uo(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&14680064,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m}function jm(u,d,m,b,E,$){var F=2;if(b=u,typeof u=="function")Lv(u)&&(F=1);else if(typeof u=="string")F=5;else e:switch(u){case L:return vu(m.children,E,$,d);case W:F=8,E|=8;break;case j:return u=uo(12,m,d,E|2),u.elementType=j,u.lanes=$,u;case ae:return u=uo(13,m,d,E),u.elementType=ae,u.lanes=$,u;case ee:return u=uo(19,m,d,E),u.elementType=ee,u.lanes=$,u;case we:return Um(m,E,$,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case U:F=10;break e;case P:F=9;break e;case X:F=11;break e;case ie:F=14;break e;case le:F=16,b=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return d=uo(F,m,d,E),d.elementType=u,d.type=b,d.lanes=$,d}function vu(u,d,m,b){return u=uo(7,u,b,d),u.lanes=m,u}function Um(u,d,m,b){return u=uo(22,u,b,d),u.elementType=we,u.lanes=m,u.stateNode={isHidden:!1},u}function Mv(u,d,m){return u=uo(6,u,null,d),u.lanes=m,u}function Bv(u,d,m){return d=uo(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function Ej(u,d,m,b,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tc(0),this.expirationTimes=Tc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tc(0),this.identifierPrefix=b,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function jv(u,d,m,b,E,$,F,K,J){return u=new Ej(u,d,m,K,J),d===1?(d=1,$===!0&&(d|=8)):d=0,$=uo(3,null,null,d),u.current=$,$.stateNode=u,$.memoizedState={element:b,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},J1($),u}function Nj(u,d,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:b==null?null:""+b,children:u,containerInfo:d,implementation:m}}function DN(u){if(!u)return Vi;u=u._reactInternals;e:{if(_o(u)!==u||u.tag!==1)throw Error(n(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(is(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(u.tag===1){var m=u.type;if(is(m))return uE(u,m,d)}return d}function FN(u,d,m,b,E,$,F,K,J){return u=jv(m,b,!0,u,E,$,F,K,J),u.context=DN(null),m=u.current,b=qr(),E=Yi(m),$=ei(b,E),$.callback=d??null,Hi(m,$,E),u.current.lanes=E,Ii(u,E,b),cs(u,b),u}function Wm(u,d,m,b){var E=d.current,$=qr(),F=Yi(E);return m=DN(m),d.context===null?d.context=m:d.pendingContext=m,d=ei($,F),d.payload={element:u},b=b===void 0?null:b,b!==null&&(d.callback=b),u=Hi(E,d,F),u!==null&&(Fo(u,E,F,$),xm(u,E,F)),F}function Vm(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function LN(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function Uv(u,d){LN(u,d),(u=u.alternate)&&LN(u,d)}function Tj(){return null}var MN=typeof reportError=="function"?reportError:function(u){console.error(u)};function Wv(u){this._internalRoot=u}zm.prototype.render=Wv.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));Wm(u,d,null,null)},zm.prototype.unmount=Wv.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;mu(function(){Wm(null,u,null,null)}),d[Xa]=null}};function zm(u){this._internalRoot=u}zm.prototype.unstable_scheduleHydration=function(u){if(u){var d=Oi();u={blockedOn:null,target:u,priority:d};for(var m=0;m<ca.length&&d!==0&&d<ca[m].priority;m++);ca.splice(m,0,u),m===0&&Pi(u)}};function Vv(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Gm(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function BN(){}function kj(u,d,m,b,E){if(E){if(typeof b=="function"){var $=b;b=function(){var ge=Vm(F);$.call(ge)}}var F=FN(d,b,u,0,null,!1,!1,"",BN);return u._reactRootContainer=F,u[Xa]=F.current,Hf(u.nodeType===8?u.parentNode:u),mu(),F}for(;E=u.lastChild;)u.removeChild(E);if(typeof b=="function"){var K=b;b=function(){var ge=Vm(J);K.call(ge)}}var J=jv(u,0,!1,null,null,!1,!1,"",BN);return u._reactRootContainer=J,u[Xa]=J.current,Hf(u.nodeType===8?u.parentNode:u),mu(function(){Wm(d,J,m,b)}),J}function Hm(u,d,m,b,E){var $=m._reactRootContainer;if($){var F=$;if(typeof E=="function"){var K=E;E=function(){var J=Vm(F);K.call(J)}}Wm(d,F,u,E)}else F=kj(m,d,u,E,b);return Vm(F)}Zl=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var m=Ri(d.pendingLanes);m!==0&&(Ff(d,m|1),cs(d,tn()),(At&6)===0&&(nd=tn()+500,zi()))}break;case 13:mu(function(){var b=Ja(u,1);if(b!==null){var E=qr();Fo(b,u,1,E)}}),Uv(u,1)}},kc=function(u){if(u.tag===13){var d=Ja(u,134217728);if(d!==null){var m=qr();Fo(d,u,134217728,m)}Uv(u,134217728)}},Mf=function(u){if(u.tag===13){var d=Yi(u),m=Ja(u,d);if(m!==null){var b=qr();Fo(m,u,d,b)}Uv(u,d)}},Oi=function(){return Dt},zp=function(u,d){var m=Dt;try{return Dt=u,d()}finally{Dt=m}},Je=function(u,d,m){switch(d){case"input":if(vr(u,m),d=m.name,m.type==="radio"&&d!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var b=m[d];if(b!==u&&b.form===u.form){var E=um(b);if(!E)throw Error(n(90));ht(b),vr(b,E)}}}break;case"textarea":xr(u,m);break;case"select":d=m.value,d!=null&&ur(u,!!m.multiple,d,!1)}},Nt=Pv,It=mu;var $j={usingClientEntryPoint:!1,Events:[Xf,Vc,um,Ga,Ye,Pv]},uh={findFiberByHostInstance:iu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_j={bundleType:uh.bundleType,version:uh.version,rendererPackageName:uh.rendererPackageName,rendererConfig:uh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Sc(u),u===null?null:u.stateNode},findFiberByHostInstance:uh.findFiberByHostInstance||Tj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qm.isDisabled&&qm.supportsFiber)try{Vr=qm.inject(_j),zr=qm}catch{}}return ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$j,ds.createPortal=function(u,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(d))throw Error(n(200));return Nj(u,d,null,m)},ds.createRoot=function(u,d){if(!Vv(u))throw Error(n(299));var m=!1,b="",E=MN;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=jv(u,1,!1,null,null,m,!1,b,E),u[Xa]=d.current,Hf(u.nodeType===8?u.parentNode:u),new Wv(d)},ds.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=Sc(d),u=u===null?null:u.stateNode,u},ds.flushSync=function(u){return mu(u)},ds.hydrate=function(u,d,m){if(!Gm(d))throw Error(n(200));return Hm(null,u,d,!0,m)},ds.hydrateRoot=function(u,d,m){if(!Vv(u))throw Error(n(405));var b=m!=null&&m.hydratedSources||null,E=!1,$="",F=MN;if(m!=null&&(m.unstable_strictMode===!0&&(E=!0),m.identifierPrefix!==void 0&&($=m.identifierPrefix),m.onRecoverableError!==void 0&&(F=m.onRecoverableError)),d=FN(d,null,u,1,m??null,E,!1,$,F),u[Xa]=d.current,Hf(u),b)for(u=0;u<b.length;u++)m=b[u],E=m._getVersion,E=E(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,E]:d.mutableSourceEagerHydrationData.push(m,E);return new zm(d)},ds.render=function(u,d,m){if(!Gm(d))throw Error(n(200));return Hm(null,u,d,!1,m)},ds.unmountComponentAtNode=function(u){if(!Gm(u))throw Error(n(40));return u._reactRootContainer?(mu(function(){Hm(null,null,u,!1,function(){u._reactRootContainer=null,u[Xa]=null})}),!0):!1},ds.unstable_batchedUpdates=Pv,ds.unstable_renderSubtreeIntoContainer=function(u,d,m,b){if(!Gm(m))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return Hm(u,d,m,!1,b)},ds.version="18.3.1-next-f1338f8080-20240426",ds}var XN;function u$(){if(XN)return Kv.exports;XN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Kv.exports=Uj(),Kv.exports}var Zd=u$();const c$=Yb(Zd);function it(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function YN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Uu(...e){return t=>{let n=!1;const r=e.map(s=>{const o=YN(s,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():YN(e[s],null)}}}}function Mt(...e){return T.useCallback(Uu(...e),e)}function Wj(e,t){const n=T.createContext(t),r=o=>{const{children:a,...i}=o,l=T.useMemo(()=>i,Object.values(i));return C.jsx(n.Provider,{value:l,children:a})};r.displayName=e+"Provider";function s(o){const a=T.useContext(n);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,s]}function Fa(e,t=[]){let n=[];function r(o,a){const i=T.createContext(a),l=n.length;n=[...n,a];const c=h=>{const{scope:p,children:g,...y}=h,x=p?.[e]?.[l]||i,v=T.useMemo(()=>y,Object.values(y));return C.jsx(x.Provider,{value:v,children:g})};c.displayName=o+"Provider";function f(h,p){const g=p?.[e]?.[l]||i,y=T.useContext(g);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[c,f]}const s=()=>{const o=n.map(a=>T.createContext(a));return function(i){const l=i?.[e]||o;return T.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return s.scopeName=e,[r,Vj(s,...t)]}function Vj(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((i,{useScope:l,scopeName:c})=>{const h=l(o)[`__scope${c}`];return{...i,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function Wu(e){const t=Gj(e),n=T.forwardRef((r,s)=>{const{children:o,...a}=r,i=T.Children.toArray(o),l=i.find(qj);if(l){const c=l.props.children,f=i.map(h=>h===l?T.Children.count(c)>1?T.Children.only(null):T.isValidElement(c)?c.props.children:null:h);return C.jsx(t,{...a,ref:s,children:T.isValidElement(c)?T.cloneElement(c,void 0,f):null})}return C.jsx(t,{...a,ref:s,children:o})});return n.displayName=`${e}.Slot`,n}var zj=Wu("Slot");function Gj(e){const t=T.forwardRef((n,r)=>{const{children:s,...o}=n;if(T.isValidElement(s)){const a=Xj(s),i=Kj(o,s.props);return s.type!==T.Fragment&&(i.ref=r?Uu(r,a):a),T.cloneElement(s,i)}return T.Children.count(s)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var d$=Symbol("radix.slottable");function Hj(e){const t=({children:n})=>C.jsx(C.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=d$,t}function qj(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===d$}function Kj(e,t){const n={...t};for(const r in t){const s=e[r],o=t[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...i)=>{const l=o(...i);return s(...i),l}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...e,...n}}function Xj(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function f$(e){const t=e+"CollectionProvider",[n,r]=Fa(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:v,children:S}=x,N=he.useRef(null),_=he.useRef(new Map).current;return C.jsx(s,{scope:v,itemMap:_,collectionRef:N,children:S})};a.displayName=t;const i=e+"CollectionSlot",l=Wu(i),c=he.forwardRef((x,v)=>{const{scope:S,children:N}=x,_=o(i,S),I=Mt(v,_.collectionRef);return C.jsx(l,{ref:I,children:N})});c.displayName=i;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=Wu(f),g=he.forwardRef((x,v)=>{const{scope:S,children:N,..._}=x,I=he.useRef(null),A=Mt(v,I),M=o(f,S);return he.useEffect(()=>(M.itemMap.set(I,{ref:I,..._}),()=>void M.itemMap.delete(I))),C.jsx(p,{[h]:"",ref:A,children:N})});g.displayName=f;function y(x){const v=o(e+"CollectionConsumer",x);return he.useCallback(()=>{const N=v.collectionRef.current;if(!N)return[];const _=Array.from(N.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((M,L)=>_.indexOf(M.ref.current)-_.indexOf(L.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:g},y,r]}var Yj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ot=Yj.reduce((e,t)=>{const n=Wu(`Primitive.${t}`),r=T.forwardRef((s,o)=>{const{asChild:a,...i}=s,l=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...i,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function h$(e,t){e&&Zd.flushSync(()=>e.dispatchEvent(t))}function wo(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>t.current?.(...n),[])}function Qj(e,t=globalThis?.document){const n=wo(e);T.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Zj="DismissableLayer",nw="dismissableLayer.update",Jj="dismissableLayer.pointerDownOutside",e8="dismissableLayer.focusOutside",QN,p$=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jd=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:i,...l}=e,c=T.useContext(p$),[f,h]=T.useState(null),p=f?.ownerDocument??globalThis?.document,[,g]=T.useState({}),y=Mt(t,L=>h(L)),x=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=x.indexOf(v),N=f?x.indexOf(f):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,I=N>=S,A=n8(L=>{const W=L.target,j=[...c.branches].some(U=>U.contains(W));!I||j||(s?.(L),a?.(L),L.defaultPrevented||i?.())},p),M=r8(L=>{const W=L.target;[...c.branches].some(U=>U.contains(W))||(o?.(L),a?.(L),L.defaultPrevented||i?.())},p);return Qj(L=>{N===c.layers.size-1&&(r?.(L),!L.defaultPrevented&&i&&(L.preventDefault(),i()))},p),T.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(QN=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),ZN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=QN)}},[f,p,n,c]),T.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),ZN())},[f,c]),T.useEffect(()=>{const L=()=>g({});return document.addEventListener(nw,L),()=>document.removeEventListener(nw,L)},[]),C.jsx(ot.div,{...l,ref:y,style:{pointerEvents:_?I?"auto":"none":void 0,...e.style},onFocusCapture:it(e.onFocusCapture,M.onFocusCapture),onBlurCapture:it(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:it(e.onPointerDownCapture,A.onPointerDownCapture)})});Jd.displayName=Zj;var t8="DismissableLayerBranch",m$=T.forwardRef((e,t)=>{const n=T.useContext(p$),r=T.useRef(null),s=Mt(t,r);return T.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),C.jsx(ot.div,{...e,ref:s})});m$.displayName=t8;function n8(e,t=globalThis?.document){const n=wo(e),r=T.useRef(!1),s=T.useRef(()=>{});return T.useEffect(()=>{const o=i=>{if(i.target&&!r.current){let l=function(){g$(Jj,n,c,{discrete:!0})};const c={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=l,t.addEventListener("click",s.current,{once:!0})):l()}else t.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function r8(e,t=globalThis?.document){const n=wo(e),r=T.useRef(!1);return T.useEffect(()=>{const s=o=>{o.target&&!r.current&&g$(e8,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function ZN(){const e=new CustomEvent(nw);document.dispatchEvent(e)}function g$(e,t,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?h$(s,o):s.dispatchEvent(o)}var s8=Jd,o8=m$,jn=globalThis?.document?T.useLayoutEffect:()=>{},a8="Portal",fp=T.forwardRef((e,t)=>{const{container:n,...r}=e,[s,o]=T.useState(!1);jn(()=>o(!0),[]);const a=n||s&&globalThis?.document?.body;return a?c$.createPortal(C.jsx(ot.div,{...r,ref:t}),a):null});fp.displayName=a8;function i8(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Ei=e=>{const{present:t,children:n}=e,r=l8(t),s=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),o=Mt(r.ref,u8(s));return typeof n=="function"||r.isPresent?T.cloneElement(s,{ref:o}):null};Ei.displayName="Presence";function l8(e){const[t,n]=T.useState(),r=T.useRef(null),s=T.useRef(e),o=T.useRef("none"),a=e?"mounted":"unmounted",[i,l]=i8(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const c=Km(r.current);o.current=i==="mounted"?c:"none"},[i]),jn(()=>{const c=r.current,f=s.current;if(f!==e){const p=o.current,g=Km(c);e?l("MOUNT"):g==="none"||c?.display==="none"?l("UNMOUNT"):l(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,l]),jn(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const x=Km(r.current).includes(CSS.escape(g.animationName));if(g.target===t&&x&&(l("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},p=g=>{g.target===t&&(o.current=Km(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:T.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Km(e){return e?.animationName||"none"}function u8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var c8=Qb[" useInsertionEffect ".trim().toString()]||jn;function Vu({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,o,a]=d8({defaultProp:t,onChange:n}),i=e!==void 0,l=i?e:s;{const f=T.useRef(e!==void 0);T.useEffect(()=>{const h=f.current;h!==i&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=i},[i,r])}const c=T.useCallback(f=>{if(i){const h=f8(f)?f(e):f;h!==e&&a.current?.(h)}else o(f)},[i,e,o,a]);return[l,c]}function d8({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),s=T.useRef(n),o=T.useRef(t);return c8(()=>{o.current=t},[t]),T.useEffect(()=>{s.current!==n&&(o.current?.(n),s.current=n)},[n,s]),[n,r,o]}function f8(e){return typeof e=="function"}var y$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),h8="VisuallyHidden",Py=T.forwardRef((e,t)=>C.jsx(ot.span,{...e,ref:t,style:{...y$,...e.style}}));Py.displayName=h8;var p8=Py,Jb="ToastProvider",[e2,m8,g8]=f$("Toast"),[v$]=Fa("Toast",[g8]),[y8,Dy]=v$(Jb),x$=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[i,l]=T.useState(null),[c,f]=T.useState(0),h=T.useRef(!1),p=T.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jb}\`. Expected non-empty \`string\`.`),C.jsx(e2.Provider,{scope:t,children:C.jsx(y8,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:c,viewport:i,onViewportChange:l,onToastAdd:T.useCallback(()=>f(g=>g+1),[]),onToastRemove:T.useCallback(()=>f(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:a})})};x$.displayName=Jb;var w$="ToastViewport",v8=["F8"],rw="toast.viewportPause",sw="toast.viewportResume",b$=T.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=v8,label:s="Notifications ({hotkey})",...o}=e,a=Dy(w$,n),i=m8(n),l=T.useRef(null),c=T.useRef(null),f=T.useRef(null),h=T.useRef(null),p=Mt(t,h,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;T.useEffect(()=>{const v=S=>{r.length!==0&&r.every(_=>S[_]||S.code===_)&&h.current?.focus()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),T.useEffect(()=>{const v=l.current,S=h.current;if(y&&v&&S){const N=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(rw);S.dispatchEvent(M),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(sw);S.dispatchEvent(M),a.isClosePausedRef.current=!1}},I=M=>{!v.contains(M.relatedTarget)&&_()},A=()=>{v.contains(document.activeElement)||_()};return v.addEventListener("focusin",N),v.addEventListener("focusout",I),v.addEventListener("pointermove",N),v.addEventListener("pointerleave",A),window.addEventListener("blur",N),window.addEventListener("focus",_),()=>{v.removeEventListener("focusin",N),v.removeEventListener("focusout",I),v.removeEventListener("pointermove",N),v.removeEventListener("pointerleave",A),window.removeEventListener("blur",N),window.removeEventListener("focus",_)}}},[y,a.isClosePausedRef]);const x=T.useCallback(({tabbingDirection:v})=>{const N=i().map(_=>{const I=_.ref.current,A=[I,...I8(I)];return v==="forwards"?A:A.reverse()});return(v==="forwards"?N.reverse():N).flat()},[i]);return T.useEffect(()=>{const v=h.current;if(v){const S=N=>{const _=N.altKey||N.ctrlKey||N.metaKey;if(N.key==="Tab"&&!_){const A=document.activeElement,M=N.shiftKey;if(N.target===v&&M){c.current?.focus();return}const j=x({tabbingDirection:M?"backwards":"forwards"}),U=j.findIndex(P=>P===A);Qv(j.slice(U+1))?N.preventDefault():M?c.current?.focus():f.current?.focus()}};return v.addEventListener("keydown",S),()=>v.removeEventListener("keydown",S)}},[i,x]),C.jsxs(o8,{ref:l,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&C.jsx(ow,{ref:c,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"forwards"});Qv(v)}}),C.jsx(e2.Slot,{scope:n,children:C.jsx(ot.ol,{tabIndex:-1,...o,ref:p})}),y&&C.jsx(ow,{ref:f,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"backwards"});Qv(v)}})]})});b$.displayName=w$;var S$="ToastFocusProxy",ow=T.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=Dy(S$,n);return C.jsx(Py,{tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{const i=a.relatedTarget;!o.viewport?.contains(i)&&r()}})});ow.displayName=S$;var hp="Toast",x8="toast.swipeStart",w8="toast.swipeMove",b8="toast.swipeCancel",S8="toast.swipeEnd",C$=T.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=e,[i,l]=Vu({prop:r,defaultProp:s??!0,onChange:o,caller:hp});return C.jsx(Ei,{present:n||i,children:C.jsx(N8,{open:i,...a,ref:t,onClose:()=>l(!1),onPause:wo(e.onPause),onResume:wo(e.onResume),onSwipeStart:it(e.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(e.onSwipeMove,c=>{const{x:f,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:it(e.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(e.onSwipeEnd,c=>{const{x:f,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});C$.displayName=hp;var[C8,E8]=v$(hp,{onClose(){}}),N8=T.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:i,onPause:l,onResume:c,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:g,...y}=e,x=Dy(hp,n),[v,S]=T.useState(null),N=Mt(t,ee=>S(ee)),_=T.useRef(null),I=T.useRef(null),A=s||x.duration,M=T.useRef(0),L=T.useRef(A),W=T.useRef(0),{onToastAdd:j,onToastRemove:U}=x,P=wo(()=>{v?.contains(document.activeElement)&&x.viewport?.focus(),a()}),X=T.useCallback(ee=>{!ee||ee===1/0||(window.clearTimeout(W.current),M.current=new Date().getTime(),W.current=window.setTimeout(P,ee))},[P]);T.useEffect(()=>{const ee=x.viewport;if(ee){const ie=()=>{X(L.current),c?.()},le=()=>{const we=new Date().getTime()-M.current;L.current=L.current-we,window.clearTimeout(W.current),l?.()};return ee.addEventListener(rw,le),ee.addEventListener(sw,ie),()=>{ee.removeEventListener(rw,le),ee.removeEventListener(sw,ie)}}},[x.viewport,A,l,c,X]),T.useEffect(()=>{o&&!x.isClosePausedRef.current&&X(A)},[o,A,x.isClosePausedRef,X]),T.useEffect(()=>(j(),()=>U()),[j,U]);const ae=T.useMemo(()=>v?R$(v):null,[v]);return x.viewport?C.jsxs(C.Fragment,{children:[ae&&C.jsx(T8,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:ae}),C.jsx(C8,{scope:n,onClose:P,children:Zd.createPortal(C.jsx(e2.ItemSlot,{scope:n,children:C.jsx(s8,{asChild:!0,onEscapeKeyDown:it(i,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:C.jsx(ot.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":x.swipeDirection,...y,ref:N,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:it(e.onKeyDown,ee=>{ee.key==="Escape"&&(i?.(ee.nativeEvent),ee.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:it(e.onPointerDown,ee=>{ee.button===0&&(_.current={x:ee.clientX,y:ee.clientY})}),onPointerMove:it(e.onPointerMove,ee=>{if(!_.current)return;const ie=ee.clientX-_.current.x,le=ee.clientY-_.current.y,we=!!I.current,te=["left","right"].includes(x.swipeDirection),oe=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,pe=te?oe(0,ie):0,Y=te?0:oe(0,le),G=ee.pointerType==="touch"?10:2,re={x:pe,y:Y},ce={originalEvent:ee,delta:re};we?(I.current=re,Xm(w8,h,ce,{discrete:!1})):JN(re,x.swipeDirection,G)?(I.current=re,Xm(x8,f,ce,{discrete:!1}),ee.target.setPointerCapture(ee.pointerId)):(Math.abs(ie)>G||Math.abs(le)>G)&&(_.current=null)}),onPointerUp:it(e.onPointerUp,ee=>{const ie=I.current,le=ee.target;if(le.hasPointerCapture(ee.pointerId)&&le.releasePointerCapture(ee.pointerId),I.current=null,_.current=null,ie){const we=ee.currentTarget,te={originalEvent:ee,delta:ie};JN(ie,x.swipeDirection,x.swipeThreshold)?Xm(S8,g,te,{discrete:!0}):Xm(b8,p,te,{discrete:!0}),we.addEventListener("click",oe=>oe.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),T8=e=>{const{__scopeToast:t,children:n,...r}=e,s=Dy(hp,t),[o,a]=T.useState(!1),[i,l]=T.useState(!1);return _8(()=>a(!0)),T.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),i?null:C.jsx(fp,{asChild:!0,children:C.jsx(Py,{...r,children:o&&C.jsxs(C.Fragment,{children:[s.label," ",n]})})})},k8="ToastTitle",E$=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return C.jsx(ot.div,{...r,ref:t})});E$.displayName=k8;var $8="ToastDescription",N$=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return C.jsx(ot.div,{...r,ref:t})});N$.displayName=$8;var T$="ToastAction",k$=T.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?C.jsx(_$,{altText:n,asChild:!0,children:C.jsx(t2,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${T$}\`. Expected non-empty \`string\`.`),null)});k$.displayName=T$;var $$="ToastClose",t2=T.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=E8($$,n);return C.jsx(_$,{asChild:!0,children:C.jsx(ot.button,{type:"button",...r,ref:t,onClick:it(e.onClick,s.onClose)})})});t2.displayName=$$;var _$=T.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return C.jsx(ot.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function R$(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),R8(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...R$(r))}}),t}function Xm(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?h$(s,o):s.dispatchEvent(o)}var JN=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function _8(e=()=>{}){const t=wo(e);jn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function R8(e){return e.nodeType===e.ELEMENT_NODE}function I8(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Qv(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var O8=x$,I$=b$,O$=C$,A$=E$,P$=N$,D$=k$,F$=t2;function L$(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=L$(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function M$(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=L$(e))&&(r&&(r+=" "),r+=t);return r}const eT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,tT=M$,n2=(e,t)=>n=>{var r;if(t?.variants==null)return tT(e,n?.class,n?.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(c=>{const f=n?.[c],h=o?.[c];if(f===null)return null;const p=eT(f)||eT(h);return s[c][p]}),i=n&&Object.entries(n).reduce((c,f)=>{let[h,p]=f;return p===void 0||(c[h]=p),c},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(y=>{let[x,v]=y;return Array.isArray(v)?v.includes({...o,...i}[x]):{...o,...i}[x]===v})?[...c,h,p]:c},[]);return tT(e,a,l,n?.class,n?.className)};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P8=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),nT=e=>{const t=P8(e);return t.charAt(0).toUpperCase()+t.slice(1)},B$=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),D8=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var F8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},l)=>T.createElement("svg",{ref:l,...F8,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:B$("lucide",s),...!o&&!D8(i)&&{"aria-hidden":"true"},...i},[...a.map(([c,f])=>T.createElement(c,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=(e,t)=>{const n=T.forwardRef(({className:r,...s},o)=>T.createElement(L8,{ref:o,iconNode:t,className:B$(`lucide-${A8(nT(e))}`,`lucide-${e}`,r),...s}));return n.displayName=nT(e),n};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],B8=Hs("arrow-right",M8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],U8=Hs("calendar",j8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],V8=Hs("camera",W8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],r2=Hs("check",z8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],s2=Hs("chevron-down",G8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],q8=Hs("chevron-left",H8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],X8=Hs("chevron-right",K8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Q8=Hs("chevron-up",Y8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],J8=Hs("chevrons-up-down",Z8);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tU=Hs("circle-check-big",eU);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],rU=Hs("refresh-ccw",nU);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],j$=Hs("search",sU);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],o2=Hs("x",oU),a2="-",aU=e=>{const t=lU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const i=a.split(a2);return i[0]===""&&i.length!==1&&i.shift(),U$(i,t)||iU(a)},getConflictingClassGroupIds:(a,i)=>{const l=n[a]||[];return i&&r[a]?[...l,...r[a]]:l}}},U$=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?U$(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(a2);return t.validators.find(({validator:a})=>a(o))?.classGroupId},rT=/^\[(.+)\]$/,iU=e=>{if(rT.test(e)){const t=rT.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},lU=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return cU(Object.entries(e.classGroups),n).forEach(([o,a])=>{aw(a,r,o,t)}),r},aw=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:sT(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(uU(s)){aw(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{aw(a,sT(t,o),n,r)})})},sT=(e,t)=>{let n=e;return t.split(a2).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uU=e=>e.isThemeGetter,cU=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,i])=>[t+a,i])):o);return[n,s]}):e,dU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},W$="!",fU=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,a=i=>{const l=[];let c=0,f=0,h;for(let v=0;v<i.length;v++){let S=i[v];if(c===0){if(S===s&&(r||i.slice(v,v+o)===t)){l.push(i.slice(f,v)),f=v+o;continue}if(S==="/"){h=v;continue}}S==="["?c++:S==="]"&&c--}const p=l.length===0?i:i.substring(f),g=p.startsWith(W$),y=g?p.substring(1):p,x=h&&h>f?h-f:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:x}};return n?i=>n({className:i,parseClassName:a}):a},hU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},pU=e=>({cache:dU(e.cacheSize),parseClassName:fU(e),...aU(e)}),mU=/\s+/,gU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(mU);let i="";for(let l=a.length-1;l>=0;l-=1){const c=a[l],{modifiers:f,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:g}=n(c);let y=!!g,x=r(y?p.substring(0,g):p);if(!x){if(!y){i=c+(i.length>0?" "+i:i);continue}if(x=r(p),!x){i=c+(i.length>0?" "+i:i);continue}y=!1}const v=hU(f).join(":"),S=h?v+W$:v,N=S+x;if(o.includes(N))continue;o.push(N);const _=s(x,y);for(let I=0;I<_.length;++I){const A=_[I];o.push(S+A)}i=c+(i.length>0?" "+i:i)}return i};function yU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=V$(t))&&(r&&(r+=" "),r+=n);return r}const V$=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=V$(e[r]))&&(n&&(n+=" "),n+=t);return n};function vU(e,...t){let n,r,s,o=a;function a(l){const c=t.reduce((f,h)=>h(f),e());return n=pU(c),r=n.cache.get,s=n.cache.set,o=i,i(l)}function i(l){const c=r(l);if(c)return c;const f=gU(l,n);return s(l,f),f}return function(){return o(yU.apply(null,arguments))}}const sn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},z$=/^\[(?:([a-z-]+):)?(.+)\]$/i,xU=/^\d+\/\d+$/,wU=new Set(["px","full","screen"]),bU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,CU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ri=e=>vd(e)||wU.has(e)||xU.test(e),el=e=>ef(e,"length",AU),vd=e=>!!e&&!Number.isNaN(Number(e)),Zv=e=>ef(e,"number",vd),dh=e=>!!e&&Number.isInteger(Number(e)),TU=e=>e.endsWith("%")&&vd(e.slice(0,-1)),mt=e=>z$.test(e),tl=e=>bU.test(e),kU=new Set(["length","size","percentage"]),$U=e=>ef(e,kU,G$),_U=e=>ef(e,"position",G$),RU=new Set(["image","url"]),IU=e=>ef(e,RU,DU),OU=e=>ef(e,"",PU),fh=()=>!0,ef=(e,t,n)=>{const r=z$.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},AU=e=>SU.test(e)&&!CU.test(e),G$=()=>!1,PU=e=>EU.test(e),DU=e=>NU.test(e),FU=()=>{const e=sn("colors"),t=sn("spacing"),n=sn("blur"),r=sn("brightness"),s=sn("borderColor"),o=sn("borderRadius"),a=sn("borderSpacing"),i=sn("borderWidth"),l=sn("contrast"),c=sn("grayscale"),f=sn("hueRotate"),h=sn("invert"),p=sn("gap"),g=sn("gradientColorStops"),y=sn("gradientColorStopPositions"),x=sn("inset"),v=sn("margin"),S=sn("opacity"),N=sn("padding"),_=sn("saturate"),I=sn("scale"),A=sn("sepia"),M=sn("skew"),L=sn("space"),W=sn("translate"),j=()=>["auto","contain","none"],U=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",mt,t],X=()=>[mt,t],ae=()=>["",ri,el],ee=()=>["auto",vd,mt],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",mt],pe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[vd,mt];return{cacheSize:500,separator:":",theme:{colors:[fh],spacing:[ri,el],blur:["none","",tl,mt],brightness:Y(),borderColor:[e],borderRadius:["none","","full",tl,mt],borderSpacing:X(),borderWidth:ae(),contrast:Y(),grayscale:oe(),hueRotate:Y(),invert:oe(),gap:X(),gradientColorStops:[e],gradientColorStopPositions:[TU,el],inset:P(),margin:P(),opacity:Y(),padding:X(),saturate:Y(),scale:Y(),sepia:oe(),skew:Y(),space:X(),translate:X()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[tl]}],"break-after":[{"break-after":pe()}],"break-before":[{"break-before":pe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),mt]}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dh,mt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",dh,mt]}],"grid-cols":[{"grid-cols":[fh]}],"col-start-end":[{col:["auto",{span:["full",dh,mt]},mt]}],"col-start":[{"col-start":ee()}],"col-end":[{"col-end":ee()}],"grid-rows":[{"grid-rows":[fh]}],"row-start-end":[{row:["auto",{span:[dh,mt]},mt]}],"row-start":[{"row-start":ee()}],"row-end":[{"row-end":ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...te()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...te(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...te(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,t]}],"min-w":[{"min-w":[mt,t,"min","max","fit"]}],"max-w":[{"max-w":[mt,t,"none","full","min","max","fit","prose",{screen:[tl]},tl]}],h:[{h:[mt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",tl,el]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Zv]}],"font-family":[{font:[fh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",vd,Zv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ri,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ri,el]}],"underline-offset":[{"underline-offset":["auto",ri,mt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:X()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),_U]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",$U]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:le()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[ri,mt]}],"outline-w":[{outline:[ri,el]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[ri,el]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",tl,OU]}],"shadow-color":[{shadow:[fh]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...we(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":we()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",tl,mt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[dh,mt]}],"translate-x":[{"translate-x":[W]}],"translate-y":[{"translate-y":[W]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":X()}],"scroll-mx":[{"scroll-mx":X()}],"scroll-my":[{"scroll-my":X()}],"scroll-ms":[{"scroll-ms":X()}],"scroll-me":[{"scroll-me":X()}],"scroll-mt":[{"scroll-mt":X()}],"scroll-mr":[{"scroll-mr":X()}],"scroll-mb":[{"scroll-mb":X()}],"scroll-ml":[{"scroll-ml":X()}],"scroll-p":[{"scroll-p":X()}],"scroll-px":[{"scroll-px":X()}],"scroll-py":[{"scroll-py":X()}],"scroll-ps":[{"scroll-ps":X()}],"scroll-pe":[{"scroll-pe":X()}],"scroll-pt":[{"scroll-pt":X()}],"scroll-pr":[{"scroll-pr":X()}],"scroll-pb":[{"scroll-pb":X()}],"scroll-pl":[{"scroll-pl":X()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ri,el,Zv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LU=vU(FU);function Ie(...e){return LU(M$(e))}const MU=O8,H$=T.forwardRef(({className:e,...t},n)=>C.jsx(I$,{ref:n,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));H$.displayName=I$.displayName;const BU=n2("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),q$=T.forwardRef(({className:e,variant:t,...n},r)=>C.jsx(O$,{ref:r,className:Ie(BU({variant:t}),e),...n}));q$.displayName=O$.displayName;const jU=T.forwardRef(({className:e,...t},n)=>C.jsx(D$,{ref:n,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));jU.displayName=D$.displayName;const K$=T.forwardRef(({className:e,...t},n)=>C.jsx(F$,{ref:n,className:Ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:C.jsx(o2,{className:"h-4 w-4"})}));K$.displayName=F$.displayName;const X$=T.forwardRef(({className:e,...t},n)=>C.jsx(A$,{ref:n,className:Ie("text-sm font-semibold",e),...t}));X$.displayName=A$.displayName;const Y$=T.forwardRef(({className:e,...t},n)=>C.jsx(P$,{ref:n,className:Ie("text-sm opacity-90",e),...t}));Y$.displayName=P$.displayName;function UU(){const{toasts:e}=Zb();return C.jsxs(MU,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return C.jsxs(q$,{...o,children:[C.jsxs("div",{className:"grid gap-1",children:[n&&C.jsx(X$,{children:n}),r&&C.jsx(Y$,{children:r})]}),s,C.jsx(K$,{})]},t)}),C.jsx(H$,{})]})}var Ym={},oT;function WU(){if(oT)return Ym;oT=1;var e=u$();return Ym.createRoot=e.createRoot,Ym.hydrateRoot=e.hydrateRoot,Ym}var VU=WU(),zU=(e,t,n,r,s,o,a,i)=>{let l=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(y=>{let x=y==="class",v=x&&o?s.map(S=>o[S]||S):s;x?(l.classList.remove(...v),l.classList.add(o&&o[g]?o[g]:g)):l.setAttribute(y,g)}),h(g)}function h(g){i&&c.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,y=a&&g==="system"?p():g;f(y)}catch{}},GU=T.createContext(void 0),HU={setTheme:e=>{},themes:[]},qU=()=>{var e;return(e=T.useContext(GU))!=null?e:HU};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:o,value:a,themes:i,nonce:l,scriptProps:c})=>{let f=JSON.stringify([n,t,o,e,i,a,r,s]).slice(1,-1);return T.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${zU.toString()})(${f})`}})});var KU=e=>{switch(e){case"success":return QU;case"info":return JU;case"warning":return ZU;case"error":return e7;default:return null}},XU=Array(12).fill(0),YU=({visible:e,className:t})=>he.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},he.createElement("div",{className:"sonner-spinner"},XU.map((n,r)=>he.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),QU=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ZU=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JU=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),e7=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},he.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),t7=he.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},he.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),he.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),n7=()=>{let[e,t]=he.useState(document.hidden);return he.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},iw=1,r7=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;let{message:r,...s}=t,o=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:iw++,a=this.toasts.find(l=>l.id===o),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),a?this.toasts=this.toasts.map(l=>l.id===o?(this.publish({...l,...t,id:o,title:r}),{...l,...t,id:o,dismissible:i,title:r}):l):this.addToast({title:r,...s,dismissible:i,id:o}),o},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:t,dismiss:!0})),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=t instanceof Promise?t:t(),o=r!==void 0,a,i=s.then(async c=>{if(a=["resolve",c],he.isValidElement(c))o=!1,this.create({id:r,type:"default",message:c});else if(o7(c)&&!c.ok){o=!1;let f=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description;this.create({id:r,type:"error",message:f,description:h})}else if(n.success!==void 0){o=!1;let f=typeof n.success=="function"?await n.success(c):n.success,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"success",message:f,description:h})}}).catch(async c=>{if(a=["reject",c],n.error!==void 0){o=!1;let f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description;this.create({id:r,type:"error",message:f,description:h})}}).finally(()=>{var c;o&&(this.dismiss(r),r=void 0),(c=n.finally)==null||c.call(n)}),l=()=>new Promise((c,f)=>i.then(()=>a[0]==="reject"?f(a[1]):c(a[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{let r=n?.id||iw++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},gs=new r7,s7=(e,t)=>{let n=t?.id||iw++;return gs.addToast({title:e,...t,id:n}),n},o7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",a7=s7,i7=()=>gs.toasts,l7=()=>gs.getActiveToasts();Object.assign(a7,{success:gs.success,info:gs.info,warning:gs.warning,error:gs.error,custom:gs.custom,message:gs.message,promise:gs.promise,dismiss:gs.dismiss,loading:gs.loading},{getHistory:i7,getToasts:l7});function u7(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}u7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Qm(e){return e.label!==void 0}var c7=3,d7="32px",f7="16px",aT=4e3,h7=356,p7=14,m7=20,g7=200;function Lo(...e){return e.filter(Boolean).join(" ")}function y7(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var v7=e=>{var t,n,r,s,o,a,i,l,c,f,h;let{invert:p,toast:g,unstyled:y,interacting:x,setHeights:v,visibleToasts:S,heights:N,index:_,toasts:I,expanded:A,removeToast:M,defaultRichColors:L,closeButton:W,style:j,cancelButtonStyle:U,actionButtonStyle:P,className:X="",descriptionClassName:ae="",duration:ee,position:ie,gap:le,loadingIcon:we,expandByDefault:te,classNames:oe,icons:pe,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:G}=e,[re,ce]=he.useState(null),[xe,Ce]=he.useState(null),[ye,Ee]=he.useState(!1),[ke,De]=he.useState(!1),[Ze,ht]=he.useState(!1),[dt,Rt]=he.useState(!1),[Mr,Br]=he.useState(!1),[vr,eo]=he.useState(0),[aa,ks]=he.useState(0),ur=he.useRef(g.duration||ee||aT),$s=he.useRef(null),cr=he.useRef(null),xr=_===0,Ua=_+1<=S,Sn=g.type,wr=g.dismissible!==!1,ia=g.className||"",Wa=g.descriptionClassName||"",es=he.useMemo(()=>N.findIndex(Ye=>Ye.toastId===g.id)||0,[N,g.id]),to=he.useMemo(()=>{var Ye;return(Ye=g.closeButton)!=null?Ye:W},[g.closeButton,W]),Va=he.useMemo(()=>g.duration||ee||aT,[g.duration,ee]),ts=he.useRef(0),jr=he.useRef(0),za=he.useRef(0),Ur=he.useRef(null),[la,lt]=ie.split("-"),xt=he.useMemo(()=>N.reduce((Ye,Nt,It)=>It>=es?Ye:Ye+Nt.height,0),[N,es]),Je=n7(),St=g.invert||p,qt=Sn==="loading";jr.current=he.useMemo(()=>es*le+xt,[es,xt]),he.useEffect(()=>{ur.current=Va},[Va]),he.useEffect(()=>{Ee(!0)},[]),he.useEffect(()=>{let Ye=cr.current;if(Ye){let Nt=Ye.getBoundingClientRect().height;return ks(Nt),v(It=>[{toastId:g.id,height:Nt,position:g.position},...It]),()=>v(It=>It.filter(an=>an.toastId!==g.id))}},[v,g.id]),he.useLayoutEffect(()=>{if(!ye)return;let Ye=cr.current,Nt=Ye.style.height;Ye.style.height="auto";let It=Ye.getBoundingClientRect().height;Ye.style.height=Nt,ks(It),v(an=>an.find(Un=>Un.toastId===g.id)?an.map(Un=>Un.toastId===g.id?{...Un,height:It}:Un):[{toastId:g.id,height:It,position:g.position},...an])},[ye,g.title,g.description,v,g.id]);let ut=he.useCallback(()=>{De(!0),eo(jr.current),v(Ye=>Ye.filter(Nt=>Nt.toastId!==g.id)),setTimeout(()=>{M(g)},g7)},[g,M,v,jr]);he.useEffect(()=>{if(g.promise&&Sn==="loading"||g.duration===1/0||g.type==="loading")return;let Ye;return A||x||G&&Je?(()=>{if(za.current<ts.current){let Nt=new Date().getTime()-ts.current;ur.current=ur.current-Nt}za.current=new Date().getTime()})():ur.current!==1/0&&(ts.current=new Date().getTime(),Ye=setTimeout(()=>{var Nt;(Nt=g.onAutoClose)==null||Nt.call(g,g),ut()},ur.current)),()=>clearTimeout(Ye)},[A,x,g,Sn,G,Je,ut]),he.useEffect(()=>{g.delete&&ut()},[ut,g.delete]);function Ga(){var Ye,Nt,It;return pe!=null&&pe.loading?he.createElement("div",{className:Lo(oe?.loader,(Ye=g?.classNames)==null?void 0:Ye.loader,"sonner-loader"),"data-visible":Sn==="loading"},pe.loading):we?he.createElement("div",{className:Lo(oe?.loader,(Nt=g?.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Sn==="loading"},we):he.createElement(YU,{className:Lo(oe?.loader,(It=g?.classNames)==null?void 0:It.loader),visible:Sn==="loading"})}return he.createElement("li",{tabIndex:0,ref:cr,className:Lo(X,ia,oe?.toast,(t=g?.classNames)==null?void 0:t.toast,oe?.default,oe?.[Sn],(n=g?.classNames)==null?void 0:n[Sn]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:L,"data-styled":!(g.jsx||g.unstyled||y),"data-mounted":ye,"data-promise":!!g.promise,"data-swiped":Mr,"data-removed":ke,"data-visible":Ua,"data-y-position":la,"data-x-position":lt,"data-index":_,"data-front":xr,"data-swiping":Ze,"data-dismissible":wr,"data-type":Sn,"data-invert":St,"data-swipe-out":dt,"data-swipe-direction":xe,"data-expanded":!!(A||te&&ye),style:{"--index":_,"--toasts-before":_,"--z-index":I.length-_,"--offset":`${ke?vr:jr.current}px`,"--initial-height":te?"auto":`${aa}px`,...j,...g.style},onDragEnd:()=>{ht(!1),ce(null),Ur.current=null},onPointerDown:Ye=>{qt||!wr||($s.current=new Date,eo(jr.current),Ye.target.setPointerCapture(Ye.pointerId),Ye.target.tagName!=="BUTTON"&&(ht(!0),Ur.current={x:Ye.clientX,y:Ye.clientY}))},onPointerUp:()=>{var Ye,Nt,It,an;if(dt||!wr)return;Ur.current=null;let Un=Number(((Ye=cr.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),br=Number(((Nt=cr.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yn=new Date().getTime()-((It=$s.current)==null?void 0:It.getTime()),Wn=re==="x"?Un:br,On=Math.abs(Wn)/Yn;if(Math.abs(Wn)>=m7||On>.11){eo(jr.current),(an=g.onDismiss)==null||an.call(g,g),Ce(re==="x"?Un>0?"right":"left":br>0?"down":"up"),ut(),Rt(!0),Br(!1);return}ht(!1),ce(null)},onPointerMove:Ye=>{var Nt,It,an,Un;if(!Ur.current||!wr||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let br=Ye.clientY-Ur.current.y,Yn=Ye.clientX-Ur.current.x,Wn=(It=e.swipeDirections)!=null?It:y7(ie);!re&&(Math.abs(Yn)>1||Math.abs(br)>1)&&ce(Math.abs(Yn)>Math.abs(br)?"x":"y");let On={x:0,y:0};re==="y"?(Wn.includes("top")||Wn.includes("bottom"))&&(Wn.includes("top")&&br<0||Wn.includes("bottom")&&br>0)&&(On.y=br):re==="x"&&(Wn.includes("left")||Wn.includes("right"))&&(Wn.includes("left")&&Yn<0||Wn.includes("right")&&Yn>0)&&(On.x=Yn),(Math.abs(On.x)>0||Math.abs(On.y)>0)&&Br(!0),(an=cr.current)==null||an.style.setProperty("--swipe-amount-x",`${On.x}px`),(Un=cr.current)==null||Un.style.setProperty("--swipe-amount-y",`${On.y}px`)}},to&&!g.jsx?he.createElement("button",{"aria-label":Y,"data-disabled":qt,"data-close-button":!0,onClick:qt||!wr?()=>{}:()=>{var Ye;ut(),(Ye=g.onDismiss)==null||Ye.call(g,g)},className:Lo(oe?.closeButton,(s=g?.classNames)==null?void 0:s.closeButton)},(o=pe?.close)!=null?o:t7):null,g.jsx||T.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:he.createElement(he.Fragment,null,Sn||g.icon||g.promise?he.createElement("div",{"data-icon":"",className:Lo(oe?.icon,(a=g?.classNames)==null?void 0:a.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Ga():null,g.type!=="loading"?g.icon||pe?.[Sn]||KU(Sn):null):null,he.createElement("div",{"data-content":"",className:Lo(oe?.content,(i=g?.classNames)==null?void 0:i.content)},he.createElement("div",{"data-title":"",className:Lo(oe?.title,(l=g?.classNames)==null?void 0:l.title)},typeof g.title=="function"?g.title():g.title),g.description?he.createElement("div",{"data-description":"",className:Lo(ae,Wa,oe?.description,(c=g?.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),T.isValidElement(g.cancel)?g.cancel:g.cancel&&Qm(g.cancel)?he.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||U,onClick:Ye=>{var Nt,It;Qm(g.cancel)&&wr&&((It=(Nt=g.cancel).onClick)==null||It.call(Nt,Ye),ut())},className:Lo(oe?.cancelButton,(f=g?.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,T.isValidElement(g.action)?g.action:g.action&&Qm(g.action)?he.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||P,onClick:Ye=>{var Nt,It;Qm(g.action)&&((It=(Nt=g.action).onClick)==null||It.call(Nt,Ye),!Ye.defaultPrevented&&ut())},className:Lo(oe?.actionButton,(h=g?.classNames)==null?void 0:h.actionButton)},g.action.label):null))};function iT(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function x7(e,t){let n={};return[e,t].forEach((r,s)=>{let o=s===1,a=o?"--mobile-offset":"--offset",i=o?f7:d7;function l(c){["top","right","bottom","left"].forEach(f=>{n[`${a}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${a}-${c}`]=i:n[`${a}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(i)}),n}var w7=T.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:a,className:i,offset:l,mobileOffset:c,theme:f="light",richColors:h,duration:p,style:g,visibleToasts:y=c7,toastOptions:x,dir:v=iT(),gap:S=p7,loadingIcon:N,icons:_,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:A}=e,[M,L]=he.useState([]),W=he.useMemo(()=>Array.from(new Set([r].concat(M.filter(G=>G.position).map(G=>G.position)))),[M,r]),[j,U]=he.useState([]),[P,X]=he.useState(!1),[ae,ee]=he.useState(!1),[ie,le]=he.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),we=he.useRef(null),te=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=he.useRef(null),pe=he.useRef(!1),Y=he.useCallback(G=>{L(re=>{var ce;return(ce=re.find(xe=>xe.id===G.id))!=null&&ce.delete||gs.dismiss(G.id),re.filter(({id:xe})=>xe!==G.id)})},[]);return he.useEffect(()=>gs.subscribe(G=>{if(G.dismiss){L(re=>re.map(ce=>ce.id===G.id?{...ce,delete:!0}:ce));return}setTimeout(()=>{c$.flushSync(()=>{L(re=>{let ce=re.findIndex(xe=>xe.id===G.id);return ce!==-1?[...re.slice(0,ce),{...re[ce],...G},...re.slice(ce+1)]:[G,...re]})})})}),[]),he.useEffect(()=>{if(f!=="system"){le(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?le("dark"):le("light")),typeof window>"u")return;let G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:re})=>{le(re?"dark":"light")})}catch{G.addListener(({matches:ce})=>{try{le(ce?"dark":"light")}catch(xe){console.error(xe)}})}},[f]),he.useEffect(()=>{M.length<=1&&X(!1)},[M]),he.useEffect(()=>{let G=re=>{var ce,xe;s.every(Ce=>re[Ce]||re.code===Ce)&&(X(!0),(ce=we.current)==null||ce.focus()),re.code==="Escape"&&(document.activeElement===we.current||(xe=we.current)!=null&&xe.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[s]),he.useEffect(()=>{if(we.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,pe.current=!1)}},[we.current]),he.createElement("section",{ref:t,"aria-label":`${I} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},W.map((G,re)=>{var ce;let[xe,Ce]=G.split("-");return M.length?he.createElement("ol",{key:G,dir:v==="auto"?iT():v,tabIndex:-1,ref:we,className:i,"data-sonner-toaster":!0,"data-theme":ie,"data-y-position":xe,"data-lifted":P&&M.length>1&&!o,"data-x-position":Ce,style:{"--front-toast-height":`${((ce=j[0])==null?void 0:ce.height)||0}px`,"--width":`${h7}px`,"--gap":`${S}px`,...g,...x7(l,c)},onBlur:ye=>{pe.current&&!ye.currentTarget.contains(ye.relatedTarget)&&(pe.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||pe.current||(pe.current=!0,oe.current=ye.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{ae||X(!1)},onDragEnd:()=>X(!1),onPointerDown:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||ee(!0)},onPointerUp:()=>ee(!1)},M.filter(ye=>!ye.position&&re===0||ye.position===G).map((ye,Ee)=>{var ke,De;return he.createElement(v7,{key:ye.id,icons:_,index:Ee,toast:ye,defaultRichColors:h,duration:(ke=x?.duration)!=null?ke:p,className:x?.className,descriptionClassName:x?.descriptionClassName,invert:n,visibleToasts:y,closeButton:(De=x?.closeButton)!=null?De:a,interacting:ae,position:G,style:x?.style,unstyled:x?.unstyled,classNames:x?.classNames,cancelButtonStyle:x?.cancelButtonStyle,actionButtonStyle:x?.actionButtonStyle,removeToast:Y,toasts:M.filter(Ze=>Ze.position==ye.position),heights:j.filter(Ze=>Ze.position==ye.position),setHeights:U,expandByDefault:o,gap:S,loadingIcon:N,expanded:P,pauseWhenPageIsHidden:A,swipeDirections:e.swipeDirections})})):null}))});const b7=({...e})=>{const{theme:t="system"}=qU();return C.jsx(w7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var S7=Qb[" useId ".trim().toString()]||(()=>{}),C7=0;function js(e){const[t,n]=T.useState(S7());return jn(()=>{n(r=>r??String(C7++))},[e]),t?`radix-${t}`:""}const E7=["top","right","bottom","left"],Cl=Math.min,Ms=Math.max,Yg=Math.round,Zm=Math.floor,_a=e=>({x:e,y:e}),N7={left:"right",right:"left",bottom:"top",top:"bottom"},T7={start:"end",end:"start"};function lw(e,t,n){return Ms(e,Cl(t,n))}function mi(e,t){return typeof e=="function"?e(t):e}function gi(e){return e.split("-")[0]}function tf(e){return e.split("-")[1]}function i2(e){return e==="x"?"y":"x"}function l2(e){return e==="y"?"height":"width"}const k7=new Set(["top","bottom"]);function Na(e){return k7.has(gi(e))?"y":"x"}function u2(e){return i2(Na(e))}function $7(e,t,n){n===void 0&&(n=!1);const r=tf(e),s=u2(e),o=l2(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Qg(a)),[a,Qg(a)]}function _7(e){const t=Qg(e);return[uw(e),t,uw(t)]}function uw(e){return e.replace(/start|end/g,t=>T7[t])}const lT=["left","right"],uT=["right","left"],R7=["top","bottom"],I7=["bottom","top"];function O7(e,t,n){switch(e){case"top":case"bottom":return n?t?uT:lT:t?lT:uT;case"left":case"right":return t?R7:I7;default:return[]}}function A7(e,t,n,r){const s=tf(e);let o=O7(gi(e),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(uw)))),o}function Qg(e){return e.replace(/left|right|bottom|top/g,t=>N7[t])}function P7(e){return{top:0,right:0,bottom:0,left:0,...e}}function Q$(e){return typeof e!="number"?P7(e):{top:e,right:e,bottom:e,left:e}}function Zg(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function cT(e,t,n){let{reference:r,floating:s}=e;const o=Na(t),a=u2(t),i=l2(a),l=gi(t),c=o==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[i]/2-s[i]/2;let g;switch(l){case"top":g={x:f,y:r.y-s.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(tf(t)){case"start":g[a]-=p*(n&&c?-1:1);break;case"end":g[a]+=p*(n&&c?-1:1);break}return g}const D7=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,i=o.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:h}=cT(c,r,l),p=r,g={},y=0;for(let x=0;x<i.length;x++){const{name:v,fn:S}=i[x],{x:N,y:_,data:I,reset:A}=await S({x:f,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:c,platform:a,elements:{reference:e,floating:t}});f=N??f,h=_??h,g={...g,[v]:{...g[v],...I}},A&&y<=50&&(y++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):A.rects),{x:f,y:h}=cT(c,p,l)),x=-1)}return{x:f,y:h,placement:p,strategy:s,middlewareData:g}};async function Mh(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:a,elements:i,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=mi(t,e),y=Q$(g),v=i[p?h==="floating"?"reference":"floating":h],S=Zg(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(i.floating)),boundary:c,rootBoundary:f,strategy:l})),N=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),I=await(o.isElement==null?void 0:o.isElement(_))?await(o.getScale==null?void 0:o.getScale(_))||{x:1,y:1}:{x:1,y:1},A=Zg(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:N,offsetParent:_,strategy:l}):N);return{top:(S.top-A.top+y.top)/I.y,bottom:(A.bottom-S.bottom+y.bottom)/I.y,left:(S.left-A.left+y.left)/I.x,right:(A.right-S.right+y.right)/I.x}}const F7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:a,elements:i,middlewareData:l}=t,{element:c,padding:f=0}=mi(e,t)||{};if(c==null)return{};const h=Q$(f),p={x:n,y:r},g=u2(s),y=l2(g),x=await a.getDimensions(c),v=g==="y",S=v?"top":"left",N=v?"bottom":"right",_=v?"clientHeight":"clientWidth",I=o.reference[y]+o.reference[g]-p[g]-o.floating[y],A=p[g]-o.reference[g],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let L=M?M[_]:0;(!L||!await(a.isElement==null?void 0:a.isElement(M)))&&(L=i.floating[_]||o.floating[y]);const W=I/2-A/2,j=L/2-x[y]/2-1,U=Cl(h[S],j),P=Cl(h[N],j),X=U,ae=L-x[y]-P,ee=L/2-x[y]/2+W,ie=lw(X,ee,ae),le=!l.arrow&&tf(s)!=null&&ee!==ie&&o.reference[y]/2-(ee<X?U:P)-x[y]/2<0,we=le?ee<X?ee-X:ee-ae:0;return{[g]:p[g]+we,data:{[g]:ie,centerOffset:ee-ie-we,...le&&{alignmentOffset:we}},reset:le}}}),L7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:i,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:x=!0,...v}=mi(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const S=gi(s),N=Na(i),_=gi(i)===i,I=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(_||!x?[Qg(i)]:_7(i)),M=y!=="none";!p&&M&&A.push(...A7(i,x,y,I));const L=[i,...A],W=await Mh(t,v),j=[];let U=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&j.push(W[S]),h){const ee=$7(s,a,I);j.push(W[ee[0]],W[ee[1]])}if(U=[...U,{placement:s,overflows:j}],!j.every(ee=>ee<=0)){var P,X;const ee=(((P=o.flip)==null?void 0:P.index)||0)+1,ie=L[ee];if(ie&&(!(h==="alignment"?N!==Na(ie):!1)||U.every(te=>Na(te.placement)===N?te.overflows[0]>0:!0)))return{data:{index:ee,overflows:U},reset:{placement:ie}};let le=(X=U.filter(we=>we.overflows[0]<=0).sort((we,te)=>we.overflows[1]-te.overflows[1])[0])==null?void 0:X.placement;if(!le)switch(g){case"bestFit":{var ae;const we=(ae=U.filter(te=>{if(M){const oe=Na(te.placement);return oe===N||oe==="y"}return!0}).map(te=>[te.placement,te.overflows.filter(oe=>oe>0).reduce((oe,pe)=>oe+pe,0)]).sort((te,oe)=>te[1]-oe[1])[0])==null?void 0:ae[0];we&&(le=we);break}case"initialPlacement":le=i;break}if(s!==le)return{reset:{placement:le}}}return{}}}};function dT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fT(e){return E7.some(t=>e[t]>=0)}const M7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=mi(e,t);switch(r){case"referenceHidden":{const o=await Mh(t,{...s,elementContext:"reference"}),a=dT(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:fT(a)}}}case"escaped":{const o=await Mh(t,{...s,altBoundary:!0}),a=dT(o,n.floating);return{data:{escapedOffsets:a,escaped:fT(a)}}}default:return{}}}}},Z$=new Set(["left","top"]);async function B7(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=gi(n),i=tf(n),l=Na(n)==="y",c=Z$.has(a)?-1:1,f=o&&l?-1:1,h=mi(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return i&&typeof y=="number"&&(g=i==="end"?y*-1:y),l?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const j7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:a,middlewareData:i}=t,l=await B7(t,e);return a===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:o+l.y,data:{...l,placement:a}}}}},U7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:i={fn:v=>{let{x:S,y:N}=v;return{x:S,y:N}}},...l}=mi(e,t),c={x:n,y:r},f=await Mh(t,l),h=Na(gi(s)),p=i2(h);let g=c[p],y=c[h];if(o){const v=p==="y"?"top":"left",S=p==="y"?"bottom":"right",N=g+f[v],_=g-f[S];g=lw(N,g,_)}if(a){const v=h==="y"?"top":"left",S=h==="y"?"bottom":"right",N=y+f[v],_=y-f[S];y=lw(N,y,_)}const x=i.fn({...t,[p]:g,[h]:y});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:o,[h]:a}}}}}},W7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=t,{offset:i=0,mainAxis:l=!0,crossAxis:c=!0}=mi(e,t),f={x:n,y:r},h=Na(s),p=i2(h);let g=f[p],y=f[h];const x=mi(i,t),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const _=p==="y"?"height":"width",I=o.reference[p]-o.floating[_]+v.mainAxis,A=o.reference[p]+o.reference[_]-v.mainAxis;g<I?g=I:g>A&&(g=A)}if(c){var S,N;const _=p==="y"?"width":"height",I=Z$.has(gi(s)),A=o.reference[h]-o.floating[_]+(I&&((S=a.offset)==null?void 0:S[h])||0)+(I?0:v.crossAxis),M=o.reference[h]+o.reference[_]+(I?0:((N=a.offset)==null?void 0:N[h])||0)-(I?v.crossAxis:0);y<A?y=A:y>M&&(y=M)}return{[p]:g,[h]:y}}}},V7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:a,elements:i}=t,{apply:l=()=>{},...c}=mi(e,t),f=await Mh(t,c),h=gi(s),p=tf(s),g=Na(s)==="y",{width:y,height:x}=o.floating;let v,S;h==="top"||h==="bottom"?(v=h,S=p===(await(a.isRTL==null?void 0:a.isRTL(i.floating))?"start":"end")?"left":"right"):(S=h,v=p==="end"?"top":"bottom");const N=x-f.top-f.bottom,_=y-f.left-f.right,I=Cl(x-f[v],N),A=Cl(y-f[S],_),M=!t.middlewareData.shift;let L=I,W=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(W=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(L=N),M&&!p){const U=Ms(f.left,0),P=Ms(f.right,0),X=Ms(f.top,0),ae=Ms(f.bottom,0);g?W=y-2*(U!==0||P!==0?U+P:Ms(f.left,f.right)):L=x-2*(X!==0||ae!==0?X+ae:Ms(f.top,f.bottom))}await l({...t,availableWidth:W,availableHeight:L});const j=await a.getDimensions(i.floating);return y!==j.width||x!==j.height?{reset:{rects:!0}}:{}}}};function Fy(){return typeof window<"u"}function nf(e){return J$(e)?(e.nodeName||"").toLowerCase():"#document"}function Us(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function La(e){var t;return(t=(J$(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function J$(e){return Fy()?e instanceof Node||e instanceof Us(e).Node:!1}function Xo(e){return Fy()?e instanceof Element||e instanceof Us(e).Element:!1}function Oa(e){return Fy()?e instanceof HTMLElement||e instanceof Us(e).HTMLElement:!1}function hT(e){return!Fy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Us(e).ShadowRoot}const z7=new Set(["inline","contents"]);function pp(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Yo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!z7.has(s)}const G7=new Set(["table","td","th"]);function H7(e){return G7.has(nf(e))}const q7=[":popover-open",":modal"];function Ly(e){return q7.some(t=>{try{return e.matches(t)}catch{return!1}})}const K7=["transform","translate","scale","rotate","perspective"],X7=["transform","translate","scale","rotate","perspective","filter"],Y7=["paint","layout","strict","content"];function c2(e){const t=d2(),n=Xo(e)?Yo(e):e;return K7.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||X7.some(r=>(n.willChange||"").includes(r))||Y7.some(r=>(n.contain||"").includes(r))}function Q7(e){let t=El(e);for(;Oa(t)&&!$d(t);){if(c2(t))return t;if(Ly(t))return null;t=El(t)}return null}function d2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Z7=new Set(["html","body","#document"]);function $d(e){return Z7.has(nf(e))}function Yo(e){return Us(e).getComputedStyle(e)}function My(e){return Xo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function El(e){if(nf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||hT(e)&&e.host||La(e);return hT(t)?t.host:t}function e_(e){const t=El(e);return $d(t)?e.ownerDocument?e.ownerDocument.body:e.body:Oa(t)&&pp(t)?t:e_(t)}function Bh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=e_(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),a=Us(s);if(o){const i=cw(a);return t.concat(a,a.visualViewport||[],pp(s)?s:[],i&&n?Bh(i):[])}return t.concat(s,Bh(s,[],n))}function cw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function t_(e){const t=Yo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Oa(e),o=s?e.offsetWidth:n,a=s?e.offsetHeight:r,i=Yg(n)!==o||Yg(r)!==a;return i&&(n=o,r=a),{width:n,height:r,$:i}}function f2(e){return Xo(e)?e:e.contextElement}function xd(e){const t=f2(e);if(!Oa(t))return _a(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=t_(t);let a=(o?Yg(n.width):n.width)/r,i=(o?Yg(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!i||!Number.isFinite(i))&&(i=1),{x:a,y:i}}const J7=_a(0);function n_(e){const t=Us(e);return!d2()||!t.visualViewport?J7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function eW(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Us(e)?!1:t}function zu(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=f2(e);let a=_a(1);t&&(r?Xo(r)&&(a=xd(r)):a=xd(e));const i=eW(o,n,r)?n_(o):_a(0);let l=(s.left+i.x)/a.x,c=(s.top+i.y)/a.y,f=s.width/a.x,h=s.height/a.y;if(o){const p=Us(o),g=r&&Xo(r)?Us(r):r;let y=p,x=cw(y);for(;x&&r&&g!==y;){const v=xd(x),S=x.getBoundingClientRect(),N=Yo(x),_=S.left+(x.clientLeft+parseFloat(N.paddingLeft))*v.x,I=S.top+(x.clientTop+parseFloat(N.paddingTop))*v.y;l*=v.x,c*=v.y,f*=v.x,h*=v.y,l+=_,c+=I,y=Us(x),x=cw(y)}}return Zg({width:f,height:h,x:l,y:c})}function By(e,t){const n=My(e).scrollLeft;return t?t.left+n:zu(La(e)).left+n}function r_(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-By(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function tW(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",a=La(r),i=t?Ly(t.floating):!1;if(r===a||i&&o)return n;let l={scrollLeft:0,scrollTop:0},c=_a(1);const f=_a(0),h=Oa(r);if((h||!h&&!o)&&((nf(r)!=="body"||pp(a))&&(l=My(r)),Oa(r))){const g=zu(r);c=xd(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const p=a&&!h&&!o?r_(a,l):_a(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+f.x+p.x,y:n.y*c.y-l.scrollTop*c.y+f.y+p.y}}function nW(e){return Array.from(e.getClientRects())}function rW(e){const t=La(e),n=My(e),r=e.ownerDocument.body,s=Ms(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ms(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+By(e);const i=-n.scrollTop;return Yo(r).direction==="rtl"&&(a+=Ms(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:i}}const pT=25;function sW(e,t){const n=Us(e),r=La(e),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,i=0,l=0;if(s){o=s.width,a=s.height;const f=d2();(!f||f&&t==="fixed")&&(i=s.offsetLeft,l=s.offsetTop)}const c=By(r);if(c<=0){const f=r.ownerDocument,h=f.body,p=getComputedStyle(h),g=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,y=Math.abs(r.clientWidth-h.clientWidth-g);y<=pT&&(o-=y)}else c<=pT&&(o+=c);return{width:o,height:a,x:i,y:l}}const oW=new Set(["absolute","fixed"]);function aW(e,t){const n=zu(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=Oa(e)?xd(e):_a(1),a=e.clientWidth*o.x,i=e.clientHeight*o.y,l=s*o.x,c=r*o.y;return{width:a,height:i,x:l,y:c}}function mT(e,t,n){let r;if(t==="viewport")r=sW(e,n);else if(t==="document")r=rW(La(e));else if(Xo(t))r=aW(t,n);else{const s=n_(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Zg(r)}function s_(e,t){const n=El(e);return n===t||!Xo(n)||$d(n)?!1:Yo(n).position==="fixed"||s_(n,t)}function iW(e,t){const n=t.get(e);if(n)return n;let r=Bh(e,[],!1).filter(i=>Xo(i)&&nf(i)!=="body"),s=null;const o=Yo(e).position==="fixed";let a=o?El(e):e;for(;Xo(a)&&!$d(a);){const i=Yo(a),l=c2(a);!l&&i.position==="fixed"&&(s=null),(o?!l&&!s:!l&&i.position==="static"&&!!s&&oW.has(s.position)||pp(a)&&!l&&s_(e,a))?r=r.filter(f=>f!==a):s=i,a=El(a)}return t.set(e,r),r}function lW(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?Ly(t)?[]:iW(t,this._c):[].concat(n),r],i=a[0],l=a.reduce((c,f)=>{const h=mT(t,f,s);return c.top=Ms(h.top,c.top),c.right=Cl(h.right,c.right),c.bottom=Cl(h.bottom,c.bottom),c.left=Ms(h.left,c.left),c},mT(t,i,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function uW(e){const{width:t,height:n}=t_(e);return{width:t,height:n}}function cW(e,t,n){const r=Oa(t),s=La(t),o=n==="fixed",a=zu(e,!0,o,t);let i={scrollLeft:0,scrollTop:0};const l=_a(0);function c(){l.x=By(s)}if(r||!r&&!o)if((nf(t)!=="body"||pp(s))&&(i=My(t)),r){const g=zu(t,!0,o,t);l.x=g.x+t.clientLeft,l.y=g.y+t.clientTop}else s&&c();o&&!r&&s&&c();const f=s&&!r&&!o?r_(s,i):_a(0),h=a.left+i.scrollLeft-l.x-f.x,p=a.top+i.scrollTop-l.y-f.y;return{x:h,y:p,width:a.width,height:a.height}}function Jv(e){return Yo(e).position==="static"}function gT(e,t){if(!Oa(e)||Yo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return La(e)===n&&(n=n.ownerDocument.body),n}function o_(e,t){const n=Us(e);if(Ly(e))return n;if(!Oa(e)){let s=El(e);for(;s&&!$d(s);){if(Xo(s)&&!Jv(s))return s;s=El(s)}return n}let r=gT(e,t);for(;r&&H7(r)&&Jv(r);)r=gT(r,t);return r&&$d(r)&&Jv(r)&&!c2(r)?n:r||Q7(e)||n}const dW=async function(e){const t=this.getOffsetParent||o_,n=this.getDimensions,r=await n(e.floating);return{reference:cW(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function fW(e){return Yo(e).direction==="rtl"}const hW={convertOffsetParentRelativeRectToViewportRelativeRect:tW,getDocumentElement:La,getClippingRect:lW,getOffsetParent:o_,getElementRects:dW,getClientRects:nW,getDimensions:uW,getScale:xd,isElement:Xo,isRTL:fW};function a_(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function pW(e,t){let n=null,r;const s=La(e);function o(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function a(i,l){i===void 0&&(i=!1),l===void 0&&(l=1),o();const c=e.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(i||t(),!p||!g)return;const y=Zm(h),x=Zm(s.clientWidth-(f+p)),v=Zm(s.clientHeight-(h+g)),S=Zm(f),_={rootMargin:-y+"px "+-x+"px "+-v+"px "+-S+"px",threshold:Ms(0,Cl(1,l))||1};let I=!0;function A(M){const L=M[0].intersectionRatio;if(L!==l){if(!I)return a();L?a(!1,L):r=setTimeout(()=>{a(!1,1e-7)},1e3)}L===1&&!a_(c,e.getBoundingClientRect())&&a(),I=!1}try{n=new IntersectionObserver(A,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(A,_)}n.observe(e)}return a(!0),o}function mW(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=f2(e),f=s||o?[...c?Bh(c):[],...Bh(t)]:[];f.forEach(S=>{s&&S.addEventListener("scroll",n,{passive:!0}),o&&S.addEventListener("resize",n)});const h=c&&i?pW(c,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(S=>{let[N]=S;N&&N.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(t)})),n()}),c&&!l&&g.observe(c),g.observe(t));let y,x=l?zu(e):null;l&&v();function v(){const S=zu(e);x&&!a_(x,S)&&n(),x=S,y=requestAnimationFrame(v)}return n(),()=>{var S;f.forEach(N=>{s&&N.removeEventListener("scroll",n),o&&N.removeEventListener("resize",n)}),h?.(),(S=g)==null||S.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const gW=j7,yW=U7,vW=L7,xW=V7,wW=M7,yT=F7,bW=W7,SW=(e,t,n)=>{const r=new Map,s={platform:hW,...n},o={...s.platform,_c:r};return D7(e,t,{...s,platform:o})};var CW=typeof document<"u",EW=function(){},Tg=CW?T.useLayoutEffect:EW;function Jg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Jg(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Jg(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function i_(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function vT(e,t){const n=i_(e);return Math.round(t*n)/n}function ex(e){const t=T.useRef(e);return Tg(()=>{t.current=e}),t}function NW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:i=!0,whileElementsMounted:l,open:c}=e,[f,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=T.useState(r);Jg(p,r)||g(r);const[y,x]=T.useState(null),[v,S]=T.useState(null),N=T.useCallback(te=>{te!==M.current&&(M.current=te,x(te))},[]),_=T.useCallback(te=>{te!==L.current&&(L.current=te,S(te))},[]),I=o||y,A=a||v,M=T.useRef(null),L=T.useRef(null),W=T.useRef(f),j=l!=null,U=ex(l),P=ex(s),X=ex(c),ae=T.useCallback(()=>{if(!M.current||!L.current)return;const te={placement:t,strategy:n,middleware:p};P.current&&(te.platform=P.current),SW(M.current,L.current,te).then(oe=>{const pe={...oe,isPositioned:X.current!==!1};ee.current&&!Jg(W.current,pe)&&(W.current=pe,Zd.flushSync(()=>{h(pe)}))})},[p,t,n,P,X]);Tg(()=>{c===!1&&W.current.isPositioned&&(W.current.isPositioned=!1,h(te=>({...te,isPositioned:!1})))},[c]);const ee=T.useRef(!1);Tg(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Tg(()=>{if(I&&(M.current=I),A&&(L.current=A),I&&A){if(U.current)return U.current(I,A,ae);ae()}},[I,A,ae,U,j]);const ie=T.useMemo(()=>({reference:M,floating:L,setReference:N,setFloating:_}),[N,_]),le=T.useMemo(()=>({reference:I,floating:A}),[I,A]),we=T.useMemo(()=>{const te={position:n,left:0,top:0};if(!le.floating)return te;const oe=vT(le.floating,f.x),pe=vT(le.floating,f.y);return i?{...te,transform:"translate("+oe+"px, "+pe+"px)",...i_(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:oe,top:pe}},[n,i,le.floating,f.x,f.y]);return T.useMemo(()=>({...f,update:ae,refs:ie,elements:le,floatingStyles:we}),[f,ae,ie,le,we])}const TW=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?yT({element:r.current,padding:s}).fn(n):{}:r?yT({element:r,padding:s}).fn(n):{}}}},kW=(e,t)=>({...gW(e),options:[e,t]}),$W=(e,t)=>({...yW(e),options:[e,t]}),_W=(e,t)=>({...bW(e),options:[e,t]}),RW=(e,t)=>({...vW(e),options:[e,t]}),IW=(e,t)=>({...xW(e),options:[e,t]}),OW=(e,t)=>({...wW(e),options:[e,t]}),AW=(e,t)=>({...TW(e),options:[e,t]});var PW="Arrow",l_=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return C.jsx(ot.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});l_.displayName=PW;var DW=l_;function h2(e){const[t,n]=T.useState(void 0);return jn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,i;if("borderBoxSize"in o){const l=o.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,i=c.blockSize}else a=e.offsetWidth,i=e.offsetHeight;n({width:a,height:i})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var p2="Popper",[u_,rf]=Fa(p2),[FW,c_]=u_(p2),d_=e=>{const{__scopePopper:t,children:n}=e,[r,s]=T.useState(null);return C.jsx(FW,{scope:t,anchor:r,onAnchorChange:s,children:n})};d_.displayName=p2;var f_="PopperAnchor",h_=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=c_(f_,n),a=T.useRef(null),i=Mt(t,a),l=T.useRef(null);return T.useEffect(()=>{const c=l.current;l.current=r?.current||a.current,c!==l.current&&o.onAnchorChange(l.current)}),r?null:C.jsx(ot.div,{...s,ref:i})});h_.displayName=f_;var m2="PopperContent",[LW,MW]=u_(m2),p_=T.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:i=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...x}=e,v=c_(m2,n),[S,N]=T.useState(null),_=Mt(t,ye=>N(ye)),[I,A]=T.useState(null),M=h2(I),L=M?.width??0,W=M?.height??0,j=r+(o!=="center"?"-"+o:""),U=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},P=Array.isArray(c)?c:[c],X=P.length>0,ae={padding:U,boundary:P.filter(jW),altBoundary:X},{refs:ee,floatingStyles:ie,placement:le,isPositioned:we,middlewareData:te}=NW({strategy:"fixed",placement:j,whileElementsMounted:(...ye)=>mW(...ye,{animationFrame:g==="always"}),elements:{reference:v.anchor},middleware:[kW({mainAxis:s+W,alignmentAxis:a}),l&&$W({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?_W():void 0,...ae}),l&&RW({...ae}),IW({...ae,apply:({elements:ye,rects:Ee,availableWidth:ke,availableHeight:De})=>{const{width:Ze,height:ht}=Ee.reference,dt=ye.floating.style;dt.setProperty("--radix-popper-available-width",`${ke}px`),dt.setProperty("--radix-popper-available-height",`${De}px`),dt.setProperty("--radix-popper-anchor-width",`${Ze}px`),dt.setProperty("--radix-popper-anchor-height",`${ht}px`)}}),I&&AW({element:I,padding:i}),UW({arrowWidth:L,arrowHeight:W}),p&&OW({strategy:"referenceHidden",...ae})]}),[oe,pe]=y_(le),Y=wo(y);jn(()=>{we&&Y?.()},[we,Y]);const G=te.arrow?.x,re=te.arrow?.y,ce=te.arrow?.centerOffset!==0,[xe,Ce]=T.useState();return jn(()=>{S&&Ce(window.getComputedStyle(S).zIndex)},[S]),C.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:we?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:xe,"--radix-popper-transform-origin":[te.transformOrigin?.x,te.transformOrigin?.y].join(" "),...te.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:C.jsx(LW,{scope:n,placedSide:oe,onArrowChange:A,arrowX:G,arrowY:re,shouldHideArrow:ce,children:C.jsx(ot.div,{"data-side":oe,"data-align":pe,...x,ref:_,style:{...x.style,animation:we?void 0:"none"}})})})});p_.displayName=m2;var m_="PopperArrow",BW={top:"bottom",right:"left",bottom:"top",left:"right"},g_=T.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=MW(m_,r),a=BW[o.placedSide];return C.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:C.jsx(DW,{...s,ref:n,style:{...s.style,display:"block"}})})});g_.displayName=m_;function jW(e){return e!==null}var UW=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,a=s.arrow?.centerOffset!==0,i=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[c,f]=y_(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(s.arrow?.x??0)+i/2,g=(s.arrow?.y??0)+l/2;let y="",x="";return c==="bottom"?(y=a?h:`${p}px`,x=`${-l}px`):c==="top"?(y=a?h:`${p}px`,x=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,x=a?h:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,x=a?h:`${g}px`),{data:{x:y,y:x}}}});function y_(e){const[t,n="center"]=e.split("-");return[t,n]}var v_=d_,jy=h_,g2=p_,y2=g_,[Uy]=Fa("Tooltip",[rf]),x2=rf(),x_="TooltipProvider",WW=700,xT="tooltip.open",[VW,w_]=Uy(x_),b_=e=>{const{__scopeTooltip:t,delayDuration:n=WW,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,a=T.useRef(!0),i=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),C.jsx(VW,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:i,onPointerInTransitChange:T.useCallback(c=>{i.current=c},[]),disableHoverableContent:s,children:o})};b_.displayName=x_;var S_="Tooltip",[eSe,Wy]=Uy(S_),dw="TooltipTrigger",zW=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Wy(dw,n),o=w_(dw,n),a=x2(n),i=T.useRef(null),l=Mt(t,i,s.onTriggerChange),c=T.useRef(!1),f=T.useRef(!1),h=T.useCallback(()=>c.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),C.jsx(jy,{asChild:!0,...a,children:C.jsx(ot.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:it(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:it(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:it(e.onPointerDown,()=>{s.open&&s.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:it(e.onFocus,()=>{c.current||s.onOpen()}),onBlur:it(e.onBlur,s.onClose),onClick:it(e.onClick,s.onClose)})})});zW.displayName=dw;var GW="TooltipPortal",[tSe,HW]=Uy(GW,{forceMount:void 0}),_d="TooltipContent",C_=T.forwardRef((e,t)=>{const n=HW(_d,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,a=Wy(_d,e.__scopeTooltip);return C.jsx(Ei,{present:r||a.open,children:a.disableHoverableContent?C.jsx(E_,{side:s,...o,ref:t}):C.jsx(qW,{side:s,...o,ref:t})})}),qW=T.forwardRef((e,t)=>{const n=Wy(_d,e.__scopeTooltip),r=w_(_d,e.__scopeTooltip),s=T.useRef(null),o=Mt(t,s),[a,i]=T.useState(null),{trigger:l,onClose:c}=n,f=s.current,{onPointerInTransitChange:h}=r,p=T.useCallback(()=>{i(null),h(!1)},[h]),g=T.useCallback((y,x)=>{const v=y.currentTarget,S={x:y.clientX,y:y.clientY},N=ZW(S,v.getBoundingClientRect()),_=JW(S,N),I=e9(x.getBoundingClientRect()),A=n9([..._,...I]);i(A),h(!0)},[h]);return T.useEffect(()=>()=>p(),[p]),T.useEffect(()=>{if(l&&f){const y=v=>g(v,f),x=v=>g(v,l);return l.addEventListener("pointerleave",y),f.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",y),f.removeEventListener("pointerleave",x)}}},[l,f,g,p]),T.useEffect(()=>{if(a){const y=x=>{const v=x.target,S={x:x.clientX,y:x.clientY},N=l?.contains(v)||f?.contains(v),_=!t9(S,a);N?p():_&&(p(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,f,a,c,p]),C.jsx(E_,{...e,ref:o})}),[KW,XW]=Uy(S_,{isInside:!1}),YW=Hj("TooltipContent"),E_=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...i}=e,l=Wy(_d,n),c=x2(n),{onClose:f}=l;return T.useEffect(()=>(document.addEventListener(xT,f),()=>document.removeEventListener(xT,f)),[f]),T.useEffect(()=>{if(l.trigger){const h=p=>{p.target?.contains(l.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,f]),C.jsx(Jd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:C.jsxs(g2,{"data-state":l.stateAttribute,...c,...i,ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx(YW,{children:r}),C.jsx(KW,{scope:n,isInside:!0,children:C.jsx(p8,{id:l.contentId,role:"tooltip",children:s||r})})]})})});C_.displayName=_d;var N_="TooltipArrow",QW=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=x2(n);return XW(N_,n).isInside?null:C.jsx(y2,{...s,...r,ref:t})});QW.displayName=N_;function ZW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function JW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function e9(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function t9(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const i=t[o],l=t[a],c=i.x,f=i.y,h=l.x,p=l.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(s=!s)}return s}function n9(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),r9(t)}function r9(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var s9=b_,T_=C_;const o9=s9,a9=T.forwardRef(({className:e,sideOffset:t=4,...n},r)=>C.jsx(T_,{ref:r,sideOffset:t,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));a9.displayName=T_.displayName;var mp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},i9={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},l9=class{#e=i9;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},_u=new l9;function u9(e){setTimeout(e,0)}var Gu=typeof window>"u"||"Deno"in globalThis;function vs(){}function c9(e,t){return typeof e=="function"?e(t):e}function fw(e){return typeof e=="number"&&e>=0&&e!==1/0}function k_(e,t){return Math.max(e+(t||0)-Date.now(),0)}function hl(e,t){return typeof e=="function"?e(t):e}function go(e,t){return typeof e=="function"?e(t):e}function wT(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:i}=e;if(a){if(r){if(t.queryHash!==w2(a,t.options))return!1}else if(!Uh(t.queryKey,a))return!1}if(n!=="all"){const l=t.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof i=="boolean"&&t.isStale()!==i||s&&s!==t.state.fetchStatus||o&&!o(t))}function bT(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(jh(t.options.mutationKey)!==jh(o))return!1}else if(!Uh(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function w2(e,t){return(t?.queryKeyHashFn||jh)(e)}function jh(e){return JSON.stringify(e,(t,n)=>pw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Uh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Uh(e[n],t[n])):!1}var d9=Object.prototype.hasOwnProperty;function $_(e,t){if(e===t)return e;const n=ST(e)&&ST(t);if(!n&&!(pw(e)&&pw(t)))return t;const s=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),a=o.length,i=n?new Array(a):{};let l=0;for(let c=0;c<a;c++){const f=n?c:o[c],h=e[f],p=t[f];if(h===p){i[f]=h,(n?c<s:d9.call(e,f))&&l++;continue}if(h===null||p===null||typeof h!="object"||typeof p!="object"){i[f]=p;continue}const g=$_(h,p);i[f]=g,g===h&&l++}return s===a&&l===s?e:i}function hw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function ST(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pw(e){if(!CT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!CT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function CT(e){return Object.prototype.toString.call(e)==="[object Object]"}function f9(e){return new Promise(t=>{_u.setTimeout(t,e)})}function mw(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?$_(e,t):t}function h9(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function p9(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var b2=Symbol();function __(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===b2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function m9(e,t){return typeof e=="function"?e(...t):!!e}var g9=class extends mp{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!Gu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},S2=new g9;function gw(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}var y9=u9;function v9(){let e=[],t=0,n=i=>{i()},r=i=>{i()},s=y9;const o=i=>{t?e.push(i):s(()=>{n(i)})},a=()=>{const i=e;e=[],i.length&&s(()=>{r(()=>{i.forEach(l=>{n(l)})})})};return{batch:i=>{let l;t++;try{l=i()}finally{t--,t||a()}return l},batchCalls:i=>(...l)=>{o(()=>{i(...l)})},schedule:o,setNotifyFunction:i=>{n=i},setBatchNotifyFunction:i=>{r=i},setScheduler:i=>{s=i}}}var mr=v9(),x9=class extends mp{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!Gu&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},ey=new x9;function w9(e){return Math.min(1e3*2**e,3e4)}function R_(e){return(e??"online")==="online"?ey.isOnline():!0}var yw=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function I_(e){let t=!1,n=0,r;const s=gw(),o=()=>s.status!=="pending",a=x=>{if(!o()){const v=new yw(x);p(v),e.onCancel?.(v)}},i=()=>{t=!0},l=()=>{t=!1},c=()=>S2.isFocused()&&(e.networkMode==="always"||ey.isOnline())&&e.canRun(),f=()=>R_(e.networkMode)&&e.canRun(),h=x=>{o()||(r?.(),s.resolve(x))},p=x=>{o()||(r?.(),s.reject(x))},g=()=>new Promise(x=>{r=v=>{(o()||c())&&x(v)},e.onPause?.()}).then(()=>{r=void 0,o()||e.onContinue?.()}),y=()=>{if(o())return;let x;const v=n===0?e.initialPromise:void 0;try{x=v??e.fn()}catch(S){x=Promise.reject(S)}Promise.resolve(x).then(h).catch(S=>{if(o())return;const N=e.retry??(Gu?0:3),_=e.retryDelay??w9,I=typeof _=="function"?_(n,S):_,A=N===!0||typeof N=="number"&&n<N||typeof N=="function"&&N(n,S);if(t||!A){p(S);return}n++,e.onFail?.(n,S),f9(I).then(()=>c()?void 0:g()).then(()=>{t?p(S):y()})})};return{promise:s,status:()=>s.status,cancel:a,continue:()=>(r?.(),s),cancelRetry:i,continueRetry:l,canStart:f,start:()=>(f()?y():g().then(y),s)}}var O_=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fw(this.gcTime)&&(this.#e=_u.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Gu?1/0:300*1e3))}clearGcTimeout(){this.#e&&(_u.clearTimeout(this.#e),this.#e=void 0)}},b9=class extends O_{#e;#t;#n;#s;#r;#i;#a;constructor(e){super(),this.#a=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#n=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=ET(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=ET(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=mw(this.state.data,e,this.options);return this.#o({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#o({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#r?.promise;return this.#r?.cancel(e),t?t.then(vs).catch(vs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>go(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===b2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>hl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!k_(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(e&&this.setOptions(e),!this.options.queryFn){const i=this.observers.find(l=>l.options.queryFn);i&&this.setOptions(i.options)}const n=new AbortController,r=i=>{Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},s=()=>{const i=__(this.options,t),c=(()=>{const f={client:this.#s,queryKey:this.queryKey,meta:this.meta};return r(f),f})();return this.#a=!1,this.options.persister?this.options.persister(i,c,this):i(c)},a=(()=>{const i={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return r(i),i})();this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#o({type:"fetch",meta:a.fetchOptions?.meta}),this.#r=I_({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:i=>{i instanceof yw&&i.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(i,l)=>{this.#o({type:"failed",failureCount:i,error:l})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const i=await this.#r.start();if(i===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(i),this.#n.config.onSuccess?.(i,this),this.#n.config.onSettled?.(i,this.state.error,this),i}catch(i){if(i instanceof yw){if(i.silent)return this.#r.promise;if(i.revert){if(this.state.data===void 0)throw i;return this.state.data}}throw this.#o({type:"error",error:i}),this.#n.config.onError?.(i,this),this.#n.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#o(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...A_(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),mr.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function A_(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:R_(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ET(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var S9=class extends mp{constructor(e,t){super(),this.options=t,this.#e=e,this.#o=null,this.#a=gw(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#i;#a;#o;#m;#f;#h;#u;#c;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),NT(this.#t,this.options)?this.#d():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return vw(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return vw(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#b(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof go(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!hw(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&TT(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),r&&(this.#t!==n||go(this.options.enabled,this.#t)!==go(t.enabled,this.#t)||hl(this.options.staleTime,this.#t)!==hl(t.staleTime,this.#t))&&this.#g();const s=this.#y();r&&(this.#t!==n||go(this.options.enabled,this.#t)!==go(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return E9(this,n)&&(this.#s=n,this.#i=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(vs)),t}#g(){this.#w();const e=hl(this.options.staleTime,this.#t);if(Gu||this.#s.isStale||!fw(e))return;const n=k_(this.#s.dataUpdatedAt,e)+1;this.#u=_u.setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#b(),this.#l=e,!(Gu||go(this.options.enabled,this.#t)===!1||!fw(this.#l)||this.#l===0)&&(this.#c=_u.setInterval(()=>{(this.options.refetchIntervalInBackground||S2.isFocused())&&this.#d()},this.#l))}#x(){this.#g(),this.#v(this.#y())}#w(){this.#u&&(_u.clearTimeout(this.#u),this.#u=void 0)}#b(){this.#c&&(_u.clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#s,o=this.#r,a=this.#i,l=e!==n?e.state:this.#n,{state:c}=e;let f={...c},h=!1,p;if(t._optimisticResults){const W=this.hasListeners(),j=!W&&NT(e,t),U=W&&TT(e,n,t,r);(j||U)&&(f={...f,...A_(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:y,status:x}=f;p=f.data;let v=!1;if(t.placeholderData!==void 0&&p===void 0&&x==="pending"){let W;s?.isPlaceholderData&&t.placeholderData===a?.placeholderData?(W=s.data,v=!0):W=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,W!==void 0&&(x="success",p=mw(s?.data,W,t),h=!0)}if(t.select&&p!==void 0&&!v)if(s&&p===o?.data&&t.select===this.#m)p=this.#f;else try{this.#m=t.select,p=t.select(p),p=mw(s?.data,p,t),this.#f=p,this.#o=null}catch(W){this.#o=W}this.#o&&(g=this.#o,p=this.#f,y=Date.now(),x="error");const S=f.fetchStatus==="fetching",N=x==="pending",_=x==="error",I=N&&S,A=p!==void 0,L={status:x,fetchStatus:f.fetchStatus,isPending:N,isSuccess:x==="success",isError:_,isInitialLoading:I,isLoading:I,data:p,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:S,isRefetching:S&&!N,isLoadingError:_&&!A,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&A,isStale:C2(e,t),refetch:this.refetch,promise:this.#a,isEnabled:go(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const W=P=>{L.status==="error"?P.reject(L.error):L.data!==void 0&&P.resolve(L.data)},j=()=>{const P=this.#a=L.promise=gw();W(P)},U=this.#a;switch(U.status){case"pending":e.queryHash===n.queryHash&&W(U);break;case"fulfilled":(L.status==="error"||L.data!==U.value)&&j();break;case"rejected":(L.status!=="error"||L.error!==U.reason)&&j();break}}return L}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#h=this.#t),hw(t,e))return;this.#s=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const o=new Set(s??this.#p);return this.options.throwOnError&&o.add("error"),Object.keys(this.#s).some(a=>{const i=a;return this.#s[i]!==e[i]&&o.has(i)})};this.#C({listeners:n()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#C(e){mr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function C9(e,t){return go(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function NT(e,t){return C9(e,t)||e.state.data!==void 0&&vw(e,t,t.refetchOnMount)}function vw(e,t,n){if(go(t.enabled,e)!==!1&&hl(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&C2(e,t)}return!1}function TT(e,t,n,r){return(e!==t||go(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&C2(e,n)}function C2(e,t){return go(t.enabled,e)!==!1&&e.isStaleByTime(hl(t.staleTime,e))}function E9(e,t){return!hw(e.getCurrentResult(),t)}function kT(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let i={pages:[],pageParams:[]},l=0;const c=async()=>{let f=!1;const h=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?f=!0:t.signal.addEventListener("abort",()=>{f=!0}),t.signal)})},p=__(t.options,t.fetchOptions),g=async(y,x,v)=>{if(f)return Promise.reject();if(x==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:x,direction:v?"backward":"forward",meta:t.options.meta};return h(M),M})(),_=await p(N),{maxPages:I}=t.options,A=v?p9:h9;return{pages:A(y.pages,_,I),pageParams:A(y.pageParams,x,I)}};if(s&&o.length){const y=s==="backward",x=y?N9:$T,v={pages:o,pageParams:a},S=x(r,v);i=await g(v,S,y)}else{const y=e??o.length;do{const x=l===0?a[0]??r.initialPageParam:$T(r,i);if(l>0&&x==null)break;i=await g(i,x),l++}while(l<y)}return i};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function $T(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function N9(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var T9=class extends O_{#e;#t;#n;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||k9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=I_({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(o,a)=>{this.#r({type:"failed",failureCount:o,error:a})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#s.canStart();try{if(r)t();else{this.#r({type:"pending",variables:e,isPaused:s}),await this.#n.config.onMutate?.(e,this,n);const a=await this.options.onMutate?.(e,n);a!==this.state.context&&this.#r({type:"pending",context:a,variables:e,isPaused:s})}const o=await this.#s.start();return await this.#n.config.onSuccess?.(o,e,this.state.context,this,n),await this.options.onSuccess?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(o,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(o,null,e,this.state.context,n),this.#r({type:"success",data:o}),o}catch(o){try{throw await this.#n.config.onError?.(o,e,this.state.context,this,n),await this.options.onError?.(o,e,this.state.context,n),await this.#n.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,o,e,this.state.context,n),o}finally{this.#r({type:"error",error:o})}}finally{this.#n.runNext(this)}}#r(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),mr.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function k9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $9=class extends mp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new T9({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=Jm(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Jm(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Jm(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Jm(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){mr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>bT(t,n))}findAll(e={}){return this.getAll().filter(t=>bT(e,t))}notify(e){mr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return mr.batch(()=>Promise.all(e.map(t=>t.continue().catch(vs))))}};function Jm(e){return e.options.scope?.id}var _9=class extends mp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??w2(r,t);let o=this.get(s);return o||(o=new b9({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>wT(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>wT(e,n)):t}notify(e){mr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){mr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},R9=class{#e;#t;#n;#s;#r;#i;#a;#o;constructor(e={}){this.#e=e.queryCache||new _9,this.#t=e.mutationCache||new $9,this.#n=e.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#a=S2.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=ey.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#e.build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(hl(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(r.queryHash)?.state.data,a=c9(t,o);if(a!==void 0)return this.#e.build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return mr.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;mr.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e;return mr.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=mr.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(vs).catch(vs)}invalidateQueries(e,t={}){return mr.batch(()=>(this.#e.findAll(e).forEach(n=>{n.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=mr.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(vs)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(vs)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(hl(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vs).catch(vs)}fetchInfiniteQuery(e){return e.behavior=kT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vs).catch(vs)}ensureInfiniteQueryData(e){return e.behavior=kT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ey.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,t){this.#s.set(jh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],n={};return t.forEach(r=>{Uh(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){this.#r.set(jh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#r.values()],n={};return t.forEach(r=>{Uh(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=w2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===b2&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},P_=T.createContext(void 0),I9=e=>{const t=T.useContext(P_);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},O9=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),C.jsx(P_.Provider,{value:e,children:t})),D_=T.createContext(!1),A9=()=>T.useContext(D_);D_.Provider;function P9(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var D9=T.createContext(P9()),F9=()=>T.useContext(D9),L9=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},M9=e=>{T.useEffect(()=>{e.clearReset()},[e])},B9=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(s&&e.data===void 0||m9(n,[e.error,r])),j9=e=>{if(e.suspense){const n=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>n(r(...s)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},U9=(e,t)=>e.isLoading&&e.isFetching&&!t,W9=(e,t)=>e?.suspense&&t.isPending,_T=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function V9(e,t,n){const r=A9(),s=F9(),o=I9(),a=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",j9(a),L9(a,s),M9(s);const i=!o.getQueryCache().get(a.queryHash),[l]=T.useState(()=>new t(o,a)),c=l.getOptimisticResult(a),f=!r&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(h=>{const p=f?l.subscribe(mr.batchCalls(h)):vs;return l.updateResult(),p},[l,f]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),T.useEffect(()=>{l.setOptions(a)},[a,l]),W9(a,c))throw _T(a,l,s);if(B9({result:c,errorResetBoundary:s,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw c.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(a,c),a.experimental_prefetchInRender&&!Gu&&U9(c,r)&&(i?_T(a,l,s):o.getQueryCache().get(a.queryHash)?.promise)?.catch(vs).finally(()=>{l.updateResult()}),a.notifyOnChangeProps?c:l.trackResult(c)}function z9(e,t){return V9(e,S9)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wh(){return Wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wh.apply(this,arguments)}var cl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(cl||(cl={}));const RT="popstate";function G9(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:a,hash:i}=r.location;return xw("",{pathname:o,search:a,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ty(s)}return q9(t,n,null,e)}function Mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F_(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function H9(){return Math.random().toString(36).substr(2,8)}function IT(e,t){return{usr:e.state,key:e.key,idx:t}}function xw(e,t,n,r){return n===void 0&&(n=null),Wh({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sf(t):t,{state:n,key:t&&t.key||r||H9()})}function ty(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function sf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function q9(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=cl.Pop,l=null,c=f();c==null&&(c=0,a.replaceState(Wh({},a.state,{idx:c}),""));function f(){return(a.state||{idx:null}).idx}function h(){i=cl.Pop;let v=f(),S=v==null?null:v-c;c=v,l&&l({action:i,location:x.location,delta:S})}function p(v,S){i=cl.Push;let N=xw(x.location,v,S);c=f()+1;let _=IT(N,c),I=x.createHref(N);try{a.pushState(_,"",I)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(I)}o&&l&&l({action:i,location:x.location,delta:1})}function g(v,S){i=cl.Replace;let N=xw(x.location,v,S);c=f();let _=IT(N,c),I=x.createHref(N);a.replaceState(_,"",I),o&&l&&l({action:i,location:x.location,delta:0})}function y(v){let S=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof v=="string"?v:ty(v);return N=N.replace(/ $/,"%20"),Mn(S,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,S)}let x={get action(){return i},get location(){return e(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(RT,h),l=v,()=>{s.removeEventListener(RT,h),l=null}},createHref(v){return t(s,v)},createURL:y,encodeLocation(v){let S=y(v);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:g,go(v){return a.go(v)}};return x}var OT;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(OT||(OT={}));function K9(e,t,n){return n===void 0&&(n="/"),X9(e,t,n)}function X9(e,t,n,r){let s=typeof t=="string"?sf(t):t,o=E2(s.pathname||"/",n);if(o==null)return null;let a=L_(e);Y9(a);let i=null;for(let l=0;i==null&&l<a.length;++l){let c=lV(o);i=oV(a[l],c)}return i}function L_(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let l={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};l.relativePath.startsWith("/")&&(Mn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=pl([r,l.relativePath]),f=n.concat(l);o.children&&o.children.length>0&&(Mn(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),L_(o.children,t,f,c)),!(o.path==null&&!o.index)&&t.push({path:c,score:rV(c,o.index),routesMeta:f})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let l of M_(o.path))s(o,a,l)}),t}function M_(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=M_(r.join("/")),i=[];return i.push(...a.map(l=>l===""?o:[o,l].join("/"))),s&&i.push(...a),i.map(l=>e.startsWith("/")&&l===""?"/":l)}function Y9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sV(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Q9=/^:[\w-]+$/,Z9=3,J9=2,eV=1,tV=10,nV=-2,AT=e=>e==="*";function rV(e,t){let n=e.split("/"),r=n.length;return n.some(AT)&&(r+=nV),t&&(r+=J9),n.filter(s=>!AT(s)).reduce((s,o)=>s+(Q9.test(o)?Z9:o===""?eV:tV),r)}function sV(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function oV(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let l=r[i],c=i===r.length-1,f=o==="/"?t:t.slice(o.length)||"/",h=aV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},f),p=l.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:pl([o,h.pathname]),pathnameBase:fV(pl([o,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(o=pl([o,h.pathnameBase]))}return a}function aV(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=iV(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((c,f,h)=>{let{paramName:p,isOptional:g}=f;if(p==="*"){let x=i[h]||"";a=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const y=i[h];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:e}}function iV(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),F_(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,l)=>(r.push({paramName:i,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function lV(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return F_(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function E2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function uV(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?sf(e):e;return{pathname:n?n.startsWith("/")?n:cV(n,t):t,search:hV(r),hash:pV(s)}}function cV(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function tx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dV(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function B_(e,t){let n=dV(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function j_(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=sf(e):(s=Wh({},e),Mn(!s.pathname||!s.pathname.includes("?"),tx("?","pathname","search",s)),Mn(!s.pathname||!s.pathname.includes("#"),tx("#","pathname","hash",s)),Mn(!s.search||!s.search.includes("#"),tx("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),h-=1;s.pathname=p.join("/")}i=h>=0?t[h]:"/"}let l=uV(s,i),c=a&&a!=="/"&&a.endsWith("/"),f=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||f)&&(l.pathname+="/"),l}const pl=e=>e.join("/").replace(/\/\/+/g,"/"),fV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mV(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const U_=["post","put","patch","delete"];new Set(U_);const gV=["get",...U_];new Set(gV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vh(){return Vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vh.apply(this,arguments)}const N2=T.createContext(null),yV=T.createContext(null),fc=T.createContext(null),Vy=T.createContext(null),Ol=T.createContext({outlet:null,matches:[],isDataRoute:!1}),W_=T.createContext(null);function vV(e,t){let{relative:n}=t===void 0?{}:t;gp()||Mn(!1);let{basename:r,navigator:s}=T.useContext(fc),{hash:o,pathname:a,search:i}=H_(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:pl([r,a])),s.createHref({pathname:l,search:i,hash:o})}function gp(){return T.useContext(Vy)!=null}function yp(){return gp()||Mn(!1),T.useContext(Vy).location}function V_(e){T.useContext(fc).static||T.useLayoutEffect(e)}function z_(){let{isDataRoute:e}=T.useContext(Ol);return e?IV():xV()}function xV(){gp()||Mn(!1);let e=T.useContext(N2),{basename:t,future:n,navigator:r}=T.useContext(fc),{matches:s}=T.useContext(Ol),{pathname:o}=yp(),a=JSON.stringify(B_(s,n.v7_relativeSplatPath)),i=T.useRef(!1);return V_(()=>{i.current=!0}),T.useCallback(function(c,f){if(f===void 0&&(f={}),!i.current)return;if(typeof c=="number"){r.go(c);return}let h=j_(c,JSON.parse(a),o,f.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:pl([t,h.pathname])),(f.replace?r.replace:r.push)(h,f.state,f)},[t,r,a,o,e])}function G_(){let{matches:e}=T.useContext(Ol),t=e[e.length-1];return t?t.params:{}}function H_(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=T.useContext(fc),{matches:s}=T.useContext(Ol),{pathname:o}=yp(),a=JSON.stringify(B_(s,r.v7_relativeSplatPath));return T.useMemo(()=>j_(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function wV(e,t){return bV(e,t)}function bV(e,t,n,r){gp()||Mn(!1);let{navigator:s}=T.useContext(fc),{matches:o}=T.useContext(Ol),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let c=yp(),f;if(t){var h;let v=typeof t=="string"?sf(t):t;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||Mn(!1),f=v}else f=c;let p=f.pathname||"/",g=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=K9(e,{pathname:g}),x=TV(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:pl([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:pl([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return t&&x?T.createElement(Vy.Provider,{value:{location:Vh({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:cl.Pop}},x):x}function SV(){let e=RV(),t=mV(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),n?T.createElement("pre",{style:s},n):null,null)}const CV=T.createElement(SV,null);class EV extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?T.createElement(Ol.Provider,{value:this.props.routeContext},T.createElement(W_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NV(e){let{routeContext:t,match:n,children:r}=e,s=T.useContext(N2);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),T.createElement(Ol.Provider,{value:t},r)}function TV(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let f=a.findIndex(h=>h.route.id&&i?.[h.route.id]!==void 0);f>=0||Mn(!1),a=a.slice(0,Math.min(a.length,f+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:p,errors:g}=n,y=h.route.loader&&p[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((f,h,p)=>{let g,y=!1,x=null,v=null;n&&(g=i&&h.route.id?i[h.route.id]:void 0,x=h.route.errorElement||CV,l&&(c<0&&p===0?(OV("route-fallback"),y=!0,v=null):c===p&&(y=!0,v=h.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,p+1)),N=()=>{let _;return g?_=x:y?_=v:h.route.Component?_=T.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=f,T.createElement(NV,{match:h,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?T.createElement(EV,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):N()},null)}var q_=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(q_||{}),K_=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(K_||{});function kV(e){let t=T.useContext(N2);return t||Mn(!1),t}function $V(e){let t=T.useContext(yV);return t||Mn(!1),t}function _V(e){let t=T.useContext(Ol);return t||Mn(!1),t}function X_(e){let t=_V(),n=t.matches[t.matches.length-1];return n.route.id||Mn(!1),n.route.id}function RV(){var e;let t=T.useContext(W_),n=$V(),r=X_();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function IV(){let{router:e}=kV(q_.UseNavigateStable),t=X_(K_.UseNavigateStable),n=T.useRef(!1);return V_(()=>{n.current=!0}),T.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Vh({fromRouteId:t},o)))},[e,t])}const PT={};function OV(e,t,n){PT[e]||(PT[e]=!0)}function AV(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function ol(e){Mn(!1)}function PV(e){let{basename:t="/",children:n=null,location:r,navigationType:s=cl.Pop,navigator:o,static:a=!1,future:i}=e;gp()&&Mn(!1);let l=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:l,navigator:o,static:a,future:Vh({v7_relativeSplatPath:!1},i)}),[l,i,o,a]);typeof r=="string"&&(r=sf(r));let{pathname:f="/",search:h="",hash:p="",state:g=null,key:y="default"}=r,x=T.useMemo(()=>{let v=E2(f,l);return v==null?null:{location:{pathname:v,search:h,hash:p,state:g,key:y},navigationType:s}},[l,f,h,p,g,y,s]);return x==null?null:T.createElement(fc.Provider,{value:c},T.createElement(Vy.Provider,{children:n,value:x}))}function DV(e){let{children:t,location:n}=e;return wV(ww(t),n)}new Promise(()=>{});function ww(e,t){t===void 0&&(t=[]);let n=[];return T.Children.forEach(e,(r,s)=>{if(!T.isValidElement(r))return;let o=[...t,s];if(r.type===T.Fragment){n.push.apply(n,ww(r.props.children,o));return}r.type!==ol&&Mn(!1),!r.props.index||!r.props.children||Mn(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=ww(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bw.apply(this,arguments)}function FV(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function LV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MV(e,t){return e.button===0&&(!t||t==="_self")&&!LV(e)}const BV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jV="6";try{window.__reactRouterVersion=jV}catch{}const UV="startTransition",DT=Qb[UV];function WV(e){let{basename:t,children:n,future:r,window:s}=e,o=T.useRef();o.current==null&&(o.current=G9({window:s,v5Compat:!0}));let a=o.current,[i,l]=T.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},f=T.useCallback(h=>{c&&DT?DT(()=>l(h)):l(h)},[l,c]);return T.useLayoutEffect(()=>a.listen(f),[a,f]),T.useEffect(()=>AV(r),[r]),T.createElement(PV,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const VV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vp=T.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:i,target:l,to:c,preventScrollReset:f,viewTransition:h}=t,p=FV(t,BV),{basename:g}=T.useContext(fc),y,x=!1;if(typeof c=="string"&&zV.test(c)&&(y=c,VV))try{let _=new URL(window.location.href),I=c.startsWith("//")?new URL(_.protocol+c):new URL(c),A=E2(I.pathname,g);I.origin===_.origin&&A!=null?c=A+I.search+I.hash:x=!0}catch{}let v=vV(c,{relative:s}),S=GV(c,{replace:a,state:i,target:l,preventScrollReset:f,relative:s,viewTransition:h});function N(_){r&&r(_),_.defaultPrevented||S(_)}return T.createElement("a",bw({},p,{href:y||v,onClick:x||o?r:N,ref:n,target:l}))});var FT;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(FT||(FT={}));var LT;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(LT||(LT={}));function GV(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}=t===void 0?{}:t,l=z_(),c=yp(),f=H_(e,{relative:a});return T.useCallback(h=>{if(MV(h,n)){h.preventDefault();let p=r!==void 0?r:ty(c)===ty(f);l(e,{replace:p,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[c,l,f,r,s,n,e,o,a,i])}function ny(){return C.jsx("header",{className:"w-full bg-white shadow-[0_4px_8px_0_rgba(0,0,0,0.10)] sticky top-0 z-50",children:C.jsx("div",{className:"flex items-center justify-end px-[120px] py-3 gap-[300px] bg-white backdrop-blur-[6px]",children:C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("div",{className:"w-px h-6 bg-neutral-40"}),C.jsx("div",{className:"flex items-end gap-[-12px]",children:C.jsx("img",{src:"https://api.builder.io/api/v1/image/assets/TEMP/e8a36fb1d9f45dae7cb3c58860fad5ef79c0d4c5?width=56",alt:"User Avatar",className:"w-7 h-7 rounded-full border border-neutral-40"})})]})})})}function HV(){const[e,t]=T.useState([]),[n,r]=T.useState(null),s=async()=>{try{const o=await fetch("/api/jobs");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const a=await o.json();t(a.data),a.data.length>0&&r(a.data[0])}catch(o){console.error("Failed to fetch jobs:",o)}};return T.useEffect(()=>{s()},[]),e.length===0?C.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[C.jsx(ny,{}),C.jsx("main",{className:"flex-1 flex items-center justify-center",children:C.jsx("p",{children:"No jobs available."})})]}):C.jsxs("div",{className:"min-h-screen flex flex-col bg-white",children:[C.jsx(ny,{}),C.jsx("main",{className:"flex-1 container mx-auto px-4 py-10",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[C.jsx("div",{className:"md:col-span-1",children:C.jsx("div",{className:"flex flex-col gap-4",children:e.map(o=>C.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${n?.id===o.id?"border-blue-500 bg-blue-50":"border-neutral-200 hover:bg-neutral-50"}`,onClick:()=>r(o),children:C.jsxs("div",{className:"flex items-start gap-3",children:[C.jsx("img",{src:"/logo.svg",alt:o.company,className:"w-10 h-10 rounded border border-neutral-200"}),C.jsxs("div",{className:"flex-1",children:[C.jsx("h2",{className:"text-md font-bold text-neutral-900",children:o.title}),C.jsx("p",{className:"text-sm text-neutral-600",children:o.company}),C.jsx("div",{className:"mt-2 flex items-center gap-2 text-xs text-neutral-500",children:C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),C.jsx("span",{children:o.location})]})})]})]})},o.id))})}),C.jsx("div",{className:"md:col-span-2",children:n&&C.jsxs("div",{className:"border border-neutral-200 rounded-lg p-6",children:[C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx("img",{src:"/logo.svg",alt:n.company,className:"w-12 h-12 rounded border border-neutral-200"}),C.jsxs("div",{className:"flex-1",children:[C.jsxs("div",{className:"flex justify-between items-start",children:[C.jsxs("div",{children:[C.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:n.title}),C.jsx("p",{className:"text-md text-neutral-600",children:n.company})]}),C.jsx(vp,{to:`/apply/${n.id}`,className:"inline-flex items-center justify-center px-4 py-2 text-sm font-bold text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Apply"})]}),C.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-neutral-500",children:[C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),C.jsx("span",{children:n.location})]}),C.jsxs("div",{className:"flex items-center gap-1",children:[C.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"})}),C.jsxs("span",{children:[n.currency," ",n.salaryMin," - ",n.salaryMax]})]}),C.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:n.jobType})]})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Job Description"}),C.jsx("p",{className:"mt-2 text-sm text-neutral-700 whitespace-pre-line",children:n.description})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Requirements"}),C.jsx("p",{className:"mt-2 text-sm text-neutral-700 whitespace-pre-line",children:n.requirements})]})]})})]})})]})}const Y_=6048e5,qV=864e5,Q_=6e4,Z_=36e5,MT=Symbol.for("constructDateFrom");function _n(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&MT in e?e[MT](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ut(e,t){return _n(t||e,e)}function J_(e,t,n){const r=Ut(e,n?.in);return isNaN(t)?_n(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function zh(e,t,n){const r=Ut(e,n?.in);if(isNaN(t))return _n(e,NaN);if(!t)return r;const s=r.getDate(),o=_n(e,r.getTime());o.setMonth(r.getMonth()+t+1,0);const a=o.getDate();return s>=a?o:(r.setFullYear(o.getFullYear(),o.getMonth(),s),r)}let KV={};function xp(){return KV}function Rd(e,t){const n=xp(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ut(e,t?.in),o=s.getDay(),a=(o<r?7:0)+o-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Gh(e,t){return Rd(e,{...t,weekStartsOn:1})}function eR(e,t){const n=Ut(e,t?.in),r=n.getFullYear(),s=_n(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const o=Gh(s),a=_n(n,0);a.setFullYear(r,0,4),a.setHours(0,0,0,0);const i=Gh(a);return n.getTime()>=o.getTime()?r+1:n.getTime()>=i.getTime()?r:r-1}function BT(e){const t=Ut(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function of(e,...t){const n=_n.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function Id(e,t){const n=Ut(e,t?.in);return n.setHours(0,0,0,0),n}function tR(e,t,n){const[r,s]=of(n?.in,e,t),o=Id(r),a=Id(s),i=+o-BT(o),l=+a-BT(a);return Math.round((i-l)/qV)}function XV(e,t){const n=eR(e,t),r=_n(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Gh(r)}function YV(e,t,n){return J_(e,t*7,n)}function nR(e,t,n){return zh(e,t*12,n)}function QV(e,t){let n,r=t?.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=_n.bind(null,s));const o=Ut(s,r);(!n||n<o||isNaN(+o))&&(n=o)}),_n(r,n||NaN)}function ZV(e,t){let n,r=t?.in;return e.forEach(s=>{!r&&typeof s=="object"&&(r=_n.bind(null,s));const o=Ut(s,r);(!n||n>o||isNaN(+o))&&(n=o)}),_n(r,n||NaN)}function JV(e,t,n){const[r,s]=of(n?.in,e,t);return+Id(r)==+Id(s)}function rR(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function sR(e){return!(!rR(e)&&typeof e!="number"||isNaN(+Ut(e)))}function ez(e,t,n){const[r,s]=of(n?.in,e,t),o=r.getFullYear()-s.getFullYear(),a=r.getMonth()-s.getMonth();return o*12+a}function tz(e,t){const n=Ut(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function oR(e,t){const[n,r]=of(e,t.start,t.end);return{start:n,end:r}}function nz(e,t){const{start:n,end:r}=oR(t?.in,e);let s=+n>+r;const o=s?+n:+r,a=s?r:n;a.setHours(0,0,0,0),a.setDate(1);let i=1;const l=[];for(;+a<=o;)l.push(_n(n,a)),a.setMonth(a.getMonth()+i);return s?l.reverse():l}function rz(e,t){const n=Ut(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function sz(e,t){const n=Ut(e,t?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function aR(e,t){const n=Ut(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function oz(e,t){const{start:n,end:r}=oR(t?.in,e);let s=+n>+r;const o=s?+n:+r,a=s?r:n;a.setHours(0,0,0,0),a.setMonth(0,1);let i=1;const l=[];for(;+a<=o;)l.push(_n(n,a)),a.setFullYear(a.getFullYear()+i);return s?l.reverse():l}function iR(e,t){const n=xp(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Ut(e,t?.in),o=s.getDay(),a=(o<r?-7:0)+6-(o-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function az(e,t){return iR(e,{...t,weekStartsOn:1})}const iz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},lz=(e,t,n)=>{let r;const s=iz[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function nx(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const uz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dz={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fz={date:nx({formats:uz,defaultWidth:"full"}),time:nx({formats:cz,defaultWidth:"full"}),dateTime:nx({formats:dz,defaultWidth:"full"})},hz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pz=(e,t,n,r)=>hz[e];function hh(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):a;s=e.formattingValues[i]||e.formattingValues[a]}else{const a=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;s=e.values[i]||e.values[a]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const mz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},yz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},bz=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Sz={ordinalNumber:bz,era:hh({values:mz,defaultWidth:"wide"}),quarter:hh({values:gz,defaultWidth:"wide",argumentCallback:e=>e-1}),month:hh({values:yz,defaultWidth:"wide"}),day:hh({values:vz,defaultWidth:"wide"}),dayPeriod:hh({values:xz,defaultWidth:"wide",formattingValues:wz,defaultFormattingWidth:"wide"})};function ph(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const a=o[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?Ez(i,h=>h.test(a)):Cz(i,h=>h.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(a.length);return{value:c,rest:f}}}function Cz(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ez(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Nz(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const i=t.slice(s.length);return{value:a,rest:i}}}const Tz=/^(\d+)(th|st|nd|rd)?/i,kz=/\d+/i,$z={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_z={any:[/^b/i,/^(a|c)/i]},Rz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Iz={any:[/1/i,/2/i,/3/i,/4/i]},Oz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Az={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Dz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Lz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Mz={ordinalNumber:Nz({matchPattern:Tz,parsePattern:kz,valueCallback:e=>parseInt(e,10)}),era:ph({matchPatterns:$z,defaultMatchWidth:"wide",parsePatterns:_z,defaultParseWidth:"any"}),quarter:ph({matchPatterns:Rz,defaultMatchWidth:"wide",parsePatterns:Iz,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ph({matchPatterns:Oz,defaultMatchWidth:"wide",parsePatterns:Az,defaultParseWidth:"any"}),day:ph({matchPatterns:Pz,defaultMatchWidth:"wide",parsePatterns:Dz,defaultParseWidth:"any"}),dayPeriod:ph({matchPatterns:Fz,defaultMatchWidth:"any",parsePatterns:Lz,defaultParseWidth:"any"})},T2={code:"en-US",formatDistance:lz,formatLong:fz,formatRelative:pz,localize:Sz,match:Mz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bz(e,t){const n=Ut(e,t?.in);return tR(n,aR(n))+1}function lR(e,t){const n=Ut(e,t?.in),r=+Gh(n)-+XV(n);return Math.round(r/Y_)+1}function uR(e,t){const n=Ut(e,t?.in),r=n.getFullYear(),s=xp(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=_n(t?.in||e,0);a.setFullYear(r+1,0,o),a.setHours(0,0,0,0);const i=Rd(a,t),l=_n(t?.in||e,0);l.setFullYear(r,0,o),l.setHours(0,0,0,0);const c=Rd(l,t);return+n>=+i?r+1:+n>=+c?r:r-1}function jz(e,t){const n=xp(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=uR(e,t),o=_n(t?.in||e,0);return o.setFullYear(s,0,r),o.setHours(0,0,0,0),Rd(o,t)}function cR(e,t){const n=Ut(e,t?.in),r=+Rd(n,t)-+jz(n,t);return Math.round(r/Y_)+1}function Vt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const nl={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Vt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Vt(n+1,2)},d(e,t){return Vt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Vt(e.getHours()%12||12,t.length)},H(e,t){return Vt(e.getHours(),t.length)},m(e,t){return Vt(e.getMinutes(),t.length)},s(e,t){return Vt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return Vt(s,t.length)}},sd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return nl.y(e,t)},Y:function(e,t,n,r){const s=uR(e,r),o=s>0?s:1-s;if(t==="YY"){const a=o%100;return Vt(a,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):Vt(o,t.length)},R:function(e,t){const n=eR(e);return Vt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Vt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Vt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Vt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return nl.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Vt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=cR(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):Vt(s,t.length)},I:function(e,t,n){const r=lR(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Vt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):nl.d(e,t)},D:function(e,t,n){const r=Bz(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Vt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return Vt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),o=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return Vt(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Vt(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=sd.noon:r===0?s=sd.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=sd.evening:r>=12?s=sd.afternoon:r>=4?s=sd.morning:s=sd.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return nl.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):nl.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Vt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Vt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):nl.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):nl.s(e,t)},S:function(e,t){return nl.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return WT(r);case"XXXX":case"XX":return Su(r);case"XXXXX":case"XXX":default:return Su(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return WT(r);case"xxxx":case"xx":return Su(r);case"xxxxx":case"xxx":default:return Su(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+UT(r,":");case"OOOO":default:return"GMT"+Su(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+UT(r,":");case"zzzz":default:return"GMT"+Su(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return Vt(r,t.length)},T:function(e,t,n){return Vt(+e,t.length)}};function UT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),o=r%60;return o===0?n+String(s):n+String(s)+t+Vt(o,2)}function WT(e,t){return e%60===0?(e>0?"-":"+")+Vt(Math.abs(e)/60,2):Su(e,t)}function Su(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Vt(Math.trunc(r/60),2),o=Vt(r%60,2);return n+s+t+o}const VT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},dR=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Uz=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return VT(e,t);let o;switch(r){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",VT(r,t)).replace("{{time}}",dR(s,t))},Wz={p:dR,P:Uz},Vz=/^D+$/,zz=/^Y+$/,Gz=["D","DD","YY","YYYY"];function Hz(e){return Vz.test(e)}function qz(e){return zz.test(e)}function Kz(e,t,n){const r=Xz(e,t,n);if(console.warn(r),Gz.includes(e))throw new RangeError(r)}function Xz(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Yz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zz=/^'([^]*?)'?$/,Jz=/''/g,eG=/[a-zA-Z]/;function yi(e,t,n){const r=xp(),s=n?.locale??r.locale??T2,o=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Ut(e,n?.in);if(!sR(i))throw new RangeError("Invalid time value");let l=t.match(Qz).map(f=>{const h=f[0];if(h==="p"||h==="P"){const p=Wz[h];return p(f,s.formatLong)}return f}).join("").match(Yz).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const h=f[0];if(h==="'")return{isToken:!1,value:tG(f)};if(jT[h])return{isToken:!0,value:f};if(h.match(eG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:f}});s.localize.preprocessor&&(l=s.localize.preprocessor(i,l));const c={firstWeekContainsDate:o,weekStartsOn:a,locale:s};return l.map(f=>{if(!f.isToken)return f.value;const h=f.value;(!n?.useAdditionalWeekYearTokens&&qz(h)||!n?.useAdditionalDayOfYearTokens&&Hz(h))&&Kz(h,t,String(e));const p=jT[h[0]];return p(i,h,s.localize,c)}).join("")}function tG(e){const t=e.match(Zz);return t?t[1].replace(Jz,"'"):e}function nG(e,t){const n=Ut(e,t?.in),r=n.getFullYear(),s=n.getMonth(),o=_n(n,0);return o.setFullYear(r,s+1,0),o.setHours(0,0,0,0),o.getDate()}function rG(e,t){return Ut(e,t?.in).getMonth()}function sG(e,t){return Ut(e,t?.in).getFullYear()}function fR(e,t){return+Ut(e)>+Ut(t)}function hR(e,t){return+Ut(e)<+Ut(t)}function oG(e,t,n){const[r,s]=of(n?.in,e,t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function aG(e,t,n){const[r,s]=of(n?.in,e,t);return r.getFullYear()===s.getFullYear()}function iG(e,t){const n=()=>_n(t?.in,NaN),s=dG(e);let o;if(s.date){const c=fG(s.date,2);o=hG(c.restDateString,c.year)}if(!o||isNaN(+o))return n();const a=+o;let i=0,l;if(s.time&&(i=pG(s.time),isNaN(i)))return n();if(s.timezone){if(l=mG(s.timezone),isNaN(l))return n()}else{const c=new Date(a+i),f=Ut(0,t?.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Ut(a+i+l,t?.in)}const eg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},lG=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uG=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cG=/^([+-])(\d{2})(?::?(\d{2}))?$/;function dG(e){const t={},n=e.split(eg.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],eg.timeZoneDelimiter.test(t.date)&&(t.date=e.split(eg.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=eg.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function fG(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?s:o*100,restDateString:e.slice((r[1]||r[2]).length)}}function hG(e,t){if(t===null)return new Date(NaN);const n=e.match(lG);if(!n)return new Date(NaN);const r=!!n[4],s=mh(n[1]),o=mh(n[2])-1,a=mh(n[3]),i=mh(n[4]),l=mh(n[5])-1;if(r)return wG(t,i,l)?gG(t,i,l):new Date(NaN);{const c=new Date(0);return!vG(t,o,a)||!xG(t,s)?new Date(NaN):(c.setUTCFullYear(t,o,Math.max(s,a)),c)}}function mh(e){return e?parseInt(e):1}function pG(e){const t=e.match(uG);if(!t)return NaN;const n=rx(t[1]),r=rx(t[2]),s=rx(t[3]);return bG(n,r,s)?n*Z_+r*Q_+s*1e3:NaN}function rx(e){return e&&parseFloat(e.replace(",","."))||0}function mG(e){if(e==="Z")return 0;const t=e.match(cG);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return SG(r,s)?n*(r*Z_+s*Q_):NaN}function gG(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,o=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+o),r}const yG=[31,null,31,30,31,30,31,31,30,31,30,31];function pR(e){return e%400===0||e%4===0&&e%100!==0}function vG(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(yG[t]||(pR(e)?29:28))}function xG(e,t){return t>=1&&t<=(pR(e)?366:365)}function wG(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function bG(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function SG(e,t){return t>=0&&t<=59}function CG(e,t,n){const r=Ut(e,n?.in),s=r.getFullYear(),o=r.getDate(),a=_n(e,0);a.setFullYear(s,t,15),a.setHours(0,0,0,0);const i=nG(a);return r.setMonth(t,Math.min(o,i)),r}function EG(e,t,n){const r=Ut(e,n?.in);return isNaN(+r)?_n(e,NaN):(r.setFullYear(t),r)}function zT(e,t,n){return zh(e,-t,n)}function NG(e,t,n){return nR(e,-16,n)}var sx="focusScope.autoFocusOnMount",ox="focusScope.autoFocusOnUnmount",GT={bubbles:!1,cancelable:!0},TG="FocusScope",zy=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[i,l]=T.useState(null),c=wo(s),f=wo(o),h=T.useRef(null),p=Mt(t,x=>l(x)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let x=function(_){if(g.paused||!i)return;const I=_.target;i.contains(I)?h.current=I:al(h.current,{select:!0})},v=function(_){if(g.paused||!i)return;const I=_.relatedTarget;I!==null&&(i.contains(I)||al(h.current,{select:!0}))},S=function(_){if(document.activeElement===document.body)for(const A of _)A.removedNodes.length>0&&al(i)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const N=new MutationObserver(S);return i&&N.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),N.disconnect()}}},[r,i,g.paused]),T.useEffect(()=>{if(i){qT.add(g);const x=document.activeElement;if(!i.contains(x)){const S=new CustomEvent(sx,GT);i.addEventListener(sx,c),i.dispatchEvent(S),S.defaultPrevented||(kG(OG(mR(i)),{select:!0}),document.activeElement===x&&al(i))}return()=>{i.removeEventListener(sx,c),setTimeout(()=>{const S=new CustomEvent(ox,GT);i.addEventListener(ox,f),i.dispatchEvent(S),S.defaultPrevented||al(x??document.body,{select:!0}),i.removeEventListener(ox,f),qT.remove(g)},0)}}},[i,c,f,g]);const y=T.useCallback(x=>{if(!n&&!r||g.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,S=document.activeElement;if(v&&S){const N=x.currentTarget,[_,I]=$G(N);_&&I?!x.shiftKey&&S===I?(x.preventDefault(),n&&al(_,{select:!0})):x.shiftKey&&S===_&&(x.preventDefault(),n&&al(I,{select:!0})):S===N&&x.preventDefault()}},[n,r,g.paused]);return C.jsx(ot.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});zy.displayName=TG;function kG(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(al(r,{select:t}),document.activeElement!==n)return}function $G(e){const t=mR(e),n=HT(t,e),r=HT(t.reverse(),e);return[n,r]}function mR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function HT(e,t){for(const n of e)if(!_G(n,{upTo:t}))return n}function _G(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function RG(e){return e instanceof HTMLInputElement&&"select"in e}function al(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&RG(e)&&t&&e.select()}}var qT=IG();function IG(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=KT(e,t),e.unshift(t)},remove(t){e=KT(e,t),e[0]?.resume()}}}function KT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function OG(e){return e.filter(t=>t.tagName!=="A")}var ax=0;function k2(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??XT()),document.body.insertAdjacentElement("beforeend",e[1]??XT()),ax++,()=>{ax===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ax--}},[])}function XT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ea=function(){return Ea=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ea.apply(this,arguments)};function gR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function AG(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var kg="right-scroll-bar-position",$g="width-before-scroll-bar",PG="with-scroll-bars-hidden",DG="--removed-body-scroll-bar-size";function ix(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function FG(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var LG=typeof window<"u"?T.useLayoutEffect:T.useEffect,YT=new WeakMap;function MG(e,t){var n=FG(null,function(r){return e.forEach(function(s){return ix(s,r)})});return LG(function(){var r=YT.get(n);if(r){var s=new Set(r),o=new Set(e),a=n.current;s.forEach(function(i){o.has(i)||ix(i,null)}),o.forEach(function(i){s.has(i)||ix(i,a)})}YT.set(n,e)},[e]),n}function BG(e){return e}function jG(e,t){t===void 0&&(t=BG);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var a=t(o,r);return n.push(a),function(){n=n.filter(function(i){return i!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var i=n;n=[],i.forEach(o),a=n}var l=function(){var f=a;a=[],f.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(f){a.push(f),c()},filter:function(f){return a=a.filter(f),n}}}};return s}function UG(e){e===void 0&&(e={});var t=jG(null);return t.options=Ea({async:!0,ssr:!1},e),t}var yR=function(e){var t=e.sideCar,n=gR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Ea({},n))};yR.isSideCarExport=!0;function WG(e,t){return e.useMedium(t),yR}var vR=UG(),lx=function(){},Gy=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:lx,onWheelCapture:lx,onTouchMoveCapture:lx}),s=r[0],o=r[1],a=e.forwardProps,i=e.children,l=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,g=e.noRelative,y=e.noIsolation,x=e.inert,v=e.allowPinchZoom,S=e.as,N=S===void 0?"div":S,_=e.gapMode,I=gR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,M=MG([n,t]),L=Ea(Ea({},I),s);return T.createElement(T.Fragment,null,f&&T.createElement(A,{sideCar:vR,removeScrollBar:c,shards:h,noRelative:g,noIsolation:y,inert:x,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:_}),a?T.cloneElement(T.Children.only(i),Ea(Ea({},L),{ref:M})):T.createElement(N,Ea({},L,{className:l,ref:M}),i))});Gy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gy.classNames={fullWidth:$g,zeroRight:kg};var VG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=VG();return t&&e.setAttribute("nonce",t),e}function GG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function HG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zG())&&(GG(t,n),HG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},KG=function(){var e=qG();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},xR=function(){var e=KG(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},XG={left:0,top:0,right:0,gap:0},ux=function(e){return parseInt(e||"",10)||0},YG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[ux(n),ux(r),ux(s)]},QG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return XG;var t=YG(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ZG=xR(),wd="data-scroll-locked",JG=function(e,t,n,r){var s=e.left,o=e.top,a=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(PG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(wd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kg,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat($g,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(kg," .").concat(kg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat($g," .").concat($g,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wd,`] {
    `).concat(DG,": ").concat(i,`px;
  }
`)},QT=function(){var e=parseInt(document.body.getAttribute(wd)||"0",10);return isFinite(e)?e:0},eH=function(){T.useEffect(function(){return document.body.setAttribute(wd,(QT()+1).toString()),function(){var e=QT()-1;e<=0?document.body.removeAttribute(wd):document.body.setAttribute(wd,e.toString())}},[])},tH=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;eH();var o=T.useMemo(function(){return QG(s)},[s]);return T.createElement(ZG,{styles:JG(o,!t,s,n?"":"!important")})},Sw=!1;if(typeof window<"u")try{var tg=Object.defineProperty({},"passive",{get:function(){return Sw=!0,!0}});window.addEventListener("test",tg,tg),window.removeEventListener("test",tg,tg)}catch{Sw=!1}var od=Sw?{passive:!1}:!1,nH=function(e){return e.tagName==="TEXTAREA"},wR=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!nH(e)&&n[t]==="visible")},rH=function(e){return wR(e,"overflowY")},sH=function(e){return wR(e,"overflowX")},ZT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=bR(e,r);if(s){var o=SR(e,r),a=o[1],i=o[2];if(a>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},oH=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},aH=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},bR=function(e,t){return e==="v"?rH(t):sH(t)},SR=function(e,t){return e==="v"?oH(t):aH(t)},iH=function(e,t){return e==="h"&&t==="rtl"?-1:1},lH=function(e,t,n,r,s){var o=iH(e,window.getComputedStyle(t).direction),a=o*r,i=n.target,l=t.contains(i),c=!1,f=a>0,h=0,p=0;do{if(!i)break;var g=SR(e,i),y=g[0],x=g[1],v=g[2],S=x-v-o*y;(y||S)&&bR(e,i)&&(h+=S,p+=y);var N=i.parentNode;i=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!l&&i!==document.body||l&&(t.contains(i)||t===i));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(c=!0),c},ng=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},JT=function(e){return[e.deltaX,e.deltaY]},e3=function(e){return e&&"current"in e?e.current:e},uH=function(e,t){return e[0]===t[0]&&e[1]===t[1]},cH=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dH=0,ad=[];function fH(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),s=T.useState(dH++)[0],o=T.useState(xR)[0],a=T.useRef(e);T.useEffect(function(){a.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var x=AG([e.lockRef.current],(e.shards||[]).map(e3),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=T.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var S=ng(x),N=n.current,_="deltaX"in x?x.deltaX:N[0]-S[0],I="deltaY"in x?x.deltaY:N[1]-S[1],A,M=x.target,L=Math.abs(_)>Math.abs(I)?"h":"v";if("touches"in x&&L==="h"&&M.type==="range")return!1;var W=ZT(L,M);if(!W)return!0;if(W?A=L:(A=L==="v"?"h":"v",W=ZT(L,M)),!W)return!1;if(!r.current&&"changedTouches"in x&&(_||I)&&(r.current=A),!A)return!0;var j=r.current||A;return lH(j,v,x,j==="h"?_:I)},[]),l=T.useCallback(function(x){var v=x;if(!(!ad.length||ad[ad.length-1]!==o)){var S="deltaY"in v?JT(v):ng(v),N=t.current.filter(function(A){return A.name===v.type&&(A.target===v.target||v.target===A.shadowParent)&&uH(A.delta,S)})[0];if(N&&N.should){v.cancelable&&v.preventDefault();return}if(!N){var _=(a.current.shards||[]).map(e3).filter(Boolean).filter(function(A){return A.contains(v.target)}),I=_.length>0?i(v,_[0]):!a.current.noIsolation;I&&v.cancelable&&v.preventDefault()}}},[]),c=T.useCallback(function(x,v,S,N){var _={name:x,delta:v,target:S,should:N,shadowParent:hH(S)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(I){return I!==_})},1)},[]),f=T.useCallback(function(x){n.current=ng(x),r.current=void 0},[]),h=T.useCallback(function(x){c(x.type,JT(x),x.target,i(x,e.lockRef.current))},[]),p=T.useCallback(function(x){c(x.type,ng(x),x.target,i(x,e.lockRef.current))},[]);T.useEffect(function(){return ad.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,od),document.addEventListener("touchmove",l,od),document.addEventListener("touchstart",f,od),function(){ad=ad.filter(function(x){return x!==o}),document.removeEventListener("wheel",l,od),document.removeEventListener("touchmove",l,od),document.removeEventListener("touchstart",f,od)}},[]);var g=e.removeScrollBar,y=e.inert;return T.createElement(T.Fragment,null,y?T.createElement(o,{styles:cH(s)}):null,g?T.createElement(tH,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function hH(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const pH=WG(vR,fH);var Hy=T.forwardRef(function(e,t){return T.createElement(Gy,Ea({},e,{ref:t,sideCar:pH}))});Hy.classNames=Gy.classNames;var mH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},id=new WeakMap,rg=new WeakMap,sg={},cx=0,CR=function(e){return e&&(e.host||CR(e.parentNode))},gH=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=CR(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},yH=function(e,t,n,r){var s=gH(t,Array.isArray(e)?e:[e]);sg[n]||(sg[n]=new WeakMap);var o=sg[n],a=[],i=new Set,l=new Set(s),c=function(h){!h||i.has(h)||(i.add(h),c(h.parentNode))};s.forEach(c);var f=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(i.has(p))f(p);else try{var g=p.getAttribute(r),y=g!==null&&g!=="false",x=(id.get(p)||0)+1,v=(o.get(p)||0)+1;id.set(p,x),o.set(p,v),a.push(p),x===1&&y&&rg.set(p,!0),v===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",p,S)}})};return f(t),i.clear(),cx++,function(){a.forEach(function(h){var p=id.get(h)-1,g=o.get(h)-1;id.set(h,p),o.set(h,g),p||(rg.has(h)||h.removeAttribute(r),rg.delete(h)),g||h.removeAttribute(n)}),cx--,cx||(id=new WeakMap,id=new WeakMap,rg=new WeakMap,sg={})}},$2=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=mH(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),yH(r,s,n,"aria-hidden")):function(){return null}},qy="Dialog",[ER]=Fa(qy),[vH,Zo]=ER(qy),NR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,i=T.useRef(null),l=T.useRef(null),[c,f]=Vu({prop:r,defaultProp:s??!1,onChange:o,caller:qy});return C.jsx(vH,{scope:t,triggerRef:i,contentRef:l,contentId:js(),titleId:js(),descriptionId:js(),open:c,onOpenChange:f,onOpenToggle:T.useCallback(()=>f(h=>!h),[f]),modal:a,children:n})};NR.displayName=qy;var TR="DialogTrigger",kR=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Zo(TR,n),o=Mt(t,s.triggerRef);return C.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":I2(s.open),...r,ref:o,onClick:it(e.onClick,s.onOpenToggle)})});kR.displayName=TR;var _2="DialogPortal",[xH,$R]=ER(_2,{forceMount:void 0}),_R=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,o=Zo(_2,t);return C.jsx(xH,{scope:t,forceMount:n,children:T.Children.map(r,a=>C.jsx(Ei,{present:n||o.open,children:C.jsx(fp,{asChild:!0,container:s,children:a})}))})};_R.displayName=_2;var ry="DialogOverlay",RR=T.forwardRef((e,t)=>{const n=$R(ry,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Zo(ry,e.__scopeDialog);return o.modal?C.jsx(Ei,{present:r||o.open,children:C.jsx(bH,{...s,ref:t})}):null});RR.displayName=ry;var wH=Wu("DialogOverlay.RemoveScroll"),bH=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Zo(ry,n);return C.jsx(Hy,{as:wH,allowPinchZoom:!0,shards:[s.contentRef],children:C.jsx(ot.div,{"data-state":I2(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Hu="DialogContent",IR=T.forwardRef((e,t)=>{const n=$R(Hu,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,o=Zo(Hu,e.__scopeDialog);return C.jsx(Ei,{present:r||o.open,children:o.modal?C.jsx(SH,{...s,ref:t}):C.jsx(CH,{...s,ref:t})})});IR.displayName=Hu;var SH=T.forwardRef((e,t)=>{const n=Zo(Hu,e.__scopeDialog),r=T.useRef(null),s=Mt(t,n.contentRef,r);return T.useEffect(()=>{const o=r.current;if(o)return $2(o)},[]),C.jsx(OR,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(e.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:it(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,i=a.button===0&&a.ctrlKey===!0;(a.button===2||i)&&o.preventDefault()}),onFocusOutside:it(e.onFocusOutside,o=>o.preventDefault())})}),CH=T.forwardRef((e,t)=>{const n=Zo(Hu,e.__scopeDialog),r=T.useRef(!1),s=T.useRef(!1);return C.jsx(OR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),OR=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,i=Zo(Hu,n),l=T.useRef(null),c=Mt(t,l);return k2(),C.jsxs(C.Fragment,{children:[C.jsx(zy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:C.jsx(Jd,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":I2(i.open),...a,ref:c,onDismiss:()=>i.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(EH,{titleId:i.titleId}),C.jsx(TH,{contentRef:l,descriptionId:i.descriptionId})]})]})}),R2="DialogTitle",AR=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Zo(R2,n);return C.jsx(ot.h2,{id:s.titleId,...r,ref:t})});AR.displayName=R2;var PR="DialogDescription",DR=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Zo(PR,n);return C.jsx(ot.p,{id:s.descriptionId,...r,ref:t})});DR.displayName=PR;var FR="DialogClose",LR=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Zo(FR,n);return C.jsx(ot.button,{type:"button",...r,ref:t,onClick:it(e.onClick,()=>s.onOpenChange(!1))})});LR.displayName=FR;function I2(e){return e?"open":"closed"}var MR="DialogTitleWarning",[nSe,BR]=Wj(MR,{contentName:Hu,titleName:R2,docsSlug:"dialog"}),EH=({titleId:e})=>{const t=BR(MR),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},NH="DialogDescriptionWarning",TH=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BR(NH).contentName}}.`;return T.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},jR=NR,kH=kR,UR=_R,O2=RR,A2=IR,WR=AR,VR=DR,$H=LR;const Ky=jR,P2=kH,_H=UR,zR=T.forwardRef(({className:e,...t},n)=>C.jsx(O2,{ref:n,className:Ie("fixed inset-0 z-50 bg-black/20 supports-[backdrop-filter]:bg-black/20 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));zR.displayName=O2.displayName;const Xy=T.forwardRef(({className:e,children:t,...n},r)=>C.jsxs(_H,{children:[C.jsx(zR,{}),C.jsxs(A2,{ref:r,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,C.jsxs($H,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[C.jsx(o2,{className:"h-4 w-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xy.displayName=A2.displayName;const Yy=({className:e,...t})=>C.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Yy.displayName="DialogHeader";const GR=({className:e,...t})=>C.jsx("div",{className:Ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});GR.displayName="DialogFooter";const Qy=T.forwardRef(({className:e,...t},n)=>C.jsx(WR,{ref:n,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...t}));Qy.displayName=WR.displayName;const Zy=T.forwardRef(({className:e,...t},n)=>C.jsx(VR,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Zy.displayName=VR.displayName;const Cw=n2("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),vt=T.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},o)=>{const a=r?zj:"button";return C.jsx(a,{className:Ie(Cw({variant:t,size:n,className:e})),ref:o,...s})});vt.displayName="Button";function D2(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Jy="Switch",[RH]=Fa(Jy),[IH,OH]=RH(Jy),HR=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:i,value:l="on",onCheckedChange:c,form:f,...h}=e,[p,g]=T.useState(null),y=Mt(t,_=>g(_)),x=T.useRef(!1),v=p?f||!!p.closest("form"):!0,[S,N]=Vu({prop:s,defaultProp:o??!1,onChange:c,caller:Jy});return C.jsxs(IH,{scope:n,checked:S,disabled:i,children:[C.jsx(ot.button,{type:"button",role:"switch","aria-checked":S,"aria-required":a,"data-state":YR(S),"data-disabled":i?"":void 0,disabled:i,value:l,...h,ref:y,onClick:it(e.onClick,_=>{N(I=>!I),v&&(x.current=_.isPropagationStopped(),x.current||_.stopPropagation())})}),v&&C.jsx(XR,{control:p,bubbles:!x.current,name:r,value:l,checked:S,required:a,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});HR.displayName=Jy;var qR="SwitchThumb",KR=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=OH(qR,n);return C.jsx(ot.span,{"data-state":YR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});KR.displayName=qR;var AH="SwitchBubbleInput",XR=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},o)=>{const a=T.useRef(null),i=Mt(a,o),l=D2(n),c=h2(t);return T.useEffect(()=>{const f=a.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(y)}},[l,n,r]),C.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...s.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});XR.displayName=AH;function YR(e){return e?"checked":"unchecked"}var QR=HR,PH=KR;const sy=T.forwardRef(({className:e,...t},n)=>C.jsx(QR,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:C.jsx(PH,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));sy.displayName=QR.displayName;var DH="Label",ZR=T.forwardRef((e,t)=>C.jsx(ot.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ZR.displayName=DH;var JR=ZR;const FH=n2("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pr=T.forwardRef(({className:e,...t},n)=>C.jsx(JR,{ref:n,className:Ie(FH(),e),...t}));pr.displayName=JR.displayName;var dx={},t3;function LH(){return t3||(t3=1,(function(){var e;function t(w){var k=0;return function(){return k<w.length?{done:!1,value:w[k++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,k,O){return w==Array.prototype||w==Object.prototype||(w[k]=O.value),w};function r(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof jN=="object"&&jN];for(var k=0;k<w.length;++k){var O=w[k];if(O&&O.Math==Math)return O}throw Error("Cannot find global object")}var s=r(this);function o(w,k){if(k)e:{var O=s;w=w.split(".");for(var D=0;D<w.length-1;D++){var z=w[D];if(!(z in O))break e;O=O[z]}w=w[w.length-1],D=O[w],k=k(D),k!=D&&k!=null&&n(O,w,{configurable:!0,writable:!0,value:k})}}o("Symbol",function(w){function k(q){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new O(D+(q||"")+"_"+z++,q)}function O(q,H){this.h=q,n(this,"description",{configurable:!0,writable:!0,value:H})}if(w)return w;O.prototype.toString=function(){return this.h};var D="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",z=0;return k}),o("Symbol.iterator",function(w){if(w)return w;w=Symbol("Symbol.iterator");for(var k="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),O=0;O<k.length;O++){var D=s[k[O]];typeof D=="function"&&typeof D.prototype[w]!="function"&&n(D.prototype,w,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return w});function a(w){return w={next:w},w[Symbol.iterator]=function(){return this},w}function i(w){var k=typeof Symbol<"u"&&Symbol.iterator&&w[Symbol.iterator];return k?k.call(w):{next:t(w)}}function l(w){if(!(w instanceof Array)){w=i(w);for(var k,O=[];!(k=w.next()).done;)O.push(k.value);w=O}return w}var c=typeof Object.assign=="function"?Object.assign:function(w,k){for(var O=1;O<arguments.length;O++){var D=arguments[O];if(D)for(var z in D)Object.prototype.hasOwnProperty.call(D,z)&&(w[z]=D[z])}return w};o("Object.assign",function(w){return w||c});var f=typeof Object.create=="function"?Object.create:function(w){function k(){}return k.prototype=w,new k},h;if(typeof Object.setPrototypeOf=="function")h=Object.setPrototypeOf;else{var p;e:{var g={a:!0},y={};try{y.__proto__=g,p=y.a;break e}catch{}p=!1}h=p?function(w,k){if(w.__proto__=k,w.__proto__!==k)throw new TypeError(w+" is not extensible");return w}:null}var x=h;function v(w,k){if(w.prototype=f(k.prototype),w.prototype.constructor=w,x)x(w,k);else for(var O in k)if(O!="prototype")if(Object.defineProperties){var D=Object.getOwnPropertyDescriptor(k,O);D&&Object.defineProperty(w,O,D)}else w[O]=k[O];w.ya=k.prototype}function S(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function N(w){if(w.m)throw new TypeError("Generator is already running");w.m=!0}S.prototype.u=function(w){this.i=w};function _(w,k){w.l={ma:k,na:!0},w.h=w.s||w.v}S.prototype.return=function(w){this.l={return:w},this.h=this.v};function I(w,k,O){return w.h=O,{value:k}}function A(w){this.h=new S,this.i=w}function M(w,k){N(w.h);var O=w.h.j;return O?L(w,"return"in O?O.return:function(D){return{value:D,done:!0}},k,w.h.return):(w.h.return(k),W(w))}function L(w,k,O,D){try{var z=k.call(w.h.j,O);if(!(z instanceof Object))throw new TypeError("Iterator result "+z+" is not an object");if(!z.done)return w.h.m=!1,z;var q=z.value}catch(H){return w.h.j=null,_(w.h,H),W(w)}return w.h.j=null,D.call(w.h,q),W(w)}function W(w){for(;w.h.h;)try{var k=w.i(w.h);if(k)return w.h.m=!1,{value:k.value,done:!1}}catch(O){w.h.i=void 0,_(w.h,O)}if(w.h.m=!1,w.h.l){if(k=w.h.l,w.h.l=null,k.na)throw k.ma;return{value:k.return,done:!0}}return{value:void 0,done:!0}}function j(w){this.next=function(k){return N(w.h),w.h.j?k=L(w,w.h.j.next,k,w.h.u):(w.h.u(k),k=W(w)),k},this.throw=function(k){return N(w.h),w.h.j?k=L(w,w.h.j.throw,k,w.h.u):(_(w.h,k),k=W(w)),k},this.return=function(k){return M(w,k)},this[Symbol.iterator]=function(){return this}}function U(w){function k(D){return w.next(D)}function O(D){return w.throw(D)}return new Promise(function(D,z){function q(H){H.done?D(H.value):Promise.resolve(H.value).then(k,O).then(q,z)}q(w.next())})}function P(w){return U(new j(new A(w)))}o("Promise",function(w){function k(H){this.i=0,this.j=void 0,this.h=[],this.u=!1;var ne=this.l();try{H(ne.resolve,ne.reject)}catch(me){ne.reject(me)}}function O(){this.h=null}function D(H){return H instanceof k?H:new k(function(ne){ne(H)})}if(w)return w;O.prototype.i=function(H){if(this.h==null){this.h=[];var ne=this;this.j(function(){ne.m()})}this.h.push(H)};var z=s.setTimeout;O.prototype.j=function(H){z(H,0)},O.prototype.m=function(){for(;this.h&&this.h.length;){var H=this.h;this.h=[];for(var ne=0;ne<H.length;++ne){var me=H[ne];H[ne]=null;try{me()}catch(Te){this.l(Te)}}}this.h=null},O.prototype.l=function(H){this.j(function(){throw H})},k.prototype.l=function(){function H(Te){return function(Ae){me||(me=!0,Te.call(ne,Ae))}}var ne=this,me=!1;return{resolve:H(this.I),reject:H(this.m)}},k.prototype.I=function(H){if(H===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(H instanceof k)this.L(H);else{e:switch(typeof H){case"object":var ne=H!=null;break e;case"function":ne=!0;break e;default:ne=!1}ne?this.F(H):this.s(H)}},k.prototype.F=function(H){var ne=void 0;try{ne=H.then}catch(me){this.m(me);return}typeof ne=="function"?this.M(ne,H):this.s(H)},k.prototype.m=function(H){this.v(2,H)},k.prototype.s=function(H){this.v(1,H)},k.prototype.v=function(H,ne){if(this.i!=0)throw Error("Cannot settle("+H+", "+ne+"): Promise already settled in state"+this.i);this.i=H,this.j=ne,this.i===2&&this.K(),this.H()},k.prototype.K=function(){var H=this;z(function(){if(H.D()){var ne=s.console;typeof ne<"u"&&ne.error(H.j)}},1)},k.prototype.D=function(){if(this.u)return!1;var H=s.CustomEvent,ne=s.Event,me=s.dispatchEvent;return typeof me>"u"?!0:(typeof H=="function"?H=new H("unhandledrejection",{cancelable:!0}):typeof ne=="function"?H=new ne("unhandledrejection",{cancelable:!0}):(H=s.document.createEvent("CustomEvent"),H.initCustomEvent("unhandledrejection",!1,!0,H)),H.promise=this,H.reason=this.j,me(H))},k.prototype.H=function(){if(this.h!=null){for(var H=0;H<this.h.length;++H)q.i(this.h[H]);this.h=null}};var q=new O;return k.prototype.L=function(H){var ne=this.l();H.T(ne.resolve,ne.reject)},k.prototype.M=function(H,ne){var me=this.l();try{H.call(ne,me.resolve,me.reject)}catch(Te){me.reject(Te)}},k.prototype.then=function(H,ne){function me(He,Fe){return typeof He=="function"?function(tt){try{Te(He(tt))}catch(pt){Ae(pt)}}:Fe}var Te,Ae,at=new k(function(He,Fe){Te=He,Ae=Fe});return this.T(me(H,Te),me(ne,Ae)),at},k.prototype.catch=function(H){return this.then(void 0,H)},k.prototype.T=function(H,ne){function me(){switch(Te.i){case 1:H(Te.j);break;case 2:ne(Te.j);break;default:throw Error("Unexpected state: "+Te.i)}}var Te=this;this.h==null?q.i(me):this.h.push(me),this.u=!0},k.resolve=D,k.reject=function(H){return new k(function(ne,me){me(H)})},k.race=function(H){return new k(function(ne,me){for(var Te=i(H),Ae=Te.next();!Ae.done;Ae=Te.next())D(Ae.value).T(ne,me)})},k.all=function(H){var ne=i(H),me=ne.next();return me.done?D([]):new k(function(Te,Ae){function at(tt){return function(pt){He[tt]=pt,Fe--,Fe==0&&Te(He)}}var He=[],Fe=0;do He.push(void 0),Fe++,D(me.value).T(at(He.length-1),Ae),me=ne.next();while(!me.done)})},k});function X(w,k){w instanceof String&&(w+="");var O=0,D=!1,z={next:function(){if(!D&&O<w.length){var q=O++;return{value:k(q,w[q]),done:!1}}return D=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.keys",function(w){return w||function(){return X(this,function(k){return k})}}),o("Array.prototype.fill",function(w){return w||function(k,O,D){var z=this.length||0;for(0>O&&(O=Math.max(0,z+O)),(D==null||D>z)&&(D=z),D=Number(D),0>D&&(D=Math.max(0,z+D)),O=Number(O||0);O<D;O++)this[O]=k;return this}});function ae(w){return w||Array.prototype.fill}o("Int8Array.prototype.fill",ae),o("Uint8Array.prototype.fill",ae),o("Uint8ClampedArray.prototype.fill",ae),o("Int16Array.prototype.fill",ae),o("Uint16Array.prototype.fill",ae),o("Int32Array.prototype.fill",ae),o("Uint32Array.prototype.fill",ae),o("Float32Array.prototype.fill",ae),o("Float64Array.prototype.fill",ae),o("Object.is",function(w){return w||function(k,O){return k===O?k!==0||1/k===1/O:k!==k&&O!==O}}),o("Array.prototype.includes",function(w){return w||function(k,O){var D=this;D instanceof String&&(D=String(D));var z=D.length;for(O=O||0,0>O&&(O=Math.max(O+z,0));O<z;O++){var q=D[O];if(q===k||Object.is(q,k))return!0}return!1}}),o("String.prototype.includes",function(w){return w||function(k,O){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(k,O||0)!==-1}});var ee=this||self;function ie(w,k){w=w.split(".");var O=ee;w[0]in O||typeof O.execScript>"u"||O.execScript("var "+w[0]);for(var D;w.length&&(D=w.shift());)w.length||k===void 0?O[D]&&O[D]!==Object.prototype[D]?O=O[D]:O=O[D]={}:O[D]=k}function le(w){var k;e:{if((k=ee.navigator)&&(k=k.userAgent))break e;k=""}return k.indexOf(w)!=-1}var we=Array.prototype.map?function(w,k){return Array.prototype.map.call(w,k,void 0)}:function(w,k){for(var O=w.length,D=Array(O),z=typeof w=="string"?w.split(""):w,q=0;q<O;q++)q in z&&(D[q]=k.call(void 0,z[q],q,w));return D},te={},oe=null;function pe(w){var k=w.length,O=3*k/4;O%3?O=Math.floor(O):"=.".indexOf(w[k-1])!=-1&&(O="=.".indexOf(w[k-2])!=-1?O-2:O-1);var D=new Uint8Array(O),z=0;return Y(w,function(q){D[z++]=q}),z!==O?D.subarray(0,z):D}function Y(w,k){function O(me){for(;D<w.length;){var Te=w.charAt(D++),Ae=oe[Te];if(Ae!=null)return Ae;if(!/^[\s\xa0]*$/.test(Te))throw Error("Unknown base64 encoding at char: "+Te)}return me}G();for(var D=0;;){var z=O(-1),q=O(0),H=O(64),ne=O(64);if(ne===64&&z===-1)break;k(z<<2|q>>4),H!=64&&(k(q<<4&240|H>>2),ne!=64&&k(H<<6&192|ne))}}function G(){if(!oe){oe={};for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),k=["+/=","+/","-_=","-_.","-_"],O=0;5>O;O++){var D=w.concat(k[O].split(""));te[O]=D;for(var z=0;z<D.length;z++){var q=D[z];oe[q]===void 0&&(oe[q]=z)}}}}var re=typeof Uint8Array<"u",ce=!(le("Trident")||le("MSIE"))&&typeof ee.btoa=="function";function xe(w){if(!ce){var k;k===void 0&&(k=0),G(),k=te[k];for(var O=Array(Math.floor(w.length/3)),D=k[64]||"",z=0,q=0;z<w.length-2;z+=3){var H=w[z],ne=w[z+1],me=w[z+2],Te=k[H>>2];H=k[(H&3)<<4|ne>>4],ne=k[(ne&15)<<2|me>>6],me=k[me&63],O[q++]=Te+H+ne+me}switch(Te=0,me=D,w.length-z){case 2:Te=w[z+1],me=k[(Te&15)<<2]||D;case 1:w=w[z],O[q]=k[w>>2]+k[(w&3)<<4|Te>>4]+me+D}return O.join("")}for(k="";10240<w.length;)k+=String.fromCharCode.apply(null,w.subarray(0,10240)),w=w.subarray(10240);return k+=String.fromCharCode.apply(null,w),btoa(k)}var Ce=RegExp("[-_.]","g");function ye(w){switch(w){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Ee(w){if(!ce)return pe(w);Ce.test(w)&&(w=w.replace(Ce,ye)),w=atob(w);for(var k=new Uint8Array(w.length),O=0;O<w.length;O++)k[O]=w.charCodeAt(O);return k}var ke;function De(){return ke||(ke=new Uint8Array(0))}var Ze={},ht=typeof Uint8Array.prototype.slice=="function",dt=0,Rt=0;function Mr(w){var k=0>w;w=Math.abs(w);var O=w>>>0;w=Math.floor((w-O)/4294967296),k&&(O=i(vr(O,w)),k=O.next().value,w=O.next().value,O=k),dt=O>>>0,Rt=w>>>0}var Br=typeof BigInt=="function";function vr(w,k){return k=~k,w?w=~w+1:k+=1,[w,k]}function eo(w,k){this.i=w>>>0,this.h=k>>>0}function aa(w){if(!w)return ks||(ks=new eo(0,0));if(!/^-?\d+$/.test(w))return null;if(16>w.length)Mr(Number(w));else if(Br)w=BigInt(w),dt=Number(w&BigInt(4294967295))>>>0,Rt=Number(w>>BigInt(32)&BigInt(4294967295));else{var k=+(w[0]==="-");Rt=dt=0;for(var O=w.length,D=k,z=(O-k)%6+k;z<=O;D=z,z+=6)D=Number(w.slice(D,z)),Rt*=1e6,dt=1e6*dt+D,4294967296<=dt&&(Rt+=dt/4294967296|0,dt%=4294967296);k&&(k=i(vr(dt,Rt)),w=k.next().value,k=k.next().value,dt=w,Rt=k)}return new eo(dt,Rt)}var ks;function ur(w,k){return Error("Invalid wire type: "+w+" (at position "+k+")")}function $s(){return Error("Failed to read varint, encoding is invalid.")}function cr(w,k){return Error("Tried to read past the end of the data "+k+" > "+w)}function xr(){throw Error("Invalid UTF8")}function Ua(w,k){return k=String.fromCharCode.apply(null,k),w==null?k:w+k}var Sn=void 0,wr,ia=typeof TextDecoder<"u",Wa,es=typeof TextEncoder<"u",to;function Va(w){if(w!==Ze)throw Error("illegal external caller")}function ts(w,k){if(Va(k),this.V=w,w!=null&&w.length===0)throw Error("ByteString should be constructed with non-empty values")}function jr(){return to||(to=new ts(null,Ze))}function za(w){Va(Ze);var k=w.V;return k=k==null||re&&k!=null&&k instanceof Uint8Array?k:typeof k=="string"?Ee(k):null,k==null?k:w.V=k}function Ur(w){if(typeof w=="string")return{buffer:Ee(w),C:!1};if(Array.isArray(w))return{buffer:new Uint8Array(w),C:!1};if(w.constructor===Uint8Array)return{buffer:w,C:!1};if(w.constructor===ArrayBuffer)return{buffer:new Uint8Array(w),C:!1};if(w.constructor===ts)return{buffer:za(w)||De(),C:!0};if(w instanceof Uint8Array)return{buffer:new Uint8Array(w.buffer,w.byteOffset,w.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function la(w,k){this.i=null,this.m=!1,this.h=this.j=this.l=0,lt(this,w,k)}function lt(w,k,O){O=O===void 0?{}:O,w.S=O.S===void 0?!1:O.S,k&&(k=Ur(k),w.i=k.buffer,w.m=k.C,w.l=0,w.j=w.i.length,w.h=w.l)}la.prototype.reset=function(){this.h=this.l};function xt(w,k){if(w.h=k,k>w.j)throw cr(w.j,k)}function Je(w){var k=w.i,O=w.h,D=k[O++],z=D&127;if(D&128&&(D=k[O++],z|=(D&127)<<7,D&128&&(D=k[O++],z|=(D&127)<<14,D&128&&(D=k[O++],z|=(D&127)<<21,D&128&&(D=k[O++],z|=D<<28,D&128&&k[O++]&128&&k[O++]&128&&k[O++]&128&&k[O++]&128&&k[O++]&128)))))throw $s();return xt(w,O),z}function St(w,k){if(0>k)throw Error("Tried to read a negative byte length: "+k);var O=w.h,D=O+k;if(D>w.j)throw cr(k,w.j-O);return w.h=D,O}var qt=[];function ut(){this.h=[]}ut.prototype.length=function(){return this.h.length},ut.prototype.end=function(){var w=this.h;return this.h=[],w};function Ga(w,k,O){for(;0<O||127<k;)w.h.push(k&127|128),k=(k>>>7|O<<25)>>>0,O>>>=7;w.h.push(k)}function Ye(w,k){for(;127<k;)w.h.push(k&127|128),k>>>=7;w.h.push(k)}function Nt(w,k){if(qt.length){var O=qt.pop();lt(O,w,k),w=O}else w=new la(w,k);this.h=w,this.j=this.h.h,this.i=this.l=-1,this.setOptions(k)}Nt.prototype.setOptions=function(w){w=w===void 0?{}:w,this.ca=w.ca===void 0?!1:w.ca},Nt.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function It(w){var k=w.h;if(k.h==k.j)return!1;w.j=w.h.h;var O=Je(w.h)>>>0;if(k=O>>>3,O&=7,!(0<=O&&5>=O))throw ur(O,w.j);if(1>k)throw Error("Invalid field number: "+k+" (at position "+w.j+")");return w.l=k,w.i=O,!0}function an(w){switch(w.i){case 0:if(w.i!=0)an(w);else e:{w=w.h;for(var k=w.h,O=k+10,D=w.i;k<O;)if((D[k++]&128)===0){xt(w,k);break e}throw $s()}break;case 1:w=w.h,xt(w,w.h+8);break;case 2:w.i!=2?an(w):(k=Je(w.h)>>>0,w=w.h,xt(w,w.h+k));break;case 5:w=w.h,xt(w,w.h+4);break;case 3:k=w.l;do{if(!It(w))throw Error("Unmatched start-group tag: stream EOF");if(w.i==4){if(w.l!=k)throw Error("Unmatched end-group tag");break}an(w)}while(!0);break;default:throw ur(w.i,w.j)}}var Un=[];function br(){this.j=[],this.i=0,this.h=new ut}function Yn(w,k){k.length!==0&&(w.j.push(k),w.i+=k.length)}function Wn(w,k){if(k=k.R){Yn(w,w.h.end());for(var O=0;O<k.length;O++)Yn(w,za(k[O])||De())}}var On=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function _s(w,k){return On?w[On]|=k:w.A!==void 0?w.A|=k:(Object.defineProperties(w,{A:{value:k,configurable:!0,writable:!0,enumerable:!1}}),k)}function Vl(w,k){On?w[On]&&(w[On]&=~k):w.A!==void 0&&(w.A&=~k)}function Yt(w){var k;return On?k=w[On]:k=w.A,k??0}function ns(w,k){On?w[On]=k:w.A!==void 0?w.A=k:Object.defineProperties(w,{A:{value:k,configurable:!0,writable:!0,enumerable:!1}})}function Of(w){return _s(w,1),w}function u1(w,k){ns(k,(w|0)&-51)}function bc(w,k){ns(k,(w|18)&-41)}var _o={};function zl(w){return w!==null&&typeof w=="object"&&!Array.isArray(w)&&w.constructor===Object}var _i,Up=[];ns(Up,23),_i=Object.freeze(Up);function Sc(w){if(Yt(w.o)&2)throw Error("Cannot mutate an immutable Message")}function Cc(w){var k=w.length;(k=k?w[k-1]:void 0)&&zl(k)?k.g=1:(k={},w.push((k.g=1,k)))}function Af(w){var k=w.i+w.G;return w.B||(w.B=w.o[k]={})}function rs(w,k){return k===-1?null:k>=w.i?w.B?w.B[k]:void 0:w.o[k+w.G]}function no(w,k,O,D){Sc(w),Gl(w,k,O,D)}function Gl(w,k,O,D){w.j&&(w.j=void 0),k>=w.i||D?Af(w)[k]=O:(w.o[k+w.G]=O,(w=w.B)&&k in w&&delete w[k])}function tn(w,k,O,D){var z=rs(w,k);Array.isArray(z)||(z=_i);var q=Yt(z);if(q&1||Of(z),D)q&2||_s(z,2),O&1||Object.freeze(z);else{D=!(O&2);var H=q&2;O&1||!H?D&&q&16&&!H&&Vl(z,16):(z=Of(Array.prototype.slice.call(z)),Gl(w,k,z))}return z}function Pf(w,k){var O=rs(w,k),D=O==null?O:typeof O=="number"||O==="NaN"||O==="Infinity"||O==="-Infinity"?Number(O):void 0;return D!=null&&D!==O&&Gl(w,k,D),D}function Ec(w,k,O,D,z){w.h||(w.h={});var q=w.h[O],H=tn(w,O,3,z);if(!q){var ne=H;q=[];var me=!!(Yt(w.o)&16);H=!!(Yt(ne)&2);var Te=ne;!z&&H&&(ne=Array.prototype.slice.call(ne));for(var Ae=H,at=0;at<ne.length;at++){var He=ne[at],Fe=k,tt=!1;if(tt=tt===void 0?!1:tt,He=Array.isArray(He)?new Fe(He):tt?new Fe:void 0,He!==void 0){Fe=He.o;var pt=tt=Yt(Fe);H&&(pt|=2),me&&(pt|=16),pt!=tt&&ns(Fe,pt),Fe=pt,Ae=Ae||!!(2&Fe),q.push(He)}}return w.h[O]=q,me=Yt(ne),k=me|33,k=Ae?k&-9:k|8,me!=k&&(Ae=ne,Object.isFrozen(Ae)&&(Ae=Array.prototype.slice.call(Ae)),ns(Ae,k),ne=Ae),Te!==ne&&Gl(w,O,ne),(z||D&&H)&&_s(q,2),D&&Object.freeze(q),q}return z||(z=Object.isFrozen(q),D&&!z?Object.freeze(q):!D&&z&&(q=Array.prototype.slice.call(q),w.h[O]=q)),q}function Hl(w,k,O){var D=!!(Yt(w.o)&2);if(k=Ec(w,k,O,D,D),w=tn(w,O,3,D),!(D||Yt(w)&8)){for(D=0;D<k.length;D++){if(O=k[D],Yt(O.o)&2){var z=Yl(O,!1);z.j=O}else z=O;O!==z&&(k[D]=z,w[D]=z.o)}_s(w,8)}return k}function Wr(w,k,O){if(O!=null&&typeof O!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof O+": "+O);no(w,k,O)}function Wp(w,k,O,D,z){Sc(w);var q=Ec(w,O,k,!1,!1);return O=D??new O,w=tn(w,k,2,!1),z!=null?(q.splice(z,0,O),w.splice(z,0,O.o)):(q.push(O),w.push(O.o)),O.C()&&Vl(w,8),O}function ql(w,k){return w??k}function Vr(w,k,O){return O=O===void 0?0:O,ql(Pf(w,k),O)}var zr;function c1(w){switch(typeof w){case"number":return isFinite(w)?w:String(w);case"object":if(w)if(Array.isArray(w)){if((Yt(w)&128)!==0)return w=Array.prototype.slice.call(w),Cc(w),w}else{if(re&&w!=null&&w instanceof Uint8Array)return xe(w);if(w instanceof ts){var k=w.V;return k==null?"":typeof k=="string"?k:w.V=xe(k)}}}return w}function ss(w,k,O,D){if(w!=null){if(Array.isArray(w))w=Df(w,k,O,D!==void 0);else if(zl(w)){var z={},q;for(q in w)z[q]=ss(w[q],k,O,D);w=z}else w=k(w,D);return w}}function Df(w,k,O,D){var z=Yt(w);D=D?!!(z&16):void 0,w=Array.prototype.slice.call(w);for(var q=0;q<w.length;q++)w[q]=ss(w[q],k,O,D);return O(z,w),w}function d1(w){return w.ja===_o?w.toJSON():c1(w)}function f1(w,k){w&128&&Cc(k)}function Kl(w,k,O){if(O=O===void 0?bc:O,w!=null){if(re&&w instanceof Uint8Array)return w.length?new ts(new Uint8Array(w),Ze):jr();if(Array.isArray(w)){var D=Yt(w);return D&2?w:k&&!(D&32)&&(D&16||D===0)?(ns(w,D|2),w):(w=Df(w,Kl,D&4?bc:O,!0),k=Yt(w),k&4&&k&2&&Object.freeze(w),w)}return w.ja===_o?Ri(w):w}}function Xl(w,k,O,D,z,q,H){if(w=w.h&&w.h[O]){if(D=Yt(w),D&2?D=w:(q=we(w,Ri),bc(D,q),Object.freeze(q),D=q),Sc(k),H=D==null?_i:Of([]),D!=null){for(q=!!D.length,w=0;w<D.length;w++){var ne=D[w];q=q&&!(Yt(ne.o)&2),H[w]=ne.o}q=(q?8:0)|1,w=Yt(H),(w&q)!==q&&(Object.isFrozen(H)&&(H=Array.prototype.slice.call(H)),ns(H,w|q)),k.h||(k.h={}),k.h[O]=D}else k.h&&(k.h[O]=void 0);Gl(k,O,H,z)}else no(k,O,Kl(D,q,H),z)}function Ri(w){return Yt(w.o)&2||(w=Yl(w,!0),_s(w.o,2)),w}function Yl(w,k){var O=w.o,D=[];_s(D,16);var z=w.constructor.h;if(z&&D.push(z),z=w.B,z){D.length=O.length,D.fill(void 0,D.length,O.length);var q={};D[D.length-1]=q}(Yt(O)&128)!==0&&Cc(D),k=k||w.C()?bc:u1,q=w.constructor,zr=D,D=new q(D),zr=void 0,w.R&&(D.R=w.R.slice()),q=!!(Yt(O)&16);for(var H=z?O.length-1:O.length,ne=0;ne<H;ne++)Xl(w,D,ne-w.G,O[ne],!1,q,k);if(z)for(var me in z)Xl(w,D,+me,z[me],!0,q,k);return D}function Sr(w,k,O){w==null&&(w=zr),zr=void 0;var D=this.constructor.i||0,z=0<D,q=this.constructor.h,H=!1;if(w==null){w=q?[q]:[];var ne=48,me=!0;z&&(D=0,ne|=128),ns(w,ne)}else{if(!Array.isArray(w)||q&&q!==w[0])throw Error();var Te=ne=_s(w,0);if((me=(16&Te)!==0)&&((H=(32&Te)!==0)||(Te|=32)),z){if(128&Te)D=0;else if(0<w.length){var Ae=w[w.length-1];if(zl(Ae)&&"g"in Ae){D=0,Te|=128,delete Ae.g;var at=!0,He;for(He in Ae){at=!1;break}at&&w.pop()}}}else if(128&Te)throw Error();ne!==Te&&ns(w,Te)}this.G=(q?0:-1)-D,this.h=void 0,this.o=w;e:{if(q=this.o.length,D=q-1,q&&(q=this.o[D],zl(q))){this.B=q,this.i=D-this.G;break e}k!==void 0&&-1<k?(this.i=Math.max(k,D+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!z&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(O){k=me&&!H&&!0,z=this.i;var Fe;for(me=0;me<O.length;me++)H=O[me],H<z?(H+=this.G,(D=w[H])?Vp(D,k):w[H]=_i):(Fe||(Fe=Af(this)),(D=Fe[H])?Vp(D,k):Fe[H]=_i)}}Sr.prototype.toJSON=function(){return Df(this.o,d1,f1)},Sr.prototype.C=function(){return!!(Yt(this.o)&2)};function Vp(w,k){if(Array.isArray(w)){var O=Yt(w),D=1;!k||O&2||(D|=16),(O&D)!==D&&ns(w,O|D)}}Sr.prototype.ja=_o,Sr.prototype.toString=function(){return this.o.toString()};function Nc(w,k,O){if(O){var D={},z;for(z in O){var q=O[z],H=q.qa;H||(D.J=q.wa||q.oa.W,q.ia?(D.aa=kc(q.ia),H=(function(ne){return function(me,Te,Ae){return ne.J(me,Te,Ae,ne.aa)}})(D)):q.ka?(D.Z=Mf(q.da.P,q.ka),H=(function(ne){return function(me,Te,Ae){return ne.J(me,Te,Ae,ne.Z)}})(D)):H=D.J,q.qa=H),H(k,w,q.da),D={J:D.J,aa:D.aa,Z:D.Z}}}Wn(k,w)}var Ql=Symbol();function Tc(w,k,O){return w[Ql]||(w[Ql]=function(D,z){return k(D,z,O)})}function Ii(w){var k=w[Ql];if(!k){var O=_c(w);k=function(D,z){return Ai(D,z,O)},w[Ql]=k}return k}function h1(w){var k=w.ia;if(k)return Ii(k);if(k=w.va)return Tc(w.da.P,k,w.ka)}function Ff(w){var k=h1(w),O=w.da,D=w.oa.U;return k?function(z,q){return D(z,q,O,k)}:function(z,q){return D(z,q,O)}}function Dt(w,k){var O=w[k];return typeof O=="function"&&O.length===0&&(O=O(),w[k]=O),Array.isArray(O)&&(os in O||Oi in O||0<O.length&&typeof O[0]=="function")?O:void 0}function Lf(w,k,O,D,z,q){k.P=w[0];var H=1;if(w.length>H&&typeof w[H]!="number"){var ne=w[H++];O(k,ne)}for(;H<w.length;){O=w[H++];for(var me=H+1;me<w.length&&typeof w[me]!="number";)me++;switch(ne=w[H++],me-=H,me){case 0:D(k,O,ne);break;case 1:(me=Dt(w,H))?(H++,z(k,O,ne,me)):D(k,O,ne,w[H++]);break;case 2:me=H++,me=Dt(w,me),z(k,O,ne,me,w[H++]);break;case 3:q(k,O,ne,w[H++],w[H++],w[H++]);break;case 4:q(k,O,ne,w[H++],w[H++],w[H++],w[H++]);break;default:throw Error("unexpected number of binary field arguments: "+me)}}return k}var Zl=Symbol();function kc(w){var k=w[Zl];if(!k){var O=ro(w);k=function(D,z){return Gp(D,z,O)},w[Zl]=k}return k}function Mf(w,k){var O=w[Zl];return O||(O=function(D,z){return Nc(D,z,k)},w[Zl]=O),O}var Oi=Symbol();function zp(w,k){w.push(k)}function Bf(w,k,O){w.push(k,O.W)}function $c(w,k,O,D){var z=kc(D),q=ro(D).P,H=O.W;w.push(k,function(ne,me,Te){return H(ne,me,Te,q,z)})}function ua(w,k,O,D,z,q){var H=Mf(D,q),ne=O.W;w.push(k,function(me,Te,Ae){return ne(me,Te,Ae,D,H)})}function ro(w){var k=w[Oi];return k||(k=Lf(w,w[Oi]=[],zp,Bf,$c,ua),os in w&&Oi in w&&(w.length=0),k)}var os=Symbol();function Jl(w,k){w[0]=k}function eu(w,k,O,D){var z=O.U;w[k]=D?function(q,H,ne){return z(q,H,ne,D)}:z}function ca(w,k,O,D,z){var q=O.U,H=Ii(D),ne=_c(D).P;w[k]=function(me,Te,Ae){return q(me,Te,Ae,ne,H,z)}}function p1(w,k,O,D,z,q,H){var ne=O.U,me=Tc(D,z,q);w[k]=function(Te,Ae,at){return ne(Te,Ae,at,D,me,H)}}function _c(w){var k=w[os];return k||(k=Lf(w,w[os]={},Jl,eu,ca,p1),os in w&&Oi in w&&(w.length=0),k)}function Ai(w,k,O){for(;It(k)&&k.i!=4;){var D=k.l,z=O[D];if(!z){var q=O[0];q&&(q=q[D])&&(z=O[D]=Ff(q))}if(!z||!z(k,w,D)){z=k,D=w,q=z.j,an(z);var H=z;if(!H.ca){if(z=H.h.h-q,H.h.h=q,H=H.h,z==0)z=jr();else{if(q=St(H,z),H.S&&H.m)z=H.i.subarray(q,q+z);else{H=H.i;var ne=q;z=q+z,z=ne===z?De():ht?H.slice(ne,z):new Uint8Array(H.subarray(ne,z))}z=z.length==0?jr():new ts(z,Ze)}(q=D.R)?q.push(z):D.R=[z]}}}return w}function Gp(w,k,O){for(var D=O.length,z=D%2==1,q=z?1:0;q<D;q+=2)(0,O[q+1])(k,w,O[q]);Nc(w,k,z?O[0]:void 0)}function Pi(w,k){return{U:w,W:k}}var Cr=Pi(function(w,k,O){if(w.i!==5)return!1;w=w.h;var D=w.i,z=w.h,q=D[z],H=D[z+1],ne=D[z+2];return D=D[z+3],xt(w,w.h+4),H=(q<<0|H<<8|ne<<16|D<<24)>>>0,w=2*(H>>31)+1,q=H>>>23&255,H&=8388607,no(k,O,q==255?H?NaN:1/0*w:q==0?w*Math.pow(2,-149)*H:w*Math.pow(2,q-150)*(H+Math.pow(2,23))),!0},function(w,k,O){if(k=Pf(k,O),k!=null){Ye(w.h,8*O+5),w=w.h;var D=+k;D===0?0<1/D?dt=Rt=0:(Rt=0,dt=2147483648):isNaN(D)?(Rt=0,dt=2147483647):(D=(O=0>D?-2147483648:0)?-D:D,34028234663852886e22<D?(Rt=0,dt=(O|2139095040)>>>0):11754943508222875e-54>D?(D=Math.round(D/Math.pow(2,-149)),Rt=0,dt=(O|D)>>>0):(k=Math.floor(Math.log(D)/Math.LN2),D*=Math.pow(2,-k),D=Math.round(8388608*D),16777216<=D&&++k,Rt=0,dt=(O|k+127<<23|D&8388607)>>>0)),O=dt,w.h.push(O>>>0&255),w.h.push(O>>>8&255),w.h.push(O>>>16&255),w.h.push(O>>>24&255)}}),Hp=Pi(function(w,k,O){if(w.i!==0)return!1;var D=w.h,z=0,q=w=0,H=D.i,ne=D.h;do{var me=H[ne++];z|=(me&127)<<q,q+=7}while(32>q&&me&128);for(32<q&&(w|=(me&127)>>4),q=3;32>q&&me&128;q+=7)me=H[ne++],w|=(me&127)<<q;if(xt(D,ne),128>me)D=z>>>0,me=w>>>0,(w=me&2147483648)&&(D=~D+1>>>0,me=~me>>>0,D==0&&(me=me+1>>>0)),D=4294967296*me+(D>>>0);else throw $s();return no(k,O,w?-D:D),!0},function(w,k,O){k=rs(k,O),k!=null&&(typeof k=="string"&&aa(k),k!=null&&(Ye(w.h,8*O),typeof k=="number"?(w=w.h,Mr(k),Ga(w,dt,Rt)):(O=aa(k),Ga(w.h,O.i,O.h))))}),m1=Pi(function(w,k,O){return w.i!==0?!1:(no(k,O,Je(w.h)),!0)},function(w,k,O){if(k=rs(k,O),k!=null&&k!=null)if(Ye(w.h,8*O),w=w.h,O=k,0<=O)Ye(w,O);else{for(k=0;9>k;k++)w.h.push(O&127|128),O>>=7;w.h.push(1)}}),Di=Pi(function(w,k,O){if(w.i!==2)return!1;var D=Je(w.h)>>>0;w=w.h;var z=St(w,D);if(w=w.i,ia){var q=w,H;(H=wr)||(H=wr=new TextDecoder("utf-8",{fatal:!0})),w=z+D,q=z===0&&w===q.length?q:q.subarray(z,w);try{var ne=H.decode(q)}catch(at){if(Sn===void 0){try{H.decode(new Uint8Array([128]))}catch{}try{H.decode(new Uint8Array([97])),Sn=!0}catch{Sn=!1}}throw!Sn&&(wr=void 0),at}}else{ne=z,D=ne+D,z=[];for(var me=null,Te,Ae;ne<D;)Te=w[ne++],128>Te?z.push(Te):224>Te?ne>=D?xr():(Ae=w[ne++],194>Te||(Ae&192)!==128?(ne--,xr()):z.push((Te&31)<<6|Ae&63)):240>Te?ne>=D-1?xr():(Ae=w[ne++],(Ae&192)!==128||Te===224&&160>Ae||Te===237&&160<=Ae||((q=w[ne++])&192)!==128?(ne--,xr()):z.push((Te&15)<<12|(Ae&63)<<6|q&63)):244>=Te?ne>=D-2?xr():(Ae=w[ne++],(Ae&192)!==128||(Te<<28)+(Ae-144)>>30!==0||((q=w[ne++])&192)!==128||((H=w[ne++])&192)!==128?(ne--,xr()):(Te=(Te&7)<<18|(Ae&63)<<12|(q&63)<<6|H&63,Te-=65536,z.push((Te>>10&1023)+55296,(Te&1023)+56320))):xr(),8192<=z.length&&(me=Ua(me,z),z.length=0);ne=Ua(me,z)}return no(k,O,ne),!0},function(w,k,O){if(k=rs(k,O),k!=null){var D=!1;if(D=D===void 0?!1:D,es){if(D&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(k))throw Error("Found an unpaired surrogate");k=(Wa||(Wa=new TextEncoder)).encode(k)}else{for(var z=0,q=new Uint8Array(3*k.length),H=0;H<k.length;H++){var ne=k.charCodeAt(H);if(128>ne)q[z++]=ne;else{if(2048>ne)q[z++]=ne>>6|192;else{if(55296<=ne&&57343>=ne){if(56319>=ne&&H<k.length){var me=k.charCodeAt(++H);if(56320<=me&&57343>=me){ne=1024*(ne-55296)+me-56320+65536,q[z++]=ne>>18|240,q[z++]=ne>>12&63|128,q[z++]=ne>>6&63|128,q[z++]=ne&63|128;continue}else H--}if(D)throw Error("Found an unpaired surrogate");ne=65533}q[z++]=ne>>12|224,q[z++]=ne>>6&63|128}q[z++]=ne&63|128}}k=z===q.length?q:q.subarray(0,z)}Ye(w.h,8*O+2),Ye(w.h,k.length),Yn(w,w.h.end()),Yn(w,k)}}),Fi=Pi(function(w,k,O,D,z){if(w.i!==2)return!1;k=Wp(k,O,D),O=w.h.j,D=Je(w.h)>>>0;var q=w.h.h+D,H=q-O;if(0>=H&&(w.h.j=q,z(k,w,void 0,void 0,void 0),H=q-w.h.h),H)throw Error("Message parsing ended unexpectedly. Expected to read "+(D+" bytes, instead read "+(D-H)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return w.h.h=q,w.h.j=O,!0},function(w,k,O,D,z){if(k=Hl(k,D,O),k!=null)for(D=0;D<k.length;D++){var q=w;Ye(q.h,8*O+2);var H=q.h.end();Yn(q,H),H.push(q.i),q=H,z(k[D],w),H=w;var ne=q.pop();for(ne=H.i+H.h.length()-ne;127<ne;)q.push(ne&127|128),ne>>>=7,H.i++;q.push(ne),H.i++}});function da(w){return function(k,O){e:{if(Un.length){var D=Un.pop();D.setOptions(O),lt(D.h,k,O),k=D}else k=new Nt(k,O);try{var z=_c(w),q=Ai(new z.P,k,z);break e}finally{z=k.h,z.i=null,z.m=!1,z.l=0,z.j=0,z.h=0,z.S=!1,k.l=-1,k.i=-1,100>Un.length&&Un.push(k)}q=void 0}return q}}function Li(w){return function(){var k=new br;Gp(this,k,ro(w)),Yn(k,k.h.end());for(var O=new Uint8Array(k.i),D=k.j,z=D.length,q=0,H=0;H<z;H++){var ne=D[H];O.set(ne,q),q+=ne.length}return k.j=[O],O}}function Mi(w){Sr.call(this,w)}v(Mi,Sr);var qp=[Mi,1,m1,2,Cr,3,Di,4,Di];Mi.prototype.l=Li(qp);function tu(w){Sr.call(this,w,-1,Rc)}v(tu,Sr),tu.prototype.addClassification=function(w,k){return Wp(this,1,Mi,w,k),this};var Rc=[1],Ic=da([tu,1,Fi,qp]);function Ha(w){Sr.call(this,w)}v(Ha,Sr);var Ro=[Ha,1,Cr,2,Cr,3,Cr,4,Cr,5,Cr];Ha.prototype.l=Li(Ro);function Oc(w){Sr.call(this,w,-1,Ac)}v(Oc,Sr);var Ac=[1],jf=da([Oc,1,Fi,Ro]);function qa(w){Sr.call(this,w)}v(qa,Sr);var nu=[qa,1,Cr,2,Cr,3,Cr,4,Cr,5,Cr,6,Hp],Kp=da(nu);qa.prototype.l=Li(nu);function Er(w,k,O){if(O=w.createShader(O===0?w.VERTEX_SHADER:w.FRAGMENT_SHADER),w.shaderSource(O,k),w.compileShader(O),!w.getShaderParameter(O,w.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+w.getShaderInfoLog(O));return O}function Ka(w){return Hl(w,Mi,1).map(function(k){var O=rs(k,1);return{index:O??0,score:Vr(k,2),label:rs(k,3)!=null?ql(rs(k,3),""):void 0,displayName:rs(k,4)!=null?ql(rs(k,4),""):void 0}})}function Pc(w){return{x:Vr(w,1),y:Vr(w,2),z:Vr(w,3),visibility:Pf(w,4)!=null?Vr(w,4):void 0}}function Bi(w){return w.map(function(k){return Hl(jf(k),Ha,1).map(Pc)})}function Uf(w,k){this.i=w,this.h=k,this.m=0}function Dc(w,k,O){return Wf(w,k),typeof w.h.canvas.transferToImageBitmap=="function"?Promise.resolve(w.h.canvas.transferToImageBitmap()):O?Promise.resolve(w.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(w.h.canvas):(w.j===void 0&&(w.j=document.createElement("canvas")),new Promise(function(D){w.j.height=w.h.canvas.height,w.j.width=w.h.canvas.width,w.j.getContext("2d",{}).drawImage(w.h.canvas,0,0,w.h.canvas.width,w.h.canvas.height),D(w.j)}))}function Wf(w,k){var O=w.h;if(w.s===void 0){var D=Er(O,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),z=Er(O,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),q=O.createProgram();if(O.attachShader(q,D),O.attachShader(q,z),O.linkProgram(q),!O.getProgramParameter(q,O.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+O.getProgramInfoLog(q));D=w.s=q,O.useProgram(D),z=O.getUniformLocation(D,"sampler0"),w.l={O:O.getAttribLocation(D,"aVertex"),N:O.getAttribLocation(D,"aTex"),xa:z},w.v=O.createBuffer(),O.bindBuffer(O.ARRAY_BUFFER,w.v),O.enableVertexAttribArray(w.l.O),O.vertexAttribPointer(w.l.O,2,O.FLOAT,!1,0,0),O.bufferData(O.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),O.STATIC_DRAW),O.bindBuffer(O.ARRAY_BUFFER,null),w.u=O.createBuffer(),O.bindBuffer(O.ARRAY_BUFFER,w.u),O.enableVertexAttribArray(w.l.N),O.vertexAttribPointer(w.l.N,2,O.FLOAT,!1,0,0),O.bufferData(O.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),O.STATIC_DRAW),O.bindBuffer(O.ARRAY_BUFFER,null),O.uniform1i(z,0)}D=w.l,O.useProgram(w.s),O.canvas.width=k.width,O.canvas.height=k.height,O.viewport(0,0,k.width,k.height),O.activeTexture(O.TEXTURE0),w.i.bindTexture2d(k.glName),O.enableVertexAttribArray(D.O),O.bindBuffer(O.ARRAY_BUFFER,w.v),O.vertexAttribPointer(D.O,2,O.FLOAT,!1,0,0),O.enableVertexAttribArray(D.N),O.bindBuffer(O.ARRAY_BUFFER,w.u),O.vertexAttribPointer(D.N,2,O.FLOAT,!1,0,0),O.bindFramebuffer(O.DRAW_FRAMEBUFFER?O.DRAW_FRAMEBUFFER:O.FRAMEBUFFER,null),O.clearColor(0,0,0,0),O.clear(O.COLOR_BUFFER_BIT),O.colorMask(!0,!0,!0,!0),O.drawArrays(O.TRIANGLE_FAN,0,4),O.disableVertexAttribArray(D.O),O.disableVertexAttribArray(D.N),O.bindBuffer(O.ARRAY_BUFFER,null),w.i.bindTexture2d(0)}function ru(w){this.h=w}var Fc=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Xp(w,k){return k+w}function Yp(w,k){window[w]=k}function g1(w){var k=document.createElement("script");return k.setAttribute("src",w),k.setAttribute("crossorigin","anonymous"),new Promise(function(O){k.addEventListener("load",function(){O()},!1),k.addEventListener("error",function(){O()},!1),document.body.appendChild(k)})}function y1(){return P(function(w){switch(w.h){case 1:return w.s=2,I(w,WebAssembly.instantiate(Fc),4);case 4:w.h=3,w.s=0;break;case 2:return w.s=0,w.l=null,w.return(!1);case 3:return w.return(!0)}})}function su(w){if(this.h=w,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=w&&w.locateFile||Xp,typeof window=="object")var k=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")k=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=k,w.options){k=i(Object.keys(w.options));for(var O=k.next();!O.done;O=k.next()){O=O.value;var D=w.options[O].default;D!==void 0&&(this.l[O]=typeof D=="function"?D():D)}}}e=su.prototype,e.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function x1(w){var k,O,D,z,q,H,ne,me,Te,Ae,at;return P(function(He){switch(He.h){case 1:return w.ga?(k=w.h.files===void 0?[]:typeof w.h.files=="function"?w.h.files(w.l):w.h.files,I(He,y1(),2)):He.return();case 2:if(O=He.i,typeof window=="object")return Yp("createMediapipeSolutionsWasm",{locateFile:w.locateFile}),Yp("createMediapipeSolutionsPackedAssets",{locateFile:w.locateFile}),H=k.filter(function(Fe){return Fe.data!==void 0}),ne=k.filter(function(Fe){return Fe.data===void 0}),me=Promise.all(H.map(function(Fe){var tt=Lc(w,Fe.url);if(Fe.path!==void 0){var pt=Fe.path;tt=tt.then(function(Ht){return w.overrideFile(pt,Ht),Promise.resolve(Ht)})}return tt})),Te=Promise.all(ne.map(function(Fe){return Fe.simd===void 0||Fe.simd&&O||!Fe.simd&&!O?g1(w.locateFile(Fe.url,w.ha)):Promise.resolve()})).then(function(){var Fe,tt,pt;return P(function(Ht){if(Ht.h==1)return Fe=window.createMediapipeSolutionsWasm,tt=window.createMediapipeSolutionsPackedAssets,pt=w,I(Ht,Fe(tt),2);pt.i=Ht.i,Ht.h=0})}),Ae=(function(){return P(function(Fe){return w.h.graph&&w.h.graph.url?Fe=I(Fe,Lc(w,w.h.graph.url),0):(Fe.h=0,Fe=void 0),Fe})})(),I(He,Promise.all([Te,me,Ae]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return D=k.filter(function(Fe){return Fe.simd===void 0||Fe.simd&&O||!Fe.simd&&!O}).map(function(Fe){return w.locateFile(Fe.url,w.ha)}),importScripts.apply(null,l(D)),z=w,I(He,createMediapipeSolutionsWasm(Module),6);case 6:z.i=He.i,w.m=new OffscreenCanvas(1,1),w.i.canvas=w.m,q=w.i.GL.createContext(w.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),w.i.GL.makeContextCurrent(q),He.h=4;break;case 7:if(w.m=document.createElement("canvas"),at=w.m.getContext("webgl2",{}),!at&&(at=w.m.getContext("webgl",{}),!at))return alert("Failed to create WebGL canvas context when passing video frame."),He.return();w.K=at,w.i.canvas=w.m,w.i.createContext(w.m,!0,!0,{});case 4:w.j=new w.i.SolutionWasm,w.ga=!1,He.h=0}})}function w1(w){var k,O,D,z,q,H,ne,me;return P(function(Te){if(Te.h==1){if(w.h.graph&&w.h.graph.url&&w.fa===w.h.graph.url)return Te.return();if(w.u=!0,!w.h.graph||!w.h.graph.url){Te.h=2;return}return w.fa=w.h.graph.url,I(Te,Lc(w,w.h.graph.url),3)}for(Te.h!=2&&(k=Te.i,w.j.loadGraph(k)),O=i(Object.keys(w.D)),D=O.next();!D.done;D=O.next())z=D.value,w.j.overrideFile(z,w.D[z]);if(w.D={},w.h.listeners)for(q=i(w.h.listeners),H=q.next();!H.done;H=q.next())ne=H.value,C1(w,ne);me=w.l,w.l={},w.setOptions(me),Te.h=0})}e.reset=function(){var w=this;return P(function(k){w.j&&(w.j.reset(),w.s={},w.v={}),k.h=0})},e.setOptions=function(w,k){var O=this;if(k=k||this.h.options){for(var D=[],z=[],q={},H=i(Object.keys(w)),ne=H.next();!ne.done;q={X:q.X,Y:q.Y},ne=H.next())if(ne=ne.value,!(ne in this.l&&this.l[ne]===w[ne])){this.l[ne]=w[ne];var me=k[ne];me!==void 0&&(me.onChange&&(q.X=me.onChange,q.Y=w[ne],D.push((function(Te){return function(){var Ae;return P(function(at){if(at.h==1)return I(at,Te.X(Te.Y),2);Ae=at.i,Ae===!0&&(O.u=!0),at.h=0})}})(q))),me.graphOptionXref&&(ne=Object.assign({},{calculatorName:"",calculatorIndex:0},me.graphOptionXref,{valueNumber:me.type===1?w[ne]:0,valueBoolean:me.type===0?w[ne]:!1,valueString:me.type===2?w[ne]:""}),z.push(ne)))}(D.length!==0||z.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(z),this.F=(this.F===void 0?[]:this.F).concat(D))}};function b1(w){var k,O,D,z,q,H,ne;return P(function(me){switch(me.h){case 1:if(!w.u)return me.return();if(!w.F){me.h=2;break}k=i(w.F),O=k.next();case 3:if(O.done){me.h=5;break}return D=O.value,I(me,D(),4);case 4:O=k.next(),me.h=3;break;case 5:w.F=void 0;case 2:if(w.H){for(z=new w.i.GraphOptionChangeRequestList,q=i(w.H),H=q.next();!H.done;H=q.next())ne=H.value,z.push_back(ne);w.j.changeOptions(z),z.delete(),w.H=void 0}w.u=!1,me.h=0}})}e.initialize=function(){var w=this;return P(function(k){return k.h==1?I(k,x1(w),2):k.h!=3?I(k,w1(w),3):I(k,b1(w),0)})};function Lc(w,k){var O,D;return P(function(z){return k in w.L?z.return(w.L[k]):(O=w.locateFile(k,""),D=fetch(O).then(function(q){return q.arrayBuffer()}),w.L[k]=D,z.return(D))})}e.overrideFile=function(w,k){this.j?this.j.overrideFile(w,k):this.D[w]=k},e.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},e.send=function(w,k){var O=this,D,z,q,H,ne,me,Te,Ae,at;return P(function(He){switch(He.h){case 1:return O.h.inputs?(D=1e3*(k??performance.now()),I(He,O.I,2)):He.return();case 2:return I(He,O.initialize(),3);case 3:for(z=new O.i.PacketDataList,q=i(Object.keys(w)),H=q.next();!H.done;H=q.next())if(ne=H.value,me=O.h.inputs[ne]){e:{var Fe=w[ne];switch(me.type){case"video":var tt=O.s[me.stream];if(tt||(tt=new Uf(O.i,O.K),O.s[me.stream]=tt),tt.m===0&&(tt.m=tt.i.createTexture()),typeof HTMLVideoElement<"u"&&Fe instanceof HTMLVideoElement)var pt=Fe.videoWidth,Ht=Fe.videoHeight;else typeof HTMLImageElement<"u"&&Fe instanceof HTMLImageElement?(pt=Fe.naturalWidth,Ht=Fe.naturalHeight):(pt=Fe.width,Ht=Fe.height);Ht={glName:tt.m,width:pt,height:Ht},pt=tt.h,pt.canvas.width=Ht.width,pt.canvas.height=Ht.height,pt.activeTexture(pt.TEXTURE0),tt.i.bindTexture2d(tt.m),pt.texImage2D(pt.TEXTURE_2D,0,pt.RGBA,pt.RGBA,pt.UNSIGNED_BYTE,Fe),tt.i.bindTexture2d(0),tt=Ht;break e;case"detections":for(tt=O.s[me.stream],tt||(tt=new ru(O.i),O.s[me.stream]=tt),tt.data||(tt.data=new tt.h.DetectionListData),tt.data.reset(Fe.length),Ht=0;Ht<Fe.length;++Ht){pt=Fe[Ht];var Wt=tt.data,An=Wt.setBoundingBox,Gr=Ht,dr=pt.la,wt=new qa;if(Wr(wt,1,dr.ra),Wr(wt,2,dr.sa),Wr(wt,3,dr.height),Wr(wt,4,dr.width),Wr(wt,5,dr.rotation),no(wt,6,dr.pa),dr=wt.l(),An.call(Wt,Gr,dr),pt.ea)for(Wt=0;Wt<pt.ea.length;++Wt){wt=pt.ea[Wt],An=tt.data,Gr=An.addNormalizedLandmark,dr=Ht,wt=Object.assign({},wt,{visibility:wt.visibility?wt.visibility:0});var Vn=new Ha;Wr(Vn,1,wt.x),Wr(Vn,2,wt.y),Wr(Vn,3,wt.z),wt.visibility&&Wr(Vn,4,wt.visibility),wt=Vn.l(),Gr.call(An,dr,wt)}if(pt.ba)for(Wt=0;Wt<pt.ba.length;++Wt)An=tt.data,Gr=An.addClassification,dr=Ht,wt=pt.ba[Wt],Vn=new Mi,Wr(Vn,2,wt.score),wt.index&&no(Vn,1,wt.index),wt.label&&no(Vn,3,wt.label),wt.displayName&&no(Vn,4,wt.displayName),wt=Vn.l(),Gr.call(An,dr,wt)}tt=tt.data;break e;default:tt={}}}switch(Te=tt,Ae=me.stream,me.type){case"video":z.pushTexture2d(Object.assign({},Te,{stream:Ae,timestamp:D}));break;case"detections":at=Te,at.stream=Ae,at.timestamp=D,z.pushDetectionList(at);break;default:throw Error("Unknown input config type: '"+me.type+"'")}}return O.j.send(z),I(He,O.I,4);case 4:z.delete(),He.h=0}})};function S1(w,k,O){var D,z,q,H,ne,me,Te,Ae,at,He,Fe,tt,pt,Ht;return P(function(Wt){switch(Wt.h){case 1:if(!O)return Wt.return(k);for(D={},z=0,q=i(Object.keys(O)),H=q.next();!H.done;H=q.next())ne=H.value,me=O[ne],typeof me!="string"&&me.type==="texture"&&k[me.stream]!==void 0&&++z;1<z&&(w.M=!1),Te=i(Object.keys(O)),H=Te.next();case 2:if(H.done){Wt.h=4;break}if(Ae=H.value,at=O[Ae],typeof at=="string")return pt=D,Ht=Ae,I(Wt,Qp(w,Ae,k[at]),14);if(He=k[at.stream],at.type==="detection_list"){if(He){for(var An=He.getRectList(),Gr=He.getLandmarksList(),dr=He.getClassificationsList(),wt=[],Vn=0;Vn<An.size();++Vn){var fa=Kp(An.get(Vn)),E1=Vr(fa,1),em=Vr(fa,2),tm=Vr(fa,3),ou=Vr(fa,4),au=Vr(fa,5,0),Mc=void 0;Mc=Mc===void 0?0:Mc,fa={la:{ra:E1,sa:em,height:tm,width:ou,rotation:au,pa:ql(rs(fa,6),Mc)},ea:Hl(jf(Gr.get(Vn)),Ha,1).map(Pc),ba:Ka(Ic(dr.get(Vn)))},wt.push(fa)}An=wt}else An=[];D[Ae]=An,Wt.h=7;break}if(at.type==="proto_list"){if(He){for(An=Array(He.size()),Gr=0;Gr<He.size();Gr++)An[Gr]=He.get(Gr);He.delete()}else An=[];D[Ae]=An,Wt.h=7;break}if(He===void 0){Wt.h=3;break}if(at.type==="float_list"){D[Ae]=He,Wt.h=7;break}if(at.type==="proto"){D[Ae]=He,Wt.h=7;break}if(at.type!=="texture")throw Error("Unknown output config type: '"+at.type+"'");return Fe=w.v[Ae],Fe||(Fe=new Uf(w.i,w.K),w.v[Ae]=Fe),I(Wt,Dc(Fe,He,w.M),13);case 13:tt=Wt.i,D[Ae]=tt;case 7:at.transform&&D[Ae]&&(D[Ae]=at.transform(D[Ae])),Wt.h=3;break;case 14:pt[Ht]=Wt.i;case 3:H=Te.next(),Wt.h=2;break;case 4:return Wt.return(D)}})}function Qp(w,k,O){var D;return P(function(z){return typeof O=="number"||O instanceof Uint8Array||O instanceof w.i.Uint8BlobList?z.return(O):O instanceof w.i.Texture2dDataOut?(D=w.v[k],D||(D=new Uf(w.i,w.K),w.v[k]=D),z.return(Dc(D,O,w.M))):z.return(void 0)})}function C1(w,k){for(var O=k.name||"$",D=[].concat(l(k.wants)),z=new w.i.StringList,q=i(k.wants),H=q.next();!H.done;H=q.next())z.push_back(H.value);q=w.i.PacketListener.implement({onResults:function(ne){for(var me={},Te=0;Te<k.wants.length;++Te)me[D[Te]]=ne.get(Te);var Ae=w.listeners[O];Ae&&(w.I=S1(w,me,k.outs).then(function(at){at=Ae(at);for(var He=0;He<k.wants.length;++He){var Fe=me[D[He]];typeof Fe=="object"&&Fe.hasOwnProperty&&Fe.hasOwnProperty("delete")&&Fe.delete()}at&&(w.I=at)}))}}),w.j.attachMultiListener(z,q),z.delete()}e.onResults=function(w,k){this.listeners[k||"$"]=w},ie("Solution",su),ie("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Zp(w){return w===void 0&&(w=0),w===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Jp(w){var k=this;w=w||{},this.h=new su({locateFile:w.locateFile,files:function(O){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Zp(O.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Bi},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Bi},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(O){return O.map(function(D){return Ka(Ic(D))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(O){var D,z,q;return P(function(H){return H.h==1?(D=Zp(O),z="third_party/mediapipe/modules/hand_landmark/"+D,I(H,Lc(k.h,D),2)):(q=H.i,k.h.overrideFile(z,q),H.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}e=Jp.prototype,e.close=function(){return this.h.close(),Promise.resolve()},e.onResults=function(w){this.h.onResults(w)},e.initialize=function(){var w=this;return P(function(k){return I(k,w.h.initialize(),0)})},e.reset=function(){this.h.reset()},e.send=function(w){var k=this;return P(function(O){return I(O,k.h.send(w),0)})},e.setOptions=function(w){this.h.setOptions(w)},ie("Hands",Jp),ie("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),ie("VERSION","0.4.1675469240")}).call(dx)),dx}var MH=LH();/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BH=1e-7,jH=1e-4;class UH{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class eI{refCount(t){return fs("refCount")}incRef(t){return fs("incRef")}timerAvailable(){return!0}time(t){return fs("time")}read(t){return fs("read")}readSync(t){return fs("readSync")}readToGPU(t,n){return fs("readToGPU")}numDataIds(){return fs("numDataIds")}disposeData(t,n){return fs("disposeData")}write(t,n,r){return fs("write")}move(t,n,r,s,o){return fs("move")}createTensorFromGPUData(t,n,r){return fs("createTensorFromGPUData")}memory(){return fs("memory")}floatPrecision(){return fs("floatPrecision")}epsilon(){return this.floatPrecision()===32?BH:jH}dispose(){return fs("dispose")}}function fs(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oy(e,t,n){return Math.max(e,Math.min(t,n))}function F2(e){return e%2===0?e:e+1}function gh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function WH(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function V(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function qs(e,t,n=""){V(pn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function af(e){V(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function _e(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function VH(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function pn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Od(e){return e%1===0}function Ew(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function bd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function n3(e,t=s=>0,n,r){return new Promise((s,o)=>{let a=0;const i=()=>{if(e()){s();return}a++;const l=t(a);if(n!=null&&a>=n){o();return}r!=null?r(i,l):setTimeout(i,l)};i()})}function zH(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const s=e.slice();return s[r]=t/n,s}function Xn(e,t){const n=t.length;return e=e==null?t.map((r,s)=>s):[].concat(e),V(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),V(e.every(r=>Od(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function Al(e,t){const n=[],r=[],s=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||s?null:Xn(t,e).sort();let a=0;for(let i=0;i<e.length;++i){if(o!=null){if(o[a]===i&&e[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${e[i]}' is not 1`);(o[a]==null||o[a]>i)&&e[i]===1&&(n.push(e[i]),r.push(i)),o[a]<=i&&a++}e[i]!==1&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function Nl(e,t){return Kn(e,t)}function Kn(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function GH(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function HH(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function qH(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function ay(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function KH(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function e0(e){return typeof e=="string"||e instanceof String}function XH(e){return typeof e=="boolean"}function YH(e){return typeof e=="number"}function wp(e){return Array.isArray(e)?wp(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":YH(e)?"float32":e0(e)?"string":XH(e)?"bool":"float32"}function Nw(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Tw(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function or(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function tI(e,t,n,r=!1){const s=new Array;if(t.length===1){const o=t[0]*(r?2:1);for(let a=0;a<o;a++)s[a]=n[e+a]}else{const o=t[0],a=t.slice(1),i=a.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<o;l++)s[l]=tI(e+l*i,a,n,r)}return s}function kw(e,t,n=!1){if(e.length===0)return t[0];const r=e.reduce((s,o)=>s*o)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return tI(0,e,t,n)}function nI(e,t){const n=Tl(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Tl(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function Ks(e){e.forEach(t=>{V(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function $w(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=n[s]*e[s];return r}function L2(e,t,n){if(t===0)return[];if(t===1)return[e];const r=new Array(t);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(e/n[s]),e-=r[s]*n[s];return r[r.length-1]=e,r}function qu(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r3="tfjsflags";class QH{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ZH,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){const s=this.urlFlags[t];de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${s}.`),this.set(t,s)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(qu(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);r3 in t&&t[r3].split(",").forEach(r=>{const[s,o]=r.split(":");this.urlFlags[s]=eq(s,o)})}}function ZH(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(JH(t,r[0],r[1]),r.join("="))),t}function JH(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function eq(e,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function de(){return rI}let rI=null;function tq(e){rI=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let fx;function sI(){if(fx==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");fx=e}return fx}function nq(){const e=sI();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function M2(e,t){const n=nq();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const oI="Abs",aI="Acos",iI="Acosh",B2="Add",lI="AddN",uI="All",cI="Any",dI="ArgMax",fI="ArgMin",hI="Asin",pI="Asinh",mI="Atan",gI="Atanh",yI="Atan2",vI="AvgPool",rq="AvgPoolGrad",xI="AvgPool3D",sq="AvgPool3DGrad",wI="BatchMatMul",bI="BatchToSpaceND",SI="Bincount",CI="BitwiseAnd",EI="BroadcastArgs",j2="Cast",NI="Ceil",TI="ClipByValue",kI="Complex",$I="ComplexAbs",_I="Concat",RI="Conv2D",II="Conv2DBackpropFilter",OI="Conv2DBackpropInput",AI="Conv3D",oq="Conv3DBackpropFilterV2",PI="Conv3DBackpropInputV2",DI="Cos",FI="Cosh",LI="Cumprod",MI="Cumsum",BI="CropAndResize",jI="DenseBincount",UI="DepthToSpace",WI="DepthwiseConv2dNative",VI="DepthwiseConv2dNativeBackpropFilter",zI="DepthwiseConv2dNativeBackpropInput",GI="Diag",HI="Dilation2D",qI="RealDiv",KI="Einsum",XI="Elu",aq="EluGrad",YI="Erf",QI="Equal",ZI="Exp",JI="ExpandDims",eO="Expm1",tO="FFT",nO="Fill",rO="FlipLeftRight",sO="Floor",oO="FloorDiv",aO="FusedBatchNorm",iO="GatherV2",lO="GatherNd",uO="Greater",cO="GreaterEqual",U2="Identity",dO="IFFT",fO="Imag",hO="IsFinite",pO="IsInf",mO="IsNan",gO="LeakyRelu",yO="Less",vO="LessEqual",xO="LinSpace",wO="Log",bO="Log1p",SO="LogicalAnd",CO="LogicalNot",EO="LogicalOr",NO="LRN",iq="LRNGrad",TO="Max",kO="Maximum",$O="MaxPool",lq="MaxPoolGrad",_O="MaxPool3D",uq="MaxPool3DGrad",RO="MaxPoolWithArgmax",IO="Mean",OO="Min",AO="Minimum",PO="MirrorPad",DO="Mod",FO="Multinomial",LO="Multiply",MO="Neg",BO="NotEqual",jO="NonMaxSuppressionV3",UO="NonMaxSuppressionV4",WO="NonMaxSuppressionV5",VO="OnesLike",zO="OneHot",GO="Pack",HO="PadV2",qO="Pow",KO="Prelu",XO="Prod",YO="RaggedGather",QO="RaggedRange",ZO="RaggedTensorToTensor",JO="Range",eA="Real",tA="Reciprocal",nA="Relu",rA="Reshape",sA="ResizeNearestNeighbor",cq="ResizeNearestNeighborGrad",oA="ResizeBilinear",dq="ResizeBilinearGrad",aA="Relu6",iA="Reverse",lA="Round",uA="Rsqrt",cA="ScatterNd",dA="TensorScatterUpdate",fA="SearchSorted",hA="Select",pA="Selu",mA="Slice",gA="Sin",yA="Sinh",vA="Sign",xA="Sigmoid",wA="Softplus",bA="Sqrt",SA="Sum",CA="SpaceToBatchND",EA="SplitV",NA="Softmax",TA="SparseFillEmptyRows",kA="SparseReshape",$A="SparseSegmentMean",_A="SparseSegmentSum",RA="SparseToDense",IA="SquaredDifference",fq="Square",OA="StaticRegexReplace",AA="StridedSlice",PA="StringNGrams",DA="StringSplit",FA="StringToHashBucketFast",LA="Sub",MA="Tan",BA="Tanh",W2="Tile",jA="TopK",UA="Transform",_g="Transpose",WA="Unique",VA="Unpack",zA="UnsortedSegmentSum",GA="ZerosLike",HA="Step",_w="FromPixels",qA="RotateWithOffset",Rw="_FusedMatMul",Iw="FusedConv2D",Ow="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zo(...e){de().getBool("IS_TEST")||de().getBool("PROD")||console.warn(...e)}function hq(...e){de().getBool("IS_TEST")||de().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iy=M2("kernelRegistry",()=>new Map),pq=M2("gradRegistry",()=>new Map);function Aw(e,t){const n=KA(e,t);return iy.get(n)}function s3(e){return pq.get(e)}function o3(e){const t=iy.entries(),n=[];for(;;){const{done:r,value:s}=t.next();if(r)break;const[o,a]=s,[i]=o.split("_");i===e&&n.push(a)}return n}function mq(e){const{kernelName:t,backendName:n}=e,r=KA(t,n);iy.has(r)&&zo(`The kernel '${t}' for backend '${n}' is already registered`),iy.set(r,e)}function KA(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XA(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var hx,a3;function gq(){if(a3)return hx;a3=1,hx=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(U,P,X){this.low=U|0,this.high=P|0,this.unsigned=!!X}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function n(U){return(U&&U.__isLong__)===!0}t.isLong=n;var r={},s={};function o(U,P){var X,ae,ee;return P?(U>>>=0,(ee=0<=U&&U<256)&&(ae=s[U],ae)?ae:(X=i(U,(U|0)<0?-1:0,!0),ee&&(s[U]=X),X)):(U|=0,(ee=-128<=U&&U<128)&&(ae=r[U],ae)?ae:(X=i(U,U<0?-1:0,!1),ee&&(r[U]=X),X))}t.fromInt=o;function a(U,P){if(isNaN(U))return P?N:S;if(P){if(U<0)return N;if(U>=y)return L}else{if(U<=-x)return W;if(U+1>=x)return M}return U<0?a(-U,P).neg():i(U%g|0,U/g|0,P)}t.fromNumber=a;function i(U,P,X){return new t(U,P,X)}t.fromBits=i;var l=Math.pow;function c(U,P,X){if(U.length===0)throw Error("empty string");if(U==="NaN"||U==="Infinity"||U==="+Infinity"||U==="-Infinity")return S;if(typeof P=="number"?(X=P,P=!1):P=!!P,X=X||10,X<2||36<X)throw RangeError("radix");var ae;if((ae=U.indexOf("-"))>0)throw Error("interior hyphen");if(ae===0)return c(U.substring(1),P,X).neg();for(var ee=a(l(X,8)),ie=S,le=0;le<U.length;le+=8){var we=Math.min(8,U.length-le),te=parseInt(U.substring(le,le+we),X);if(we<8){var oe=a(l(X,we));ie=ie.mul(oe).add(a(te))}else ie=ie.mul(ee),ie=ie.add(a(te))}return ie.unsigned=P,ie}t.fromString=c;function f(U,P){return typeof U=="number"?a(U,P):typeof U=="string"?c(U,P):i(U.low,U.high,typeof P=="boolean"?P:U.unsigned)}t.fromValue=f;var h=65536,p=1<<24,g=h*h,y=g*g,x=y/2,v=o(p),S=o(0);t.ZERO=S;var N=o(0,!0);t.UZERO=N;var _=o(1);t.ONE=_;var I=o(1,!0);t.UONE=I;var A=o(-1);t.NEG_ONE=A;var M=i(-1,2147483647,!1);t.MAX_VALUE=M;var L=i(-1,-1,!0);t.MAX_UNSIGNED_VALUE=L;var W=i(0,-2147483648,!1);t.MIN_VALUE=W;var j=t.prototype;return j.toInt=function(){return this.unsigned?this.low>>>0:this.low},j.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},j.toString=function(P){if(P=P||10,P<2||36<P)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(W)){var X=a(P),ae=this.div(X),ee=ae.mul(X).sub(this);return ae.toString(P)+ee.toInt().toString(P)}else return"-"+this.neg().toString(P);for(var ie=a(l(P,6),this.unsigned),le=this,we="";;){var te=le.div(ie),oe=le.sub(te.mul(ie)).toInt()>>>0,pe=oe.toString(P);if(le=te,le.isZero())return pe+we;for(;pe.length<6;)pe="0"+pe;we=""+pe+we}},j.getHighBits=function(){return this.high},j.getHighBitsUnsigned=function(){return this.high>>>0},j.getLowBits=function(){return this.low},j.getLowBitsUnsigned=function(){return this.low>>>0},j.getNumBitsAbs=function(){if(this.isNegative())return this.eq(W)?64:this.neg().getNumBitsAbs();for(var P=this.high!=0?this.high:this.low,X=31;X>0&&(P&1<<X)==0;X--);return this.high!=0?X+33:X+1},j.isZero=function(){return this.high===0&&this.low===0},j.eqz=j.isZero,j.isNegative=function(){return!this.unsigned&&this.high<0},j.isPositive=function(){return this.unsigned||this.high>=0},j.isOdd=function(){return(this.low&1)===1},j.isEven=function(){return(this.low&1)===0},j.equals=function(P){return n(P)||(P=f(P)),this.unsigned!==P.unsigned&&this.high>>>31===1&&P.high>>>31===1?!1:this.high===P.high&&this.low===P.low},j.eq=j.equals,j.notEquals=function(P){return!this.eq(P)},j.neq=j.notEquals,j.ne=j.notEquals,j.lessThan=function(P){return this.comp(P)<0},j.lt=j.lessThan,j.lessThanOrEqual=function(P){return this.comp(P)<=0},j.lte=j.lessThanOrEqual,j.le=j.lessThanOrEqual,j.greaterThan=function(P){return this.comp(P)>0},j.gt=j.greaterThan,j.greaterThanOrEqual=function(P){return this.comp(P)>=0},j.gte=j.greaterThanOrEqual,j.ge=j.greaterThanOrEqual,j.compare=function(P){if(n(P)||(P=f(P)),this.eq(P))return 0;var X=this.isNegative(),ae=P.isNegative();return X&&!ae?-1:!X&&ae?1:this.unsigned?P.high>>>0>this.high>>>0||P.high===this.high&&P.low>>>0>this.low>>>0?-1:1:this.sub(P).isNegative()?-1:1},j.comp=j.compare,j.negate=function(){return!this.unsigned&&this.eq(W)?W:this.not().add(_)},j.neg=j.negate,j.add=function(P){n(P)||(P=f(P));var X=this.high>>>16,ae=this.high&65535,ee=this.low>>>16,ie=this.low&65535,le=P.high>>>16,we=P.high&65535,te=P.low>>>16,oe=P.low&65535,pe=0,Y=0,G=0,re=0;return re+=ie+oe,G+=re>>>16,re&=65535,G+=ee+te,Y+=G>>>16,G&=65535,Y+=ae+we,pe+=Y>>>16,Y&=65535,pe+=X+le,pe&=65535,i(G<<16|re,pe<<16|Y,this.unsigned)},j.subtract=function(P){return n(P)||(P=f(P)),this.add(P.neg())},j.sub=j.subtract,j.multiply=function(P){if(this.isZero())return S;if(n(P)||(P=f(P)),e){var X=e.mul(this.low,this.high,P.low,P.high);return i(X,e.get_high(),this.unsigned)}if(P.isZero())return S;if(this.eq(W))return P.isOdd()?W:S;if(P.eq(W))return this.isOdd()?W:S;if(this.isNegative())return P.isNegative()?this.neg().mul(P.neg()):this.neg().mul(P).neg();if(P.isNegative())return this.mul(P.neg()).neg();if(this.lt(v)&&P.lt(v))return a(this.toNumber()*P.toNumber(),this.unsigned);var ae=this.high>>>16,ee=this.high&65535,ie=this.low>>>16,le=this.low&65535,we=P.high>>>16,te=P.high&65535,oe=P.low>>>16,pe=P.low&65535,Y=0,G=0,re=0,ce=0;return ce+=le*pe,re+=ce>>>16,ce&=65535,re+=ie*pe,G+=re>>>16,re&=65535,re+=le*oe,G+=re>>>16,re&=65535,G+=ee*pe,Y+=G>>>16,G&=65535,G+=ie*oe,Y+=G>>>16,G&=65535,G+=le*te,Y+=G>>>16,G&=65535,Y+=ae*pe+ee*oe+ie*te+le*we,Y&=65535,i(re<<16|ce,Y<<16|G,this.unsigned)},j.mul=j.multiply,j.divide=function(P){if(n(P)||(P=f(P)),P.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&P.low===-1&&P.high===-1)return this;var X=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,P.low,P.high);return i(X,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?N:S;var ae,ee,ie;if(this.unsigned){if(P.unsigned||(P=P.toUnsigned()),P.gt(this))return N;if(P.gt(this.shru(1)))return I;ie=N}else{if(this.eq(W)){if(P.eq(_)||P.eq(A))return W;if(P.eq(W))return _;var le=this.shr(1);return ae=le.div(P).shl(1),ae.eq(S)?P.isNegative()?_:A:(ee=this.sub(P.mul(ae)),ie=ae.add(ee.div(P)),ie)}else if(P.eq(W))return this.unsigned?N:S;if(this.isNegative())return P.isNegative()?this.neg().div(P.neg()):this.neg().div(P).neg();if(P.isNegative())return this.div(P.neg()).neg();ie=S}for(ee=this;ee.gte(P);){ae=Math.max(1,Math.floor(ee.toNumber()/P.toNumber()));for(var we=Math.ceil(Math.log(ae)/Math.LN2),te=we<=48?1:l(2,we-48),oe=a(ae),pe=oe.mul(P);pe.isNegative()||pe.gt(ee);)ae-=te,oe=a(ae,this.unsigned),pe=oe.mul(P);oe.isZero()&&(oe=_),ie=ie.add(oe),ee=ee.sub(pe)}return ie},j.div=j.divide,j.modulo=function(P){if(n(P)||(P=f(P)),e){var X=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,P.low,P.high);return i(X,e.get_high(),this.unsigned)}return this.sub(this.div(P).mul(P))},j.mod=j.modulo,j.rem=j.modulo,j.not=function(){return i(~this.low,~this.high,this.unsigned)},j.and=function(P){return n(P)||(P=f(P)),i(this.low&P.low,this.high&P.high,this.unsigned)},j.or=function(P){return n(P)||(P=f(P)),i(this.low|P.low,this.high|P.high,this.unsigned)},j.xor=function(P){return n(P)||(P=f(P)),i(this.low^P.low,this.high^P.high,this.unsigned)},j.shiftLeft=function(P){return n(P)&&(P=P.toInt()),(P&=63)===0?this:P<32?i(this.low<<P,this.high<<P|this.low>>>32-P,this.unsigned):i(0,this.low<<P-32,this.unsigned)},j.shl=j.shiftLeft,j.shiftRight=function(P){return n(P)&&(P=P.toInt()),(P&=63)===0?this:P<32?i(this.low>>>P|this.high<<32-P,this.high>>P,this.unsigned):i(this.high>>P-32,this.high>=0?0:-1,this.unsigned)},j.shr=j.shiftRight,j.shiftRightUnsigned=function(P){if(n(P)&&(P=P.toInt()),P&=63,P===0)return this;var X=this.high;if(P<32){var ae=this.low;return i(ae>>>P|X<<32-P,X>>>P,this.unsigned)}else return P===32?i(X,0,this.unsigned):i(X>>>P-32,0,this.unsigned)},j.shru=j.shiftRightUnsigned,j.shr_u=j.shiftRightUnsigned,j.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},j.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},j.toBytes=function(P){return P?this.toBytesLE():this.toBytesBE()},j.toBytesLE=function(){var P=this.high,X=this.low;return[X&255,X>>>8&255,X>>>16&255,X>>>24,P&255,P>>>8&255,P>>>16&255,P>>>24]},j.toBytesBE=function(){var P=this.high,X=this.low;return[P>>>24,P>>>16&255,P>>>8&255,P&255,X>>>24,X>>>16&255,X>>>8&255,X&255]},t.fromBytes=function(P,X,ae){return ae?t.fromBytesLE(P,X):t.fromBytesBE(P,X)},t.fromBytesLE=function(P,X){return new t(P[0]|P[1]<<8|P[2]<<16|P[3]<<24,P[4]|P[5]<<8|P[6]<<16|P[7]<<24,X)},t.fromBytesBE=function(P,X){return new t(P[4]<<24|P[5]<<16|P[6]<<8|P[7],P[0]<<24|P[1]<<16|P[2]<<8|P[3],X)},hx}var YA=gq();const QA=Yb(YA),yq=l$({__proto__:null,default:QA},[YA]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nu=QA||yq;function t0(e){return Nu.fromString(e,!0,16)}const ZA=t0("c3a5c85c97cb3127"),Cu=t0("b492b66fbe98f273"),Or=t0("9ae16a3b2f90404f");function Pw(e){return e.xor(e.shru(47))}function JA(e,t,n){const r=e.slice(t,t+n);return Nu.fromBytes(Array.from(r),!0,!0)}function Kt(e,t){return JA(e,t,8)}function i3(e,t){return JA(e,t,4)}function qn(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function ml(e,t,n=t0("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let s=t.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function vq(e,t,n,r,s,o){s=s.add(e),o=qn(o.add(s).add(r),21);const a=s;return s=s.add(t),s=s.add(n),o=o.add(qn(s,44)),[s.add(r),o.add(a)]}function og(e,t,n,r){return vq(Kt(e,t),Kt(e,t+8),Kt(e,t+16),Kt(e,t+24),n,r)}function xq(e,t=e.length){if(t>=8){const n=Or.add(t*2),r=Kt(e,0).add(Or),s=Kt(e,t-8),o=qn(s,37).mul(n).add(r),a=qn(r,25).add(s).mul(n);return ml(o,a,n)}if(t>=4){const n=Or.add(t*2),r=i3(e,0);return ml(r.shl(3).add(t),i3(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],s=e[t-1],o=n+(r<<8),a=t+(s<<2);return Pw(Or.mul(o).xor(ZA.mul(a))).mul(Or)}return Or}function wq(e,t=e.length){const n=Or.add(t*2),r=Kt(e,0).mul(Cu),s=Kt(e,8),o=Kt(e,t-8).mul(n),a=Kt(e,t-16).mul(Or);return ml(qn(r.add(s),43).add(qn(o,30)).add(a),r.add(qn(s.add(Or),18)).add(o),n)}function bq(e,t=e.length){const n=Or.add(t*2),r=Kt(e,0).mul(Or),s=Kt(e,8),o=Kt(e,t-8).mul(n),a=Kt(e,t-16).mul(Or),i=qn(r.add(s),43).add(qn(o,30)).add(a),l=ml(i,r.add(qn(s.add(Or),18)).add(o),n),c=Kt(e,16).mul(n),f=Kt(e,24),h=i.add(Kt(e,t-32)).mul(n),p=l.add(Kt(e,t-24)).mul(n);return ml(qn(c.add(f),43).add(qn(h,30)).add(p),c.add(qn(f.add(r),18)).add(h),n)}function Sq(e,t=e.length){const n=Nu.fromNumber(81,!0);if(t<=32)return t<=16?xq(e,t):wq(e,t);if(t<=64)return bq(e,t);let r=n,s=n.mul(Cu).add(113),o=Pw(s.mul(Or).add(113)).mul(Or),a=[Nu.UZERO,Nu.UZERO],i=[Nu.UZERO,Nu.UZERO];r=r.mul(Or).add(Kt(e,0));let l=0;const c=(t-1>>6)*64,f=c+(t-1&63)-63;do r=qn(r.add(s).add(a[0]).add(Kt(e,l+8)),37).mul(Cu),s=qn(s.add(a[1]).add(Kt(e,l+48)),42).mul(Cu),r=r.xor(i[1]),s=s.add(a[0]).add(Kt(e,l+40)),o=qn(o.add(i[0]),33).mul(Cu),a=og(e,l,a[1].mul(Cu),r.add(i[0])),i=og(e,l+32,o.add(i[1]),s.add(Kt(e,l+16))),[o,r]=[r,o],l+=64;while(l!==c);const h=Cu.add(o.and(255).shl(1));return l=f,i[0]=i[0].add(t-1&63),a[0]=a[0].add(i[0]),i[0]=i[0].add(a[0]),r=qn(r.add(s).add(a[0]).add(Kt(e,l+8)),37).mul(h),s=qn(s.add(a[1]).add(Kt(e,l+48)),42).mul(h),r=r.xor(i[1].mul(9)),s=s.add(a[0].mul(9).add(Kt(e,l+40))),o=qn(o.add(i[0]),33).mul(h),a=og(e,l,a[1].mul(h),r.add(i[0])),i=og(e,l+32,o.add(i[1]),s.add(Kt(e,l+16))),[o,r]=[r,o],ml(ml(a[0],i[0],h).add(Pw(s).mul(ZA)).add(o),ml(a[1],i[1],h).add(r),h)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lf(e,t){return t==="string"?Fu(e):n0([e],t)}function Cq(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function n0(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Ku(e)),de().getBool("DEBUG")&&GH(e,t),Cq(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Uo(){return de().platform.now()}function Fu(e,t="utf-8"){return t=t||"utf-8",de().platform.encode(e,t)}function Ad(e,t="utf-8"){return t=t||"utf-8",de().platform.decode(e,t)}function bo(e){return de().platform.isTypedArray!=null?de().platform.isTypedArray(e):XA(e)}function Ku(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||qu(e)||e==null||bo(e)&&n)t.push(e);else if(Array.isArray(e)||bo(e))for(let r=0;r<e.length;++r)Ku(e[r],t,n);else{let r=-1;for(const s of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)Ku(e[s],t,n)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Eq{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new Tq)}profileKernel(t,n,r){let s;const o=()=>{s=r()};let a;const i=Uo();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const c of s)c.dataSync();a=Promise.resolve({kernelMs:Uo()-i})}if(de().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const f=s[c];f.data().then(h=>{Nq(h,f.dtype,t)})}return{kernelName:t,outputs:s,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:r,timeMs:s,inputs:o,extraInfo:a}=t;r.forEach(i=>{Promise.all([i.data(),s,a]).then(l=>{this.logger.logKernelProfile(n,i,l[0],l[1],o,l[2])})})}}function Nq(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){const s=e[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class Tq{logKernelProfile(t,n,r,s,o,a){const i=typeof s=="number"?bd(`${s}ms`,9):s.error,l=bd(t,25),c=n.rank,f=n.size,h=bd(n.shape.toString(),14);let p="";for(const g in o){const y=o[g];if(y!=null){const x=y.shape||n.shape,v=x.length;p+=`${g}: ${v}D ${v>0?x:""} `}}console.log(`%c${l}	%c${i}	%c${c}D ${h}	%c${f}	%c${p}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kq(e,t,n){const r={},s={};for(let l=0;l<t.length;l++)r[t[l].id]=!0;for(let l=0;l<e.length;l++){const c=e[l],f=c.inputs;for(const h in f){const p=f[h];let g=!1;for(let y=0;y<t.length;y++)if(r[p.id]){c.outputs.forEach(x=>r[x.id]=!0),g=!0,s[c.id]=!0;break}if(g)break}}const o={};o[n.id]=!0;const a={};for(let l=e.length-1;l>=0;l--){const c=e[l],f=c.inputs;for(let h=0;h<c.outputs.length;h++)if(o[c.outputs[h].id]){for(const p in f)o[f[p].id]=!0,a[c.id]=!0;break}}const i=[];for(let l=0;l<e.length;l++){const c=e[l];if(s[c.id]&&a[c.id]){const f={};for(const p in c.inputs){const g=c.inputs[p];r[g.id]&&(f[p]=g)}const h=Object.assign({},c);h.inputs=f,h.outputs=c.outputs,i.push(h)}}return i}function $q(e,t,n,r){for(let s=t.length-1;s>=0;s--){const o=t[s],a=[];if(o.outputs.forEach(l=>{const c=e[l.id];c!=null?a.push(c):a.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const i=o.gradient(a);for(const l in o.inputs){if(!(l in i))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(i)}.`);const c=n(()=>i[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const f=o.inputs[l];if(!pn(c.shape,f.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${f.shape}'`);if(e[f.id]==null)e[f.id]=c;else{const h=e[f.id];e[f.id]=r(h,c),h.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l3=20,yh=3,px=7;function _q(e,t,n,r){const s=or(t),o=Rq(e,t,n,s),a=t.length,i=Rg(e,t,n,s,o),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${a}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(i.map(c=>"    "+c).join(`
`)),l.join(`
`)}function Rq(e,t,n,r){const s=_e(t),o=r[r.length-1],a=new Array(o).fill(0),i=t.length,l=n==="complex64"?Nh(e):e;if(i>1)for(let c=0;c<s/o;c++){const f=c*o;for(let h=0;h<o;h++)a[h]=Math.max(a[h],Eh(l[f+h],0,n).length)}return a}function Eh(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(px))} + ${parseFloat(e[1].toFixed(px))}j`:e0(e)?r=`'${e}'`:n==="bool"?r=eP(e):r=parseFloat(e.toFixed(px)).toString(),bd(r,t)}function eP(e){return e===0?"false":"true"}function Rg(e,t,n,r,s,o=!0){const a=n==="complex64"?2:1,i=t[0],l=t.length;if(l===0){if(n==="complex64"){const x=Nh(e);return[Eh(x[0],0,n)]}return n==="bool"?[eP(e[0])]:[e[0].toString()]}if(l===1){if(i>l3){const v=yh*a;let S=Array.from(e.slice(0,v)),N=Array.from(e.slice((i-yh)*a,i*a));return n==="complex64"&&(S=Nh(S),N=Nh(N)),["["+S.map((_,I)=>Eh(_,s[I],n)).join(", ")+", ..., "+N.map((_,I)=>Eh(_,s[i-yh+I],n)).join(", ")+"]"]}return["["+(n==="complex64"?Nh(e):Array.from(e)).map((v,S)=>Eh(v,s[S],n)).join(", ")+"]"]}const c=t.slice(1),f=r.slice(1),h=r[0]*a,p=[];if(i>l3){for(let x=0;x<yh;x++){const v=x*h,S=v+h;p.push(...Rg(e.slice(v,S),c,n,f,s,!1))}p.push("...");for(let x=i-yh;x<i;x++){const v=x*h,S=v+h;p.push(...Rg(e.slice(v,S),c,n,f,s,x===i-1))}}else for(let x=0;x<i;x++){const v=x*h,S=v+h;p.push(...Rg(e.slice(v,S),c,n,f,s,x===i-1))}const g=l===2?",":"";p[0]="["+(i>0?p[0]+g:"");for(let x=1;x<p.length-1;x++)p[x]=" "+p[x]+g;let y=`,
`;for(let x=2;x<l;x++)y+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":y),p}function Nh(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pd{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=_e(t),r!=null){const s=r.length;V(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Kn(n,this.size),this.strides=or(t)}set(t,...n){n.length===0&&(n=[0]),V(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const s of t){if(s<0||s>=this.shape[n]){const o=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=this.strides[s]*t[s];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Wo().makeTensor(this.values,this.shape,this.dtype)}}let Wo=null,dd=null;function Iq(e){Wo=e}function Oq(e){dd=e}class Dn{constructor(t,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=_e(t),this.strides=or(t),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return dd.buffer(this.shape,this.dtype,t)}bufferSync(){return dd.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return kw(this.shape,t,this.dtype==="complex64")}arraySync(){return kw(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Wo().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(r=>Ad(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Wo().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Wo().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Ad(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Wo().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Wo().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return dd.print(this,t)}clone(){return this.throwIfDisposed(),dd.clone(this)}toString(t=!1){const n=this.dataSync();return _q(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),dd.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),Wo().makeVariable(this,t,n,r)}}Object.defineProperty(Dn,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function tP(){return M2("Tensor",()=>Dn)}tP();class ly extends Dn{constructor(t,n,r,s){super(t.shape,t.dtype,t.dataId,s),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!pn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Wo().disposeTensor(this),this.dataId=t.dataId,Wo().incRef(this,null)}dispose(){Wo().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(ly,Symbol.hasInstance,{value:e=>e instanceof Dn&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var u3;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(u3||(u3={}));var Dw;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Dw||(Dw={}));var Fw;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(Fw||(Fw={}));var Lw;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(Lw||(Lw={}));var Mw;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(Mw||(Mw={}));const Aq={float32:Lw,int32:Dw,bool:Fw,complex64:Mw};function Aa(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return Aq[e][t]}function V2(e){return Aa(e,"int32")}function nP(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function rP(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bn(e,t){if(e.dtype===t.dtype)return[e,t];const n=Aa(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Pq(e,t){V(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function sP(e){const t=[];return oP(e,t,new Set),t}function oP(e,t,n){if(e==null)return;if(e instanceof Dn){t.push(e);return}if(!Dq(e))return;const r=e;for(const s in r){const o=r[s];n.has(o)||(n.add(o),oP(o,t,n))}}function Dq(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mx(e){return e.kernelName!=null}class c3{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Dd{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new c3}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(zo(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Eq(this.backendInstance),!0}setupRegisteredKernels(){o3(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){o3(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof eI)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,o=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[t]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,zo(`Initialization of backend ${t} failed`),zo(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return zo(`Initialization of backend ${t} failed`),zo(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n],{success:s,asyncInit:o}=this.initializeBackend(r);if(o||s)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const r=this.state.tensorInfo.get(n),s=r.backend,o=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=t,t.move(n,o,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(t,n,r){t();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return Dd.nextTensorId++}nextVariableId(){return Dd.nextVariableId++}clone(t){const n=Z.runKernel(U2,{x:t}),r={x:t},s=a=>({x:()=>{const i="float32",l={x:a},c={dtype:i};return Z.runKernel(j2,l,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,o,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(Aw(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){const s=this.backend.numDataIds();let o=0;r.forEach(l=>{o+=l.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=s-n-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[];const s=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let i;this.backendName==null&&this.backend;let l;const c=mx(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(mx(t)){const{kernelName:y,inputs:x,attrs:v}=t;this.backendName==null&&this.backend;const S=Aw(y,this.backendName);V(S!=null,()=>`Cannot find registered kernel '${y}' for backend '${this.backendName}'`),i=()=>{const N=this.backend.numDataIds();l=S.kernelFunc({inputs:x,attrs:v,backend:this.backend});const _=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(y,N,_);const I=_.map(A=>A.rank!=null?A:this.makeTensorFromTensorInfo(A));if(s){const A=this.getTensorsForGradient(y,x,I);r=this.saveTensorsForBackwardMode(A)}return I}}else{const{forwardFunc:y}=t,x=v=>{s&&(r=v.map(S=>this.keep(this.clone(S))))};i=()=>{const v=this.backend.numDataIds();l=this.tidy(()=>y(this.backend,x));const S=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,v,S),S}}const{inputs:f,attrs:h}=t,p=mx(t)?null:t.backwardsFunc;let g;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=i():(g=this.profiler.profileKernel(c,f,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(g),n=g.outputs)}),s&&this.addTapeNode(c,f,n,p,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(f).map(y=>f[y]!=null?f[y].shape:null),outputShapes:n.map(y=>y.shape),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){const s=s3(t);if(s!=null){const o=s.inputsToSave||[],a=s.outputsToSave||[];let i;s.saveAllInputs?(V(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(n).map(c=>n[c])):i=o.map(c=>n[c]);const l=r.filter((c,f)=>a[f]);return i.concat(l)}return[]}makeTensor(t,n,r,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let o=t;r==="string"&&e0(t[0])&&(o=t.map(l=>Fu(l)));const a=s.write(o,n,r),i=new Dn(n,r,a,this.nextTensorId());if(this.trackTensor(i,s),r==="string"){const l=this.state.tensorInfo.get(a),c=KH(o);this.state.numBytes+=c-l.bytes,l.bytes=c}return i}makeTensorFromDataId(t,n,r,s){r=r||"float32";const o={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,s)}makeTensorFromTensorInfo(t,n){const{dataId:r,shape:s,dtype:o}=t,a=new Dn(s,o,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(t,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.cast(s));const o=new ly(t,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*ay(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof ly||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*ay(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,s,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:o},l=s3(t);l!=null&&(s=l.gradFunc),s!=null&&(i.gradient=c=>(c=c.map((f,h)=>{if(f==null){const p=r[h],g=Tl(p.size,p.dtype);return this.makeTensor(g,p.shape,p.dtype)}return f}),s(c.length>1?c:c[0],o,a))),this.state.activeTape.push(i)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=sP(t),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const a=this.state.activeScope.track[o];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(t,n,r,s=!1){if(V(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));V(o instanceof Dn,()=>"The result y returned by f() must be a tensor.");const a=kq(this.state.activeTape,n,o);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const i={};i[o.id]=r??Fq(o.shape),$q(i,a,c=>this.tidy(c),Lq);const l=n.map(c=>i[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const f of c.saved)f.dispose()}),this.state.activeTape=null),{value:o,grads:l}})}customGrad(t){return V(Nw(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{V(n.every(i=>i instanceof Dn),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((i,l)=>{s[l]=i});const o=(i,l)=>(r=t(...n,l),V(r.value instanceof Dn,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),V(Nw(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(i,l)=>{const c=r.gradFunc(i,l),f=Array.isArray(c)?c:[c];V(f.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),V(f.every(p=>p instanceof Dn),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const h={};return f.forEach((p,g)=>{h[g]=()=>p}),h};return this.runKernelFunc({forwardFunc:o,backwardsFunc:a,inputs:s})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Uo(),r=await this.backend.time(t);return r.wallMs=Uo()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new c3;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Dd.nextTensorId=0;Dd.nextVariableId=0;function Fq(e){const t=nI(_e(e),"float32");return Z.makeTensor(t,e,"float32")}function aP(){const e=sI();if(e._tfengine==null){const t=new QH(e);e._tfengine=new Dd(t)}return tq(e._tfengine.ENV),Iq(()=>e._tfengine),e._tfengine}const Z=aP();function Lq(e,t){const n={a:e,b:t};return Z.runKernel(B2,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mq(){return typeof navigator<"u"&&navigator!=null}function iP(e){if(e||Mq()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window<"u"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function lP(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xr=de();Xr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Xr.registerFlag("IS_BROWSER",()=>lP());Xr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Xr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Xr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Xr.registerFlag("PROD",()=>!1);Xr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Xr.getBool("DEBUG"));Xr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Xr.registerFlag("IS_TEST",()=>!1);Xr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Xr.getBool("DEBUG"));Xr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Xr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Xr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pl(e,t){let n=e;if(bo(e))return t==="string"?[]:[e.length];if(nP(e)){const s=e.channels||"RGBA";return[e.height,e.width*s.length]}else if(rP(e))return[e.buffer.size/(t==null?4:ay(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||bo(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&de().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&uP(e,r,[]),r}function uP(e,t,n){if(n=n||[],!Array.isArray(e)&&!bo(e)){V(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}V(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),V(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let s=0;s<e.length;++s)uP(e[s],r,n.concat(s))}function d3(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function B(e,t,n,r="numeric"){if(e instanceof tP())return d3(r,e.dtype,t,n),e;let s=wp(e);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),d3(r,s,t,n),e==null||!bo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const o=Pl(e,s);!bo(e)&&!Array.isArray(e)&&(e=[e]);const i=s!=="string"?n0(e,s):Ku(e,[],!0);return Z.makeTensor(i,o,s)}function uy(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((o,a)=>B(o,`${t}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cP="__op";function Q(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+cP;const s=(...o)=>{Z.startScope(n);try{const a=r(...o);return qu(a)&&console.error("Cannot return a Promise inside of tidy."),Z.endScope(a),a}catch(a){throw Z.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bq(e,t){const n=B(e,"real","complex"),r=B(t,"imag","complex");qs(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return Z.runKernel(kI,s)}const kl=Q({complex_:Bq});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dl(e,t,n,r){if(r==null)r=wp(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(rP(e)||nP(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return Z.backend.createTensorFromGPUData(e,t||n,r)}if(!bo(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Ks(t);const s=_e(t),o=_e(n);V(s===o,()=>`Based on the provided shape, [${t}], the tensor should have ${s} values but has ${o}`);for(let a=0;a<n.length;++a){const i=n[a],l=a===n.length-1?i!==_e(t.slice(a)):!0;V(n[a]===t[a]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!bo(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?n0(e,r):Ku(e,[],!0),Z.makeTensor(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ra(e,t,n){const r=Pl(e,n);return Dl(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xu={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class Jo{static join(t){return new Jo(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>bo(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){const s=t[r];r!==t.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+s.byteLength;this.shards.push({buffer:s,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const s=n-t,o=new ArrayBuffer(s),a=new Uint8Array(o);let i=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],h=t+i-c.start,p=i,y=Math.min(n,c.end)-c.start,x=new Uint8Array(c.buffer,h,y-h);if(a.set(x,p),i+=x.length,n<c.end)break}return o}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(s){return t<s.start?-1:t>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=jq(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function jq(e,t){let n=0,r=e.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,o=t(e[s]);if(o===0)return s;o<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rl(){return Z}function bt(e,t){return Z.tidy(e,t)}function dn(e){sP(e).forEach(n=>n.dispose())}function Ta(e){return Z.keep(e)}function Uq(){return Z.backendName}function Wq(e,t,n=1){return Z.registerBackend(e,t,n)}function Vq(){return Z.backend}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $l=4;async function zq(e,t){const n=[],r=[],s=Array.isArray(e)?e.map(a=>a.name):Object.keys(e);for(let a=0;a<s.length;++a){const i=s[a],l=Array.isArray(e)?e[a].tensor:e[i];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${i}': ${l.dtype}`);const c={name:i,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const f=new Promise(async h=>{const p=await l.bytes(),g=p.reduce((v,S)=>v+S.length,0)+$l*p.length,y=new Uint8Array(g);let x=0;for(let v=0;v<p.length;v++){const S=p[v],N=new Uint8Array(new Uint32Array([S.length]).buffer);y.set(N,x),x+=$l,y.set(S,x),x+=S.length}h(y)});r.push(f)}else r.push(l.data());t!=null&&(c.group=t),n.push(c)}const o=await Promise.all(r);return{data:qq(o),specs:n}}function dP(e,t){const n=new Jo(e),r={};let s=0;for(const o of t){const a=Gq(o,(i,l)=>n.slice(s+i,s+l));r[o.name]=fP(o,n.slice(s,s+a)),s+=a}return r}function Gq(e,t){const n=_e(e.shape);let r;if("quantization"in e){const s=e.quantization;r=Xu[s.dtype]}else if(e.dtype==="string"){let s=0;for(let o=0;o<n;o++)s+=$l+new Uint32Array(t(s,s+$l))[0];return s}else r=Xu[e.dtype];return n*r}async function Hq(e,t){const n=_e(e.shape);let r;if("quantization"in e){const s=e.quantization;r=Xu[s.dtype]}else if(e.dtype==="string"){let s=0;for(let o=0;o<n;o++)s+=$l+new Uint32Array(await t(s,s+$l))[0];return s}else r=Xu[e.dtype];return n*r}function fP(e,t){const n=e.name,r=e.dtype,s=e.shape,o=_e(s);let a,i=0;if("quantization"in e){const l=e.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${e.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${e.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${e.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=Xu[l.dtype],f=l.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){a=new Float32Array(f.length);for(let h=0;h<f.length;h++){const p=f[h];a[h]=p*l.scale+l.min}}else if(l.dtype==="float16")a=eK()(f);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);a=new Int32Array(f.length);for(let h=0;h<f.length;h++){const p=f[h];a[h]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);i+=o*c}else if(r==="string"){const l=_e(e.shape);a=[];for(let c=0;c<l;c++){const f=new Uint32Array(t.slice(i,i+$l))[0];i+=$l;const h=new Uint8Array(t.slice(i,i+f));a.push(h),i+=f}}else{const l=Xu[r];if(r==="float32")a=new Float32Array(t);else if(r==="int32")a=new Int32Array(t);else if(r==="bool")a=new Uint8Array(t);else if(r==="complex64"){a=new Float32Array(t);const c=new Float32Array(a.length/2),f=new Float32Array(a.length/2);for(let y=0;y<c.length;y++)c[y]=a[y*2],f[y]=a[y*2+1];const h=Ra(c,s,"float32"),p=Ra(f,s,"float32"),g=kl(h,p);return h.dispose(),p.dispose(),g}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);i+=o*l}return Ra(a,s,r)}async function f3(e,t,n){let r=new Uint8Array(t);for(;r.byteLength<n;){const{done:s,value:o}=await e.read();if(s&&o==null){const i=n-r.byteLength;throw new Error(`Reader is done but ${i} bytes are still expected`)}const a=new Uint8Array(r.length+o.byteLength);a.set(r,0),a.set(new Uint8Array(o),r.length),r=a}return r.buffer}async function hP(e,t){const n={},r=e.getReader();let s=new ArrayBuffer(0);for(const o of t){const a=await Hq(o,async(c,f)=>(s=await f3(r,s,f),s.slice(c,f)));s=await f3(r,s,a);const i=s.slice(0,a);s=s.slice(a);const l=fP(o,i);if(n[o.name]=l,Uq()==="webgpu"){const c=Vq();"uploadToGPU"in c&&_e(l.shape)>=de().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function qq(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(o=>{if(t+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(t);let s=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),s),s+=o.byteLength}),r.buffer}const z2=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function h3(e){return z2?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function Kq(e){if(z2)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Xq(e){if(z2){const r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function Yq(e){return Jo.join(e)}function p3(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const n=e.split("/");return n[n.length-1]}function pP(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function mP(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function G2(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),mP(e,n,r)}function bp(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:h3(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:h3(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new Jo(e.weightData).byteLength}}function Bw(e){const t=[];for(const n of e)t.push(...n.weights);return t}function Qq(){const e=n=>{let r=n<<13,s=0;for(;(r&8388608)===0;)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function Zq(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function Jq(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function eK(){const e=Qq(),t=Zq(),n=Jq();return r=>{const s=new ArrayBuffer(4*r.length),o=new Uint32Array(s);for(let a=0;a<r.length;a++){const i=r[a],l=e[n[i>>10]+(i&1023)]+t[i>>10];o[a]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return cn.instance==null&&(cn.instance=new cn),cn.instance}static registerSaveRouter(t){cn.getInstance().saveRouters.push(t)}static registerLoadRouter(t){cn.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return cn.getHandlers(t,"save")}static getLoadHandlers(t,n){return cn.getHandlers(t,"load",n)}static getHandlers(t,n,r){const s=[];return(n==="load"?cn.getInstance().loadRouters:cn.getInstance().saveRouters).forEach(a=>{const i=a(t,r);i!==null&&s.push(i)}),s}}const tK=e=>cn.registerSaveRouter(e),nK=e=>cn.registerLoadRouter(e),rK=e=>cn.getSaveHandlers(e),sK=(e,t)=>cn.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jw="tensorflowjs",Uw=1,Ru="models_store",dl="model_info_store";function gP(){if(!de().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Ww(e){const t=e.result;t.createObjectStore(Ru,{keyPath:"modelPath"}),t.createObjectStore(dl,{keyPath:"modelPath"})}class Yu{constructor(t){if(this.indexedDB=gP(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,s)=>{const o=this.indexedDB.open(jw,Uw);o.onupgradeneeded=()=>Ww(o),o.onsuccess=()=>{const a=o.result;if(n==null){const i=a.transaction(Ru,"readonly"),c=i.objectStore(Ru).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=f=>(a.close(),s(c.error)),i.oncomplete=()=>a.close()}else{n.weightData=Jo.join(n.weightData);const i=bp(n),l=a.transaction(dl,"readwrite");let c=l.objectStore(dl),f;try{f=c.put({modelPath:this.modelPath,modelArtifactsInfo:i})}catch(p){return s(p)}let h;f.onsuccess=()=>{h=a.transaction(Ru,"readwrite");const p=h.objectStore(Ru);let g;try{g=p.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:i})}catch(y){return s(y)}g.onsuccess=()=>r({modelArtifactsInfo:i}),g.onerror=y=>{c=l.objectStore(dl);const x=c.delete(this.modelPath);x.onsuccess=()=>(a.close(),s(g.error)),x.onerror=v=>(a.close(),s(g.error))}},f.onerror=p=>(a.close(),s(f.error)),l.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},o.onerror=a=>s(o.error)})}}Yu.URL_SCHEME="indexeddb://";const yP=e=>de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yu.URL_SCHEME)?oK(e.slice(Yu.URL_SCHEME.length)):null;cn.registerSaveRouter(yP);cn.registerLoadRouter(yP);function oK(e){return new Yu(e)}function aK(e){return e.startsWith(Yu.URL_SCHEME)?e.slice(Yu.URL_SCHEME.length):e}class iK{constructor(){this.indexedDB=gP()}async listModels(){return new Promise((t,n)=>{const r=this.indexedDB.open(jw,Uw);r.onupgradeneeded=()=>Ww(r),r.onsuccess=()=>{const s=r.result,o=s.transaction(dl,"readonly"),i=o.objectStore(dl).getAll();i.onsuccess=()=>{const l={};for(const c of i.result)l[c.modelPath]=c.modelArtifactsInfo;t(l)},i.onerror=l=>(s.close(),n(i.error)),o.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(t){return t=aK(t),new Promise((n,r)=>{const s=this.indexedDB.open(jw,Uw);s.onupgradeneeded=()=>Ww(s),s.onsuccess=()=>{const o=s.result,a=o.transaction(dl,"readwrite"),i=a.objectStore(dl),l=i.get(t);let c;l.onsuccess=()=>{if(l.result==null)return o.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const f=i.delete(t),h=()=>{c=o.transaction(Ru,"readwrite");const g=c.objectStore(Ru).delete(t);g.onsuccess=()=>n(l.result.modelArtifactsInfo),g.onerror=y=>r(l.error)};f.onsuccess=h,f.onerror=p=>(h(),o.close(),r(l.error))}},l.onerror=f=>(o.close(),r(l.error)),a.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},s.onerror=o=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ii="/",fd="tensorflowjs_models",vP="info",lK="model_topology",uK="weight_specs",cK="weight_data",dK="model_metadata";function xP(e){return{info:[fd,e,vP].join(ii),topology:[fd,e,lK].join(ii),weightSpecs:[fd,e,uK].join(ii),weightData:[fd,e,cK].join(ii),modelMetadata:[fd,e,dK].join(ii)}}function wP(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function fK(e){const t=e.split(ii);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ii)}function hK(e){return e.startsWith(Qu.URL_SCHEME)?e.slice(Qu.URL_SCHEME.length):e}class Qu{constructor(t){if(!de().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=xP(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),s=bp(t),o=Jo.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Kq(o));const a={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw wP(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const i=JSON.parse(o);n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,i.signature!=null&&(n.signature=i.signature),i.userDefinedMetadata!=null&&(n.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(n.modelInitializer=i.modelInitializer),i.initializerSignature!=null&&(n.initializerSignature=i.initializerSignature),i.trainingConfig!=null&&(n.trainingConfig=i.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Xq(a),n}}Qu.URL_SCHEME="localstorage://";const bP=e=>de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Qu.URL_SCHEME)?pK(e.slice(Qu.URL_SCHEME.length)):null;cn.registerSaveRouter(bP);cn.registerLoadRouter(bP);function pK(e){return new Qu(e)}class mK{constructor(){V(de().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),V(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=fd+ii,r=ii+vP;for(let s=0;s<this.LS.length;++s){const o=this.LS.key(s);if(o.startsWith(n)&&o.endsWith(r)){const a=fK(o);t[a]=JSON.parse(this.LS.getItem(o))}}return t}async removeModel(t){t=hK(t);const n=xP(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return wP(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd="://";class Ir{constructor(){this.managers={}}static getInstance(){return Ir.instance==null&&(Ir.instance=new Ir),Ir.instance}static registerManager(t,n){V(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Sd)&&(t=t.slice(0,t.indexOf(Sd))),V(t.length>0,()=>"scheme must not be an empty string.");const r=Ir.getInstance();V(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){const n=Ir.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(Ir.getInstance().managers)}}function Ig(e){if(e.indexOf(Sd)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Ir.getSchemes().join(",")}`);return{scheme:e.split(Sd)[0],path:e.split(Sd)[1]}}async function SP(e,t,n=!1){V(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=cn.getLoadHandlers(e);V(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),V(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const s=r[0],o=cn.getSaveHandlers(t);V(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),V(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const a=o[0],i=Ig(e).scheme,l=Ig(e).path,c=i===Ig(e).scheme,f=await s.load();n&&c&&await Ir.getManager(i).removeModel(l);const h=await a.save(f);return n&&!c&&await Ir.getManager(i).removeModel(l),h.modelArtifactsInfo}async function gK(){const e=Ir.getSchemes(),t={};for(const n of e){const r=await Ir.getManager(n).listModels();for(const s in r){const o=n+Sd+s;t[o]=r[s]}}return t}async function yK(e){const t=Ig(e);return Ir.getManager(t.scheme).removeModel(t.path)}async function vK(e,t){return SP(e,t,!1)}async function xK(e,t){return SP(e,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wK{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!de().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return XA(t)}}if(de().get("IS_BROWSER")){de().setPlatform("browser",new wK);try{Ir.registerManager(Qu.URL_SCHEME,new mK)}catch{}try{Ir.registerManager(Yu.URL_SCHEME,new iK)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bK={importFetch:()=>require("node-fetch")};let gx;class SK{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return de().global.fetch!=null?de().global.fetch(t,n):(gx==null&&(gx=bK.importFetch()),gx(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}de().get("IS_NODE")&&!de().get("IS_BROWSER")&&de().setPlatform("node",new SK);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mn(e,t="float32",n){return t=t||"float32",Ks(e),new Pd(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CK(e,t){const n=B(e,"x","cast");if(!HH(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:t};return Z.runKernel(j2,r,s)}const hn=Q({cast_:CK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EK(e){const n={x:B(e,"x","clone","string_or_numeric")};return Z.runKernel(U2,n)}const gl=Q({clone_:EK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CP(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */aP();const NK={buffer:mn,cast:hn,clone:gl,print:CP};Oq(NK);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TK(e,t){let n=B(e,"a","add"),r=B(t,"b","add");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(B2,s)}const et=Q({add_:TK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kK(e,t){let n=B(e,"a","floorDiv"),r=B(t,"b","floorDiv");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(oO,s)}const EP=Q({floorDiv_:kK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $K(e,t){let n=B(e,"a","div"),r=B(t,"b","div");if([n,r]=bn(n,r),n.dtype==="int32"&&r.dtype==="int32")return EP(n,r);const s={a:n,b:r},o={};return Z.runKernel(qI,s,o)}const Et=Q({div_:$K});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _K(e,t){let n=B(e,"a","mul"),r=B(t,"b","mul");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(LO,s)}const Oe=Q({mul_:_K});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RK(e){const t=B(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return Z.runKernel($I,n)}else{const n={x:t};return Z.runKernel(oI,n)}}const Fs=Q({abs_:RK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IK(e){const n={x:B(e,"x","acos")};return Z.runKernel(aI,n)}const OK=Q({acos_:IK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AK(e){const n={x:B(e,"x","acosh")};return Z.runKernel(iI,n)}const PK=Q({acosh_:AK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DK(e){V(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),V(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((s,o)=>B(s,`tensors${o}`,"addN")),n=t[0];t.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(s=>{if(!pn(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return Z.runKernel(lI,r)}const FK=Q({addN_:DK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LK(e,t=null,n=!1){const s={x:B(e,"x","all","bool")},o={axis:t,keepDims:n};return Z.runKernel(uI,s,o)}const MK=Q({all_:LK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BK(e,t=null,n=!1){const s={x:B(e,"x","any","bool")},o={axis:t,keepDims:n};return Z.runKernel(cI,s,o)}const jK=Q({any_:BK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UK(e,t=0){const r={x:B(e,"x","argMax")},s={axis:t};return Z.runKernel(dI,r,s)}const WK=Q({argMax_:UK});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(e,t=0){const r={x:B(e,"x","argMin")},s={axis:t};return Z.runKernel(fI,r,s)}const zK=Q({argMin_:VK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GK(e){const n={x:B(e,"x","asin")};return Z.runKernel(hI,n)}const HK=Q({asin_:GK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qK(e){const n={x:B(e,"x","asinh")};return Z.runKernel(pI,n)}const KK=Q({asinh_:qK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XK(e){const n={x:B(e,"x","atan")};return Z.runKernel(mI,n)}const YK=Q({atan_:XK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QK(e,t){let n=B(e,"a","atan2"),r=B(t,"b","atan2");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(yI,s)}const ZK=Q({atan2_:QK});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JK(e){const n={x:B(e,"x","atanh")};return Z.runKernel(gI,n)}const eX=Q({atanh_:JK});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NP(e,t,n,r,s="NHWC",o){const a=e[3],i=[...t,a],l=uf(s);return Xs(e,i,n,o,r,null,null,l)}function hc(e,t,n,r,s,o,a="channelsLast"){const[i,l]=Hh(t);let c;if(a==="channelsLast")c=[i,l,e[3],e[3]];else if(a==="channelsFirst")c=[i,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Xs(e,c,n,r,s,o,!1,a)}function Sp(e,t,n,r,s,o,a="NDHWC"){const[i,l,c]=Vw(t);let f,h;if(a==="NDHWC")h="channelsLast",f=[i,l,c,e[4],e[4]];else if(a==="NCDHW")h="channelsFirst",f=[i,l,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Cp(e,f,n,r,s,!1,h,o)}function Xs(e,t,n,r,s,o,a=!1,i="channelsLast"){let[l,c,f,h]=[-1,-1,-1,-1];if(i==="channelsLast")[l,c,f,h]=e;else if(i==="channelsFirst")[l,h,c,f]=e;else throw new Error(`Unknown dataFormat ${i}`);const[p,g,,y]=t,[x,v]=Hh(n),[S,N]=Hh(r),_=Cd(p,S),I=Cd(g,N),{padInfo:A,outHeight:M,outWidth:L}=rX(s,c,f,x,v,_,I,o,i),W=a?y*h:y;let j;return i==="channelsFirst"?j=[l,W,M,L]:i==="channelsLast"&&(j=[l,M,L,W]),{batchSize:l,dataFormat:i,inHeight:c,inWidth:f,inChannels:h,outHeight:M,outWidth:L,outChannels:W,padInfo:A,strideHeight:x,strideWidth:v,filterHeight:p,filterWidth:g,effectiveFilterHeight:_,effectiveFilterWidth:I,dilationHeight:S,dilationWidth:N,inShape:e,outShape:j,filterShape:t}}function Cp(e,t,n,r,s,o=!1,a="channelsLast",i){let[l,c,f,h,p]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[l,c,f,h,p]=e;else if(a==="channelsFirst")[l,p,c,f,h]=e;else throw new Error(`Unknown dataFormat ${a}`);const[g,y,x,,v]=t,[S,N,_]=Vw(n),[I,A,M]=Vw(r),L=Cd(g,I),W=Cd(y,A),j=Cd(x,M),{padInfo:U,outDepth:P,outHeight:X,outWidth:ae}=sX(s,c,f,h,S,N,_,L,W,j,i),ee=o?v*p:v;let ie;return a==="channelsFirst"?ie=[l,ee,P,X,ae]:a==="channelsLast"&&(ie=[l,P,X,ae,ee]),{batchSize:l,dataFormat:a,inDepth:c,inHeight:f,inWidth:h,inChannels:p,outDepth:P,outHeight:X,outWidth:ae,outChannels:ee,padInfo:U,strideDepth:S,strideHeight:N,strideWidth:_,filterDepth:g,filterHeight:y,filterWidth:x,effectiveFilterDepth:L,effectiveFilterHeight:W,effectiveFilterWidth:j,dilationDepth:I,dilationHeight:A,dilationWidth:M,inShape:e,outShape:ie,filterShape:t}}function tX(e,t,n,r,s){r==null&&(r=H2(e,t,n));const o=e[0],a=e[1],i=qh((o-t+2*r)/n+1,s),l=qh((a-t+2*r)/n+1,s);return[i,l]}function nX(e,t,n,r,s,o){s==null&&(s=H2(e,t[0],r[0]));const a=[0,0,0,n];for(let i=0;i<3;i++)e[i]+2*s>=t[i]&&(a[i]=qh((e[i]-t[i]+2*s)/r[i]+1,o));return a}function H2(e,t,n,r=1){const s=Cd(t,r);return Math.floor((e[0]*(n-1)-n+s)/2)}function Hh(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Vw(e){return typeof e=="number"?[e,e,e]:e}function Cd(e,t){return t<=1?e:e+(e-1)*(t-1)}function rX(e,t,n,r,s,o,a,i,l){let c,f,h;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const g=tX([t,n],o,r,e,i);f=g[0],h=g[1]}else if(e==="same"){f=Math.ceil(t/r),h=Math.ceil(n/s);const p=Math.max(0,(f-1)*r+o-t),g=Math.max(0,(h-1)*s+a-n),y=Math.floor(p/2),x=p-y,v=Math.floor(g/2),S=g-v;c={top:y,bottom:x,left:v,right:S,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},f=Math.ceil((t-o+1)/r),h=Math.ceil((n-a+1)/s);else if(typeof e=="object"){const p=l==="channelsLast"?e[1][0]:e[2][0],g=l==="channelsLast"?e[1][1]:e[2][1],y=l==="channelsLast"?e[2][0]:e[3][0],x=l==="channelsLast"?e[2][1]:e[3][1];c={top:p,bottom:g,left:y,right:x,type:p===0&&g===0&&y===0&&x===0?"VALID":"EXPLICIT"},f=qh((t-o+p+g)/r+1,i),h=qh((n-a+y+x)/s+1,i)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:f,outWidth:h}}function sX(e,t,n,r,s,o,a,i,l,c,f){let h,p,g,y;if(e==="valid"&&(e=0),typeof e=="number"){h={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const v=nX([t,n,r,1],[i,l,c],1,[s,o,a],e,f);p=v[0],g=v[1],y=v[2]}else if(e==="same"){p=Math.ceil(t/s),g=Math.ceil(n/o),y=Math.ceil(r/a);const x=(p-1)*s+i-t,v=(g-1)*o+l-n,S=(y-1)*a+c-r,N=Math.floor(x/2),_=x-N,I=Math.floor(v/2),A=v-I,M=Math.floor(S/2),L=S-M;h={top:I,bottom:A,left:M,right:L,front:N,back:_,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:h,outDepth:p,outHeight:g,outWidth:y}}function qh(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Kh(e){const[t,n,r]=Hh(e);return t===1&&n===1&&r===1}function Es(e,t){return Kh(e)||Kh(t)}function Zu(e){return Hh(e).every(t=>t>0)}function uf(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Co(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")V(Od(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(s=>{V(Od(s),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oX(e,t){const r={x:B(e,"x","reshape","string_or_numeric")},s={shape:t};return Z.runKernel(rA,r,s)}const be=Q({reshape_:oX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aX(e,t,n,r,s){const o=B(e,"x","avgPool","float32"),a=1;V(Es(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let i=o,l=!1;o.rank===3&&(l=!0,i=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(i.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),Co("avgPool",r,s);const c={x:i},f={filterSize:t,strides:n,pad:r,dimRoundingMode:s};let h=Z.runKernel(vI,c,f);return h=hn(h,o.dtype),l?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const TP=Q({avgPool_:aX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iX(e,t,n,r,s,o="NDHWC"){const a=B(e,"x","avgPool3d","float32");let i=a,l=!1;a.rank===4&&(l=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(i.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`),V(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),V(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Co("avgPool3d",r,s);const c={x:i},f={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:o};let h=Z.runKernel(xI,c,f);return h=hn(h,i.dtype),l?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const lX=Q({avgPool3d_:iX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uX(e,t=0){V(e.length>=1,()=>"Pass at least one tensor to concat");const n=uy(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return gl(n[0]);const r=n,s={axis:t};return Z.runKernel(_I,r,s)}const ar=Q({concat_:uX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cX(e,t,n=!1,r=!1){let s=B(e,"a","matMul"),o=B(t,"b","matMul");[s,o]=bn(s,o);const a={a:s,b:o},i={transposeA:n,transposeB:r};return Z.runKernel(wI,a,i)}const zt=Q({matMul_:cX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dX(e){const n={x:B(e,"x","sigmoid","float32")};return Z.runKernel(xA,n)}const Lu=Q({sigmoid_:dX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fX(e,t,n){const r=B(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},o={begin:t,size:n};return Z.runKernel(mA,s,o)}const gt=Q({slice_:fX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hX(e){const n={x:B(e,"x","tanh","float32")};return Z.runKernel(BA,n)}const zw=Q({tanh_:hX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pX(e,t,n,r,s,o){const a=B(e,"forgetBias","basicLSTMCell"),i=B(t,"lstmKernel","basicLSTMCell"),l=B(n,"lstmBias","basicLSTMCell"),c=B(r,"data","basicLSTMCell"),f=B(s,"c","basicLSTMCell"),h=B(o,"h","basicLSTMCell"),p=ar([c,h],1),g=zt(p,i),y=et(g,l),x=y.shape[0],v=y.shape[1]/4,S=[x,v],N=gt(y,[0,0],S),_=gt(y,[0,v],S),I=gt(y,[0,v*2],S),A=gt(y,[0,v*3],S),M=et(Oe(Lu(N),zw(_)),Oe(f,Lu(et(a,I)))),L=Oe(zw(M),Lu(A));return[M,L]}const mX=Q({basicLSTMCell_:pX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gX(e,t,n){const r=B(e,"x","batchToSpaceND"),s=t.reduce((i,l)=>i*l);V(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),V(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),V(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${s}`);const o={x:r},a={blockShape:t,crops:n};return Z.runKernel(bI,o,a)}const kP=Q({batchToSpaceND_:gX});function yX(e){let t;return e.rank===0||e.rank===1?t=be(e,[1,1,1,e.size]):e.rank===2?t=be(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vX(e,t,n,r,s,o){o==null&&(o=.001);const a=B(e,"x","batchNorm"),i=B(t,"mean","batchNorm"),l=B(n,"variance","batchNorm");let c;s!=null&&(c=B(s,"scale","batchNorm"));let f;r!=null&&(f=B(r,"offset","batchNorm")),V(i.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(f==null||i.rank===f.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(c==null||i.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const p={x:yX(a),scale:c,offset:f,mean:i,variance:l},g={varianceEpsilon:o},y=Z.runKernel(aO,p,g);return be(y,a.shape)}const r0=Q({batchNorm_:vX});function xX(e,t,n,r,s,o){const a=B(e,"x","batchNorm"),i=B(t,"mean","batchNorm"),l=B(n,"variance","batchNorm");let c;s!=null&&(c=B(s,"scale","batchNorm"));let f;return r!=null&&(f=B(r,"offset","batchNorm")),V(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),V(i.rank===2||i.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`),V(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),f!=null&&V(f.rank===2||f.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${f.rank}.`),r0(a,i,l,f,c,o)}const wX=Q({batchNorm2d_:xX});function bX(e,t,n,r,s,o){const a=B(e,"x","batchNorm"),i=B(t,"mean","batchNorm"),l=B(n,"variance","batchNorm");let c;s!=null&&(c=B(s,"scale","batchNorm"));let f;return r!=null&&(f=B(r,"offset","batchNorm")),V(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),V(i.rank===3||i.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`),V(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),f!=null&&V(f.rank===3||f.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${f.rank}.`),r0(a,i,l,f,c,o)}const SX=Q({batchNorm3d_:bX});function CX(e,t,n,r,s,o){const a=B(e,"x","batchNorm"),i=B(t,"mean","batchNorm"),l=B(n,"variance","batchNorm");let c;s!=null&&(c=B(s,"scale","batchNorm"));let f;return r!=null&&(f=B(r,"offset","batchNorm")),V(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),V(i.rank===4||i.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`),V(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&V(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),f!=null&&V(f.rank===4||f.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${f.rank}.`),r0(a,i,l,f,c,o)}const EX=Q({batchNorm4d_:CX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NX(e,t,n){const r=B(e,"x","bincount"),s=B(t,"weights","bincount");V(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const o={x:r,weights:s},a={size:n};return Z.runKernel(SI,o,a)}const $P=Q({bincount_:NX});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TX(e,t){const n=B(e,"x","bitwiseAnd"),r=B(t,"y","bitwiseAnd");if(!pn(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return Z.runKernel(CI,s)}const kX=Q({bitwiseAnd_:TX});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $X(e,t){const n=B(e,"s0","broadcastArgs","int32"),r=B(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return Z.runKernel(EI,s)}const _X=Q({broadcastArgs_:$X});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RX(e,t){let n=B(e,"broadcastTo","x");const r=n.shape;if(Ks(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=be(n,c)}const s=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(s[c]===t[c])o[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(o.map((c,f)=>c>1?f:-1).filter(c=>c>=0).length===0)return gl(n);const i={x:n},l={reps:o};return Z.runKernel(W2,i,l)}const Ah=Q({broadcastTo_:RX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IX(e){const n={x:B(e,"x","ceil","float32")};return Z.runKernel(NI,n)}const OX=Q({ceil_:IX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ep(e,t,n){Ks(e),n=n||wp(t);const r={shape:e,value:t,dtype:n};return Z.runKernel(nO,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AX(e,t,n){const r=B(e,"x","clipByValue");if(V(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return Ep(r.shape,t,r.dtype);const s={x:r},o={clipValueMin:t,clipValueMax:n};return Z.runKernel(TI,s,o)}const _P=Q({clipByValue_:AX});function PX(e){return ar(e,0)}const DX=Q({concat1d_:PX});function FX(e,t){return ar(e,t)}const LX=Q({concat2d_:FX});function MX(e,t){return ar(e,t)}const BX=Q({concat3d_:MX});function jX(e,t){return ar(e,t)}const UX=Q({concat4d_:jX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WX(e,t,n,r,s="NHWC",o=[1,1],a){const i=B(e,"x","conv2d","float32"),l=B(t,"filter","conv2d","float32");let c=i,f=!1;i.rank===3&&(f=!0,c=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Co("conv2d",r,a);const h=s==="NHWC"?c.shape[3]:c.shape[1];V(h===l.shape[2],()=>`Error in conv2d: depth of input (${h}) must match input depth for filter ${l.shape[2]}.`),V(Es(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),V(Zu(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),V(Zu(n),()=>"Error in conv2D: Strides should be larger than 0.");const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a},y=Z.runKernel(RI,p,g);return f?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const s0=Q({conv2d_:WX});function VX(e,t,n,r,s="NWC",o=1,a){const i=B(e,"x","conv1d"),l=B(t,"filter","conv1d");let c=i,f=!1;i.rank===2&&(f=!0,c=be(i,[1,i.shape[0],i.shape[1]])),V(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),V(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Co("conv1d",r,a),V(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),V(Es(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),V(Zu(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),V(Zu(n),()=>"Error in conv1D: Stride should be larger than 0."),V(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const h=be(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=be(c,[c.shape[0],1,c.shape[1],c.shape[2]]),v=s0(p,h,[1,n],r,"NHWC",[1,o],a);return f?be(v,[v.shape[2],v.shape[3]]):be(v,[v.shape[0],v.shape[2],v.shape[3]])}const zX=Q({conv1d_:VX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GX(e,t,n,r,s,o="NHWC",a){V(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,l=t,c=!1;t.rank===3&&(c=!0,l=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),V(i.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`),V(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),V(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const f=o==="NHWC"?i[3]:i[1],h=o==="NHWC"?l.shape[3]:l.shape[1];V(f===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${f}) must match input depth for filter ${n.shape[2]}.`),V(h===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${h}) must match output depth for filter ${n.shape[3]}.`),Co("conv2dDerInput",s,a);const p={dy:l,filter:n},g={strides:r,pad:s,dataFormat:o,dimRoundingMode:a,inputShape:i},y=Z.runKernel(OI,p,g);return c?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const RP=Q({conv2DBackpropInput_:GX});function HX(e,t,n,r,s,o){const a=B(e,"x","conv2dTranspose"),i=B(t,"filter","conv2dTranspose");return RP(n,a,i,r,s,"NHWC",o)}const qX=Q({conv2dTranspose_:HX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(e,t,n,r,s="NDHWC",o=[1,1,1]){const a=B(e,"x","conv3d"),i=B(t,"filter","conv3d");let l=a,c=!1;a.rank===4&&(c=!0,l=be(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),V(i.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`),V(l.shape[4]===i.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${i.shape[3]}.`),V(Es(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),V(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),V(Zu(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),V(Zu(n),()=>"Error in conv3D: Strides should be larger than 0.");const f={x:l,filter:i},h={strides:n,pad:r,dataFormat:s,dilations:o},p=Z.runKernel(AI,f,h);return c?be(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const XX=Q({conv3d_:KX});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YX(e,t,n,r,s){V(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,a=t,i=!1;t.rank===4&&(i=!0,a=be(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],c=a.shape[4];V(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),V(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),V(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),V(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),V(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const f={dy:a,filter:n},h={pad:s,strides:r,inputShape:o},p=Z.runKernel(PI,f,h);return i?be(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}const QX=Q({conv3DBackpropInput_:YX});function ZX(e,t,n,r,s){const o=B(e,"x","conv3dTranspose"),a=B(t,"filter","conv3dTranspose");return QX(n,o,a,r,s)}const JX=Q({conv3dTranspose_:ZX});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eY(e){const n={x:B(e,"x","cos","float32")};return Z.runKernel(DI,n)}const tY=Q({cos_:eY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nY(e){const n={x:B(e,"x","cosh","float32")};return Z.runKernel(FI,n)}const rY=Q({cosh_:nY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sY(e,t=0,n=!1,r=!1){const o={x:B(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return Z.runKernel(LI,o,a)}const oY=Q({cumprod_:sY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aY(e,t=0,n=!1,r=!1){const o={x:B(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return Z.runKernel(MI,o,a)}const iY=Q({cumsum_:aY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lY(e,t,n,r=!1){const s=B(e,"x","denseBincount"),o=B(t,"weights","denseBincount");V(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),V(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),V(n>=0,()=>`size must be non-negative, but got ${n}.`),V(o.size===s.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${o.shape}.`);const a={x:s,weights:o},i={size:n,binaryOutput:r};return Z.runKernel(jI,a,i)}const uY=Q({denseBincount_:lY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cY(e,t,n="NHWC"){const r=B(e,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];V(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),V(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${t}  for depthToSpace with input shape
    ${r.shape}`),V(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t} for depthToSpace with input shape
        ${r.shape}`),V(a%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`);const i={x:r},l={blockSize:t,dataFormat:n};return Z.runKernel(UI,i,l)}const dY=Q({depthToSpace_:cY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fY(e,t,n,r,s="NHWC",o=[1,1],a){const i=B(e,"x","depthwiseConv2d","float32"),l=B(t,"filter","depthwiseConv2d","float32");let c=i,f=!1;i.rank===3&&(f=!0,c=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),V(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const h=s==="NHWC"?c.shape[3]:c.shape[1];V(h===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${h}) must match the inChannels dimension in filter ${l.shape[2]}.`),Co("depthwiseConv2d",r,a);const p={x:c,filter:l},g={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a},y=Z.runKernel(WI,p,g);return f?be(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const q2=Q({depthwiseConv2d_:fY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hY(e){const n={x:B(e,"x","diag")};return Z.runKernel(GI,n)}const pY=Q({diag_:hY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mY(e,t,n,r,s=[1,1],o="NHWC"){const a=B(e,"x","dilation2d"),i=B(t,"filter","dilation2d");V(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),V(i.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`),V(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=a,c=!1;a.rank===3&&(l=be(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),V(l.shape[3]===i.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${i.shape[2]}`);const f={x:l,filter:i},h={strides:n,pad:r,dilations:s},p=Z.runKernel(HI,f,h);return c?be(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const gY=Q({dilation2d_:mY});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cy(e,t){const n=e.length,r=[];for(let s=0;s<n;s++){const o=n-1-s,a=e[o]||1;(t[t.length-1-s]||1)>1&&a===1&&r.unshift(o)}return r}function IP(e,t){const n=[];for(let r=0;r<t.length;r++){const s=e[e.length-r-1],o=t.length-r-1,a=t[o];(s==null||s===1&&a>1)&&n.unshift(o)}return n}function Ot(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let s=0;s<n;s++){let o=e[e.length-s-1];o==null&&(o=1);let a=t[t.length-s-1];if(a==null&&(a=1),o===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=o;else if(o!==a){const i=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(i)}else r[n-s-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yY(e,t){let n=B(e,"a","equal","string_or_numeric"),r=B(t,"b","equal","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(QI,s)}const OP=Q({equal_:yY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vY(e,t,n){const r=B(t,"a","where"),s=B(n,"b","where"),o=B(e,"condition","where","bool"),a=Ot(Ot(o.shape,r.shape),s.shape),i=Ah(o,a),l=Ah(r,a),c=Ah(s,a),f={condition:i,t:l,e:c};return Z.runKernel(hA,f)}const yl=Q({where_:vY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xY(e){const n={x:B(e,"x","zerosLike")};return Z.runKernel(GA,n)}const Ws=Q({zerosLike_:xY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(e,t){let n=B(e,"a","div"),r=B(t,"b","div");[n,r]=bn(n,r);const s=Et(n,r),o=Ws(s),a=OP(r,o);return yl(a,o,s)}const bY=Q({divNoNan_:wY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SY(e,t){const n=B(e,"t1","dot"),r=B(t,"t2","dot");V((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(V(s===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${o}.`),n.rank===1&&r.rank===1){const a=be(n,[1,-1]),i=be(r,[-1,1]),l=zt(a,i);return be(l,[])}else if(n.rank===1&&r.rank===2){const a=be(n,[1,-1]),i=be(r,[r.shape[0],r.shape[1]]),l=zt(a,i);return be(l,[l.size])}else if(n.rank===2&&r.rank===1){const a=be(r,[-1,1]),i=zt(n,a);return be(i,[i.size])}else{const a=be(r,[r.shape[0],r.shape[1]]);return zt(n,a)}}const CY=Q({dot_:SY});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EY(e,...t){const n=t.map((s,o)=>B(s,`tensors${o}`,"einsum")),r={equation:e};return Z.runKernel(KI,n,r)}const hd=Q({einsum_:EY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NY(e){const n={x:B(e,"x","elu","float32")};return Z.runKernel(XI,n)}const AP=Q({elu_:NY});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TY(e,t){const n=B(e,"x","ensureShape","string_or_numeric");if(!VH(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}const kY=Q({ensureShape_:TY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Y(e){let t=B(e,"x","erf");V(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=hn(t,"float32"));const n={x:t};return Z.runKernel(YI,n)}const _Y=Q({erf_:$Y});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function PP(e,t,n){const r=e.length+t.length,s=[];let o=0,a=0;for(let i=0;i<r;i++)n.indexOf(i)===-1?s.push(e[o++]):s.push(t[a++]);return s}function Ma(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);const s=t.map(o=>e[o]);return[n,s]}function Ys(e,t){const n=t.map(r=>1);return PP(e,n,t)}function ea(e,t,n){V(K2(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Eo(e,t){if(K2(e,t))return null;const n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function X2(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function No(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(e,t=null,n=!1){const s={x:B(e,"x","max")},o={reductionIndices:t,keepDims:n};return Z.runKernel(TO,s,o)}const Ed=Q({max_:RY});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IY(e,t=null,n=!1){const s={x:B(e,"x","min")},o={axis:t,keepDims:n};return Z.runKernel(OO,s,o)}const Gw=Q({min_:IY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OY(e,t){let n=B(e,"base","pow"),r=B(t,"exp","pow");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(qO,s)}const Xh=Q({pow_:OY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tt(e,t){if((bo(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&bo(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Dl(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AY(e){const n={x:B(e,"x","sqrt","float32")};return Z.runKernel(bA,n)}const vi=Q({sqrt_:AY});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(e){const t=B(e,"x","square"),n={};return Z.runKernel("Square",{x:t},n)}const Ho=Q({square_:PY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DY(e,t=null,n=!1){let r=B(e,"x","sum");r.dtype==="bool"&&(r=hn(r,"int32"));const s={x:r},o={axis:t,keepDims:n};return Z.runKernel(SA,s,o)}const Zt=Q({sum_:DY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FY(e,t="euclidean",n=null,r=!1){e=B(e,"x","norm");const s=DP(e,t,n);let o=s.shape;if(r){const a=Xn(n,e.shape);o=Ys(s.shape,a)}return be(s,o)}function DP(e,t,n=null){if(e.rank===0)return Fs(e);if(e.rank!==1&&n===null)return DP(be(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Zt(Fs(e),n);if(t===1/0)return Ed(Fs(e),n);if(t===-1/0)return Gw(Fs(e),n);if(t==="euclidean"||t===2)return vi(Zt(Xh(Fs(e),Tt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Ed(Zt(Fs(e),n[0]),n[1]-1);if(t===1/0)return Ed(Zt(Fs(e),n[1]),n[0]);if(t===-1/0)return Gw(Zt(Fs(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return vi(Zt(Ho(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const o0=Q({norm_:FY});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LY(e,t=null,n=!1){return o0(e,"euclidean",t,n)}const MY=Q({euclideanNorm_:LY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BY(e){const n={x:B(e,"x","exp")};return Z.runKernel(ZI,n)}const xi=Q({exp_:BY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jY(e,t=0){const n=B(e,"x","expandDims","string_or_numeric");V(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:t};return Z.runKernel(JI,r,s)}const Sa=Q({expandDims_:jY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UY(e){const n={x:B(e,"x","expm1")};return Z.runKernel(eO,n)}const WY=Q({expm1_:UY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VY(e,t){const n=B(e,"x","tile","string_or_numeric");V(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const r={x:n},s={reps:t};return Z.runKernel(W2,r,s)}const Ph=Q({tile_:VY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zY(e,t,n,r="float32"){t==null&&(t=e);const s=mn([e,t],r),o=e<=t?e:t;for(let i=0;i<o;++i)s.set(1,i,i);const a=be(s.toTensor(),[e,t]);if(n==null)return a;if(n.length===1)return Ph(Sa(a,0),[n[0],1,1]);if(n.length===2)return Ph(Sa(Sa(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Ph(Sa(Sa(Sa(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const FP=Q({eye_:zY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(e){const n={x:B(e,"x","floor","float32")};return Z.runKernel(sO,n)}const LP=Q({floor_:GY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HY(e,t,n=0,r=0){const s=B(e,"x","gather"),o=B(t,"indices","gather","int32"),a={x:s,indices:o},i={axis:n,batchDims:r};return Z.runKernel(iO,a,i)}const MP=Q({gather_:HY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qY(e,t){let n=B(e,"a","greater","string_or_numeric"),r=B(t,"b","greater","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(uO,s)}const a0=Q({greater_:qY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KY(e,t){let n=B(e,"a","greaterEqual","string_or_numeric"),r=B(t,"b","greaterEqual","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(cO,s)}const BP=Q({greaterEqual_:KY});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XY(e){const n={input:B(e,"input","imag")};return Z.runKernel(fO,n)}const i0=Q({imag_:XY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YY(e){const n={x:B(e,"x","isFinite")};return Z.runKernel(hO,n)}const QY=Q({isFinite_:YY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZY(e){const n={x:B(e,"x","isInf")};return Z.runKernel(pO,n)}const JY=Q({isInf_:ZY});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eQ(e){const n={x:B(e,"x","isNaN")};return Z.runKernel(mO,n)}const tQ=Q({isNaN_:eQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(e,t=.2){const r={x:B(e,"x","leakyRelu")},s={alpha:t};return Z.runKernel(gO,r,s)}const jP=Q({leakyRelu_:nQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rQ(e,t){let n=B(e,"a","less","string_or_numeric"),r=B(t,"b","less","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(yO,s)}const Hw=Q({less_:rQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sQ(e,t){let n=B(e,"a","lessEqual","string_or_numeric"),r=B(t,"b","lessEqual","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(vO,s)}const Y2=Q({lessEqual_:sQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oQ(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return Z.runKernel(xO,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aQ(e,t=5,n=1,r=1,s=.5){const o=B(e,"x","localResponseNormalization");V(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),V(Od(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let a=o,i=!1;o.rank===3&&(i=!0,a=be(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:a},c={depthRadius:t,bias:n,alpha:r,beta:s},f=Z.runKernel(NO,l,c);return i?be(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const iQ=Q({localResponseNormalization_:aQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lQ(e){const n={x:B(e,"x","log","float32")};return Z.runKernel(wO,n)}const Yh=Q({log_:lQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uQ(e){const n={x:B(e,"x","log1p")};return Z.runKernel(bO,n)}const UP=Q({log1p_:uQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cQ(e,t){V(Nw(e),()=>"The f passed in variableGrads(f) must be a function"),V(t==null||Array.isArray(t)&&t.every(c=>c instanceof ly),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const c in Z.registeredVariables)t.push(Z.registeredVariables[c])}const r=n?t.filter(c=>!c.trainable):null,s=t.length;t=t.filter(c=>c.trainable),V(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const o=!0,{value:a,grads:i}=Z.gradients(e,t,null,o);V(i.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),V(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const l={};return t.forEach((c,f)=>{i[f]!=null&&(l[c.name]=i[f])}),r?.forEach(c=>l[c.name]=null),{value:a,grads:l}}function wi(e){return Z.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dQ(e){const n={x:B(e,"x","neg")};return Z.runKernel(MO,n)}const Ia=Q({neg_:dQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fQ(e){const n={x:B(e,"x","softplus")};return Z.runKernel(wA,n)}const WP=Q({softplus_:fQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hQ(e){const t=B(e,"x","logSigmoid");return wi(r=>({value:Ia(WP(Ia(r))),gradFunc:a=>Oe(a,Lu(Ia(r)))}))(t)}const pQ=Q({logSigmoid_:hQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mQ(e,t){let n=B(e,"a","sub"),r=B(t,"b","sub");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(LA,s)}const yt=Q({sub_:mQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(e,t=-1){const n=B(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return wi((s,o)=>{const i=Ed(s,t,!0),l=yt(s,i),c=yt(hn(l,"float32"),Yh(Zt(xi(l),t,!0)));return o([c]),{value:c,gradFunc:(h,p)=>{const[g]=p,y=!0,x=xi(g);return yt(h,Oe(Zt(h,t,y),x))}}})(n)}const yQ=Q({logSoftmax_:gQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vQ(e,t=null,n=!1){const r=B(e,"x","logSumExp"),s=Xn(t,r.shape),o=Ed(r,s,!0),a=yt(r,o),i=xi(a),l=Zt(i,s),c=Yh(l),f=et(be(o,c.shape),c);if(n){const h=Ys(f.shape,s);return be(f,h)}return f}const VP=Q({logSumExp_:vQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xQ(e,t){const n=B(e,"a","logicalAnd","bool"),r=B(t,"b","logicalAnd","bool");Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(SO,s)}const dy=Q({logicalAnd_:xQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wQ(e){const n={x:B(e,"x","logicalNot","bool")};return Z.runKernel(CO,n)}const zP=Q({logicalNot_:wQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bQ(e,t){const n=B(e,"a","logicalOr","bool"),r=B(t,"b","logicalOr","bool");Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(EO,s)}const GP=Q({logicalOr_:bQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SQ(e,t){const n=B(e,"a","logicalXor","bool"),r=B(t,"b","logicalXor","bool");return Ot(n.shape,r.shape),dy(GP(e,t),zP(dy(e,t)))}const CQ=Q({logicalXor_:SQ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ag=2147483648;function EQ(e,t,n="left"){const r=B(e,"sortedSequence","searchSorted"),s=B(t,"values","searchSorted"),o=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],i=be(r,[-1,o]),l=be(s,[-1,a]);if(i.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(i.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(_e(l.shape)>=ag)throw new Error(`values tensor size must less than ${ag}`);if(i.shape[1]>=ag)throw new Error(`trailing dim_size must less than ${ag} for int32 output type, was ${i.shape[1]}`);const c={sortedSequence:i,values:l},f={side:n};return Z.runKernel(fA,c,f)}const Q2=Q({searchSorted_:EQ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NQ(e,t){return Q2(e,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(e,t,n,r,s){const o=B(e,"x","maxPool"),a=1;let i=o,l=!1;o.rank===3&&(l=!0,i=be(o,[1,o.shape[0],o.shape[1],o.shape[2]])),V(i.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),V(Es(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Co("maxPool",r,s);const c={x:i},f={filterSize:t,strides:n,pad:r,dimRoundingMode:s},h=Z.runKernel($O,c,f);return l?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const HP=Q({maxPool_:TQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kQ(e,t=[1,1,1],n,r,s,o="NDHWC"){const a=B(e,"x","maxPool3d");let i=a,l=!1;a.rank===4&&(l=!0,i=be(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),V(i.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`),V(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Co("maxPool3d",r,s);const c={x:i},f={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:o},h=Z.runKernel(_O,c,f);return l?be(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const $Q=Q({maxPool3d_:kQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Q(e,t,n,r,s=!1){const a={x:B(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:s},l=Z.runKernel(RO,a,i);return{result:l[0],indexes:l[1]}}const RQ=Q({maxPoolWithArgmax_:_Q});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IQ(e,t){let n=B(e,"a","maximum"),r=B(t,"b","maximum");[n,r]=bn(n,r),n.dtype==="bool"&&(n=hn(n,"int32"),r=hn(r,"int32")),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(kO,s)}const qP=Q({maximum_:IQ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OQ(e,t=null,n=!1){const s={x:B(e,"x","mean")},o={axis:t,keepDims:n};return Z.runKernel(IO,s,o)}const fy=Q({mean_:OQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ju(e,t="float32"){if(Ks(e),t==="complex64"){const r=Ju(e,"float32"),s=Ju(e,"float32");return kl(r,s)}const n=Tl(_e(e),t);return Z.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iu(e,t="float32"){if(Ks(e),t==="complex64"){const r=Iu(e,"float32"),s=Ju(e,"float32");return kl(r,s)}const n=nI(_e(e),t);return Z.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AQ(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=B(e,"x","meshgrid",e instanceof Dn?e.dtype:"float32");if(t===void 0)return[r];let s=B(t,"y","meshgrid",t instanceof Dn?t.dtype:"float32");const o=_e(r.shape),a=_e(s.shape);return n==="xy"?(r=be(r,[1,-1]),s=be(s,[-1,1]),[zt(Iu([a,1],r.dtype),r),zt(s,Iu([1,o],s.dtype))]):(r=be(r,[-1,1]),s=be(s,[1,-1]),[zt(r,Iu([1,a],r.dtype)),zt(Iu([o,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PQ(e,t){let n=B(e,"a","minimum"),r=B(t,"b","minimum");[n,r]=bn(n,r),n.dtype==="bool"&&(n=hn(n,"int32"),r=hn(r,"int32")),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(AO,s)}const hy=Q({minimum_:PQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DQ(e,t,n){V(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=B(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");V(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const s=n==="reflect"?1:0;for(let i=0;i<r.rank;i++)V(t[i].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),V(t[i][0]>=0&&t[i][0]<=r.shape[i]-s&&t[i][1]>=0&&t[i][1]<=r.shape[i]-s,()=>`Padding in dimension ${i} cannot be greater than or equal to ${r.shape[i]-s} or less than 0 for input of shape ${r.shape}`);const o={paddings:t,mode:n},a={x:r};return Z.runKernel(PO,a,o)}const FQ=Q({mirrorPad_:DQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LQ(e,t){let n=B(e,"a","mod"),r=B(t,"b","mod");[n,r]=bn(n,r);const s={a:n,b:r};return Z.runKernel(DO,s)}const MQ=Q({mod_:LQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(e,t=null,n=!1){e=B(e,"x","moments");const r=Xn(t,e.shape),s=fy(e,r,n);let o=s.shape;n||(o=Ys(s.shape,r));const a=Ho(yt(hn(e,"float32"),be(s,o))),i=fy(a,r,n);return{mean:s,variance:i}}const jQ=Q({moments_:BQ});function UQ(e,t,n,r){const s=B(t,"data","multiRNNCell"),o=uy(n,"c","multiRNNCell"),a=uy(r,"h","multiRNNCell");let i=s;const l=[];for(let h=0;h<e.length;h++){const p=e[h](i,o[h],a[h]);l.push(p[0]),l.push(p[1]),i=p[1]}const c=[],f=[];for(let h=0;h<l.length;h+=2)c.push(l[h]),f.push(l[h+1]);return[c,f]}const WQ=Q({multiRNNCell_:UQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VQ(e,t,n,r=!1){const s=B(e,"logits","multinomial"),o=s.size,a=s.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const l={logits:a===1?be(s,[1,-1]):s},c={numSamples:t,seed:n,normalized:r},f=Z.runKernel(FO,l,c);return a===1?be(f,[f.size]):f}const zQ=Q({multinomial_:VQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GQ(e,t){let n=B(e,"a","notEqual","string_or_numeric"),r=B(t,"b","notEqual","string_or_numeric");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r};return Z.runKernel(BO,s)}const KP=Q({notEqual_:GQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQ(e,t,n=1,r=0,s="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:B(e,"indices","oneHot","int32")},i={dtype:s,depth:t,onValue:n,offValue:r};return Z.runKernel(zO,a,i)}const qQ=Q({oneHot_:HQ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KQ(e){const n={x:B(e,"x","onesLike")};return Z.runKernel(VO,n)}const XQ=Q({onesLike_:KQ});function YQ(e,t){const n=B(e,"v1","outerProduct"),r=B(t,"v2","outerProduct");V(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=be(n,[-1,1]),o=be(r,[1,-1]);return zt(s,o)}const QQ=Q({outerProduct_:YQ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZQ(e,t,n=0){const r=B(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:t,constantValue:n},o={x:r};return Z.runKernel(HO,o,s)}const Np=Q({pad_:ZQ});function JQ(e,t,n=0){return V(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Np(e,[t],n)}const eZ=Q({pad1d_:JQ});function tZ(e,t,n=0){return V(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Np(e,t,n)}const nZ=Q({pad2d_:tZ});function rZ(e,t,n=0){return V(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Np(e,t,n)}const sZ=Q({pad3d_:rZ});function oZ(e,t,n=0){return V(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Np(e,t,n)}const aZ=Q({pad4d_:oZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iZ(e,t,n){const r=B(e,"x","spaceToBatchND");V(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),V(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),V(r.shape.reduce((a,i,l)=>l>0&&l<=t.length?a&&(i+n[l-1][0]+n[l-1][1])%t[l-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const s={x:r},o={blockShape:t,paddings:n};return Z.runKernel(CA,s,o)}const XP=Q({spaceToBatchND_:iZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lZ(e,t,n,r,s,o,a){s==null&&(s=[1,1]),o==null&&(o=1),r===0&&(r="valid");const i=B(e,"x","maxPool");let l=i,c=!1;i.rank===3&&(c=!0,l=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),V(Es(o,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const f=hc(l.shape,t,o,s,r),h=[f.dilationHeight,f.dilationWidth];let p;r==="same"?p=cZ([f.filterHeight,f.filterWidth],h):p=[[0,0],[0,0]];const g=h[0]===1&&h[1]===1,[y,x]=uZ([f.inHeight,f.inWidth],h,p),v=g?r:"valid",S=g?l:XP(l,h,y),_=(n==="avg"?()=>TP(S,t,o,v,a):()=>HP(S,t,o,v,a))(),I=g?_:kP(_,h,x);return c?be(I,[I.shape[1],I.shape[2],I.shape[3]]):I}function uZ(e,t,n){const r=n.map(f=>f[0]),s=n.map(f=>f[1]),o=e.concat(r,s),a=t.map((f,h)=>(f-o[h]%f)%f),i=s.map((f,h)=>f+a[h]),l=t.map((f,h)=>[r[h],i[h]]),c=t.map((f,h)=>[0,a[h]]);return[l,c]}function cZ(e,t){const r=e.map((a,i)=>a+(a-1)*(t[i]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),o=r.map((a,i)=>a-s[i]);return r.map((a,i)=>[s[i],o[i]])}const dZ=Q({pool_:lZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fZ(e,t){const n=B(e,"x","prelu"),r=B(t,"alpha","prelu"),s={x:n,alpha:r};return Z.runKernel(KO,s)}const YP=Q({prelu_:fZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hZ(e,t=null,n=!1){let r=B(e,"x","prod");r.dtype==="bool"&&(r=hn(r,"int32"));const s={x:r},o={axis:t,keepDims:n};return Z.runKernel(XO,s,o)}const pZ=Q({prod_:hZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mZ(e,t,n,r){const s=e.map((f,h)=>B(f,`tensors${h}`,"raggedGather","int32")),o=B(t,"paramsDenseValues","raggedGather"),a=B(n,"indices","raggedGather","int32"),i={paramsNestedSplits:s,paramsDenseValues:o,indices:a},l={outputRaggedRank:r},c=Z.runKernel(YO,i,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const gZ=Q({raggedGather_:mZ});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yZ(e,t,n){const r=B(e,"starts","raggedRange"),s=B(t,"limits","raggedRange",r.dtype),o=B(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:o},i=Z.runKernel(QO,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}const vZ=Q({raggedRange_:yZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xZ(e,t,n,r,s){const o=B(e,"shape","raggedTensorToTensor","int32"),a=B(t,"values","raggedTensorToTensor"),i=B(n,"defaultValue","raggedTensorToTensor",a.dtype),l=r.map((h,p)=>B(h,`tensors${p}`,"raggedTensorToTensor","int32")),c={shape:o,values:a,defaultValue:i,rowPartitionTensors:l},f={rowPartitionTypes:s};return Z.runKernel(ZO,c,f)}const wZ=Q({raggedTensorToTensor_:xZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZ(e,t,n){Ks(e);const r=_e(e);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let o=0;o<r;o++)s[o]=t();return Z.makeTensor(s,e,n)}const SZ=Q({rand_:bZ});var Og={exports:{}},CZ=Og.exports,m3;function EZ(){return m3||(m3=1,(function(e){(function(t,n,r){function s(l){var c=this,f=i();c.next=function(){var h=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=h-(c.c=h|0)},c.c=1,c.s0=f(" "),c.s1=f(" "),c.s2=f(" "),c.s0-=f(l),c.s0<0&&(c.s0+=1),c.s1-=f(l),c.s1<0&&(c.s1+=1),c.s2-=f(l),c.s2<0&&(c.s2+=1),f=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function a(l,c){var f=new s(l),h=c&&c.state,p=f.next;return p.int32=function(){return f.next()*4294967296|0},p.double=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.quick=p,h&&(typeof h=="object"&&o(h,f),p.state=function(){return o(f,{})}),p}function i(){var l=4022871197,c=function(f){f=String(f);for(var h=0;h<f.length;h++){l+=f.charCodeAt(h);var p=.02519603282416938*l;l=p>>>0,p-=l,p*=l,l=p>>>0,p-=l,l+=p*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(CZ,e)})(Og)),Og.exports}var Ag={exports:{}},NZ=Ag.exports,g3;function TZ(){return g3||(g3=1,(function(e){(function(t,n,r){function s(i){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var h=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^h^h>>>8},i===(i|0)?l.x=i:c+=i;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,l.next()}function o(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l}function a(i,l){var c=new s(i),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&o(f,c),h.state=function(){return o(c,{})}),h}n&&n.exports?n.exports=a:this.xor128=a})(NZ,e)})(Ag)),Ag.exports}var Pg={exports:{}},kZ=Pg.exports,y3;function $Z(){return y3||(y3=1,(function(e){(function(t,n,r){function s(i){var l=this,c="";l.next=function(){var h=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(h^h<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,i===(i|0)?l.x=i:c+=i;for(var f=0;f<c.length+64;f++)l.x^=c.charCodeAt(f)|0,f==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function o(i,l){return l.x=i.x,l.y=i.y,l.z=i.z,l.w=i.w,l.v=i.v,l.d=i.d,l}function a(i,l){var c=new s(i),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&o(f,c),h.state=function(){return o(c,{})}),h}n&&n.exports?n.exports=a:this.xorwow=a})(kZ,e)})(Pg)),Pg.exports}var Dg={exports:{}},_Z=Dg.exports,v3;function RZ(){return v3||(v3=1,(function(e){(function(t,n,r){function s(i){var l=this;l.next=function(){var f=l.x,h=l.i,p,g;return p=f[h],p^=p>>>7,g=p^p<<24,p=f[h+1&7],g^=p^p>>>10,p=f[h+3&7],g^=p^p>>>3,p=f[h+4&7],g^=p^p<<7,p=f[h+7&7],p=p^p<<13,g^=p^p<<9,f[h]=g,l.i=h+1&7,g};function c(f,h){var p,g=[];if(h===(h|0))g[0]=h;else for(h=""+h,p=0;p<h.length;++p)g[p&7]=g[p&7]<<15^h.charCodeAt(p)+g[p+1&7]<<13;for(;g.length<8;)g.push(0);for(p=0;p<8&&g[p]===0;++p);for(p==8?g[7]=-1:g[p],f.x=g,f.i=0,p=256;p>0;--p)f.next()}c(l,i)}function o(i,l){return l.x=i.x.slice(),l.i=i.i,l}function a(i,l){i==null&&(i=+new Date);var c=new s(i),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(f.x&&o(f,c),h.state=function(){return o(c,{})}),h}n&&n.exports?n.exports=a:this.xorshift7=a})(_Z,e)})(Dg)),Dg.exports}var Fg={exports:{}},IZ=Fg.exports,x3;function OZ(){return x3||(x3=1,(function(e){(function(t,n,r){function s(i){var l=this;l.next=function(){var f=l.w,h=l.X,p=l.i,g,y;return l.w=f=f+1640531527|0,y=h[p+34&127],g=h[p=p+1&127],y^=y<<13,g^=g<<17,y^=y>>>15,g^=g>>>12,y=h[p]=y^g,l.i=p,y+(f^f>>>16)|0};function c(f,h){var p,g,y,x,v,S=[],N=128;for(h===(h|0)?(g=h,h=null):(h=h+"\0",g=0,N=Math.max(N,h.length)),y=0,x=-32;x<N;++x)h&&(g^=h.charCodeAt((x+32)%h.length)),x===0&&(v=g),g^=g<<10,g^=g>>>15,g^=g<<4,g^=g>>>13,x>=0&&(v=v+1640531527|0,p=S[x&127]^=g+v,y=p==0?y+1:0);for(y>=128&&(S[(h&&h.length||0)&127]=-1),y=127,x=512;x>0;--x)g=S[y+34&127],p=S[y=y+1&127],g^=g<<13,p^=p<<17,g^=g>>>15,p^=p>>>12,S[y]=g^p;f.w=v,f.X=S,f.i=y}c(l,i)}function o(i,l){return l.i=i.i,l.w=i.w,l.X=i.X.slice(),l}function a(i,l){i==null&&(i=+new Date);var c=new s(i),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(f.X&&o(f,c),h.state=function(){return o(c,{})}),h}n&&n.exports?n.exports=a:this.xor4096=a})(IZ,e)})(Fg)),Fg.exports}var Lg={exports:{}},AZ=Lg.exports,w3;function PZ(){return w3||(w3=1,(function(e){(function(t,n,r){function s(i){var l=this,c="";l.next=function(){var h=l.b,p=l.c,g=l.d,y=l.a;return h=h<<25^h>>>7^p,p=p-g|0,g=g<<24^g>>>8^y,y=y-h|0,l.b=h=h<<20^h>>>12^p,l.c=p=p-g|0,l.d=g<<16^p>>>16^y,l.a=y-h|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,i===Math.floor(i)?(l.a=i/4294967296|0,l.b=i|0):c+=i;for(var f=0;f<c.length+20;f++)l.b^=c.charCodeAt(f)|0,l.next()}function o(i,l){return l.a=i.a,l.b=i.b,l.c=i.c,l.d=i.d,l}function a(i,l){var c=new s(i),f=l&&l.state,h=function(){return(c.next()>>>0)/4294967296};return h.double=function(){do var p=c.next()>>>11,g=(c.next()>>>0)/4294967296,y=(p+g)/(1<<21);while(y===0);return y},h.int32=c.next,h.quick=h,f&&(typeof f=="object"&&o(f,c),h.state=function(){return o(c,{})}),h}n&&n.exports?n.exports=a:this.tychei=a})(AZ,e)})(Lg)),Lg.exports}var Mg={exports:{}};const DZ={},FZ=Object.freeze(Object.defineProperty({__proto__:null,default:DZ},Symbol.toStringTag,{value:"Module"})),LZ=Ij(FZ);var MZ=Mg.exports,b3;function BZ(){return b3||(b3=1,(function(e){(function(t,n,r){var s=256,o=6,a=52,i="random",l=r.pow(s,o),c=r.pow(2,a),f=c*2,h=s-1,p;function g(I,A,M){var L=[];A=A==!0?{entropy:!0}:A||{};var W=S(v(A.entropy?[I,_(n)]:I??N(),3),L),j=new y(L),U=function(){for(var P=j.g(o),X=l,ae=0;P<c;)P=(P+ae)*s,X*=s,ae=j.g(1);for(;P>=f;)P/=2,X/=2,ae>>>=1;return(P+ae)/X};return U.int32=function(){return j.g(4)|0},U.quick=function(){return j.g(4)/4294967296},U.double=U,S(_(j.S),n),(A.pass||M||function(P,X,ae,ee){return ee&&(ee.S&&x(ee,j),P.state=function(){return x(j,{})}),ae?(r[i]=P,X):P})(U,W,"global"in A?A.global:this==r,A.state)}function y(I){var A,M=I.length,L=this,W=0,j=L.i=L.j=0,U=L.S=[];for(M||(I=[M++]);W<s;)U[W]=W++;for(W=0;W<s;W++)U[W]=U[j=h&j+I[W%M]+(A=U[W])],U[j]=A;(L.g=function(P){for(var X,ae=0,ee=L.i,ie=L.j,le=L.S;P--;)X=le[ee=h&ee+1],ae=ae*s+le[h&(le[ee]=le[ie=h&ie+X])+(le[ie]=X)];return L.i=ee,L.j=ie,ae})(s)}function x(I,A){return A.i=I.i,A.j=I.j,A.S=I.S.slice(),A}function v(I,A){var M=[],L=typeof I,W;if(A&&L=="object")for(W in I)try{M.push(v(I[W],A-1))}catch{}return M.length?M:L=="string"?I:I+"\0"}function S(I,A){for(var M=I+"",L,W=0;W<M.length;)A[h&W]=h&(L^=A[h&W]*19)+M.charCodeAt(W++);return _(A)}function N(){try{var I;return p&&(I=p.randomBytes)?I=I(s):(I=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(I)),_(I)}catch{var A=t.navigator,M=A&&A.plugins;return[+new Date,t,M,t.screen,_(n)]}}function _(I){return String.fromCharCode.apply(0,I)}if(S(r.random(),n),e.exports){e.exports=g;try{p=LZ}catch{}}else r["seed"+i]=g})(typeof self<"u"?self:MZ,[],Math)})(Mg)),Mg.exports}var yx,S3;function jZ(){if(S3)return yx;S3=1;var e=EZ(),t=TZ(),n=$Z(),r=RZ(),s=OZ(),o=PZ(),a=BZ();return a.alea=e,a.xor128=t,a.xorwow=n,a.xorshift7=r,a.xor4096=s,a.tychei=o,yx=a,yx}var Z2=jZ();/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class J2{constructor(t,n,r,s,o){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=o||Math.random();this.random=Z2.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let t,n,r=!1;for(;!r;){let s,o,a;do s=2*this.random()-1,o=2*this.random()-1,a=s*s+o*o;while(a>=1||a===0);const i=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*s*i,n=this.mean+this.stdDev*o*i,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class UZ{constructor(t,n,r,s){this.alpha=t,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=Z2.alea(o.toString()),this.randn=new J2(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,s,o,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,t=s*s,n=1-.331*t*t,r=.5*t+this.d*(1-a+Math.log(a)),o=this.randu(),o<n||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class WZ{constructor(t=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=Z2.alea(s)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZ(e,t,n=1,r="float32",s){if(Ks(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const o=new UZ(t,n,r,s),a=mn(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const zZ=Q({randomGamma_:VZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GZ(e,t=0,n=1,r,s){if(Ks(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new J2(t,n,r,!1,s),a=mn(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const QP=Q({randomNormal_:GZ});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZ(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return QP(e,0,1,t,n)}const qZ=Q({randomStandardNormal_:HZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZ(e,t=0,n=1,r="float32",s){Ks(e);const o=mn(e,r),a=new WZ(t,n,null,s);for(let i=0;i<o.values.length;i++)o.values[i]=a.nextValue();return o.toTensor()}const eS=Q({randomUniform_:KZ});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XZ(e,t,n,r){return eS(e,t,n,"int32",r)}const YZ=Q({randomUniformInt_:XZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qh(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:r};return Z.runKernel(JO,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QZ(e){const n={input:B(e,"input","real")};return Z.runKernel(eA,n)}const Zh=Q({real_:QZ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZ(e){const n={x:B(e,"x","reciprocal")};return Z.runKernel(tA,n)}const JZ=Q({reciprocal_:ZZ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eJ(e){const n={x:B(e,"x","relu")};return Z.runKernel(nA,n)}const l0=Q({relu_:eJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tJ(e){const n={x:B(e,"x","relu6")};return Z.runKernel(aA,n)}const ZP=Q({relu6_:tJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nJ(e,t){const r={x:B(e,"x","reverse")},s={dims:t};return Z.runKernel(iA,r,s)}const ec=Q({reverse_:nJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rJ(e){const t=B(e,"x","reverse");return V(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),ec(t,0)}const sJ=Q({reverse1d_:rJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oJ(e,t){const n=B(e,"x","reverse");return V(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),ec(n,t)}const aJ=Q({reverse2d_:oJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJ(e,t){const n=B(e,"x","reverse");return V(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),ec(n,t)}const lJ=Q({reverse3d_:iJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJ(e,t){const n=B(e,"x","reverse");return V(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),ec(n,t)}const cJ=Q({reverse4d_:uJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dJ(e){const n={x:B(e,"x","round")};return Z.runKernel(lA,n)}const JP=Q({round_:dJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fJ(e){const n={x:B(e,"x","rsqrt","float32")};return Z.runKernel(uA,n)}const hJ=Q({rsqrt_:fJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pJ(e){const n={x:B(e,"x","selu")};return Z.runKernel(pA,n)}const mJ=Q({selu_:pJ});function gJ(e,t,n,r,s,o=[1,1],a="NHWC"){const i=B(e,"x","separableConv2d"),l=B(t,"depthwiseFilter","separableConv2d"),c=B(n,"pointwiseFilter","separableConv2d");let f=i,h=!1;if(i.rank===3&&(h=!0,f=be(i,[1,i.shape[0],i.shape[1],i.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");V(f.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${f.rank}.`),V(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),V(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),V(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),V(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const p=l.shape[2],g=l.shape[3];V(c.shape[2]===p*g,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*g}, but got ${c.shape[2]}.`);const y=q2(f,l,r,s,a,o),v=s0(y,c,1,"valid",a);return h?be(v,[v.shape[1],v.shape[2],v.shape[3]]):v}const yJ=Q({separableConv2d_:gJ});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function vJ(e,t){const n=B(e,"x","setdiff1d"),r=B(t,"y","setdiff1d");V(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),V(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),V(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),o=await r.data(),a=new Set(o);let i=0;for(let f=0;f<s.length;f++)a.has(s[f])||i++;const l=new Pd([i],n.dtype),c=new Pd([i],"int32");for(let f=0,h=0;f<s.length;f++)a.has(s[f])||(l.values[h]=s[f],c.values[h]=f,h++);return[l.toTensor(),c.toTensor()]}const xJ=vJ;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wJ(e){const n={x:B(e,"x","sign")};return Z.runKernel(vA,n)}const bJ=Q({sign_:wJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SJ(e){const n={x:B(e,"x","sin","float32")};return Z.runKernel(gA,n)}const CJ=Q({sin_:SJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EJ(e){const n={x:B(e,"x","sinh")};return Z.runKernel(yA,n)}const NJ=Q({sinh_:EJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TJ(e,t,n){const r=B(e,"x","slice1d");return V(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),gt(r,[t],[n])}const kJ=Q({slice1d_:TJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $J(e,t,n){const r=B(e,"x","slice2d");return V(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),gt(r,t,n)}const _J=Q({slice2d_:$J});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RJ(e,t,n){const r=B(e,"x","slice3d");return V(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),gt(r,t,n)}const IJ=Q({slice3d_:RJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJ(e,t,n){const r=B(e,"x","slice4d");return V(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),gt(r,t,n)}const AJ=Q({slice4d_:OJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PJ(e,t=-1){const n=B(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},s={dim:t};return Z.runKernel(NA,r,s)}const DJ=Q({softmax_:PJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FJ(e){V(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Z.runKernel(tO,t)}const tS=Q({fft_:FJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJ(e){V(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Z.runKernel(dO,t)}const py=Q({ifft_:LJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MJ(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const s=be(e,[n,t]);r=py(s)}else{const s=[n,2*(t-1)],o=be(Zh(e),[n,t]),a=be(i0(e),[n,t]),i=ec(gt(o,[0,1],[n,t-2]),1),l=Oe(ec(gt(a,[0,1],[n,t-2]),1),Tt(-1)),c=ar([o,i],1),f=ar([a,l],1),h=be(kl(c,f),[s[0],s[1]]);r=py(h)}if(r=Zh(r),e.rank===3&&e.shape[0]!==0){const s=r,o=e.shape[0];r=be(r,[o,r.shape[0]/o,r.shape[1]]),s.dispose()}return r}const eD=Q({irfft_:MJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BJ(e,t,n=0){const s={x:B(e,"x","split")},o={numOrSizeSplits:t,axis:n};return Z.runKernel(EA,s,o)}const Jh=Q({split_:BJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jJ(e,t){V(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let s;if(t!=null&&t<n){const y=e.shape.map(v=>0),x=e.shape.map(v=>v);x[e.shape.length-1]=t,s=gt(e,y,x),n=t}else if(t!=null&&t>n){const y=e.shape.map(x=>x);y[e.shape.length-1]=t-n,s=ar([e,Ju(y)],e.shape.length-1),n=t}else s=e;const o=Ws(s),a=be(kl(s,o),[r,n]),i=tS(a),l=Math.floor(n/2)+1,c=Zh(i),f=i0(i),h=Jh(c,[l,n-l],c.shape.length-1),p=Jh(f,[l,n-l],f.shape.length-1),g=s.shape.slice();return g[s.shape.length-1]=l,be(kl(h[0],p[0]),g)}const nS=Q({rfft_:jJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UJ(e,t){let n=B(e,"a","squaredDifference"),r=B(t,"b","squaredDifference");[n,r]=bn(n,r),Ot(n.shape,r.shape);const s={a:n,b:r},o={};return Z.runKernel(IA,s,o)}const tD=Q({squaredDifference_:UJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WJ(e,t){const n=B(e,"x","squeeze","string_or_numeric");return be(n,Al(n.shape,t).newShape)}const nr=Q({squeeze_:WJ});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VJ(e,t=0){const n=uy(e,"tensors","stack","string_or_numeric");V(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&V(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:t};return Z.runKernel(GO,r,s)}const bi=Q({stack_:VJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zJ(e,t=0){const r={x:B(e,"x","step")},s={alpha:t};return Z.runKernel(HA,r,s)}const nD=Q({step_:zJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GJ(e,t,n,r,s=0,o=0,a=0,i=0,l=0){const f={x:B(e,"x","stridedSlice","string_or_numeric")},h={begin:t,end:n,strides:r,beginMask:s,endMask:o,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:l};return Z.runKernel(AA,f,h)}const HJ=Q({stridedSlice_:GJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qJ(e){const n={x:B(e,"x","tan","float32")};return Z.runKernel(MA,n)}const KJ=Q({tan_:qJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gr(e,t){af(e);const n=Pl(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Dl(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mu(e,t,n){if(af(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Pl(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Dl(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rD(e,t,n){if(af(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Pl(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Dl(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XJ(e,t,n){if(af(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Pl(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Dl(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YJ(e,t,n){if(af(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Pl(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Dl(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QJ(e,t,n){if(af(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Pl(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,Dl(e,t,r,n)}function sD(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(o+` update.rank < ${s}. `);if(e.length<r+(n.rank-s))throw new Error(o+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+e.length-r)throw new Error(o+` update.rank != ${s+e.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==e[a+r])throw new Error(o+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${e[a+s]})`)}function rS(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}sD(n,t,e)}function u0(e,t,n){const r=t.shape.length,s=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let h=s;h<o;++h)a*=n[h];const i=s<1?1:s,l=_e(t.shape)/i,c=[...or(n.slice(0,s)),1],f=_e(n);return{sliceRank:s,numUpdates:l,sliceSize:a,strides:c,outputSize:f}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZJ(e,t,n){const r=B(e,"tensor","tensorScatterupdate"),s=B(t,"indices","tensorScatterupdate","int32"),o=B(n,"updates","tensorScatterupdate");if(rS(o,s,r.shape),r.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${o.dtype}.`);const a={tensor:r,indices:s,updates:o},i={};return Z.runKernel(dA,a,i)}const JJ=Q({tensorScatterUpdate_:ZJ});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eee(e,t=1,n=!0){const r=B(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);const o={x:r},a={k:t,sorted:n},[i,l]=Z.runKernel(jA,o,a);return{values:i,indices:l}}const tee=Q({topk_:eee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nee(e,t=0,n=1,r,s){if(Ks(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new J2(t,n,r,!0,s),a=mn(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const ree=Q({truncatedNormal_:nee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function see(e,t=0){const n=B(e,"x","unique","string_or_numeric");V(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:t},[o,a]=Z.runKernel(WA,r,s);return{values:o,indices:a}}const oee=Q({unique_:see});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aee(e,t,n){const r=B(e,"x","unsortedSegmentSum"),s=B(t,"segmentIds","unsortedSegmentSum","int32");V(Od(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:s},a={numSegments:n};return Z.runKernel(zA,o,a)}const iee=Q({unsortedSegmentSum_:aee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lee(e,t=0){const n=B(e,"x","unstack","string_or_numeric");V(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:t};return Z.runKernel(VA,r,s)}const pc=Q({unstack_:lee});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uee(e,t){return Q2(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cee(e,t=!0,n,r){return Z.makeVariable(e,t,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oD(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=mn(e,"int32"),s=mn([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const a=r.indexToLoc(n[o]),i=o*e.length;s.values.set(a,i)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function dee(e){const t=B(e,"condition","whereAsync","bool"),n=await t.data(),r=oD(t.shape,n);return e!==t&&t.dispose(),r}const aD=dee;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fee(e,t,n){const r=B(e,"tensor","boolMask"),s=B(t,"mask","boolMask","bool"),o=n??0,a=s.rank,i=r.shape;V(a>0,()=>"mask cannot be scalar"),qs(i.slice(o,o+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let x=o;x<o+a;x++)l*=i[x];const c=i.slice(0,o).concat([l],i.slice(o+a)),f=be(r,c),h=be(s,[-1]),p=await aD(h),g=nr(p,[1]),y=MP(f,g,o);return e!==r&&r.dispose(),t!==s&&s.dispose(),g.dispose(),f.dispose(),h.dispose(),p.dispose(),y}const hee=fee;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pee(e,t,n){const r=B(e,"x","transpose");if(t==null&&(t=r.shape.map((a,i)=>i).reverse()),V(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(a=>{V(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:t};return r.dtype==="complex64"?bt(()=>{let a=Zh(r),i=i0(r);return a=Z.runKernel(_g,{x:a},o),i=Z.runKernel(_g,{x:i},o),n&&(i=Ia(i)),kl(a,i)}):Z.runKernel(_g,s,o)}const qw=Q({transpose_:pee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mee(e,t,n,r,s=!0){const o=B(e,"v","movingAverage"),a=B(t,"x","movingAverage"),i=B(n,"decay","movingAverage");Pq(o,a),V(pn(o.shape,a.shape),()=>"Shape mismatch in v and x");const l=Tt(1),c=yt(l,i);let f=Oe(yt(a,o),c);if(s){V(r!=null,()=>"When using zeroDebias: true, step is required.");const h=B(r,"step","movingAverage");f=Et(f,yt(l,Xh(i,h)))}return et(o,f)}const gee=Q({movingAverage_:mee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yee(e,t,n){Ks(n);const r=B(e,"indices","scatterND","int32"),s=B(t,"updates","scatterND");rS(s,r,n);const o={indices:r,updates:s},a={shape:n};return Z.runKernel(cA,o,a)}const vee=Q({scatterND_:yee});function xee(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const s=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const a=t.size;if(!(t.rank===0||t.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${s}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wee(e,t,n,r=0){Ks(n);const s=B(e,"sparseIndices","sparseToDense","int32"),o=B(t,"sparseValues","sparseToDense","string_or_numeric"),a=B(r,"defaultValue","sparseToDense",o.dtype);xee(s,o,n,a);const i={sparseIndices:s,sparseValues:o,defaultValue:a},l={outputShape:n};return Z.runKernel(RA,i,l)}const bee=Q({sparseToDense_:wee});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function See(e,t){const n=B(t,"indices","gatherND","int32"),s={params:B(e,"x","gatherND","string_or_numeric"),indices:n};return Z.runKernel(lO,s)}const Cee=Q({gatherND_:See});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eee(e,t){if(t==null)return e.shape.slice();if(pn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nee(e,t,n,r){const s=B(e,"x","dropout");if(V(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),V(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Dn?s.clone():s;const o=Eee(s,n),a=1-t,i=Et(LP(et(eS(o,0,1,"float32",r),a)),a);return Oe(s,i)}const Tee=Q({dropout_:Nee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iD(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function sS(e,t,n){const r=1-e%2,s=new Float32Array(e);for(let o=0;o<e;++o){const a=2*Math.PI*o/(e+r-1);s[o]=t-n*Math.cos(a)}return gr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function kee(e,t,n=1){const r=B(e,"predictions","inTopK"),s=B(t,"targets","inTopK");V(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),V(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),qs(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];V(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);const a=await r.data(),i=await s.data(),[l,c]=[a.length/o,o],f=Nl("bool",l);for(let h=0;h<l;h++){const p=h*c,g=a.subarray(p,p+c),y=[];for(let x=0;x<g.length;x++)y.push({value:g[x],index:x});y.sort((x,v)=>v.value-x.value),f[h]=0;for(let x=0;x<n;x++)if(y[x].index===i[h]){f[h]=1;break}}return e!==r&&r.dispose(),t!==s&&s.dispose(),Ra(f,s.shape,"bool")}const $ee=kee;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ee(e,t,n,r,s,o="NHWC",a){let i=e;e.rank===3&&(i=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=be(t,[1,t.shape[0],t.shape[1],t.shape[2]])),V(i.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`),V(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),V(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=o==="NHWC"?i.shape[3]:i.shape[1],f=o==="NHWC"?l.shape[3]:l.shape[1];V(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),V(f===n[3],()=>`Error in conv2dDerFilter: depth of dy (${f}) must match output depth for filter (${n[3]}).`),Co("conv2dDerFilter",s,a);const h={x:i,dy:l},p={strides:r,pad:s,dataFormat:o,dimRoundingMode:a,filterShape:n};return Z.runKernel(II,h,p)}const Ree=Q({conv2DBackpropFilter_:_ee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return Oe(e,nD(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function d0(e,t){let n=t;const r=IP(e.shape,t.shape);return r.length>0&&(n=Zt(n,r)),be(n,e.shape)}function f0(e,t,n,r){if(t==="linear")return e;if(t==="relu")return l0(e);if(t==="elu")return AP(e);if(t==="relu6")return ZP(e);if(t==="prelu")return YP(e,n);if(t==="leakyrelu")return jP(e,r);if(t==="sigmoid")return Lu(e);throw new Error(`Unknown fused activation ${t}.`)}const h0=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iee({x:e,filter:t,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:i,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(l=l||"linear",h0(Z.state.gradientDepth,l)===!1){V(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let M=s0(e,t,n,r,s,o,a);return i!=null&&(M=et(M,i)),f0(M,l,c,f)}const h=B(e,"x","conv2d","float32"),p=B(t,"filter","conv2d","float32");let g=h,y=!1;h.rank===3&&(y=!0,g=be(h,[1,h.shape[0],h.shape[1],h.shape[2]])),V(g.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${g.rank}.`),V(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),Co("fused conv2d",r,a);const x=s==="NHWC"?g.shape[3]:g.shape[1];V(p.shape[2]===x,()=>`Error in conv2d: depth of input (${x}) must match input depth for filter ${p.shape[2]}.`),V(Es(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const v=Xs(g.shape,p.shape,n,o,r,a);let S;i!=null&&(S=B(i,"bias","fused conv2d"),[S]=bn(S,h),s==="NHWC"?Ot(v.outShape,S.shape):(V(S.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${S.shape.length}.`),V(S.shape.length===0||S.shape[0]===v.outChannels||S.shape[0]===1,()=>`Error in fused conv2d: bias shape (${S.shape}) is not compatible with the number of output channels (${v.outChannels})`)));let N;if(c!=null){const M=c.shape;if(V(M.length<=1||M.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${M.length}.`),M.length===1)V(M[0]===1||M[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${M}) is not compatible with the number of output channels (${v.outChannels}).`);else if(M.length===3)try{Ot(M,v.outShape)}catch{const W=`Error in fused conv2d: PReLU activation weights (${M}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(W)}N=B(c,"prelu weights","fused conv2d")}const _=(M,L)=>{V(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[W,j,U,P]=L,X=c0(M,U,l);V(Kh(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const ae=RP(j.shape,X,W,n,r),ee=Ree(j,X,W.shape,n,r),ie=[ae,ee];if(P!=null){const le=d0(P,X);ie.push(le)}return ie},I={x:g,filter:p,bias:S,preluActivationWeights:N},A={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:f};return i==null?wi((L,W,j)=>{let U=Z.runKernel(Iw,I,A);return j([W,L,U]),y&&(U=be(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:_}})(g,p):wi((L,W,j,U)=>{let P=Z.runKernel(Iw,I,A);return U([W,L,P,j]),y&&(P=be(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:_}})(g,p,S)}const Oee=Q({fusedConv2d_:Iee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aee(e,t,n,r,s,o=[1,1],a){let i=e;e.rank===3&&(i=be(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:i,dy:l},f={strides:r,pad:s,dimRoundingMode:a,dilations:o,filterShape:n};return Z.runKernel(VI,c,f)}const Pee=Q({depthwiseConv2dNativeBackpropFilter_:Aee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dee(e,t,n,r,s,o=[1,1],a){let i=t,l=!1;t.rank===3&&(l=!0,i=be(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:i,filter:n},f={strides:r,pad:s,dimRoundingMode:a,dilations:o,inputShape:e},h=Z.runKernel(zI,c,f);return l?be(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const Fee=Q({depthwiseConv2dNativeBackpropInput_:Dee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lee({x:e,filter:t,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:i,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:f}){if(h0(Z.state.gradientDepth,l)===!1){let A=q2(e,t,n,r,s,o,a);return i!=null&&(A=et(A,i)),f0(A,l,c,f)}const h=B(e,"x","depthwiseConv2d","float32"),p=B(t,"filter","depthwiseConv2d","float32");let g=h,y=!1;h.rank===3&&(y=!0,g=be(h,[1,h.shape[0],h.shape[1],h.shape[2]])),V(g.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${g.rank}.`),V(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),V(g.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${g.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),o==null&&(o=[1,1]),V(Es(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Co("fused depthwiseConv2d",r,a);const x=Xs(g.shape,p.shape,n,o,r,a,!0);let v;i!=null&&(v=B(i,"bias","fused conv2d"),[v]=bn(v,h),Ot(x.outShape,v.shape));let S;c!=null&&(S=B(c,"prelu weights","fused depthwiseConv2d"));const N=(A,M)=>{V(Kh(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[L,W,j,U]=M,P=c0(A,j,l),X=Fee(W.shape,P,L,n,r,o,a),ae=Pee(W,P,L.shape,n,r,o,a);if(U!=null){const ee=d0(v,P);return[X,ae,ee]}return[X,ae]},_={x:g,filter:p,bias:v,preluActivationWeights:S},I={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:f};return i==null?wi((M,L,W)=>{let j=Z.runKernel(Ow,_,I);return W([L,M,j]),y&&(j=be(j,[j.shape[1],j.shape[2],j.shape[3]])),{value:j,gradFunc:N}})(g,p):wi((M,L,W,j)=>{let U=Z.runKernel(Ow,_,I);return j([L,M,U,W]),y&&(U=be(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:N}})(g,p,v)}const Mee=Q({fusedDepthwiseConv2d_:Lee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bee({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:s,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:i=.2}){if(h0(Z.state.gradientDepth,o)===!1){let P=zt(e,t,n,r);return s!=null&&(P=et(P,s)),f0(P,o,a,i)}let l=B(e,"a","fused matMul"),c=B(t,"b","fused matMul");[l,c]=bn(l,c);const f=n?l.shape[l.rank-2]:l.shape[l.rank-1],h=r?c.shape[c.rank-1]:c.shape[c.rank-2],p=n?l.shape[l.rank-1]:l.shape[l.rank-2],g=r?c.shape[c.rank-2]:c.shape[c.rank-1],y=l.shape.slice(0,-2),x=c.shape.slice(0,-2),v=_e(y),S=_e(x);V(f===h,()=>`Error in fused matMul: inner shapes (${f}) and (${h}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const _=Ot(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,g]),I=n?be(l,[v,f,p]):be(l,[v,p,f]),A=r?be(c,[S,g,h]):be(c,[S,h,g]);let M;s!=null&&(M=B(s,"bias","fused matMul"),[M]=bn(M,l),Ot(_,M.shape));let L;a!=null&&(L=B(a,"prelu weights","fused matMul"));const W=(P,X)=>{const[ae,ee,ie,le]=X,we=c0(be(P,ie.shape),ie,o);let te,oe;if(!n&&!r?(te=zt(we,ee,!1,!0),oe=zt(ae,we,!0,!1)):!n&&r?(te=zt(we,ee,!1,!1),oe=zt(we,ae,!0,!1)):n&&!r?(te=zt(ee,we,!1,!0),oe=zt(ae,we,!1,!1)):(te=zt(ee,we,!0,!0),oe=zt(we,ae,!0,!0)),s!=null){const pe=d0(le,we);return[te,oe,pe]}else return[te,oe]},j={a:I,b:A,bias:M,preluActivationWeights:L},U={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:i};return s==null?wi((X,ae,ee)=>{const ie=Z.runKernel(Rw,j,U);return ee([X,ae,ie]),{value:be(ie,_),gradFunc:W}})(I,A):wi((X,ae,ee,ie)=>{const le=Z.runKernel(Rw,j,U);return ie([X,ae,le,ee]),{value:be(le,_),gradFunc:W}})(I,A,M)}const jee=Q({fusedMatMul_:Bee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uee=Object.freeze(Object.defineProperty({__proto__:null,conv2d:Oee,depthwiseConv2d:Mee,matMul:jee},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wee(e){return sS(e,.54,.46)}const Vee=Q({hammingWindow_:Wee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zee(e){return sS(e,.5,.5)}const lD=Q({hannWindow_:zee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gee(e,t,n,r=!1,s=0){let o=0;const a=[];for(;o+t<=e.size;)a.push(gt(e,o,t)),o+=n;if(r)for(;o<e.size;){const i=o+t-e.size,l=ar([gt(e,o,t-i),Ep([i],s)]);a.push(l),o+=n}return a.length===0?Mu([],[0,t]):be(ar(a),[a.length,t])}const uD=Q({frame_:Gee});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hee(e,t,n,r,s=lD){r==null&&(r=iD(t));const o=uD(e,t,n),a=Oe(o,s(t));return nS(a,r)}const qee=Q({stft_:Hee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kee(e,t,n,r,s="bilinear",o=0){const a=B(e,"image","cropAndResize"),i=B(t,"boxes","cropAndResize","float32"),l=B(n,"boxInd","cropAndResize","int32"),c=i.shape[0];V(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),V(i.rank===2&&i.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${i.shape}.`),V(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${i.shape}.`),V(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),V(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),V(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const f={image:a,boxes:i,boxInd:l},h={method:s,extrapolationValue:o,cropSize:r};return Z.runKernel(BI,f,h)}const Xee=Q({cropAndResize_:Kee});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yee(e){const t=B(e,"image","flipLeftRight","float32");V(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return Z.runKernel(rO,n,{})}const Qee=Q({flipLeftRight_:Yee});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zee(e){const t=B(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),V(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(t.rank);return s.fill(1,0,n),s[n]=3,Ph(t,s)}const Jee=Q({grayscaleToRGB_:Zee});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ete(e){const t=B(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];V(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),V(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=t.dtype,o=hn(t,"float32"),a=gr([.2989,.587,.114]);let i;switch(t.rank){case 2:i=hd("ij,j->i",o,a);break;case 3:i=hd("ijk,k->ij",o,a);break;case 4:i=hd("ijkl,l->ijk",o,a);break;case 5:i=hd("ijklm,m->ijkl",o,a);break;case 6:i=hd("ijklmn,n->ijklm",o,a);break;default:throw new Error("Not a valid tensor rank.")}return i=Sa(i,-1),hn(i,s)}const tte=Q({rgbToGrayscale_:ete});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nte(e,t,n=0,r=.5){const s=B(e,"image","rotateWithOffset","float32");V(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const o={image:s},a={radians:t,fillValue:n,center:r};return Z.runKernel(qA,o,a)}const rte=Q({rotateWithOffset_:nte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cf(e,t,n,r,s,o){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),o==null&&(o=0);const a=e.shape[0];return n=Math.min(n,a),V(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),V(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),V(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),V(t.rank===1,()=>"scores must be a 1D tensor"),V(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`),V(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ste(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=B(e,"boxes","nonMaxSuppression","float32"),a=B(t,"scores","nonMaxSuppression","float32"),i=cf(o,a,n,r,s);n=i.maxOutputSize,r=i.iouThreshold,s=i.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return Z.runKernel(jO,{boxes:o,scores:a},l)}const ote=Q({nonMaxSuppression_:ste});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ate(e,t,n){const r=ite(e,t,n),s=r<0?-(r+1):r;e.splice(s,0,t)}function ite(e,t,n){return ute(e,t,n||lte)}function lte(e,t){return e>t?1:e<t?-1:0}function ute(e,t,n){let r=0,s=e.length,o=0,a=!1;for(;r<s;){o=r+(s-r>>>1);const i=n(t,e[o]);i>0?r=o+1:(s=o,a=!i)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cD(e,t,n,r,s){return oS(e,t,n,r,s,0)}function dD(e,t,n,r,s,o){return oS(e,t,n,r,s,0,!1,o,!0)}function fD(e,t,n,r,s,o){return oS(e,t,n,r,s,o,!0)}function oS(e,t,n,r,s,o,a=!1,i=!1,l=!1){const c=[];for(let v=0;v<t.length;v++)t[v]>s&&c.push({score:t[v],boxIndex:v,suppressBeginIndex:0});c.sort(C3);const f=o>0?-.5/o:0,h=[],p=[];for(;h.length<n&&c.length>0;){const v=c.pop(),{score:S,boxIndex:N,suppressBeginIndex:_}=v;if(S<s)break;let I=!1;for(let A=h.length-1;A>=_;--A){const M=cte(e,N,h[A]);if(M>=r){I=!0;break}if(v.score=v.score*dte(r,f,M),v.score<=s)break}v.suppressBeginIndex=h.length,I||(v.score===S?(h.push(N),p.push(v.score)):v.score>s&&ate(c,v,C3))}const g=h.length,y=n-g;i&&y>0&&(h.push(...new Array(y).fill(0)),p.push(...new Array(y).fill(0)));const x={selectedIndices:h};return a&&(x.selectedScores=p),l&&(x.validOutputs=g),x}function cte(e,t,n){const r=e.subarray(t*4,t*4+4),s=e.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),f=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),p=Math.max(s[1],s[3]),g=(i-o)*(l-a),y=(h-c)*(p-f);if(g<=0||y<=0)return 0;const x=Math.max(o,c),v=Math.max(a,f),S=Math.min(i,h),N=Math.min(l,p),_=Math.max(S-x,0)*Math.max(N-v,0);return _/(g+y-_)}function dte(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function C3(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function fte(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=B(e,"boxes","nonMaxSuppressionAsync"),a=B(t,"scores","nonMaxSuppressionAsync"),i=cf(o,a,n,r,s);n=i.maxOutputSize,r=i.iouThreshold,s=i.scoreThreshold;const l=await Promise.all([o.data(),a.data()]),c=l[0],f=l[1],{selectedIndices:h}=cD(c,f,n,r,s);return o!==e&&o.dispose(),a!==t&&a.dispose(),gr(h,"int32")}const hte=fte;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pte(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const a=B(e,"boxes","nonMaxSuppression"),i=B(t,"scores","nonMaxSuppression"),l=cf(a,i,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c={boxes:a,scores:i},f={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o},h=Z.runKernel(WO,c,f);return{selectedIndices:h[0],selectedScores:h[1]}}const mte=Q({nonMaxSuppressionWithScore_:pte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function gte(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const a=B(e,"boxes","nonMaxSuppressionAsync"),i=B(t,"scores","nonMaxSuppressionAsync"),l=cf(a,i,n,r,s,o);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,o=l.softNmsSigma;const c=await Promise.all([a.data(),i.data()]),f=c[0],h=c[1],{selectedIndices:p,selectedScores:g}=fD(f,h,n,r,s,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:gr(p,"int32"),selectedScores:gr(g)}}const yte=gte;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vte(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const a=B(e,"boxes","nonMaxSuppression"),i=B(t,"scores","nonMaxSuppression"),l=cf(a,i,n,r,s,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,p={boxes:a,scores:i},g={maxOutputSize:c,iouThreshold:f,scoreThreshold:h,padToMaxOutputSize:o},y=Z.runKernel(UO,p,g);return{selectedIndices:y[0],validOutputs:y[1]}}const xte=Q({nonMaxSuppressionPadded_:vte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function wte(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const a=B(e,"boxes","nonMaxSuppressionAsync"),i=B(t,"scores","nonMaxSuppressionAsync"),l=cf(a,i,n,r,s,null),c=l.maxOutputSize,f=l.iouThreshold,h=l.scoreThreshold,[p,g]=await Promise.all([a.data(),i.data()]),{selectedIndices:y,validOutputs:x}=dD(p,g,c,f,h,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:gr(y,"int32"),validOutputs:Tt(x,"int32")}}const bte=wte;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ste(e,t,n=!1,r=!1){const s=B(e,"images","resizeBilinear");V(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),V(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),V(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=s,a=!1;s.rank===3&&(a=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const i={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},c=Z.runKernel(oA,i,l);return a?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Cte=Q({resizeBilinear_:Ste});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ete(e,t,n=!1,r=!1){const s=B(e,"images","resizeNearestNeighbor");V(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),V(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),V(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),V(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=s,a=!1;s.rank===3&&(a=!0,o=be(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const i={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},c=Z.runKernel(sA,i,l);return a?be(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const Nte=Q({resizeNearestNeighbor_:Ete});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tte(e,t="binary",n=!1,r=.5){const s=B(e,"image","threshold"),o=.2989,a=.587,i=.114,l=s.shape[0]*s.shape[1];let c=Oe(gr([r]),255),f,h,p,g;if(V(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),V(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),V(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),V(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),s.shape[2]===3){[f,h,p]=Jh(s,[1,1,1],-1);const v=Oe(f,o),S=Oe(h,a),N=Oe(p,i);g=et(et(v,S),N)}else g=e;if(t==="otsu"){const v=$P(hn(JP(g),"int32"),Ra([]),256);c=kte(v,l)}const y=n?Y2(g,c):a0(g,c);return hn(Oe(y,255),"int32")}function kte(e,t){let n=gr([-1]),r=gr([0]),s=gr([0]),o,a,i,l,c,f;for(let h=0;h<e.size-1;h++){o=gt(e,0,h+1),a=gt(e,h+1),c=Et(Zt(o),t),f=Et(Zt(a),t);const p=Zt(Oe(o,Qh(0,o.size)));i=Et(p,Zt(o));const g=Ep(a.shape,o.size),y=et(Qh(0,a.size),g),x=Oe(a,y);l=Et(Zt(x),Zt(a));const v=yt(i,l),S=yt(i,l),N=Oe(c,f);s=Oe(Oe(N,v),S);const _=a0(s,r);r=yl(_,s,r),n=yl(_,gr([h]),n)}return n}const $te=Q({threshold_:Tte});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _te(e,t,n="nearest",r="constant",s=0,o){const a=B(e,"image","transform","float32"),i=B(t,"transforms","transform","float32");V(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),V(i.rank===2&&(i.shape[0]===a.shape[0]||i.shape[0]===1)&&i.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),V(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const l={image:a,transforms:i},c={interpolation:n,fillMode:r,fillValue:s,outputShape:o};return Z.runKernel(UA,l,c)}const Rte=Q({transform_:_te});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ite(e,t,n){const r=B(e,"a","bandPart");V(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[o,a]=r.shape.slice(-2);let i,l;typeof t=="number"?(V(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),V(t<=o,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`),i=B(t<0?o:t,"numLower","bandPart")):(V(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),i=yl(Hw(t,0),o,hy(t,o))),typeof n=="number"?(V(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),V(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),l=B(n<0?a:n,"numUpper","bandPart")):(V(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=yl(Hw(n,0),a,hy(n,a)));const c=be(Qh(0,o,1,"int32"),[-1,1]),f=Qh(0,a,1,"int32"),h=yt(c,f),p=dy(Y2(h,i),BP(h,Ia(l))),g=Ju([o,a],r.dtype);return be(bi(pc(be(r,[-1,o,a])).map(y=>yl(p,y,g))),s)}const Ote=Q({bandPart_:Ite});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ate(e){let t;if(Array.isArray(e)){t=!1,V(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=e[0].shape[0];for(let o=1;o<e.length;++o)V(e[o].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[o].shape[0]} vs. ${s})`)}else t=!0,e=Jh(e,e.shape[0],0).map(s=>nr(s,[0]));V(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let s=0;s<e.length;++s)n.push(Z.tidy(()=>{let o=r[s];if(s>0)for(let a=0;a<s;++a){const i=Oe(Zt(Oe(n[a],o)),n[a]);o=yt(o,i)}return Et(o,o0(o,"euclidean"))}));return t?bi(n,0):n}const Pte=Q({gramSchmidt_:Ate});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dte(e,t=!1){if(V(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return E3(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,c)=>l*c),r=pc(be(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],o=[];r.forEach(l=>{const[c,f]=E3(l,t);s.push(c),o.push(f)});const a=be(bi(s,0),e.shape),i=be(bi(o,0),e.shape);return[a,i]}}function E3(e,t=!1){return Z.tidy(()=>{V(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let s=FP(n),o=gl(e);const a=Mu([[1]],[1,1]);let i=gl(a);const l=n>=r?r:n;for(let c=0;c<l;++c){const f=o,h=i,p=s;[i,o,s]=Z.tidy(()=>{const g=gt(o,[c,c],[n-c,1]),y=o0(g),x=gt(o,[c,c],[1,1]),v=yl(a0(x,0),Mu([[-1]]),Mu([[1]])),S=yt(x,Oe(v,y)),N=Et(g,S);N.shape[0]===1?i=gl(a):i=ar([a,gt(N,[1,0],[N.shape[0]-1,N.shape[1]])],0);const _=Ia(Et(zt(v,S),y)),I=gt(o,[c,0],[n-c,r]),A=Oe(_,i),M=qw(i);if(c===0)o=yt(I,zt(A,zt(M,I)));else{const j=yt(I,zt(A,zt(M,I)));o=ar([gt(o,[0,0],[c,r]),j],0)}const L=qw(A),W=gt(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=yt(W,zt(zt(W,i),L));else{const j=yt(W,zt(zt(W,i),L));s=ar([gt(s,[0,0],[n,c]),j],1)}return[i,o,s]}),dn([f,h,p])}return!t&&n>r&&(s=gt(s,[0,0],[n,r]),o=gt(o,[0,0],[r,r])),[s,o]})}const Fte=Q({qr_:Dte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Kr;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(Kr||(Kr={}));function Lte(e,t,n=Kr.SUM_BY_NONZERO_WEIGHTS){const r=B(e,"losses","computeWeightedLoss");let s=null;t!=null&&(s=B(t,"weights","computeWeightedLoss"));const o=s==null?r:Oe(r,s);if(n===Kr.NONE)return o;if(n===Kr.SUM)return Zt(o);if(n===Kr.MEAN){if(s==null)return fy(o);{const a=r.size/s.size,i=Et(Zt(o),Zt(s));return a>1?Et(i,Tt(a)):i}}if(n===Kr.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Et(Zt(o),Tt(r.size));{const a=Oe(s,Iu(r.shape)),i=hn(Zt(KP(a,Tt(0))),"float32");return Et(Zt(o),i)}}throw Error(`Unknown reduction: ${n}`)}const Ni=Q({computeWeightedLoss_:Lte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mte(e,t,n,r=Kr.SUM_BY_NONZERO_WEIGHTS){const s=B(e,"labels","absoluteDifference"),o=B(t,"predictions","absoluteDifference");let a=null;n!=null&&(a=B(n,"weights","absoluteDifference")),qs(s.shape,o.shape,"Error in absoluteDifference: ");const i=Fs(yt(s,o));return Ni(i,a,r)}const Bte=Q({absoluteDifference_:Mte});function jte(e,t,n,r,s=Kr.SUM_BY_NONZERO_WEIGHTS){const o=B(e,"labels","cosineDistance"),a=B(t,"predictions","cosineDistance");let i=null;r!=null&&(i=B(r,"weights","cosineDistance")),qs(o.shape,a.shape,"Error in cosineDistance: ");const l=Tt(1),c=yt(l,Zt(Oe(o,a),n,!0));return Ni(c,i,s)}const Ute=Q({cosineDistance_:jte});function Wte(e,t,n,r=Kr.SUM_BY_NONZERO_WEIGHTS){let s=B(e,"labels","hingeLoss");const o=B(t,"predictions","hingeLoss");let a=null;n!=null&&(a=B(n,"weights","hingeLoss")),qs(s.shape,o.shape,"Error in hingeLoss: ");const i=Tt(1);s=yt(Oe(Tt(2),s),i);const l=l0(yt(i,Oe(s,o)));return Ni(l,a,r)}const Vte=Q({hingeLoss_:Wte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zte(e,t,n,r=1,s=Kr.SUM_BY_NONZERO_WEIGHTS){const o=B(e,"labels","huberLoss"),a=B(t,"predictions","huberLoss");let i=null;n!=null&&(i=B(n,"weights","huberLoss")),qs(o.shape,a.shape,"Error in huberLoss: ");const l=Tt(r),c=Fs(yt(a,o)),f=hy(c,l),h=yt(c,f),p=et(Oe(Tt(.5),Ho(f)),Oe(l,h));return Ni(p,i,s)}const Gte=Q({huberLoss_:zte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hte(e,t,n,r=1e-7,s=Kr.SUM_BY_NONZERO_WEIGHTS){const o=B(e,"labels","logLoss"),a=B(t,"predictions","logLoss");let i=null;n!=null&&(i=B(n,"weights","logLoss")),qs(o.shape,a.shape,"Error in logLoss: ");const l=Tt(1),c=Tt(r),f=Ia(Oe(o,Yh(et(a,c)))),h=Oe(yt(l,o),Yh(et(yt(l,a),c))),p=yt(f,h);return Ni(p,i,s)}const qte=Q({logLoss_:Hte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kte(e,t,n,r=Kr.SUM_BY_NONZERO_WEIGHTS){const s=B(e,"labels","meanSquaredError"),o=B(t,"predictions","meanSquaredError");let a=null;n!=null&&(a=B(n,"weights","meanSquaredError")),qs(s.shape,o.shape,"Error in meanSquaredError: ");const i=tD(s,o);return Ni(i,a,r)}const Xte=Q({meanSquaredError_:Kte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yte(e,t){const n=B(e,"labels","sigmoidCrossEntropyWithLogits"),r=B(t,"logits","sigmoidCrossEntropyWithLogits");qs(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=l0(r),o=Oe(r,n),a=UP(xi(Ia(Fs(r))));return et(yt(s,o),a)}function Qte(e,t,n,r=0,s=Kr.SUM_BY_NONZERO_WEIGHTS){let o=B(e,"multiClassLabels","sigmoidCrossEntropy");const a=B(t,"logits","sigmoidCrossEntropy");let i=null;if(n!=null&&(i=B(n,"weights","sigmoidCrossEntropy")),qs(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=Tt(r),f=Tt(1),h=Tt(.5);o=et(Oe(o,yt(f,c)),Oe(h,c))}const l=Yte(o,a);return Ni(l,i,s)}const Zte=Q({sigmoidCrossEntropy_:Qte});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return wi((s,o,a)=>{const l=VP(o,[n],!0),c=yt(hn(o,"float32"),l);a([s,c]);const f=Ia(Oe(c,s));return{value:Zt(f,[n]),gradFunc:(g,y)=>{const[x,v]=y,S=Ys(g.shape,[n]);return[Oe(be(g,S),yt(hn(x,"float32"),xi(v))),Oe(be(g,S),yt(xi(v),hn(x,"float32")))]}}})(e,t)}function ene(e,t,n,r=0,s=Kr.SUM_BY_NONZERO_WEIGHTS){let o=B(e,"onehotLabels","softmaxCrossEntropy");const a=B(t,"logits","softmaxCrossEntropy");let i=null;if(n!=null&&(i=B(n,"weights","softmaxCrossEntropy")),qs(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=Tt(r),f=Tt(1),h=Tt(o.shape[1]);o=et(Oe(o,yt(f,c)),Et(c,h))}const l=Jte(o,a);return Ni(l,i,s)}const tne=Q({softmaxCrossEntropy_:ene});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nne(e,t,n,r){const s=B(e,"indices","sparseFillEmptyRows","int32"),o=B(t,"values","sparseFillEmptyRows"),a=B(n,"denseShape","sparseFillEmptyRows","int32"),i=B(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==0)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const l={indices:s,values:o,denseShape:a,defaultValue:i},c=Z.runKernel(TA,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const rne=Q({sparseFillEmptyRows_:nne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sne(e,t,n){const r=B(e,"inputIndices","sparseReshape","int32"),s=B(t,"inputShape","sparseReshape","int32"),o=B(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const a={inputIndices:r,inputShape:s,newShape:o},i=Z.runKernel(kA,a);return{outputIndices:i[0],outputShape:i[1]}}const one=Q({sparseReshape_:sne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ane(e,t,n){const r=B(e,"data","sparseSegmentMean"),s=B(t,"indices","sparseSegmentMean","int32"),o=B(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);const a={data:r,indices:s,segmentIds:o};return Z.runKernel($A,a)}const ine=Q({sparseSegmentMean_:ane});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lne(e,t,n){const r=B(e,"data","sparseSegmentSum"),s=B(t,"indices","sparseSegmentSum","int32"),o=B(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);const a={data:r,indices:s,segmentIds:o};return Z.runKernel(_A,a)}const une=Q({sparseSegmentSum_:lne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cne(e,t,n,r,s,o,a,i){const l=B(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=B(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const f={separator:n,nGramWidths:r,leftPad:s,rightPad:o,padWidth:a,preserveShortSequences:i},h={data:l,dataSplits:c},p=Z.runKernel(PA,h,f);return{nGrams:p[0],nGramsSplits:p[1]}}const dne=Q({stringNGrams_:cne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fne(e,t,n=!0){const r=B(e,"input","stringSplit","string"),s=B(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const o={skipEmpty:n},a={input:r,delimiter:s},i=Z.runKernel(DA,a,o);return{indices:i[0],values:i[1],shape:i[2]}}const hne=Q({stringSplit_:fne});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pne(e,t){const n=B(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return Z.runKernel(FA,s,r)}const mne=Q({stringToHashBucketFast_:pne});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gne(e,t,n,r=!0){const s=B(e,"input","staticRegexReplace","string"),o={pattern:t,rewrite:n,replaceGlobal:r};return Z.runKernel(OA,{x:s},o)}const yne=Q({staticRegexReplace_:gne});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vne={fft:tS,ifft:py,rfft:nS,irfft:eD},xne={hammingWindow:Vee,hannWindow:lD,frame:uD,stft:qee},p0={flipLeftRight:Qee,grayscaleToRGB:Jee,resizeNearestNeighbor:Nte,resizeBilinear:Cte,rgbToGrayscale:tte,rotateWithOffset:rte,cropAndResize:Xee,nonMaxSuppression:ote,nonMaxSuppressionAsync:hte,nonMaxSuppressionWithScore:mte,nonMaxSuppressionWithScoreAsync:yte,nonMaxSuppressionPadded:xte,nonMaxSuppressionPaddedAsync:bte,threshold:$te,transform:Rte},wne={bandPart:Ote,gramSchmidt:Pte,qr:Fte},bne={absoluteDifference:Bte,computeWeightedLoss:Ni,cosineDistance:Ute,hingeLoss:Vte,huberLoss:Gte,logLoss:qte,meanSquaredError:Xte,sigmoidCrossEntropy:Zte,softmaxCrossEntropy:tne},Sne={sparseFillEmptyRows:rne,sparseReshape:one,sparseSegmentMean:ine,sparseSegmentSum:une},Cne={stringNGrams:dne,stringSplit:hne,stringToHashBucketFast:mne,staticRegexReplace:yne};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ene=new Map,Nne=new Map;class Tne{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Tu{constructor(){this.classNameMap={}}static getMap(){return Tu.instance==null&&(Tu.instance=new Tu),Tu.instance}static register(t){Tu.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function kne(e,t,n){V(e.className!=null,()=>"Class being registered does not have the static className property defined."),V(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),V(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);const r=n,s=t+">"+r;return Tu.register(e),Ene.set(s,e),Nne.set(e,s),e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mc extends Tne{minimize(t,n=!1,r){const{value:s,grads:o}=this.computeGradients(t,r);if(r!=null){const a=r.map(i=>({name:i.name,tensor:o[i.name]}));this.applyGradients(a)}else this.applyGradients(o);return dn(o),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return cQ(t,n)}dispose(){this.iterations_!=null&&dn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Tt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(mc,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $ne extends mc{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=Z.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Z.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:bt(()=>Ws(o).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:bt(()=>Ws(o).variable(a))});const i=Array.isArray(t)?t[s].tensor:t[r];if(i==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;bt(()=>{const f=et(Oe(l,this.rho),Oe(Ho(i),1-this.rho)),h=Oe(Et(vi(et(c,this.epsilon)),vi(et(l,this.epsilon))),i),p=et(Oe(c,this.rho),Oe(Ho(h),1-this.rho));l.assign(f),c.assign(p);const g=et(Oe(h,-this.learningRate),o);o.assign(g)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dn(this.accumulatedGrads.map(t=>t.variable)),dn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _ne extends mc{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Z.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:bt(()=>Ep(o.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(t)?t[s].tensor:t[r];if(a==null)return;const i=this.accumulatedGrads[s].variable;bt(()=>{const l=et(i,Ho(a));i.assign(l);const c=et(Oe(Et(a,vi(et(l,Z.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rne extends mc{static get className(){return"Adam"}constructor(t,n,r,s=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],bt(()=>{this.accBeta1=Tt(n).variable(),this.accBeta2=Tt(r).variable()}),s==null&&(this.epsilon=Z.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);bt(()=>{const r=yt(1,this.accBeta1),s=yt(1,this.accBeta2);n.forEach((o,a)=>{const i=Z.registeredVariables[o],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:bt(()=>Ws(i).variable(l))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${o}/v`,variable:bt(()=>Ws(i).variable(l))});const c=Array.isArray(t)?t[a].tensor:t[o];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,h=this.accumulatedSecondMoment[a].variable,p=et(Oe(f,this.beta1),Oe(c,1-this.beta1)),g=et(Oe(h,this.beta2),Oe(Ho(c),1-this.beta2)),y=Et(p,r),x=Et(g,s);f.assign(p),h.assign(g);const v=et(Oe(Et(y,et(vi(x),this.epsilon)),-this.learningRate),i);i.assign(v)}),this.accBeta1.assign(Oe(this.accBeta1,this.beta1)),this.accBeta2.assign(Oe(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&dn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),bt(()=>{this.accBeta1.assign(Xh(this.beta1,this.iterations_+1)),this.accBeta2.assign(Xh(this.beta2,this.iterations_+1))});const n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ine extends mc{static get className(){return"Adamax"}constructor(t,n,r,s=null,o=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],bt(()=>{this.iteration=Tt(0).variable(),this.accBeta1=Tt(n).variable()}),s==null&&(this.epsilon=Z.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);bt(()=>{const r=yt(1,this.accBeta1),s=Et(-this.learningRate,et(Oe(this.iteration,this.decay),1));n.forEach((o,a)=>{const i=Z.registeredVariables[o],l=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:Ws(i).variable(l)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${o}/v`,variable:Ws(i).variable(l)});const c=Array.isArray(t)?t[a].tensor:t[o];if(c==null)return;const f=this.accumulatedFirstMoment[a].variable,h=this.accumulatedWeightedInfNorm[a].variable,p=et(Oe(f,this.beta1),Oe(c,1-this.beta1)),g=Oe(h,this.beta2),y=Fs(c),x=qP(g,y);f.assign(p),h.assign(x);const v=et(Oe(Et(s,r),Et(p,et(x,this.epsilon))),i);i.assign(v)}),this.iteration.assign(et(this.iteration,1)),this.accBeta1.assign(Oe(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&dn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hD extends mc{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Array.isArray(t)?t[s].tensor:t[r];if(o==null)return;const a=Z.registeredVariables[r];bt(()=>{const i=et(Oe(this.c,o),a);a.assign(i)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Ta(Tt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class One extends hD{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=Tt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Z.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:bt(()=>Ws(o).variable(!1))});const a=this.accumulations[s].variable,i=Array.isArray(t)?t[s].tensor:t[r];i!=null&&bt(()=>{let l;const c=et(Oe(this.m,a),i);this.useNesterov?l=et(Oe(this.c,et(i,Oe(c,this.m))),o):l=et(Oe(this.c,c),o),a.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ane extends mc{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,s=null,o=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,s==null&&(this.epsilon=Z.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Z.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:bt(()=>Ws(o).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:bt(()=>Ws(o).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:bt(()=>Ws(o).variable(a))});const i=Array.isArray(t)?t[s].tensor:t[r];if(i==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;bt(()=>{const f=et(Oe(l,this.decay),Oe(Ho(i),1-this.decay));if(this.centered){const h=this.accumulatedMeanGrads[s].variable,p=et(Oe(h,this.decay),Oe(i,1-this.decay)),g=Et(Oe(i,this.learningRate),vi(yt(f,et(Ho(p),this.epsilon)))),y=et(Oe(c,this.momentum),g);l.assign(f),h.assign(p),c.assign(y);const x=yt(o,y);o.assign(x)}else{const h=et(Oe(l,this.decay),Oe(Ho(i),1-this.decay)),p=et(Oe(c,this.momentum),Et(Oe(i,this.learningRate),vi(et(h,this.epsilon))));l.assign(h),c.assign(p);const g=yt(o,p);o.assign(g)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&dn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pne=[$ne,_ne,Rne,Ine,One,Ane,hD];function Dne(){for(const e of Pne)kne(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fne="model",Lne=".json",Mne=".weights.bin";function N3(e){return new Promise(t=>setTimeout(t)).then(e)}class tc{constructor(t){if(!de().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(tc.URL_SCHEME)&&(t=t.slice(tc.URL_SCHEME.length)),(t==null||t.length===0)&&(t=Fne),this.modelJsonFileName=t+Lne,this.weightDataFileName=t+Mne}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=Jo.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=pP(t,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=a,await N3(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await N3(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:bp(t)}}}}tc.URL_SCHEME="downloads://";class Bne{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{const o=JSON.parse(s.target.result),a=o.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:a});return}const l=G2(o,c=>this.loadWeights(c));t(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){const n=[],r=[];for(const a of t)n.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(t),o=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(o).then(a=>[n,a])}loadWeightsFile(t,n){return new Promise((r,s)=>{const o=new FileReader;o.onload=a=>{const i=a.target.result;r(i)},o.onerror=a=>s(`Failed to weights data from file of path '${t}'.`),o.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){const n=[],r=this.weightsFiles.map(o=>p3(o.name)),s={};for(const o of t)o.paths.forEach(a=>{const i=p3(a);if(n.indexOf(i)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(n.push(i),r.indexOf(i)===-1)throw new Error(`Weight file with basename '${i}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(i)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const jne=e=>de().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(tc.URL_SCHEME)?Une(e.slice(tc.URL_SCHEME.length)):null;cn.registerSaveRouter(jne);function Une(e="model"){return new tc(e)}function Wne(e){return new Bne(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3(e,t,n,r){a(e),n=n??0,r=r??1,i(n,r);let s=0;const o=l=>(l.then(c=>{const f=n+ ++s/e.length*(r-n);return t(f),c}),l);function a(l){V(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function i(l,c){V(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),V(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),V(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(e.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pD(e,t){t==null&&(t={});const n=t.fetchFunc==null?de().platform.fetch:t.fetchFunc,r=e.map(h=>n(h,t.requestInit,{isBinary:!0})),i=(t.onProgress==null?await Promise.all(r):await T3(r,t.onProgress,0,.5)).map(h=>h.arrayBuffer());return t.onProgress==null?await Promise.all(i):await T3(i,t.onProgress,.5,1)}function Vne(e,t){var n;const r=t.fetchFunc==null?de().platform.fetch:t.fetchFunc;let s=0,o;return(n=t.onProgress)===null||n===void 0||n.call(t,0),new ReadableStream({pull:async a=>{for(var i;s<e.length;){o||(o=(await r(e[s],t.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await o.read();if(l){s++,o=void 0,(i=t.onProgress)===null||i===void 0||i.call(t,s/e.length);continue}a.enqueue(c);return}a.close()}})}async function zne(e,t="",n,r){return mD(a=>pD(a,{requestInit:r}))(e,t,n)}function mD(e){return async(t,n="",r)=>{const s=t.map(()=>!1),o={},a=r!=null?r.map(()=>!1):[],i=[];if(t.forEach((g,y)=>{let x=0;g.weights.forEach(v=>{const S="quantization"in v?v.quantization.dtype:v.dtype,N=Xu[S]*_e(v.shape),_=()=>{s[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:v,groupOffset:x,sizeBytes:N})};r!=null?r.forEach((I,A)=>{I===v.name&&(_(),a[A]=!0)}):_(),i.push(v.name),x+=N})}),!a.every(g=>g)){const g=r.filter((y,x)=>!a[x]);throw new Error(`Could not find weights in manifest with names: ${g.join(", ")}. 
Manifest JSON has weights with names: ${i.join(", ")}.`)}const l=s.reduce((g,y,x)=>(y&&g.push(x),g),[]),c=[];l.forEach(g=>{t[g].paths.forEach(y=>{const x=n+(n.endsWith("/")?"":"/")+y;c.push(x)})});const f=await e(c),h={};let p=0;return l.forEach(g=>{const y=t[g].paths.length,x=new Jo(f.slice(p,p+y));o[g].forEach(S=>{const N=x.slice(S.groupOffset,S.groupOffset+S.sizeBytes),_=dP(N,[S.manifestEntry]);for(const I in _)h[I]=_[I]}),p+=y}),h}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gne="application/octet-stream",Hne="application/json";class aS{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(V(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=de().platform.fetch,V(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&V(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s=pP(t,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:Hne}),"model.json"),t.weightData!=null){const a=Jo.join(t.weightData);n.body.append("model.weights.bin",new Blob([a],{type:Gne}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:bp(t),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async loadModelJSON(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const t=await this.loadModelJSON();return G2(t,n=>this.loadWeights(n))}async loadStream(){const t=await this.loadModelJSON(),n=await this.getWeightUrls(t.weightsManifest),r=Bw(t.weightsManifest),s=()=>Vne(n,this.loadOptions);return Object.assign(Object.assign({},t),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=qne(n),o=this.weightPathPrefix||r,a=[],i=[];for(const l of t)for(const c of l.paths)this.weightUrlConverter!=null?i.push(this.weightUrlConverter(c)):a.push(o+c+s);return this.weightUrlConverter&&a.push(...await Promise.all(i)),a}async loadWeights(t){const n=await this.getWeightUrls(t),r=Bw(t),s=await pD(n,this.loadOptions);return[r,s]}}aS.URL_SCHEME_REGEX=/^https?:\/\//;function qne(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),s=n>t?e.substring(n):"";return[r+"/",s]}function Kw(e){return e.match(aS.URL_SCHEME_REGEX)!=null}const gD=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>Kw(r)):n=Kw(e),n)return iS(e,t)}return null};cn.registerSaveRouter(gD);cn.registerLoadRouter(gD);function iS(e,t){return new aS(e,t)}function Kne(e,t){return iS(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vx{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class yD{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class Xne{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}}function Yne(e,t,n,r){const s=arguments;return new Xne(vD(...s))}function vD(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new vx(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vx({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new vx({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Qne(e){return new yD(e)}function Zne(e){return new yD(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xD=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:Jo,browserFiles:Wne,browserHTTPRequest:Kne,concatenateArrayBuffers:Yq,copyModel:vK,decodeWeights:dP,decodeWeightsStream:hP,encodeWeights:zq,fromMemory:Yne,fromMemorySync:vD,getLoadHandlers:sK,getModelArtifactsForJSON:G2,getModelArtifactsForJSONSync:mP,getModelArtifactsInfoForJSON:bp,getSaveHandlers:rK,getWeightSpecs:Bw,http:iS,isHTTPScheme:Kw,listModels:gK,loadWeights:zne,moveModel:xK,registerLoadRouter:nK,registerSaveRouter:tK,removeModel:yK,weightsLoaderFactory:mD,withSaveHandler:Qne,withSaveHandlerSync:Zne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let xu;function Jne(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)o=!0;else if(e.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)i=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(Aw(_w,Z.backendName)!=null){const y={pixels:e},x={numChannels:t};return Z.runKernel(_w,y,x)}const[c,f]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];let h;if(a)h=e.getContext("2d").getImageData(0,0,c,f).data;else if(r||n)h=e.data;else if(o||s||i){if(xu==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")xu=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else xu=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});xu.canvas.width=c,xu.canvas.height=f,xu.drawImage(e,0,0,c,f),h=xu.getImageData(0,0,c,f).data}let p;if(t===4)p=new Int32Array(h);else{const y=c*f;p=new Int32Array(y*t);for(let x=0;x<y;x++)for(let v=0;v<t;++v)p[x*t+v]=h[x*4+v]}return rD(p,[f,c,t],"int32")}function ere(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function tre(e,t){let n=B(e,"img","toPixels");if(!(e instanceof Dn)){const c=n;n=hn(c,"int32"),c.dispose()}ere(n);const[r,s]=n.shape.slice(0,2),o=n.rank===2?1:n.shape[2],a=await n.data(),i=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const f=[0,0,0,255];for(let p=0;p<o;p++){const g=a[c*o+p];if(n.dtype==="float32"){if(g<0||g>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${g}.`)}else if(n.dtype==="int32"&&(g<0||g>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${g}.`);o===1?(f[0]=g*i,f[1]=g*i,f[2]=g*i):f[p]=g*i}const h=c*4;l[h+0]=Math.round(f[0]),l[h+1]=Math.round(f[1]),l[h+2]=Math.round(f[2]),l[h+3]=Math.round(f[3])}return n!==e&&n.dispose(),l}const nre=Q({fromPixels_:Jne});function wD(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(_e(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const s=t.shape,o=s[s.length-1];let a=1;for(let h=0;h<s.length-1;++h)a*=s[h];const i=e.shape,l=s.slice();l.pop();let c=1;for(let h=o;h<n;++h)c*=i[h],l.push(i[h]);const f=[...or(e.shape).map(h=>h/c),1].slice(0,o);return[l,a,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xw=-2,rre=-1;function bD(e,t,n){const r=e.shape.length;V(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),V(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)V(t[s]+n[s]<=e.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${t[s]+n[s]}) would overflow input.shape[${s}] (${e.shape[s]})`)}function sre(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function SD(e,t,n){const r=[];for(let s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function CD(e,t,n,r){const s=[...e];for(let o=s.length;o<r.length;o++)s.push(1);for(let o=0;o<n;o++)o===0?s[t]=1:(s.splice(t,0,1),s.pop());return s}function ED(e,t,n){return n<=e?n:n-(t-1)}function ND(e,t){const n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function ore(e,t,n,r,s,o,a,i,l){const c=e.length;let f=new Array(c),h=new Array(c),p=new Array(c);if(t.length&&n>0){const g=t[0],y=n+1;f=TD(a,g,y,r,e),h=kD(i,g,y,s,e),p=CD(o,g,y,e)}else for(let g=0;g<c;g++)f[g]=_D(a,r,o,e,g,l),h[g]=RD(i,s,o,e,g,l),p[g]=$D(o,g,l);return{begin:f,end:h,strides:p}}function TD(e,t,n,r,s){const o=[...s],a=ND(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=0;else{const l=ED(t,n,i);let c=r[l];e&1<<l&&(c=0),o[i]=c}return o}function kD(e,t,n,r,s){const o=[...s],a=ND(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{const l=ED(t,n,i);let c=r[l];e&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[i]=c}for(let i=0;i<o.length;i++){const l=s[i];o[i]<0&&(o[i]+=l),o[i]=oy(0,o[i],s[i])}return o}function $D(e,t,n){let r=e[t];return(n&1<<t||r==null)&&(r=1),r}function _D(e,t,n,r,s,o){let a=t[s];const i=n[s]||1;(e&1<<s||o&1<<s||a==null)&&(i>0?a=Number.MIN_SAFE_INTEGER:a=Number.MAX_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),a=oy(0,a,l-1),a}function RD(e,t,n,r,s,o){let a=t[s];const i=n[s]||1;(e&1<<s||o&1<<s||a==null)&&(i>0?a=Number.MAX_SAFE_INTEGER:a=Number.MIN_SAFE_INTEGER);const l=r[s];return a<0&&(a+=l),i>0?a=oy(0,a,l):a=oy(-1,a,l-1),a}function lS(e,t,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function uS(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function ID(e,t,n){let r;const s=e.shape.length;typeof t=="number"?r=[t,...new Array(s-1).fill(0)]:t.length<s?r=t.concat(new Array(s-t.length).fill(0)):r=t.slice(),r.forEach(a=>{V(a!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(s).fill(-1):typeof n=="number"?o=[n,...new Array(s-1).fill(-1)]:n.length<s?o=n.concat(new Array(s-n.length).fill(-1)):o=n,o=o.map((a,i)=>a>=0?a:(V(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${i}.`),e.shape[i]-r[i])),[r,o]}function OD(e,t,n,r,s,o,a,i,l){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,a!=null&&(a&a-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let f=!1;const h={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:o,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:l};for(let _=0;_<h.dims;_++)f&&(1<<_&i)!==0&&h.numAddAxisAfterEllipsis++,1<<_&a&&(f=!0);f||(h.ellipsisMask|=1<<h.dims,h.dims++);const p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};are(h,p);let g=!0,y=!0,x=!0;const v=[],S=[];for(let _=0;_<e.length;++_){if(p.strides[_]===0)throw Error(`strides[${_}] must be non-zero`);const I=!!(p.shrinkAxisMask&1<<_),A=e[_];if(A===-1){v.push(I?1:-1);continue}const M=[p.beginMask&1<<_,p.endMask&1<<_],L=[p.strides[_]>0?0:-1,p.strides[_]>0?A:A-1];if(I&&p.strides[_]<=0)throw Error("only stride 1 allowed on non-range indexing.");x=x&&p.strides[_]===1;const W=!!(p.beginMask&1<<_&&p.endMask&1<<_);if(p.beginValid&&p.endValid){if(I){const X=p.begin[_]<0?A+p.begin[_]:p.begin[_];if(p.begin[_]=X,p.end[_]=p.begin[_]+1,X<0||X>=A)throw Error(`slice index ${p.begin[_]} of dimension ${_} out of bounds.`)}else p.begin[_]=k3(p.begin[_],0,p.strides[_],A,M,L),p.end[_]=k3(p.end[_],1,p.strides[_],A,M,L);const P=p.strides[_]===1&&p.begin[_]===0&&p.end[_]===A;g=g&&P,y=y&&(_===0&&p.strides[_]===1||P)}else g=g&&p.strides[_]===1&&W,y=y&&(_===0&&p.strides[_]===1||W);let j,U=!1;if(p.beginValid&&p.endValid?(j=p.end[_]-p.begin[_],U=!0):I?(j=1,U=!0):W&&A>=0&&(p.strides[_]<0?j=-A:j=A,U=!0),U){let P;j===0||j<0!=p.strides[_]<0?P=0:P=Math.trunc(j/p.strides[_])+(j%p.strides[_]!==0?1:0),v.push(P)}else v.push(-1)}for(let _=0;_<p.finalShapeGatherIndices.length;++_){const I=p.finalShapeGatherIndices[_];I>=0?S.push(v[I]):I===Xw&&S.push(1)}return{finalShapeSparse:S.filter((_,I)=>p.finalShapeGatherIndices[I]!==Xw),finalShape:S,isIdentity:g,sliceDim0:y,isSimpleSlice:x,begin:p.begin,end:p.end,strides:p.strides}}function are(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const s=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<s;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(Xw),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(rre),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function k3(e,t,n,r,s,o){if(s[t])return n>0?o[t]:o[t+1&1];{const a=e<0?r+e:e;return a<o[0]?o[0]:a>o[1]?o[1]:a}}const ire=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:bD,computeFlatOffset:uS,computeOutShape:SD,getNormalizedAxes:ore,isSliceContinous:lS,maskToAxes:sre,parseSliceParams:ID,sliceInfo:OD,startForAxis:_D,startIndicesWithElidedDims:TD,stopForAxis:RD,stopIndicesWithElidedDims:kD,stridesForAxis:$D,stridesWithElidedDims:CD},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lre=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:e=>e();function ure(){return new Promise(e=>lre(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AD(e,t){const n=e[0].length;e.forEach((s,o)=>{V(s.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),V(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((s,o)=>{for(let a=0;a<n;a++)V(a===t||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${o}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function nc(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Vo;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(Vo||(Vo={}));function PD(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const o=n[s],a=r[r.length-n.length+s],i=r[a];if(o>=0)if(i>=0){if(i!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${s+e}] = ${o} but shape[${s+e}] = ${i}`)}else r[a]=o}return r}function DD(e){const t={FIRST_DIM_SIZE:Vo.FIRST_DIM_SIZE,VALUE_ROWIDS:Vo.VALUE_ROWIDS,ROW_LENGTHS:Vo.ROW_LENGTHS,ROW_SPLITS:Vo.ROW_SPLITS,ROW_LIMITS:Vo.ROW_LIMITS,ROW_STARTS:Vo.ROW_STARTS},n=[];for(const r of e)if(r in t)n.push(t[r]);else break;return n}function FD(e){return e.length===0?0:e[0]===Vo.FIRST_DIM_SIZE?e.length-1:e.length}function LD(e,t){if(e==null||t==null)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const o=e[s],a=t[s+1];if(o>=0&&a>=0&&o!==1&&o!==a)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${s-e.length}] = ${o} but ragged tensor input.flatValues.shape[${s-e.length}] = ${a}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cS=30;function m0(e){return e<=cS?e:Tw(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MD(e,t,n){const r=n*(typeof e=="number"?e:e[0]),s=t*(typeof e=="number"?e:e[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dS(e,t,n,r=!0){let s=[];if(r)s=s.concat(t.slice(0)),s.push(e[0]/n),s=s.concat(e.slice(1));else{s=s.concat(e[0]);const o=t.length;for(let a=0;a<o;++a)s=s.concat([e[a+1]/t[a],t[a]]);s=s.concat(e.slice(o+1))}return s}function fS(e,t,n=!0){const r=[];if(n){r.push(t);for(let s=t+1;s<e;++s)s<=2*t?(r.push(s),r.push(s-(t+1))):r.push(s)}else{const s=[],o=[];for(let a=1;a<e;++a)a>=t*2+1||a%2===1?o.push(a):s.push(a);r.push(...s),r.push(0),r.push(...o)}return r}function hS(e,t,n,r=!0){const s=[];r?s.push(e[0]/n):s.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?s.push(t[o-1]*e[o]):s.push(e[o]/t[o-1]):s.push(e[o]);return s}function BD(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function jD(e,t,n){const r=e.slice(0,1);for(let s=0;s<n;++s)r.push(e[s+1]-t[s][0]-t[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UD=1.7580993408473768,WD=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VD=.3275911,zD=.254829592,GD=-.284496736,HD=1.421413741,qD=-1.453152027,KD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yw(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function cre(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function dre(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=0;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function fre(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=2;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function hre(e,t){const n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function pre(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function mre(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let s=0;s<Math.ceil(e/2);s++){const o=(t?2:-2)*Math.PI*(s/e);n[s]=Math.cos(o),r[s]=Math.sin(o)}return{real:n,imag:r}}function gre(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),s=Math.cos(r),o=Math.sin(r);return{real:s,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xx="->",yre=/->/g,$3=",",_3="...";function XD(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(yre,"").length)/xx.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${xx}").`);const[r,s]=e.split(xx);V(r.indexOf(_3)===-1,()=>`The ellipsis notation ("${_3}") is not supported yet.`);const o=r.split($3),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let p=0;p<s.length;++p){const g=s[p];if(!o.some(y=>y.indexOf(g)!==-1))throw new Error(`Output subscripts contain the label ${g} not present in the input subscripts.`);i.indexOf(g)===-1&&i.push(g)}for(let p=0;p<r.length;++p){const g=r[p];i.indexOf(g)===-1&&g!==$3&&i.push(g)}const l=new Array(o.length);for(let p=0;p<a;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let g=0;g<o[p].length;++g)l[p].push(i.indexOf(o[p][g]))}const c=i.length,f=s.length,h=[];for(let p=f;p<c;++p)h.push(p);return{allDims:i,summedDims:h,idDims:l}}function YD(e,t){let n=new Array(e);n.fill(-1);for(let s=0;s<t.length;++s)n[t[s]]=s;const r=[];for(let s=0;s<e;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function QD(e,t,n){const r=new Array(e);for(let s=0;s<n.length;++s){const o=n[s].shape;for(let a=0;a<t[s].length;++a)r[t[s][a]]===void 0?r[t[s][a]]=o[a]:V(r[t[s][a]]===o[a],()=>`Expected dimension ${r[t[s][a]]} at axis ${a} of input shaped ${JSON.stringify(o)}, but got dimension ${o[a]}`)}}function ZD(e,t){const n=e,r=[];let s=0;e.length===0&&n.push(-1),s=e.length+1;for(let a=0;a<s;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const i=n[a],l=vre(t,i);for(const c of l)o.indexOf(c)===-1&&(r[a].push(c),o.push(c))}return{path:n,steps:r}}function JD(e){return e.every((t,n)=>t===n)}function vre(e,t){const n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function eF(e,t,n=0){let r=[];if(typeof t=="number")V(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const s=t.reduce((a,i)=>(i===-1&&(a+=1),a),0);V(s<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(o!==-1){const a=t.reduce((i,l)=>l>0?i+l:i);t[o]=e.shape[n]-a}V(e.shape[n]===t.reduce((a,i)=>a+i),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tF(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function nF(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function rF(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sF(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function oF(e,t){return`size ${e} must be non-negative, not ${t}`}function aF(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function iF(e,t){const n=_e(e),r=_e(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function lF(e,t){const n=_e(e),r=_e(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qw(){return"segment ids must be >= 0"}function uF(){return"segment ids are not increasing"}function cF(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function dF(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fF(e,t){let n=!1,r;for(e<=cS?(r=e,n=!0):r=Tw(e,Math.floor(Math.sqrt(e)));!n;)r>t||r===e?n=!0:r=Tw(e,r+1);return r}function hF(e,t,n){const r=[],s=e.length;for(let o=0;o<s;o++)o!==t?r.push(e[o]):r.push(n);return r}function pF(e,t,n,r){const s=t.shape.length,o=e.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let h=0;h<r;++h)if(e.shape[h]!==t.shape[h])throw new Error(`x.shape[${h}]: ${e.shape[h]} should be equal to indices.shape[${h}]: ${t.shape[h]}.`);const a=e.shape[n],i=[];let l=1,c=1,f=1;for(let h=0;h<r;++h)i.push(e.shape[h]),l*=e.shape[h];for(let h=r;h<n;h++)i.push(e.shape[h]),c*=e.shape[h];for(let h=r;h<s;h++)i.push(t.shape[h]);for(let h=n+1;h<o;h++)i.push(e.shape[h]),f*=e.shape[h];return{batchSize:l,sliceSize:f,outerSize:c,dimSize:a,outputShape:i}}const xre=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:pF,computeOutShape:hF,segOpComputeOptimalWindowSize:fF},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fd(e){try{return e.map(t=>Ad(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function mF(e){return e.map(t=>Fu(t))}const wre=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:zD,ERF_A2:GD,ERF_A3:HD,ERF_A4:qD,ERF_A5:KD,ERF_P:VD,PARALLELIZE_THRESHOLD:cS,get RowPartitionType(){return Vo},SELU_SCALE:WD,SELU_SCALEALPHA:UD,applyActivation:f0,assertAndGetBroadcastShape:Ot,assertAxesAreInnerMostDims:ea,assertParamsConsistent:AD,assignToTypedArray:pre,axesAreInnerMostDims:K2,calculateShapes:u0,checkEinsumDimSizes:QD,checkPadOnDimRoundingMode:Co,combineLocations:PP,combineRaggedTensorToTensorShapes:PD,complexWithEvenIndex:dre,complexWithOddIndex:fre,computeConv2DInfo:Xs,computeConv3DInfo:Cp,computeDefaultPad:H2,computeDilation2DInfo:NP,computeOptimalWindowSize:m0,computeOutAndReduceShapes:Ma,computeOutShape:nc,computePool2DInfo:hc,computePool3DInfo:Sp,convertConv2DDataFormat:uf,decodeEinsumEquation:XD,eitherStridesOrDilationsAreOne:Es,expandShapeToKeepDim:Ys,exponent:gre,exponents:mre,fromStringArrayToUint8:mF,fromUint8ToStringArray:Fd,getAxesPermutation:Eo,getBroadcastDims:cy,getComplexWithIndex:hre,getEinsumComputePath:ZD,getEinsumPermutation:YD,getFusedBiasGradient:d0,getFusedDyActivation:c0,getImageCenter:MD,getInnerMostAxes:No,getPermuted:fS,getRaggedRank:FD,getReductionAxes:IP,getReshaped:dS,getReshapedPermuted:hS,getRowPartitionTypesHelper:DD,getSliceBeginCoords:BD,getSliceSize:jD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:tF,getSparseFillEmptyRowsNegativeIndexErrorMessage:nF,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:rF,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:aF,getSparseReshapeInputOutputMismatchErrorMessage:lF,getSparseReshapeInputOutputMultipleErrorMessage:iF,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:sF,getSparseReshapeNegativeOutputDimErrorMessage:oF,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:dF,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:Qw,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:uF,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:cF,getUndoAxesPermutation:X2,isIdentityPermutation:JD,log:hq,mergeRealAndImagArrays:Yw,prepareAndValidate:wD,prepareSplitSize:eF,segment_util:xre,shouldFuse:h0,slice_util:ire,splitRealAndImagArrays:cre,stridesOrDilationsArePositive:Zu,tupleValuesAreOne:Kh,upcastType:Aa,validateDefaultValueShape:LD,validateInput:rS,validateUpdateShape:sD,warn:zo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Dne();/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bre=de();bre.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ms;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(ms||(ms={}));var R3;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(R3||(R3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sre={};function gF(e){return Sre[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R(e,t,n,r,s){const o=t.inputParams[e];if(o&&o.inputIndexStart!==void 0){const i=o.inputIndexStart,l=o.inputIndexEnd===0?void 0:o.inputIndexEnd===void 0?i+1:o.inputIndexEnd,c=i<0?t.inputNames.length+i:i;if(o.type==="tensor")return rr(t.inputNames[c],n,r,s);if(o.type==="tensors"){const p=t.inputs.slice(i,l);return t.inputNames.slice(i,l).filter((y,x)=>{var v;return((v=p[x])===null||v===void 0?void 0:v.op)!=="NoOp"}).map(y=>rr(y,n,r,s))}const f=rr(t.inputNames[c],n,r,s),h=f.dataSync();return o.type==="number"?h[0]:kw(f.shape,h)}const a=t.attrParams[e];return a&&a.value}function rr(e,t,n,r){const[s,o]=ys(e,n);if(r!=null){const i=r.getHashTableHandleByName(s);if(i!=null)return i}const a=n.currentContextIds.find(i=>!!t[my(s,i)]);return a!==void 0?t[my(s,a)][o]:void 0}function I3(e,t,n){return t[my(e,n.currentContextId)]}function si(e,t){const[n,r,s]=ys(e,t);return[my(n,t&&t.currentContextId),r,s]}function my(e,t){return t?`${e}-${t}`:e}function ys(e,t){if(e==="")return["",0,void 0];const n=t!=null&&t.parseNodeNameCache!=null;if(n){const o=t.parseNodeNameCache.get(e);if(o!=null)return o}const r=e.split(":");let s;if(r.length===1)s=[e,0,void 0];else{const o=r[0],a=r.length===3?r[1]:void 0,i=Number(r[r.length-1]);s=[o,i,a]}return n&&t.parseNodeNameCache.set(e,s),s}function Bg(e,t,n){let r=R("pad",e,t,n);if(r==="explicit"){r=R("explicitPaddings",e,t,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let o=0;o<4;o++)s[o][0]=r[o*2],s[o][1]=r[o*2+1];return s}return r}function oi(e){return e.kept?e:gl(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cre=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ere=Object.freeze(Object.defineProperty({__proto__:null,json:Cre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nre=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Tre=Object.freeze(Object.defineProperty({__proto__:null,json:Nre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kre=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],$re=Object.freeze(Object.defineProperty({__proto__:null,json:kre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _re=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],Rre=Object.freeze(Object.defineProperty({__proto__:null,json:_re},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ire=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],Ore=Object.freeze(Object.defineProperty({__proto__:null,json:Ire},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Are=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Pre=Object.freeze(Object.defineProperty({__proto__:null,json:Are},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dre=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Fre=Object.freeze(Object.defineProperty({__proto__:null,json:Dre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lre=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Mre=Object.freeze(Object.defineProperty({__proto__:null,json:Lre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bre=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],jre=Object.freeze(Object.defineProperty({__proto__:null,json:Bre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ure=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Wre=Object.freeze(Object.defineProperty({__proto__:null,json:Ure},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vre=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],zre=Object.freeze(Object.defineProperty({__proto__:null,json:Vre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gre=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Hre=Object.freeze(Object.defineProperty({__proto__:null,json:Gre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qre=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Kre=Object.freeze(Object.defineProperty({__proto__:null,json:qre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xre=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Yre=Object.freeze(Object.defineProperty({__proto__:null,json:Xre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qre=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Zre=Object.freeze(Object.defineProperty({__proto__:null,json:Qre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jre=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],ese=Object.freeze(Object.defineProperty({__proto__:null,json:Jre},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tse=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],nse=Object.freeze(Object.defineProperty({__proto__:null,json:tse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rse=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],sse=Object.freeze(Object.defineProperty({__proto__:null,json:rse},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ose=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],ase=Object.freeze(Object.defineProperty({__proto__:null,json:ose},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class O3{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[Ere,Tre,$re,Rre,Ore,Pre,Fre,Mre,jre,Wre,zre,Hre,Kre,Yre,Zre,ese,nse,sse,ase],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(t,n={}){const r=t.node,s=[],o=[],a=[],i=r.reduce((x,v)=>(x[v.name]=this.mapNode(v),v.op.startsWith("Placeholder")?s.push(x[v.name]):v.op==="Const"?o.push(x[v.name]):(v.input==null||v.input.length===0)&&a.push(x[v.name]),x),{});let l=[];const c=[];let f={},h={};n!=null&&(f=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));const p=Object.keys(i);p.forEach(x=>{const v=i[x];v.inputNames.forEach((S,N)=>{const[_,,I]=si(S),A=i[_];if(A.outputs!=null){const M=A.outputs.indexOf(I);if(M!==-1){const L=`${_}:${M}`;v.inputNames[N]=L}}v.inputs.push(A),A.children.push(v)})}),Object.keys(h).length===0?p.forEach(x=>{const v=i[x];v.children.length===0&&c.push(v)}):Object.keys(h).forEach(x=>{const[v]=si(x),S=i[v];S!=null&&(S.signatureKey=h[x],c.push(S))}),Object.keys(f).length>0?Object.keys(f).forEach(x=>{const[v]=si(x),S=i[v];S&&(S.signatureKey=f[x],l.push(S))}):l=s;let g={};t.library!=null&&t.library.function!=null&&(g=t.library.function.reduce((x,v)=>(x[v.signature.name]=this.mapFunction(v),x),{}));const y={nodes:i,inputs:l,outputs:c,weights:o,placeholders:s,signature:n,functions:g};return a.length>0&&(y.initNodes=a),y}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){const n=gF(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,o)=>(s[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,o)=>{const a=o.type;let i;switch(o.type){case"string":i=Zw(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=Zw(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":i=ob(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=ob(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":i=eb(t.attr,o.tfName,o.defaultValue||0),i===void 0&&o.tfDeprecatedName&&(i=eb(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":i=sb(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=sb(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":i=Jw(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=Jw(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":i=ib(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=ib(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":i=rb(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=rb(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":i=ab(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=ab(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":i=tb(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=tb(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":i=nb(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=nb(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"func":i=A3(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=A3(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${o.type} for op: ${t.op}`)}return s[o.name]={value:i,type:a},s},{})),r}mapFunction(t){const n=t.nodeDef,r=[],s=[];let o={};n!=null&&(o=n.reduce((h,p)=>(h[p.name]=this.mapNode(p),p.op==="Const"&&s.push(h[p.name]),h),{}));const a=[],i=[];t.signature.inputArg.forEach(h=>{const[p]=si(h.name),g={name:p,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:pS(h.type),type:"dtype"}},children:[]};g.signatureKey=h.name,a.push(g),o[p]=g}),Object.keys(o).forEach(h=>{const p=o[h];p.inputNames.forEach((g,y)=>{const[x,,v]=si(g),S=o[x];if(S.outputs!=null){const N=S.outputs.indexOf(v);if(N!==-1){const _=`${x}:${N}`;p.inputNames[y]=_}}p.inputs.push(S),S.children.push(p)})});const c=t.ret;t.signature.outputArg.forEach(h=>{const[p,g]=si(c[h.name]),y=o[p];y!=null&&(y.defaultOutput=g,i.push(y))});const f=this.mapArgsToSignature(t);return{nodes:o,inputs:a,outputs:i,weights:s,placeholders:r,signature:f}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}}function ise(e){const t=de().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function yF(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):ise(e);return t?n:n.toLowerCase()}function Zw(e,t,n,r=!1){const s=e[t];return s!=null?yF(s.s,r):n}function Jw(e,t,n){const r=e[t];return r?r.b:n}function eb(e,t,n){const r=e[t]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function pS(e){switch(typeof e=="string"&&(e=ms[e]),e){case ms.DT_FLOAT:case ms.DT_HALF:return"float32";case ms.DT_INT32:case ms.DT_INT64:case ms.DT_INT8:case ms.DT_UINT8:return"int32";case ms.DT_BOOL:return"bool";case ms.DT_DOUBLE:return"float32";case ms.DT_STRING:return"string";case ms.DT_COMPLEX64:case ms.DT_COMPLEX128:return"complex64";default:return null}}function A3(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function tb(e,t,n){const r=e[t];return r&&r.type?pS(r.type):n}function nb(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(s=>pS(s)):n}function vF(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function rb(e,t,n){const r=e[t];return r&&r.shape?vF(r.shape):n}function sb(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function ob(e,t,n,r=!1){const s=e[t];return s&&s.list&&s.list.s?s.list.s.map(o=>yF(o,r)):n}function ab(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(s=>vF(s)):n}function ib(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lse{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(s=>this.getInput(s)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((s,o)=>(s[o]=this.getAttr(o),s),{}))}getInput(t){return rr(t,this.tensorMap,this.context)}getAttr(t,n){const r=this.node.rawAttrs[t];if(r.tensor!=null)return rr(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return eb(this.node.rawAttrs,t,n);if(r.s!=null)return Zw(this.node.rawAttrs,t,n);if(r.b!=null)return Jw(this.node.rawAttrs,t,n);if(r.shape!=null)return rb(this.node.rawAttrs,t,n);if(r.type!=null)return tb(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return sb(this.node.rawAttrs,t,n);if(r.list.s!=null)return ob(this.node.rawAttrs,t,n);if(r.list.shape!=null)return ab(this.node.rawAttrs,t,n);if(r.list.b!=null)return ib(this.node.rawAttrs,t,n);if(r.list.type!=null)return nb(this.node.rawAttrs,t,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ir=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:cP,abs:Fs,acos:OK,acosh:PK,add:et,addN:FK,all:MK,any:jK,argMax:WK,argMin:zK,asin:HK,asinh:KK,atan:YK,atan2:ZK,atanh:eX,avgPool:TP,avgPool3d:lX,basicLSTMCell:mX,batchNorm:r0,batchNorm2d:wX,batchNorm3d:SX,batchNorm4d:EX,batchToSpaceND:kP,bincount:$P,bitwiseAnd:kX,booleanMaskAsync:hee,broadcastArgs:_X,broadcastTo:Ah,buffer:mn,cast:hn,ceil:OX,clipByValue:_P,clone:gl,complex:kl,concat:ar,concat1d:DX,concat2d:LX,concat3d:BX,concat4d:UX,conv1d:zX,conv2d:s0,conv2dTranspose:qX,conv3d:XX,conv3dTranspose:JX,cos:tY,cosh:rY,cosineWindow:sS,cumprod:oY,cumsum:iY,denseBincount:uY,depthToSpace:dY,depthwiseConv2d:q2,diag:pY,dilation2d:gY,div:Et,divNoNan:bY,dot:CY,dropout:Tee,einsum:hd,elu:AP,enclosingPowerOfTwo:iD,ensureShape:kY,equal:OP,erf:_Y,euclideanNorm:MY,exp:xi,expandDims:Sa,expm1:WY,eye:FP,fft:tS,fill:Ep,floor:LP,floorDiv:EP,fused:Uee,gather:MP,gatherND:Cee,greater:a0,greaterEqual:BP,ifft:py,imag:i0,image:p0,inTopKAsync:$ee,irfft:eD,isFinite:QY,isInf:JY,isNaN:tQ,leakyRelu:jP,less:Hw,lessEqual:Y2,linalg:wne,linspace:oQ,localResponseNormalization:iQ,log:Yh,log1p:UP,logSigmoid:pQ,logSoftmax:yQ,logSumExp:VP,logicalAnd:dy,logicalNot:zP,logicalOr:GP,logicalXor:CQ,losses:bne,lowerBound:NQ,matMul:zt,max:Ed,maxPool:HP,maxPool3d:$Q,maxPoolWithArgmax:RQ,maximum:qP,mean:fy,meshgrid:AQ,min:Gw,minimum:hy,mirrorPad:FQ,mod:MQ,moments:jQ,movingAverage:gee,mul:Oe,multiRNNCell:WQ,multinomial:zQ,neg:Ia,norm:o0,notEqual:KP,oneHot:qQ,ones:Iu,onesLike:XQ,op:Q,outerProduct:QQ,pad:Np,pad1d:eZ,pad2d:nZ,pad3d:sZ,pad4d:aZ,pool:dZ,pow:Xh,prelu:YP,print:CP,prod:pZ,raggedGather:gZ,raggedRange:vZ,raggedTensorToTensor:wZ,rand:SZ,randomGamma:zZ,randomNormal:QP,randomStandardNormal:qZ,randomUniform:eS,randomUniformInt:YZ,range:Qh,real:Zh,reciprocal:JZ,relu:l0,relu6:ZP,reshape:be,reverse:ec,reverse1d:sJ,reverse2d:aJ,reverse3d:lJ,reverse4d:cJ,rfft:nS,round:JP,rsqrt:hJ,scalar:Tt,scatterND:vee,searchSorted:Q2,selu:mJ,separableConv2d:yJ,setdiff1dAsync:xJ,sigmoid:Lu,sign:bJ,signal:xne,sin:CJ,sinh:NJ,slice:gt,slice1d:kJ,slice2d:_J,slice3d:IJ,slice4d:AJ,softmax:DJ,softplus:WP,spaceToBatchND:XP,sparse:Sne,sparseToDense:bee,spectral:vne,split:Jh,sqrt:vi,square:Ho,squaredDifference:tD,squeeze:nr,stack:bi,step:nD,stridedSlice:HJ,string:Cne,sub:yt,sum:Zt,tan:KJ,tanh:zw,tensor:Ra,tensor1d:gr,tensor2d:Mu,tensor3d:rD,tensor4d:XJ,tensor5d:YJ,tensor6d:QJ,tensorScatterUpdate:JJ,tile:Ph,topk:tee,transpose:qw,truncatedNormal:ree,unique:oee,unsortedSegmentSum:iee,unstack:pc,upperBound:uee,variable:cee,where:yl,whereAsync:aD,zeros:Ju,zerosLike:Ws},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const use=(e,t,n,r=ir)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(R("a",e,t,n),R("b",e,t,n))];case"AddN":return[r.addN(R("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(R("a",e,t,n),R("b",e,t,n))];case"Mul":return[r.mul(R("a",e,t,n),R("b",e,t,n))];case"RealDiv":case"Div":return[r.div(R("a",e,t,n),R("b",e,t,n))];case"DivNoNan":return[r.divNoNan(R("a",e,t,n),R("b",e,t,n))];case"FloorDiv":return[r.floorDiv(R("a",e,t,n),R("b",e,t,n))];case"Sub":return[r.sub(R("a",e,t,n),R("b",e,t,n))];case"Minimum":return[r.minimum(R("a",e,t,n),R("b",e,t,n))];case"Maximum":return[r.maximum(R("a",e,t,n),R("b",e,t,n))];case"Pow":return[r.pow(R("a",e,t,n),R("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(R("a",e,t,n),R("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cse=(e,t,n,r=ir)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(R("x",e,t,n))];case"Acos":return[r.acos(R("x",e,t,n))];case"Acosh":return[r.acosh(R("x",e,t,n))];case"Asin":return[r.asin(R("x",e,t,n))];case"Asinh":return[r.asinh(R("x",e,t,n))];case"Atan":return[r.atan(R("x",e,t,n))];case"Atan2":return[r.atan2(R("x",e,t,n),R("y",e,t,n))];case"Atanh":return[r.atanh(R("x",e,t,n))];case"Ceil":return[r.ceil(R("x",e,t,n))];case"Complex":return[r.complex(R("real",e,t,n),R("imag",e,t,n))];case"Cos":return[r.cos(R("x",e,t,n))];case"Cosh":return[r.cosh(R("x",e,t,n))];case"Elu":return[r.elu(R("x",e,t,n))];case"Erf":return[r.erf(R("x",e,t,n))];case"Exp":return[r.exp(R("x",e,t,n))];case"Expm1":return[r.expm1(R("x",e,t,n))];case"Floor":return[r.floor(R("x",e,t,n))];case"Log":return[r.log(R("x",e,t,n))];case"Log1p":return[r.log1p(R("x",e,t,n))];case"Imag":return[r.imag(R("x",e,t,n))];case"Neg":return[r.neg(R("x",e,t,n))];case"Reciprocal":return[r.reciprocal(R("x",e,t,n))];case"Real":return[r.real(R("x",e,t,n))];case"Relu":return[r.relu(R("x",e,t,n))];case"Round":return[r.round(R("x",e,t,n))];case"Selu":return[r.selu(R("x",e,t,n))];case"Sigmoid":return[r.sigmoid(R("x",e,t,n))];case"Sin":return[r.sin(R("x",e,t,n))];case"Sign":return[r.sign(R("x",e,t,n))];case"Sinh":return[r.sinh(R("x",e,t,n))];case"Softplus":return[r.softplus(R("x",e,t,n))];case"Sqrt":return[r.sqrt(R("x",e,t,n))];case"Square":return[r.square(R("x",e,t,n))];case"Tanh":return[r.tanh(R("x",e,t,n))];case"Tan":return[r.tan(R("x",e,t,n))];case"ClipByValue":return[r.clipByValue(R("x",e,t,n),R("clipValueMin",e,t,n),R("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(R("x",e,t,n))];case"Rsqrt":return[r.rsqrt(rr(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(R("x",e,t,n),R("alpha",e,t,n))];case"Prelu":return[r.prelu(R("x",e,t,n),R("alpha",e,t,n))];case"IsNan":return[r.isNaN(rr(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(rr(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(rr(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mo(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){V(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){const s=e[r],o=t[r];V(s<0||o<0||s===o,()=>n+` Shapes ${e} and ${t} must match`)}}}function P3(e){return!(typeof e=="number"||e.some(t=>t<0))}function vh(e,t,n){let r=lb(e,n);const s=!P3(r);if(s&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&t.forEach(o=>{r=lb(o.shape,r)}),!P3(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function lb(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const s=e[r],o=t[r];if(s>=0&&o>=0&&s!==o)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=s>=0?s:o}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dse{constructor(t,n,r,s,o,a,i){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=Tt(0),Ta(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),mo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,Ta(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,s)=>this.write(r,n[s]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let s=0;s<this.size();s++)t.push(s)}if(t.length===0)return Ra([],[0].concat(this.elementShape));const r=this.readMany(t);return mo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),bi(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return Ra([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return mo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),ar(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,pc(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=t.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const o=r===0?0:n.size/r,a=[];bt(()=>{n=be(n,[1,r,o]);for(let l=0;l<t.length;++l){const f=[0,l===0?0:s[l-1],0],h=[1,t[l],o];a[l]=be(gt(n,f,h),this.elementShape)}return a});const i=[];for(let l=0;l<t.length;l++)i[l]=l;this.writeMany(i,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rc{get id(){return this.idTensor.id}constructor(t,n,r,s=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t?.forEach(o=>{if(r!==o.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${o.dtype}`);mo(n,o.shape,"TensorList shape mismatch: "),Ta(o)}),this.idTensor=Tt(0),this.maxNumElements=s,Ta(this.idTensor)}copy(){return new rc([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);mo(t,this.elementShape,"TensorList shape mismatch: ");const s=vh(this.elementShape,this.tensors,t);return bt(()=>{const o=this.tensors.map(a=>be(a,s));return bi(o,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=vh(this.elementShape,this.tensors,t),s=this.tensors.pop();return s.kept=!1,mo(s.shape,t,"TensorList shape mismatch: "),be(s,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(mo(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Ta(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const n=new rc([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);mo(this.tensors[t].shape,n,"TensorList shape mismatch: ");const s=vh(this.elementShape,this.tensors,n);return be(this.tensors[t],s)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);mo(this.elementShape,n.shape,"TensorList shape mismatch: "),Ta(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);mo(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());const s=vh(this.elementShape,this.tensors,r);return t.length===0?Ra([],[0].concat(s)):bt(()=>{const o=t.map(a=>be(this.tensors[a],s));return bi(o,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);mo(this.elementShape,n,"TensorList shape mismatch: ");const r=vh(this.elementShape,this.tensors,n);return this.size()===0?Ra([],[0].concat(r)):bt(()=>{const s=this.tensors.map(o=>be(o,r));return ar(s,0)})}}function fse(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);const s=e.shape.slice(1);mo(s,t,"TensorList shape mismatch: ");const o=pc(e);return new rc(o,t,r)}function hse(e,t,n,r){return new rc([],e,t,r)}function pse(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const s=Math.max(...t);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const o=new rc([],n,e.dtype,r),a=pc(e,0);return t.forEach((i,l)=>{o.setItem(i,a[l])}),o}function mse(e,t,n){let r=0;const s=t.map(f=>(r+=f,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);const o=e.shape.slice(1),a=lb(o,n),i=r===0?0:e.size/r,l=bt(()=>{const f=[];e=be(e,[1,r,i]);for(let h=0;h<t.length;++h){const g=[0,h===0?0:s[h-1],0],y=[1,t[h],i];f[h]=be(gt(e,g,y),a)}return e.dispose(),f}),c=new rc([],n,e.dtype,t.length);for(let f=0;f<l.length;f++)c.setItem(f,l[f]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gse=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=R("thenBranch",e,t,n),s=R("elseBranch",e,t,n),o=R("cond",e,t,n),a=R("args",e,t,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=R("body",e,t,n),s=R("cond",e,t,n),o=R("args",e,t,n),a=await n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),i=o.map(f=>f.id);let l=await a[0].data();a.forEach(f=>{!f.kept&&i.indexOf(f.id)===-1&&f.dispose()});let c=o;for(;l[0];){const f=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const h=c.map(g=>g.id);f.forEach(g=>{!g.kept&&i.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()});const p=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await p[0].data(),p.forEach(g=>{!g.kept&&i.indexOf(g.id)===-1&&h.indexOf(g.id)===-1&&g.dispose()})}return c}case"LoopCond":{const r=R("pred",e,t,n);return[oi(r)]}case"Switch":{const r=R("pred",e,t,n);let s=R("data",e,t,n);return s.kept||(s=oi(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=e.inputNames.find(s=>rr(s,t,n)!==void 0);if(r){const s=rr(r,t,n);return[oi(s)]}return}case"Enter":{const r=R("frameName",e,t,n),s=R("tensor",e,t,n);return n.enterFrame(r),[oi(s)]}case"Exit":{const r=R("tensor",e,t,n);return n.exitFrame(),[oi(r)]}case"NextIteration":{const r=R("tensor",e,t,n);return n.nextIteration(),[oi(r)]}case"TensorArrayV3":{const r=R("size",e,t,n),s=R("dtype",e,t,n),o=R("elementShape",e,t,n),a=R("dynamicSize",e,t,n),i=R("clearAfterRead",e,t,n),l=R("identicalElementShapes",e,t,n),c=R("name",e,t,n),f=new dse(c,s,r,o,l,a,i);return n.addTensorArray(f),[f.idTensor,Tt(1)]}case"TensorArrayWriteV3":{const r=R("tensorArrayId",e,t,n),s=R("index",e,t,n),o=R("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(s,o),[a.idTensor]}case"TensorArrayReadV3":{const r=R("tensorArrayId",e,t,n),s=R("index",e,t,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=R("tensorArrayId",e,t,n),s=R("indices",e,t,n),o=R("dtype",e,t,n);return[n.getTensorArray(r.id).gather(s,o)]}case"TensorArrayScatterV3":{const r=R("tensorArrayId",e,t,n),s=R("indices",e,t,n),o=R("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(s,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=R("tensorArrayId",e,t,n),s=n.getTensorArray(r.id),o=R("dtype",e,t,n);return[s.concat(o)]}case"TensorArraySplitV3":{const r=R("tensorArrayId",e,t,n),s=R("tensor",e,t,n),o=R("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(o,s),[a.idTensor]}case"TensorArraySizeV3":{const r=R("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return[Tt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=R("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=R("tensorListId",e,t,n),s=R("index",e,t,n),o=R("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(s,o),[a.idTensor]}case"TensorListGetItem":{const r=R("tensorListId",e,t,n),s=R("index",e,t,n),o=R("elementShape",e,t,n),a=R("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(s,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=R("indices",e,t,n),s=R("tensor",e,t,n),o=R("elementShape",e,t,n),a=R("numElements",e,t,n),i=pse(s,r,o,a);return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=R("elementShape",e,t,n),s=R("elementDType",e,t,n);let o;e.op==="TensorListReserve"?o="numElements":o="maxNumElements";const a=R(o,e,t,n),i=e.op==="TensorListReserve"?-1:a,l=hse(r,s,a,i);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=R("tensorListId",e,t,n),s=R("indices",e,t,n),o=R("elementShape",e,t,n),a=R("elementDType",e,t,n);return[n.getTensorList(r.id).gather(s,a,o)]}case"TensorListStack":{const r=R("tensorListId",e,t,n),s=R("elementShape",e,t,n),o=R("elementDType",e,t,n),a=R("numElements",e,t,n);return[n.getTensorList(r.id).stack(s,o,a)]}case"TensorListFromTensor":{const r=R("tensor",e,t,n),s=R("elementShape",e,t,n),o=R("elementDType",e,t,n),a=fse(r,s,o);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=R("tensorListId",e,t,n),s=n.getTensorList(r.id),o=R("dtype",e,t,n),a=R("elementShape",e,t,n);return[s.concat(o,a)]}case"TensorListPushBack":{const r=R("tensorListId",e,t,n),s=R("tensor",e,t,n),o=n.getTensorList(r.id);return o.pushBack(s),[o.idTensor]}case"TensorListPopBack":{const r=R("tensorListId",e,t,n),s=R("elementShape",e,t,n),o=R("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(s,o)]}case"TensorListSplit":{const r=R("tensor",e,t,n),s=R("elementShape",e,t,n),o=R("lengths",e,t,n),a=mse(r,o,s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=R("tensorListId",e,t,n),s=n.getTensorList(r.id);return[Tt(s.size(),"int32")]}case"TensorListResize":{const r=R("tensorListId",e,t,n),s=R("size",e,t,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3(e,t,n){const[r,s]=R("fusedOps",e,t,n),o=r==="biasadd",a=!o,i=s==="prelu",l=r==="fusedbatchnorm",c=R("numArgs",e,t,n);if(o){if(i&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&o&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const f=R("strides",e,t,n),h=Bg(e,t,n),p=R("dataFormat",e,t,n).toUpperCase(),g=R("dilations",e,t,n);let[y,x]=R("args",e,t,n);a&&(x=y,y=void 0);const v=R("leakyreluAlpha",e,t,n);return{stride:f,pad:h,dataFormat:p,dilations:g,biasArg:y,preluArg:x,activationFunc:s,leakyreluAlpha:v}}const yse=(e,t,n,r=ir)=>{switch(e.op){case"Conv1D":{const s=R("stride",e,t,n),o=R("pad",e,t,n),a=R("dataFormat",e,t,n).toUpperCase(),i=R("dilation",e,t,n);return[r.conv1d(R("x",e,t,n),R("filter",e,t,n),s,o,a,i)]}case"Conv2D":{const s=R("strides",e,t,n),o=Bg(e,t,n),a=R("dataFormat",e,t,n).toUpperCase(),i=R("dilations",e,t,n);return[r.conv2d(R("x",e,t,n),R("filter",e,t,n),[s[1],s[2]],o,a,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:l,preluArg:c,activationFunc:f,leakyreluAlpha:h}=D3(e,t,n);return[r.fused.conv2d({x:R("x",e,t,n),filter:R("filter",e,t,n),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:l,activation:f,preluActivationWeights:c,leakyreluAlpha:h})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:l,preluArg:c,activationFunc:f,leakyreluAlpha:h}=D3(e,t,n);return[r.fused.depthwiseConv2d({x:R("x",e,t,n),filter:R("filter",e,t,n),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:l,activation:f,preluActivationWeights:c,leakyreluAlpha:h})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=R("outputShape",e,t,n),o=R("strides",e,t,n),a=Bg(e,t,n);return[r.conv2dTranspose(R("x",e,t,n),R("filter",e,t,n),s,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=R("strides",e,t,n),o=Bg(e,t,n),a=R("dilations",e,t,n),i=R("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(R("input",e,t,n),R("filter",e,t,n),[s[1],s[2]],o,i,[a[1],a[2]])]}case"Conv3D":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("dataFormat",e,t,n).toUpperCase(),i=R("dilations",e,t,n);return[r.conv3d(R("x",e,t,n),R("filter",e,t,n),[s[1],s[2],s[3]],o,a,[i[1],i[2],i[3]])]}case"AvgPool":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("kernelSize",e,t,n);return[r.avgPool(R("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPool":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("kernelSize",e,t,n);return[r.maxPool(R("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPoolWithArgmax":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("kernelSize",e,t,n),i=R("includeBatchInIndex",e,t,n),{result:l,indexes:c}=r.maxPoolWithArgmax(R("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o,i);return[l,c]}case"AvgPool3D":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("kernelSize",e,t,n);return[r.avgPool3d(R("x",e,t,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"MaxPool3D":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("kernelSize",e,t,n);return[r.maxPool3d(R("x",e,t,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"Dilation2D":{const s=R("strides",e,t,n),o=R("pad",e,t,n),a=R("dilations",e,t,n),i=s[1],l=s[2],c=a[1],f=a[2];return[r.dilation2d(R("x",e,t,n),R("filter",e,t,n),[i,l],o,[c,f],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vse=(e,t,n,r=ir)=>{switch(e.op){case"Fill":{const s=R("shape",e,t,n),o=R("dtype",e,t,n),a=R("value",e,t,n);return[r.fill(s,a,o)]}case"LinSpace":{const s=R("start",e,t,n),o=R("stop",e,t,n),a=R("num",e,t,n);return[r.linspace(s,o,a)]}case"Multinomial":{const s=R("logits",e,t,n),o=R("numSamples",e,t,n),a=R("seed",e,t,n);return[r.multinomial(s,o,a)]}case"OneHot":{const s=R("indices",e,t,n),o=R("depth",e,t,n),a=R("onValue",e,t,n),i=R("offValue",e,t,n),l=R("dtype",e,t,n);return[r.oneHot(s,o,a,i,l)]}case"Ones":return[r.ones(R("shape",e,t,n),R("dtype",e,t,n))];case"OnesLike":return[r.onesLike(R("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(R("shape",e,t,n),R("dtype",e,t,n),R("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(R("shape",e,t,n),R("minval",e,t,n),R("maxval",e,t,n),R("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(R("shape",e,t,n),R("minval",e,t,n),R("maxval",e,t,n),R("seed",e,t,n))];case"Range":{const s=R("start",e,t,n),o=R("stop",e,t,n),a=R("step",e,t,n);return[r.range(s,o,a,R("dtype",e,t,n))]}case"TruncatedNormal":{const s=R("shape",e,t,n),o=R("mean",e,t,n),a=R("stdDev",e,t,n),i=R("seed",e,t,n);return[r.truncatedNormal(s,o,a,R("dtype",e,t,n),i)]}case"Zeros":return[r.zeros(R("shape",e,t,n),R("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(R("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wx(e,t,n){const r=R("boxes",e,t,n),s=R("scores",e,t,n),o=R("maxOutputSize",e,t,n),a=R("iouThreshold",e,t,n),i=R("scoreThreshold",e,t,n),l=R("softNmsSigma",e,t,n);return{boxes:r,scores:s,maxOutputSize:o,iouThreshold:a,scoreThreshold:i,softNmsSigma:l}}const xse=async(e,t,n,r,s=ir)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:l,scoreThreshold:c,softNmsSigma:f}=wx(e,t,n),h=await s.image.nonMaxSuppressionWithScoreAsync(o,a,i,l,c,f);return[h.selectedIndices,h.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:l,scoreThreshold:c}=wx(e,t,n),f=R("padToMaxOutputSize",e,t,n),h=await s.image.nonMaxSuppressionPaddedAsync(o,a,i,l,c,f);return[h.selectedIndices,h.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:l,scoreThreshold:c}=wx(e,t,n);return[await s.image.nonMaxSuppressionAsync(o,a,i,l,c)]}case"Where":{const o=s.cast(R("condition",e,t,n),"bool"),a=[await s.whereAsync(o)];return o.dispose(),a}case"ListDiff":return s.setdiff1dAsync(R("x",e,t,n),R("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wse=(e,t,n,r=ir)=>{switch(e.op){case"LowerBound":{const s=R("sortedSequence",e,t,n),o=R("values",e,t,n);return[r.lowerBound(s,o)]}case"TopKV2":{const s=R("x",e,t,n),o=R("k",e,t,n),a=R("sorted",e,t,n),i=r.topk(s,o,a);return[i.values,i.indices]}case"UpperBound":{const s=R("sortedSequence",e,t,n),o=R("values",e,t,n);return[r.upperBound(s,o)]}case"Unique":{const s=R("x",e,t,n),o=r.unique(s);return[o.values,o.indices]}case"UniqueV2":{const s=R("x",e,t,n),o=R("axis",e,t,n),a=r.unique(s,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bse=(e,t,n,r=ir)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const s=R("default",e,t,n);return[rr(e.name,t,n)||s];case"Placeholder":return[rr(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const f=R("x",e,t,n);return[oi(f)]}case"IdentityN":return R("x",e,t,n).map(f=>oi(f));case"Snapshot":const o=R("x",e,t,n);return[oi(o)];case"Shape":return[r.tensor1d(R("x",e,t,n).shape,"int32")];case"ShapeN":return R("x",e,t,n).map(f=>r.tensor1d(f.shape));case"Size":return[r.scalar(R("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(R("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=R("x",e,t,n),i=R("data",e,t,n),l=R("message",e,t,n),c=R("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let f=0;f<i.length;f++)console.log(Array.prototype.slice.call(i[f].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Sse{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=Tt(0),this.tensorMap=new Map,Ta(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Tt(this.size(),"int32")}async import(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),bt(()=>{const s=pc(n),o=r.length,a=s.length;V(o===a,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${a} elements.`);for(let i=0;i<o;i++){const l=r[i],c=s[i];Ta(c),this.tensorMap.set(l,c)}return this.handle})}async find(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return bt(()=>{const s=[];for(let o=0;o<r.length;o++){const a=r[o],i=this.findWithDefault(a,n);s.push(i)}return bi(s)})}findWithDefault(t,n){const r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cse=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(e.name);if(s!=null)return[s];{const o=R("keyDType",e,t,n),a=R("valueDType",e,t,n),i=new Sse(o,a);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=R("tableHandle",e,t,n,r),o=R("keys",e,t,n),a=R("values",e,t,n);return[await r.getHashTableById(s.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=R("tableHandle",e,t,n,r),o=R("keys",e,t,n),a=R("defaultValue",e,t,n);return[await r.getHashTableById(s.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=R("tableHandle",e,t,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ese=(e,t,n,r=ir)=>{switch(e.op){case"ResizeBilinear":{const s=R("images",e,t,n),o=R("size",e,t,n),a=R("alignCorners",e,t,n),i=R("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(s,[o[0],o[1]],a,i)]}case"ResizeNearestNeighbor":{const s=R("images",e,t,n),o=R("size",e,t,n),a=R("alignCorners",e,t,n),i=R("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(s,[o[0],o[1]],a,i)]}case"CropAndResize":{const s=R("image",e,t,n),o=R("boxes",e,t,n),a=R("boxInd",e,t,n),i=R("cropSize",e,t,n),l=R("method",e,t,n),c=R("extrapolationValue",e,t,n);return[r.image.cropAndResize(s,o,a,i,l,c)]}case"ImageProjectiveTransformV3":{const s=R("images",e,t,n),o=R("transforms",e,t,n),a=R("outputShape",e,t,n),i=R("fillValue",e,t,n),l=R("interpolation",e,t,n),c=R("fillMode",e,t,n);return[r.image.transform(s,o,l.toLowerCase(),c.toLowerCase(),i,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nse=(e,t,n,r=ir)=>{switch(e.op){case"Equal":return[r.equal(R("a",e,t,n),R("b",e,t,n))];case"NotEqual":return[r.notEqual(R("a",e,t,n),R("b",e,t,n))];case"Greater":return[r.greater(R("a",e,t,n),R("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(R("a",e,t,n),R("b",e,t,n))];case"Less":return[r.less(R("a",e,t,n),R("b",e,t,n))];case"LessEqual":return[r.lessEqual(R("a",e,t,n),R("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(R("a",e,t,n),R("b",e,t,n))];case"LogicalNot":return[r.logicalNot(R("a",e,t,n))];case"LogicalOr":return[r.logicalOr(R("a",e,t,n),R("b",e,t,n))];case"Select":case"SelectV2":return[r.where(R("condition",e,t,n),R("a",e,t,n),R("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(R("a",e,t,n),R("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tse=(e,t,n,r=ir)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(R("a",e,t,n),R("b",e,t,n),R("transposeA",e,t,n),R("transposeB",e,t,n))];case"Einsum":return[r.einsum(R("equation",e,t,n),...R("tensors",e,t,n))];case"Transpose":return[r.transpose(R("x",e,t,n),R("perm",e,t,n))];case"_FusedMatMul":const[s,o]=R("fusedOps",e,t,n),a=s==="biasadd",i=o==="prelu",l=R("numArgs",e,t,n),c=R("leakyreluAlpha",e,t,n);if(a){if(i&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[f,h]=R("args",e,t,n);return[r.fused.matMul({a:R("a",e,t,n),b:R("b",e,t,n),transposeA:R("transposeA",e,t,n),transposeB:R("transposeB",e,t,n),bias:f,activation:o,preluActivationWeights:h,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(R("a",e,t,n),R("numLower",e,t,n),R("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kse=(e,t,n,r=ir)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(R("x",e,t,n),R("axis",e,t,n),R("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(R("x",e,t,n),R("mean",e,t,n),R("variance",e,t,n),R("offset",e,t,n),R("scale",e,t,n),R("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(R("x",e,t,n),R("mean",e,t,n),R("variance",e,t,n),R("offset",e,t,n),R("scale",e,t,n),R("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(R("x",e,t,n),R("radius",e,t,n),R("bias",e,t,n),R("alpha",e,t,n),R("beta",e,t,n))];case"Softmax":return[r.softmax(R("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(R("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se=(e,t,n,r=ir)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:o}=r.raggedGather(R("paramsNestedSplits",e,t,n),R("paramsDenseValues",e,t,n),R("indices",e,t,n),R("outputRaggedRank",e,t,n));return s.concat(o)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:o}=r.raggedRange(R("starts",e,t,n),R("limits",e,t,n),R("splits",e,t,n));return[s,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(R("shape",e,t,n),R("values",e,t,n),R("defaultValue",e,t,n),R("rowPartitionTensors",e,t,n),R("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _se=(e,t,n,r=ir)=>{switch(e.op){case"Max":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.max(R("x",e,t,n),i,l)]}case"Mean":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.mean(R("x",e,t,n),i,l)]}case"Min":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.min(R("x",e,t,n),i,l)]}case"Sum":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.sum(R("x",e,t,n),i,l)]}case"All":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.all(R("x",e,t,n),i,l)]}case"Any":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.any(R("x",e,t,n),i,l)]}case"ArgMax":{const i=R("axis",e,t,n);return[r.argMax(R("x",e,t,n),i)]}case"ArgMin":{const i=R("axis",e,t,n);return[r.argMin(R("x",e,t,n),i)]}case"Prod":{const i=R("axis",e,t,n),l=R("keepDims",e,t,n);return[r.prod(R("x",e,t,n),i,l)]}case"Cumprod":{const i=R("axis",e,t,n),l=R("exclusive",e,t,n),c=R("reverse",e,t,n);return[r.cumprod(R("x",e,t,n),i,l,c)]}case"Cumsum":{const i=R("axis",e,t,n),l=R("exclusive",e,t,n),c=R("reverse",e,t,n);return[r.cumsum(R("x",e,t,n),i,l,c)]}case"Bincount":const s=R("x",e,t,n),o=R("weights",e,t,n),a=R("size",e,t,n);return[r.bincount(s,o,a)];case"DenseBincount":{const i=R("x",e,t,n),l=R("weights",e,t,n),c=R("size",e,t,n),f=R("binaryOutput",e,t,n);return[r.denseBincount(i,l,c,f)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rse=(e,t,n,r=ir)=>{switch(e.op){case"ConcatV2":case"Concat":{const s=R("n",e,t,n),o=R("axis",e,t,n);let a=R("tensors",e,t,n);return a=a.slice(0,s),[r.concat(a,o)]}case"Gather":{const s=R("x",e,t,n),o=R("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),0)]}case"GatherV2":{const s=R("axis",e,t,n),o=R("batchDims",e,t,n),a=R("x",e,t,n),i=R("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),s,o)]}case"Reverse":{const s=R("dims",e,t,n),o=[];for(let i=0;i<s.length;i++)s[i]&&o.push(i);const a=R("x",e,t,n);return[r.reverse(a,o)]}case"ReverseV2":{const s=R("axis",e,t,n),o=R("x",e,t,n);return[r.reverse(o,s)]}case"Slice":{const s=R("begin",e,t,n),o=R("size",e,t,n);return[r.slice(R("x",e,t,n),s,o)]}case"StridedSlice":{const s=R("begin",e,t,n),o=R("end",e,t,n),a=R("strides",e,t,n),i=R("beginMask",e,t,n),l=R("endMask",e,t,n),c=R("ellipsisMask",e,t,n),f=R("newAxisMask",e,t,n),h=R("shrinkAxisMask",e,t,n),p=R("x",e,t,n);return[r.stridedSlice(p,s,o,a,i,l,c,f,h)]}case"Pack":return bt(()=>{const s=R("axis",e,t,n),o=R("tensors",e,t,n),a=o[0].shape,i=r.squeeze(o[0]).shape,l=o.map(c=>{const f=pn(c.shape,a);if(!f&&!pn(r.squeeze(c).shape,i))throw new Error("the input tensors shape does not match");return f?c:r.reshape(c,a)});return[r.stack(l,s)]});case"Unpack":{const s=R("axis",e,t,n),o=R("tensor",e,t,n);return r.unstack(o,s)}case"Tile":{const s=R("reps",e,t,n);return[r.tile(R("x",e,t,n),s)]}case"Split":case"SplitV":{const s=R("axis",e,t,n),o=R("numOrSizeSplits",e,t,n),a=R("x",e,t,n);return r.split(a,o,s)}case"ScatterNd":{const s=R("indices",e,t,n),o=R("values",e,t,n),a=R("shape",e,t,n);return[r.scatterND(s,o,a)]}case"GatherNd":{const s=R("x",e,t,n),o=R("indices",e,t,n);return[r.gatherND(s,o)]}case"SparseToDense":{const s=R("sparseIndices",e,t,n),o=R("outputShape",e,t,n),a=R("sparseValues",e,t,n),i=R("defaultValue",e,t,n);return[r.sparseToDense(s,a,o,a.dtype===i.dtype?i:r.cast(i,a.dtype))]}case"TensorScatterUpdate":{const s=R("indices",e,t,n),o=R("values",e,t,n),a=R("tensor",e,t,n);return[r.tensorScatterUpdate(a,s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ise=(e,t,n,r=ir)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:o,emptyRowIndicator:a,reverseIndexMap:i}=r.sparse.sparseFillEmptyRows(R("indices",e,t,n),R("values",e,t,n),R("denseShape",e,t,n),R("defaultValue",e,t,n));return[s,o,a,i]}case"SparseReshape":{const{outputIndices:s,outputShape:o}=r.sparse.sparseReshape(R("inputIndices",e,t,n),R("inputShape",e,t,n),R("newShape",e,t,n));return[s,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(R("data",e,t,n),R("indices",e,t,n),R("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(R("data",e,t,n),R("indices",e,t,n),R("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ose=(e,t,n,r=ir)=>{switch(e.op){case"FFT":return[r.fft(R("x",e,t,n))];case"IFFT":return[r.ifft(R("x",e,t,n))];case"RFFT":return[r.rfft(R("x",e,t,n))];case"IRFFT":return[r.irfft(R("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ase=(e,t,n,r=ir)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(R("input",e,t,n),R("pattern",e,t,n),R("rewrite",e,t,n),R("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:o}=r.string.stringNGrams(R("data",e,t,n),R("dataSplits",e,t,n),R("separator",e,t,n),R("nGramWidths",e,t,n),R("leftPad",e,t,n),R("rightPad",e,t,n),R("padWidth",e,t,n),R("preserveShortSequences",e,t,n));return[s,o]}case"StringSplit":{const{indices:s,values:o,shape:a}=r.string.stringSplit(R("input",e,t,n),R("delimiter",e,t,n),R("skipEmpty",e,t,n));return[s,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(R("input",e,t,n),R("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pse=(e,t,n,r=ir)=>{switch(e.op){case"Cast":return[r.cast(R("x",e,t,n),R("dtype",e,t,n))];case"ExpandDims":{const s=R("axis",e,t,n);return[r.expandDims(R("x",e,t,n),s)]}case"Squeeze":{const s=R("axis",e,t,n);return[r.squeeze(R("x",e,t,n),s)]}case"Reshape":return[r.reshape(R("x",e,t,n),R("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(R("x",e,t,n),R("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(R("x",e,t,n),R("padding",e,t,n),R("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(R("x",e,t,n),R("padding",e,t,n),R("constantValue",e,t,n))];case"SpaceToBatchND":{const s=R("blockShape",e,t,n),o=R("paddings",e,t,n);return[r.spaceToBatchND(R("x",e,t,n),s,o)]}case"BatchToSpaceND":{const s=R("blockShape",e,t,n),o=R("crops",e,t,n);return[r.batchToSpaceND(R("x",e,t,n),s,o)]}case"DepthToSpace":{const s=R("blockSize",e,t,n),o=R("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(R("x",e,t,n),s,o)]}case"BroadcastTo":return[r.broadcastTo(R("x",e,t,n),R("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(R("s0",e,t,n),R("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3(e,t,n,r,s=bt){const o=((a,i,l)=>{switch(a.category){case"arithmetic":return s(()=>use(a,i,l));case"basic_math":return s(()=>cse(a,i,l));case"control":return gse(a,i,l);case"convolution":return s(()=>yse(a,i,l));case"creation":return s(()=>vse(a,i,l));case"dynamic":return xse(a,i,l);case"evaluation":return s(()=>wse(a,i,l));case"image":return s(()=>Ese(a,i,l));case"graph":return s(()=>bse(a,i,l));case"logical":return s(()=>Nse(a,i,l));case"matrices":return s(()=>Tse(a,i,l));case"normalization":return s(()=>kse(a,i,l));case"ragged":return s(()=>$se(a,i,l));case"reduction":return s(()=>_se(a,i,l));case"slice_join":return s(()=>Rse(a,i,l));case"sparse":return s(()=>Ise(a,i,l));case"spectral":return s(()=>Ose(a,i,l));case"string":return s(()=>Ase(a,i,l));case"transformation":return s(()=>Pse(a,i,l));case"hash_table":return Cse(a,i,l,r);case"custom":const c=gF(a.op);if(c&&c.customExecutor)return c.customExecutor(new lse(a,i,l));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return qu(o)?o.then(a=>[].concat(a)):[].concat(o)}class L3{constructor(t={},n={},r={},s={},o){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3(e,t,n,r){const s=new Set,o=[];let a=null,i=null;const l=new Set,c=new Set(Object.keys(e).map(p=>ys(p)[0]));r=r||[];const f=new Set(r.map(p=>ys(p.name)[0])),h=[...t];for(;h.length>0;){const p=h.pop();if((ku(p)||Wse(p)||Vse(p))&&a==null&&(a=p,i=a.children.map(g=>g.name).filter(g=>s.has(g))),s.add(p.name),n[p.name]==null&&!c.has(p.name)&&!f.has(p.name)){if(p.inputs.length===0){o.push(p.name);continue}p.inputs.forEach(g=>{l.has(g.name)||(l.add(g.name),h.push(g))})}}return{inputs:e,outputs:t,usedNodes:s,missingInputs:o,dynamicNode:a,syncInputs:i}}function Dse(e,t){const{usedNodes:n,inputs:r}=t,s=Object.keys(r).map(v=>ys(v)[0]).map(v=>e.nodes[v]),o=e.initNodes||[],a=v=>n.has(typeof v=="string"?v:v.name);function i(v){return[...new Map(v.map(S=>[S.name,S])).values()]}const l=i([...s,...e.weights,...o]).filter(a),c=i([...l,...Object.values(e.nodes)]).filter(a),f=new Map(c.map(v=>[v.name,v])),h={};for(const v of c){h[v.name]=h[v.name]||0;for(const S of v.children)a(S)||(h[S.name]=Number.POSITIVE_INFINITY),h[S.name]=(h[S.name]||0)+1}const p=Object.entries(h).filter(([,v])=>v===0).map(([v])=>v),g=[...p];for(;p.length>0;){const v=p.pop(),S=f.get(v);for(const N of S.children.filter(a))--h[N.name]===0&&(g.push(N.name),p.push(N.name))}const y=g.map(v=>f.get(v)),x=Fse(y,l);return Lse(x,l),x}function Fse(e,t){const n=new Map(e.map(a=>[a.name,a])),r=t.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),i=n.get(a);for(const l of i.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return e.filter(a=>s.has(a.name))}class ig extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function Lse(e,t){const n=new Map(e.map((i,l)=>[i.name,l])),r=new Set(t.map(i=>i.name)),s=i=>r.has(typeof i=="string"?i:i.name),o=new Set(e.map(i=>i.name)),a=i=>o.has(typeof i=="string"?i:i.name);for(const i of e){for(const l of i.children.filter(a)){if(!n.has(l.name))throw new ig(`Child ${l.name} of node ${i.name} is unreachable.`);if(n.get(i.name)>n.get(l.name))throw new ig(`Node ${i.name} is scheduled to run after its child ${l.name}.`)}if(!s(i))for(const l of i.inputs){if(!n.has(l.name))throw new ig(`Input ${l.name} of node ${i.name} is unreachable.`);if(n.get(l.name)>n.get(i.name))throw new ig(`Node ${i.name} is scheduled to run before its input ${l.name}.`)}}}function Mse(e){const t=new Map(e.map((i,l)=>[i.name,l])),n=Number.MAX_SAFE_INTEGER,r=e.map((i,l)=>ku(i)?n:l),s=i=>{const l=r[t.get(i.name)];return l??-1},o=e.map((i,l)=>i.children.map(s).reduce((c,f)=>Math.max(c,f),r[l])),a=new Map;for(let i=0;i<e.length;++i){const l=o[i];if(l===n)continue;const c=e[i],f=e[l];a.has(f.name)||a.set(f.name,[]),a.get(f.name).push(c)}return a}const Bse=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),jse=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),Use=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function ku(e){return Bse.has(e.op)}function Wse(e){return jse.has(e.op)}function Vse(e){return Use.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gy{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const n=Object.keys(t).map(r=>t[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new gy(t.functions[r],this)})}getCompilationKey(t,n){const r=t.map(o=>o.name).sort(),s=n.map(o=>o.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(t,n){const r=M3(t,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:o,syncInputs:a}=r;if(o!=null)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const c=n.map(h=>h.name),f=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${f}]. Missing the following inputs: [${s}]`)}const i=Dse(this.graph,r),l=Mse(i);return{orderedNodes:i,nodeLiveUntilMap:l}}cloneAndKeepTensor(t){if(t==null)return null;const n=t.clone();return Ta(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);const r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(p=>this.graph.nodes[ys(p)[0]]),o=n.map(p=>ys(p)[0]),a=new Set(o);let i=o.map(p=>this.graph.nodes[p]);i.length===0&&(i=this._outputs);const l=this.getCompilationKey(s,i);let c=this.compiledMap.get(l);c==null&&(c=this.compile(t,i),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=de().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const f={},h={};return bt(()=>{const p=new L3(this.weightMap,f,h,this.functionExecutorMap,this.parseNodeNameCache),g=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(S=>{const[N,_]=ys(S,p),I=[];I[_]=t[S],g[N]=I,this.keepIntermediateTensors&&(this.clonedTensorsMap[N]=this.cloneTensorList(I))});const y=this.getFrozenTensorIds(g),{orderedNodes:x,nodeLiveUntilMap:v}=c;for(const S of x){if(g[S.name])continue;const N=F3(S,g,p,this._resourceManager);if(qu(N))throw new Error(`The execution of the op '${S.op}' returned a promise. Please use model.executeAsync() instead.`);g[S.name]=N,this.keepIntermediateTensors&&(this.clonedTensorsMap[S.name]=this.cloneTensorList(N)),this.checkTensorForDisposalWithNodeLiveUntilInfo(S,g,p,y,a,v.get(S.name))}return this.parent==null&&p.dispose(y),n.map(S=>rr(S,g,p))})}getFrozenTensorIds(t){const n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(t,n,r,s,o,a,i){if(!(ku(n)||a.has(t))){for(const l of r[t])l!=null&&(i[l.id]=(i[l.id]||0)+n.children.length);for(const l of n.inputs){if(ku(l))continue;const c=I3(l.name,r,s);if(c!=null)for(const f of c){if(!f||f.kept||o.has(f.id))continue;const h=i[f.id];h===1?(f.dispose(),delete i[f.id]):h!=null&&i[f.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,s,o,a){function i(l){return ku(l)||o.has(l.name)}if(!(ku(t)||a==null))for(const l of a){if(i(l))continue;const c=I3(l.name,n,r);for(const f of c)!f||f.kept||s.has(f.id)||f.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,s={},o={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=de().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}const a=new L3(this.weightMap,s,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(t,a,n,r),l=n.map(p=>rr(p,i,a)),c=l.map(p=>p.id),f=Object.keys(t).map(p=>t[p].id),h=new Set([...c,...f,...this.weightIds]);return Object.values(i).forEach(p=>{p.forEach(g=>{g&&!g.isDisposed&&!h.has(g.id)&&g.dispose()})}),this.parent==null&&a.dispose(h),l}async executeFunctionAsync(t,n,r){const s=t.reduce((o,a,i)=>(o[this.inputs[i].name]=a,o),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,s){const o=Object.keys(t),a=o.map(I=>this.graph.nodes[ys(I)[0]]),i=r.map(I=>ys(I)[0]),l=new Set(i);let c=i.map(I=>this.graph.nodes[I]);c.length===0&&(c=this._outputs);const{usedNodes:f,missingInputs:h,dynamicNode:p,syncInputs:g}=M3(t,c,this.weightMap,this._initNodes),y=[...a,...this.graph.weights,...this._initNodes||[]].map(I=>({node:I,contexts:n.currentContext})),x=Object.assign({},this.weightMap);Object.keys(t).forEach(I=>{const[A,M]=ys(I),L=[];L[M]=t[I],x[A]=L});const v={},S=this.getFrozenTensorIds(x),N={};for(;y.length>0;){const I=this.processStack(a,y,n,x,N,S,l,v,f);await Promise.all(I)}p==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const _=c.filter(I=>!ku(I)&&!rr(I.name,x,n)).map(I=>I.name);if(_.length>0){let I="";throw p!=null&&(I=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${g}]`),new Error(`Cannot compute the outputs [${_}] from the provided inputs [${o}]. Consider providing the following inputs: [${h}]. ${I}`)}return x}processStack(t,n,r,s,o,a,i,l,c){const f=[];for(;n.length>0;){const h=n.pop();r.currentContext=h.contexts;let p="";if(h.node.op==="Enter"&&R("isConstant",h.node,s,r)&&([p]=si(h.node.name,r)),s[h.node.name]==null){const g=F3(h.node,s,r,this._resourceManager);p||([p]=si(h.node.name,r));const y=r.currentContext;qu(g)?f.push(g.then(x=>(s[p]=x,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(x)),r.currentContext=y,this.checkTensorForDisposal(p,h.node,s,r,a,i,l),this.processChildNodes(h.node,n,r,s,o,c),x))):(s[p]=g,this.keepIntermediateTensors&&(this.clonedTensorsMap[p]=this.cloneTensorList(g)),this.checkTensorForDisposal(p,h.node,s,r,a,i,l),this.processChildNodes(h.node,n,r,s,o,c))}else this.processChildNodes(h.node,n,r,s,o,c)}return f}processChildNodes(t,n,r,s,o,a){t.children.forEach(i=>{const[l]=si(i.name,r);o[l]||!a.has(i.name)||(i.op==="Merge"?i.inputNames.some(c=>!!rr(c,s,r))&&(o[l]=!0,n.push({contexts:r.currentContext,node:i})):i.inputNames.every(c=>!!rr(c,s,r))&&(o[l]=!0,n.push({contexts:r.currentContext,node:i})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{const r=t[n],[s]=ys(n),o=this.graph.nodes[s];if(o.attrParams.shape&&o.attrParams.shape.value){const a=o.attrParams.shape.value,i=a.length===r.shape.length&&r.shape.every((l,c)=>a[c]===-1||a[c]===l);V(i,()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}o.attrParams.dtype&&o.attrParams.dtype.value&&V(r.dtype===o.attrParams.dtype.value,()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;const s={};for(const o in t){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[o];a!=null?s[a.name]=t[o]:s[o]=t[o]}return s}checkInputs(t){const n=Object.keys(t).filter(r=>{const[s]=ys(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,s;const o=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return o!=null?o.name:n},{})}checkOutputs(t){t.forEach(n=>{const[r]=ys(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class zse{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gse="?tfjs-format=file",Hse="model.json";class qse{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=xD){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new zse}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return qu(t)?t.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(t)}loadSync(t){const n=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,n)}async loadStreaming(t){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await hP(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,n)}loadWithWeightMap(t,n){this.artifacts=t;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const o=this.artifacts.userDefinedMetadata;o.signature!=null&&(s=o.signature),o.structuredOutputKeys!=null&&(this.structuredOutputKeys=o.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new gy(O3.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const o=O3.Instance.transformGraph(t.modelInitializer);this.initializer=new gy(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,n){if(typeof t=="string"){const r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const n=t instanceof Dn?[t]:t,r={};return n.forEach((s,o)=>r[this.structuredOutputKeys[o]]=s),r}return t}predict(t,n){const r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,n){const r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var n;if(!(t instanceof Dn)&&!Array.isArray(t)){const o=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(o!=null)for(const a in o){const i=o[a];i.resourceId!=null&&(t[a]=this.resourceIdToCapturedInput[i.resourceId])}return t}t=Array.isArray(t)?t:[t];const r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((o,a)=>{var i,l,c;const f=(c=(l=(i=this.signature)===null||i===void 0?void 0:i.inputs)===null||l===void 0?void 0:l[a])===null||c===void 0?void 0:c.resourceId;return f!=null?o[a]=this.resourceIdToCapturedInput[f]:o[a]=t[s++],o},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const o=r[s],a=n[o];this.resourceIdToCapturedInput[a.resourceId]=t[s]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=this.executor.execute(t,n);return r.length>1?r:r[0]}async executeAsync(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(t,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&dn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function B3(e,t={},n=xD){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=Kse(e));const r=new qse(e,t,n);return await r.load(),r}function Kse(e){return e.endsWith("/")||(e=e+"/"),`${e}${Hse}${Gse}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Ar=function(){return Ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Ar.apply(this,arguments)};function qo(e,t,n,r){return new(n||(n=Promise))((function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function i(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){var f;c.done?s(c.value):(f=c.value,f instanceof n?f:new n((function(h){h(f)}))).then(a,i)}l((r=r.apply(e,[])).next())}))}function Ko(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(l){return function(c){return(function(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(a=0)),a;)try{if(n=1,r&&(s=2&f[0]?r.return:f[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,f[1])).done)return s;switch(r=0,s&&(f=[2&f[0],s.value]),f[0]){case 0:case 1:s=f;break;case 4:return a.label++,{value:f[1],done:!1};case 5:a.label++,r=f[1],f=[0];continue;case 7:f=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!((s=s.length>0&&s[s.length-1])||f[0]!==6&&f[0]!==2)){a=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){a.label=f[1];break}if(f[0]===6&&a.label<s[1]){a.label=s[1],s=f;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(f);break}s[2]&&a.ops.pop(),a.trys.pop();continue}f=t.call(e,a)}catch(h){f=[6,h],r=0}finally{n=s=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}})([l,c])}}}var yy=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],bx={runtime:"mediapipe",maxHands:2,modelType:"full"},Xse=(function(){function e(t){var n,r=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new MH.Hands({locateFile:function(s,o){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+s:o+"/"+s}}),t.modelType==="lite"?n=0:n=1,this.handsSolution.setOptions({modelComplexity:n,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults((function(s){if(r.height=s.image.height,r.width=s.image.width,r.hands=[],s.multiHandLandmarks!==null)for(var o=s.multiHandedness,a=s.multiHandLandmarks,i=s.multiHandWorldLandmarks,l=0;l<o.length;l++)r.hands.push(Ar(Ar({},r.translateOutput(a[l],i[l])),{score:o[l].score,handedness:o[l].label}))}))}return e.prototype.translateOutput=function(t,n){var r=this;return{keypoints:t.map((function(s,o){return{x:s.x*r.width,y:s.y*r.height,score:s.visibility,name:yy[o]}})),keypoints3D:n.map((function(s,o){return{x:s.x,y:s.y,z:s.z,score:s.visibility,name:yy[o]}}))}},e.prototype.estimateHands=function(t,n){return qo(this,void 0,void 0,(function(){var r,s;return Ko(this,(function(o){switch(o.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),t instanceof Dn?(s=ImageData.bind,[4,tre(t)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,o.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,o.label=3;case 3:return t=r,[4,this.handsSolution.send({image:t})];case 4:return o.sent(),[2,this.hands]}}))}))},e.prototype.dispose=function(){this.handsSolution.close()},e.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.handsSolution.initialize()},e})();function Yse(e){return qo(this,void 0,void 0,(function(){var t,n;return Ko(this,(function(r){switch(r.label){case 0:return t=(function(s){if(s==null)return Ar({},bx);var o=Ar({},s);return o.runtime="mediapipe",o.maxHands==null&&(o.maxHands=bx.maxHands),o.modelType==null&&(o.modelType=bx.modelType),o})(e),[4,(n=new Xse(t)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function Sx(e){return e.width*e.height}function j3(e){var t=e.xCenter-e.width/2,n=t+e.width,r=e.yCenter-e.height/2;return{xMin:t,xMax:n,yMin:r,yMax:r+e.height,width:e.width,height:e.height}}function Qse(e,t){var n=j3(e),r=j3(t);if(!(function(a,i){return!(a.xMax<i.xMin||i.xMax<a.xMin||a.yMax<i.yMin||i.yMax<a.yMin)})(n,r))return 0;var s=Sx((function(a,i){var l=Math.max(a.xMin,i.xMin),c=Math.min(a.xMax,i.xMax),f=Math.max(a.yMin,i.yMin),h=Math.min(a.yMax,i.yMax);return{xMin:l,xMax:c,yMin:f,yMax:h,width:Math.max(c-l,0),height:Math.max(h-f,0)}})(n,r)),o=Sx(n)+Sx(r)-s;return o>0?s/o:0}function Zse(e,t,n,r){var s=e.width,o=e.height,a=1,i=Math.cos(e.rotation),l=Math.sin(e.rotation),c=e.xCenter,f=e.yCenter,h=1/t,p=1/n,g=new Array(16);return g[0]=s*i*a*h,g[1]=-o*l*h,g[2]=0,g[3]=(-.5*s*i*a+.5*o*l+c)*h,g[4]=s*l*a*p,g[5]=o*i*p,g[6]=0,g[7]=(-.5*o*i-.5*s*l*a+f)*p,g[8]=0,g[9]=0,g[10]=s*h,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,(function(y){if(y.length!==16)throw new Error("Array length must be 16 but got "+y.length);return[[y[0],y[1],y[2],y[3]],[y[4],y[5],y[6],y[7]],[y[8],y[9],y[10],y[11]],[y[12],y[13],y[14],y[15]]]})(g)}function xF(e){return e instanceof Dn?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function vy(e){return e-2*Math.PI*Math.floor((e+Math.PI)/(2*Math.PI))}function wF(e){return e instanceof Dn?e:nre(e)}function Cx(e,t){V(e.width!==0,(function(){return t+" width cannot be 0."})),V(e.height!==0,(function(){return t+" height cannot be 0."}))}function Jse(e,t){var n=(function(r,s,o,a){var i=s-r,l=a-o,c=l/i;return{scale:c,offset:o-r*c}})(0,255,t[0],t[1]);return bt((function(){return et(Oe(e,n.scale),n.offset)}))}function U3(e,t,n){var r=t.outputTensorSize,s=t.keepAspectRatio,o=t.borderMode,a=t.outputTensorFloatRange,i=xF(e),l=(function(p,g){return g?{xCenter:g.xCenter*p.width,yCenter:g.yCenter*p.height,width:g.width*p.width,height:g.height*p.height,rotation:g.rotation}:{xCenter:.5*p.width,yCenter:.5*p.height,width:p.width,height:p.height,rotation:0}})(i,n),c=(function(p,g,y){if(y===void 0&&(y=!1),!y)return{top:0,left:0,right:0,bottom:0};var x=g.height,v=g.width;Cx(g,"targetSize"),Cx(p,"roi");var S,N,_=x/v,I=p.height/p.width,A=0,M=0;return _>I?(S=p.width,N=p.width*_,M=(1-I/_)/2):(S=p.height/_,N=p.height,A=(1-_/I)/2),p.width=S,p.height=N,{top:M,left:A,right:A,bottom:M}})(l,r,s),f=Zse(l,i.width,i.height),h=bt((function(){var p=wF(e),g=Mu((function(v,S,N){return Cx(N,"inputResolution"),[1/N.width*v[0][0]*S.width,1/N.height*v[0][1]*S.width,v[0][3]*S.width,1/N.width*v[1][0]*S.height,1/N.height*v[1][1]*S.height,v[1][3]*S.height,0,0]})(f,i,r),[1,8]),y=o==="zero"?"constant":"nearest",x=p0.transform(Sa(hn(p,"float32")),g,"bilinear",y,0,[r.height,r.width]);return a!=null?Jse(x,a):x}));return{imageTensor:h,padding:c,transformationMatrix:f}}function W3(e,t,n,r){return r===1?.5*(e+t):e+(t-e)*n/(r-1)}function V3(e){return{xCenter:e.xMin+e.width/2,yCenter:e.yMin+e.height/2,width:e.width,height:e.height}}function eoe(e){var t=e.relativeKeypoints;if(t.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var n=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE;return t.forEach((function(a){n=Math.min(n,a.x),s=Math.max(s,a.x),r=Math.min(r,a.y),o=Math.max(o,a.y)})),{xCenter:(n+s)/2,yCenter:(r+o)/2,width:s-n,height:o-r}}function toe(e,t,n,r,s){var o=n==="rect"?(function(a,i,l){var c,f=a.locationData;return c=V3(f.boundingBox),c})(e):(function(a,i){var l=a.locationData;return i==="boundingbox"?V3(l.relativeBoundingBox):eoe(l)})(e,t);return s&&(o.rotation=(function(a,i,l){var c,f=a.locationData,h=l.rotationVectorStartKeypointIndex,p=l.rotationVectorEndKeypointIndex;c=l.rotationVectorTargetAngle?l.rotationVectorTargetAngle:Math.PI*l.rotationVectorTargetAngleDegree/180;var g=f.relativeKeypoints[h].x*i.width,y=f.relativeKeypoints[h].y*i.height,x=f.relativeKeypoints[p].x*i.width,v=f.relativeKeypoints[p].y*i.height;return vy(c-Math.atan2(-(v-y),x-g))})(e,r,s)),o}function noe(e){return bt((function(){var t=(function(s){return bt((function(){return[gt(s,[0,0,0],[1,-1,1]),gt(s,[0,0,1],[1,-1,-1])]}))})(e),n=t[0],r=t[1];return{boxes:nr(r),logits:nr(n)}}))}function roe(e,t,n,r){return qo(this,void 0,void 0,(function(){var s,o,a,i,l;return Ko(this,(function(c){switch(c.label){case 0:return e.sort((function(f,h){return Math.max.apply(Math,h.score)-Math.max.apply(Math,f.score)})),s=Mu(e.map((function(f){return[f.locationData.relativeBoundingBox.yMin,f.locationData.relativeBoundingBox.xMin,f.locationData.relativeBoundingBox.yMax,f.locationData.relativeBoundingBox.xMax]}))),o=gr(e.map((function(f){return f.score[0]}))),[4,p0.nonMaxSuppressionAsync(s,o,t,n)];case 1:return[4,(a=c.sent()).array()];case 2:return i=c.sent(),l=e.filter((function(f,h){return i.indexOf(h)>-1})),dn([s,o,a]),[2,l]}}))}))}function soe(e,t){return e.map((function(n){var r=Ar(Ar({},n),{x:n.x*t.width,y:n.y*t.height});return n.z!=null&&(r.z=n.z*t.width),r}))}function ooe(e,t,n){return qo(this,void 0,void 0,(function(){var r,s,o,a,i;return Ko(this,(function(l){switch(l.label){case 0:return r=e[0],s=e[1],o=(function(c,f,h){return bt((function(){var p,g,y,x;h.reverseOutputOrder?(g=nr(gt(c,[0,h.boxCoordOffset+0],[-1,1])),p=nr(gt(c,[0,h.boxCoordOffset+1],[-1,1])),x=nr(gt(c,[0,h.boxCoordOffset+2],[-1,1])),y=nr(gt(c,[0,h.boxCoordOffset+3],[-1,1]))):(p=nr(gt(c,[0,h.boxCoordOffset+0],[-1,1])),g=nr(gt(c,[0,h.boxCoordOffset+1],[-1,1])),y=nr(gt(c,[0,h.boxCoordOffset+2],[-1,1])),x=nr(gt(c,[0,h.boxCoordOffset+3],[-1,1]))),g=et(Oe(Et(g,h.xScale),f.w),f.x),p=et(Oe(Et(p,h.yScale),f.h),f.y),h.applyExponentialOnBoxSize?(y=Oe(xi(Et(y,h.hScale)),f.h),x=Oe(xi(Et(x,h.wScale)),f.w)):(y=Oe(Et(y,h.hScale),f.h),x=Oe(Et(x,h.wScale),f.h));var v=yt(p,Et(y,2)),S=yt(g,Et(x,2)),N=et(p,Et(y,2)),_=et(g,Et(x,2)),I=ar([be(v,[h.numBoxes,1]),be(S,[h.numBoxes,1]),be(N,[h.numBoxes,1]),be(_,[h.numBoxes,1])],1);if(h.numKeypoints)for(var A=0;A<h.numKeypoints;++A){var M=h.keypointCoordOffset+A*h.numValuesPerKeypoint,L=void 0,W=void 0;h.reverseOutputOrder?(L=nr(gt(c,[0,M],[-1,1])),W=nr(gt(c,[0,M+1],[-1,1]))):(W=nr(gt(c,[0,M],[-1,1])),L=nr(gt(c,[0,M+1],[-1,1])));var j=et(Oe(Et(L,h.xScale),f.w),f.x),U=et(Oe(Et(W,h.yScale),f.h),f.y);I=ar([I,be(j,[h.numBoxes,1]),be(U,[h.numBoxes,1])],1)}return I}))})(s,t,n),a=bt((function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=_P(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=Lu(c)):c})),[4,aoe(o,a,n)];case 1:return i=l.sent(),dn([o,a]),[2,i]}}))}))}function aoe(e,t,n){return qo(this,void 0,void 0,(function(){var r,s,o,a,i,l,c,f,h,p,g,y;return Ko(this,(function(x){switch(x.label){case 0:return r=[],[4,e.data()];case 1:return s=x.sent(),[4,t.data()];case 2:for(o=x.sent(),a=0;a<n.numBoxes;++a)if(!(n.minScoreThresh!=null&&o[a]<n.minScoreThresh||(i=a*n.numCoords,l=ioe(s[i+0],s[i+1],s[i+2],s[i+3],o[a],n.flipVertically,a),(c=l.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((f=l.locationData).relativeKeypoints=[],h=n.numKeypoints*n.numValuesPerKeypoint,p=0;p<h;p+=n.numValuesPerKeypoint)g=i+n.keypointCoordOffset+p,y={x:s[g+0],y:n.flipVertically?1-s[g+1]:s[g+1]},f.relativeKeypoints.push(y);r.push(l)}return[2,r]}}))}))}function ioe(e,t,n,r,s,o,a){return{score:[s],ind:a,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:r,yMax:o?1-e:n,width:r-t,height:n-e}}}}function loe(e,t){return e==="none"?t:(function(n){return 1/(1+Math.exp(-n))})(t)}function z3(e,t,n,r){return qo(this,void 0,void 0,(function(){var s,o,a,i,l,c,f,h;return Ko(this,(function(p){switch(p.label){case 0:return n=n||t.flipHorizontally||!1,r=r||t.flipVertically||!1,s=e.size,o=s/t.numLandmarks,[4,e.data()];case 1:for(a=p.sent(),i=[],l=0;l<t.numLandmarks;++l)c=l*o,(h={x:0,y:0}).x=n?t.inputImageWidth-a[c]:a[c],o>1&&(h.y=r?t.inputImageHeight-a[c+1]:a[c+1]),o>2&&(h.z=a[c+2]),o>3&&(h.score=loe(t.visibilityActivation,a[c+3])),i.push(h);for(f=0;f<i.length;++f)(h=i[f]).x=h.x/t.inputImageWidth,h.y=h.y/t.inputImageHeight,h.z=h.z/t.inputImageWidth/(t.normalizeZ||1);return[2,i]}}))}))}function G3(e,t,n){var r=e.width,s=e.height,o=e.rotation;if(n.rotation==null&&n.rotationDegree==null||(o=(function(f,h){return h.rotation!=null?f+=h.rotation:h.rotationDegree!=null&&(f+=Math.PI*h.rotationDegree/180),vy(f)})(o,n)),o===0)e.xCenter=e.xCenter+r*n.shiftX,e.yCenter=e.yCenter+s*n.shiftY;else{var a=(t.width*r*n.shiftX*Math.cos(o)-t.height*s*n.shiftY*Math.sin(o))/t.width,i=(t.width*r*n.shiftX*Math.sin(o)+t.height*s*n.shiftY*Math.cos(o))/t.height;e.xCenter=e.xCenter+a,e.yCenter=e.yCenter+i}if(n.squareLong){var l=Math.max(r*t.width,s*t.height);r=l/t.width,s=l/t.height}else if(n.squareShort){var c=Math.min(r*t.width,s*t.height);r=c/t.width,s=c/t.height}return e.width=r*n.scaleX,e.height=s*n.scaleY,e}function uoe(e,t){for(var n=(function(P,X){var ae=P[0].x*X.width,ee=P[0].y*X.height,ie=(P[4].x+P[8].x)/2,le=(P[4].y+P[8].y)/2;return ie=(ie+P[6].x)/2*X.width,le=(le+P[6].y)/2*X.height,vy(Math.PI/2-Math.atan2(-(le-ee),ie-ae))})(e,t),r=vy(-n),s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,l=0,c=e;l<c.length;l++){var f=(v=c[l]).x,h=v.y;s=Math.min(s,f),o=Math.max(o,f),a=Math.min(a,h),i=Math.max(i,h)}var p=(o+s)/2,g=(i+a)/2;s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(var y=0,x=e;y<x.length;y++){var v,S=((v=x[y]).x-p)*t.width,N=(v.y-g)*t.height,_=S*Math.cos(r)-N*Math.sin(r),I=S*Math.sin(r)+N*Math.cos(r);s=Math.min(s,_),o=Math.max(o,_),a=Math.min(a,I),i=Math.max(i,I)}var A=(o+s)/2,M=(i+a)/2,L=A*Math.cos(n)-M*Math.sin(n)+t.width*p,W=A*Math.sin(n)+M*Math.cos(n)+t.height*g,j=(o-s)/t.width,U=(i-a)/t.height;return{xCenter:L/t.width,yCenter:W/t.height,width:j,height:U,rotation:n}}var coe={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},Ex={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},Nx={flipHorizontal:!1,staticImageMode:!1},doe={applyExponentialOnBoxSize:!1,flipVertically:!1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},foe=.3,hoe={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},poe={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},moe={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},goe={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},yoe={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},voe={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},xy,xoe=(function(){function e(t,n,r){this.detectorModel=t,this.landmarkModel=n,this.maxHands=r,this.prevHandRectsFromLandmarks=null,this.anchors=(function(l){l.reduceBoxesInLowestLayer==null&&(l.reduceBoxesInLowestLayer=!1),l.interpolatedScaleAspectRatio==null&&(l.interpolatedScaleAspectRatio=1),l.fixedAnchorSize==null&&(l.fixedAnchorSize=!1);for(var c=[],f=0;f<l.numLayers;){for(var h=[],p=[],g=[],y=[],x=f;x<l.strides.length&&l.strides[x]===l.strides[f];){var v=W3(l.minScale,l.maxScale,x,l.strides.length);if(x===0&&l.reduceBoxesInLowestLayer)g.push(1),g.push(2),g.push(.5),y.push(.1),y.push(v),y.push(v);else{for(var S=0;S<l.aspectRatios.length;++S)g.push(l.aspectRatios[S]),y.push(v);if(l.interpolatedScaleAspectRatio>0){var N=x===l.strides.length-1?1:W3(l.minScale,l.maxScale,x+1,l.strides.length);y.push(Math.sqrt(v*N)),g.push(l.interpolatedScaleAspectRatio)}}x++}for(var _=0;_<g.length;++_){var I=Math.sqrt(g[_]);h.push(y[_]/I),p.push(y[_]*I)}var A=0,M=0;if(l.featureMapHeight.length>0)A=l.featureMapHeight[f],M=l.featureMapWidth[f];else{var L=l.strides[f];A=Math.ceil(l.inputSizeHeight/L),M=Math.ceil(l.inputSizeWidth/L)}for(var W=0;W<A;++W)for(var j=0;j<M;++j)for(var U=0;U<h.length;++U){var P={xCenter:(j+l.anchorOffsetX)/M,yCenter:(W+l.anchorOffsetY)/A,width:0,height:0};l.fixedAnchorSize?(P.width=1,P.height=1):(P.width=p[U],P.height=h[U]),c.push(P)}f=x}return c})(coe);var s=gr(this.anchors.map((function(l){return l.width}))),o=gr(this.anchors.map((function(l){return l.height}))),a=gr(this.anchors.map((function(l){return l.xCenter}))),i=gr(this.anchors.map((function(l){return l.yCenter})));this.anchorTensor={x:a,y:i,w:s,h:o}}return e.prototype.estimateHands=function(t,n){return qo(this,void 0,void 0,(function(){var r,s,o,a,i,l,c,f,h,p,g,y,x,v,S,N,_,I,A=this;return Ko(this,(function(M){switch(M.label){case 0:return r=(function(j){if(j==null)return Ar({},Nx);var U=Ar({},j);return U.flipHorizontal==null&&(U.flipHorizontal=Nx.flipHorizontal),U.staticImageMode==null&&(U.staticImageMode=Nx.staticImageMode),U})(n),t==null?(this.reset(),[2,[]]):(s=xF(t),o=bt((function(){var j=hn(wF(t),"float32");return r.flipHorizontal&&(j=nr(p0.flipLeftRight(Sa(j,0)),[0])),j})),a=this.prevHandRectsFromLandmarks,r.staticImageMode||a==null||a.length<this.maxHands?[4,this.detectPalm(o)]:[3,2]);case 1:return(l=M.sent()).length===0?(this.reset(),o.dispose(),[2,[]]):(c=l.map((function(j){return A.palmDetectionToRoi(j,s)})),i=c,[3,3]);case 2:i=a,M.label=3;case 3:return L=.5,W=[],[i].forEach((function(j){return j.forEach((function(U){(W=W.filter((function(P){return Qse(U,P)<=L}))).push(U)}))})),i=W,[4,Promise.all(i.map((function(j){return A.handLandmarks(j,o)})))];case 4:for(f=M.sent(),h=[],this.prevHandRectsFromLandmarks=[],p=0,g=f;p<g.length;p++)(y=g[p])!=null&&(x=y.landmarks,v=y.worldLandmarks,S=y.handScore,N=y.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(x,s)),(_=soe(x,s))!=null&&_.forEach((function(j,U){delete j.z,j.name=yy[U]})),(I=v)!=null&&I.forEach((function(j,U){j.name=yy[U]})),h.push({keypoints:_,keypoints3D:I,handedness:N,score:S}));return o.dispose(),[2,h]}var L,W}))}))},e.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),dn([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},e.prototype.detectPalm=function(t){return qo(this,void 0,void 0,(function(){var n,r,s,o,a,i,l,c,f,h;return Ko(this,(function(p){switch(p.label){case 0:return n=U3(t,moe),r=n.imageTensor,s=n.padding,o=this.detectorModel.predict(r),a=noe(o),i=a.boxes,[4,ooe([l=a.logits,i],this.anchorTensor,doe)];case 1:return(c=p.sent()).length===0?(dn([r,o,l,i]),[2,c]):[4,roe(c,this.maxHands,foe)];case 2:return f=p.sent(),h=(function(g,y){g===void 0&&(g=[]);for(var x=y.left,v=y.top,S=y.left+y.right,N=y.top+y.bottom,_=0;_<g.length;_++){var I=g[_],A=I.locationData.relativeBoundingBox,M=(A.xMin-x)/(1-S),L=(A.yMin-v)/(1-N),W=A.width/(1-S),j=A.height/(1-N);A.xMin=M,A.yMin=L,A.width=W,A.height=j,A.xMax=M+W,A.yMax=L+j;var U=I.locationData.relativeKeypoints;U&&U.forEach((function(P){var X=(P.x-x)/(1-S),ae=(P.y-v)/(1-N);P.x=X,P.y=ae}))}return g})(f,s),dn([r,o,l,i]),[2,h]}}))}))},e.prototype.palmDetectionToRoi=function(t,n){return G3(toe(t,"boundingbox","normRect",n,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),n,hoe)},e.prototype.handLandmarks=function(t,n){return qo(this,void 0,void 0,(function(){var r,s,o,a,i,l,c,f,h,p,g,y,x,v,S,N;return Ko(this,(function(_){switch(_.label){case 0:return r=U3(n,goe,t),s=r.imageTensor,o=r.padding,a=this.landmarkModel.execute(s,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),i=a[0],l=a[1],c=a[2],f=a[3],[4,l.data()];case 1:return(h=_.sent()[0])<.5?(dn(a),dn(s),[2,null]):[4,c.data()];case 2:return p=_.sent()[0],g=p>=.5?"Left":"Right",[4,z3(i,yoe)];case 3:return y=_.sent(),[4,z3(f,voe)];case 4:return x=_.sent(),v=(function(I,A){var M=A.left,L=A.top,W=A.left+A.right,j=A.top+A.bottom;return I.map((function(U){return Ar(Ar({},U),{x:(U.x-M)/(1-W),y:(U.y-L)/(1-j),z:U.z/(1-W)})}))})(y,o),S=(function(I,A,M){M===void 0&&(M={ignoreRotation:!1});for(var L=[],W=0,j=I;W<j.length;W++){var U=j[W],P=U.x-.5,X=U.y-.5,ae=M.ignoreRotation?0:A.rotation,ee=Math.cos(ae)*P-Math.sin(ae)*X,ie=Math.sin(ae)*P+Math.cos(ae)*X;ee=ee*A.width+A.xCenter,ie=ie*A.height+A.yCenter;var le=U.z*A.width,we=Ar({},U);we.x=ee,we.y=ie,we.z=le,L.push(we)}return L})(v,t),N=(function(I,A){for(var M=[],L=0,W=I;L<W.length;L++){var j=W[L],U=j.x,P=j.y,X=A.rotation,ae=Math.cos(X)*U-Math.sin(X)*P,ee=Math.sin(X)*U+Math.cos(X)*P,ie=Ar({},j);ie.x=ae,ie.y=ee,M.push(ie)}return M})(x,t),dn(a),dn(s),[2,{landmarks:S,worldLandmarks:N,handScore:h,handedness:g}]}}))}))},e.prototype.handLandmarksToRoi=function(t,n){return G3(uoe([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),n),n,poe)},e})();function woe(e){return qo(this,void 0,void 0,(function(){var t,n,r,s,o,a;return Ko(this,(function(i){switch(i.label){case 0:return t=(function(l){if(l==null)return Ar({},Ex);var c=Ar({},l);if(c.runtime="tfjs",c.maxHands==null&&(c.maxHands=Ex.maxHands),c.modelType==null&&(c.modelType=Ex.modelType),c.modelType!=="lite"&&c.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+c.modelType);return c.detectorModelUrl==null&&(c.modelType==="lite"?c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":c.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),c.landmarkModelUrl==null&&(c.modelType==="lite"?c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":c.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),c})(e),n=t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=t.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([B3(t.detectorModelUrl,{fromTFHub:n}),B3(t.landmarkModelUrl,{fromTFHub:r})])];case 1:return s=i.sent(),o=s[0],a=s[1],[2,new xoe(o,a,t.maxHands)]}}))}))}function boe(e,t){return qo(this,void 0,void 0,(function(){var n,r;return Ko(this,(function(s){if(e===xy.MediaPipeHands){if(r=void 0,(n=t)!=null){if(n.runtime==="tfjs")return[2,woe(n)];if(n.runtime==="mediapipe")return[2,Yse(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(e+" is not a supported model name.")}))}))}(function(e){e.MediaPipeHands="MediaPipeHands"})(xy||(xy={}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $u={},lg={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Soe(e,t){$u[e]=t}function Qo(e,t){if(!(e in $u)||t!=null){const r=Eoe(e,t);if(r!==null)$u[e]=r;else return console.log("Could not get context for WebGL version",e),null}const n=$u[e];return n==null||n.isContextLost()?(delete $u[e],Qo(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),$u[e])}function Coe(e){if(!de().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&e===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Eoe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t??Coe(e);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete $u[e]},!1),de().getBool("SOFTWARE_WEBGL_ENABLED")&&(lg.failIfMajorPerformanceCaveat=!1),e===1?n.getContext("webgl",lg)||n.getContext("experimental-webgl",lg):n.getContext("webgl2",lg)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ep;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(ep||(ep={}));var Bs;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(Bs||(Bs={}));var sr;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(sr||(sr={}));function Tp(e,t){return[t,e]}function Noe(e,t){return e*t}function ug(e){const t=_e(e),n=Math.ceil(t/4);return Ew(n)}function df(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Toe(e,t){const[n,r]=df(e,t);return n*r*4}function mS(e,t){const n=e;let r,s,o,a,i,l,c,f,h,p;return de().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,o=n.RGBA16F,a=n.RGBA32F,i=n.RED,c=4,f=1,h=n.HALF_FLOAT,p=n.FLOAT,l=n.RGBA8):(r=e.RGBA,s=e.RGBA,o=e.RGBA,a=n.RGBA,i=e.RGBA,c=4,f=4,h=t!=null?t.HALF_FLOAT_OES:null,p=e.FLOAT,l=e.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:f,textureTypeHalfFloat:h,textureTypeFloat:p}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Le(e,t){const n=t();return de().getBool("DEBUG")&&koe(e),n}function koe(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+Ioe(e,t))}const $oe=596e-10,_oe=65504;function Roe(e){return!!(de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||$oe<Math.abs(e)&&Math.abs(e)<_oe)}function Ioe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function cg(e,t){return Ti(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function Ooe(e,t){const n=Ti(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Le(e,()=>e.shaderSource(n,t)),Le(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Aoe(e,t){const n=Ti(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Le(e,()=>e.shaderSource(n,t)),Le(e,()=>e.compileShader(n)),de().get("ENGINE_COMPILE_ONLY"))return n;if(e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw bF(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Poe=/ERROR: [0-9]+:([0-9]+):/g;function bF(e,t){const n=Poe.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const r=+n[1],s=e.split(`
`),o=s.length.toString().length+2,a=s.map((h,p)=>bd((p+1).toString(),o)+h);let i=0;for(let h=0;h<a.length;h++)i=Math.max(a[h].length,i);const l=a.slice(0,r-1),c=a.slice(r-1,r),f=a.slice(r);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${bd(c[0],i)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join(`
`))}function Doe(e){return Ti(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function Foe(e,t){if(Le(e,()=>e.linkProgram(t)),!de().get("ENGINE_COMPILE_ONLY")&&e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Tx(e,t){if(Le(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Loe(e,t){const n=Ti(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Le(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Le(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function Moe(e,t){const n=Ti(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Le(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Le(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function Boe(e){return Ti(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function joe(e,t){const n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const r=`[${e}x${t}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){const r=`[${e}x${t}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function Uoe(e){return Ti(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function H3(e,t,n,r,s,o,a){const i=e.getAttribLocation(t,n);return i===-1?!1:(Le(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),Le(e,()=>e.vertexAttribPointer(i,s,e.FLOAT,!1,o,a)),Le(e,()=>e.enableVertexAttribArray(i)),!0)}function Woe(e,t,n){qoe(e,n),Le(e,()=>e.activeTexture(e.TEXTURE0+n)),Le(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function Voe(e,t,n){return Ti(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function zoe(e,t,n){return e.getUniformLocation(t,n)}function Goe(e,t,n,r){Le(e,()=>Woe(e,t,r)),Le(e,()=>e.uniform1i(n,r))}function kx(e,t,n){Le(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Le(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function q3(e,t){Le(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Le(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function dg(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Hoe(e,t))}function Hoe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function Ti(e,t,n){const r=Le(e,()=>t());if(r==null)throw new Error(n);return r}function qoe(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function Ld(e,t=2){return _e(e.slice(0,e.length-t))}function Md(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function fg(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Ld(e),...Md(e)]),t}function Koe(e,t=!1){let n=de().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=de().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&de().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n=n*2,r=r*2,e=e.map((i,l)=>l>=e.length-2?F2(e[l]):e[l]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Al(e).newShape);let s=_e(e),o=null;e.length<=1&&s<=n?o=[1,s]:e.length===2&&e[0]<=n&&e[1]<=n?o=e:e.length===3&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:e.length===3&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);const a=o!=null&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(o==null||a)if(t){const i=Ld(e);let l=2,c=2;e.length&&([l,c]=Md(e)),s=i*(l/2)*(c/2),o=Ew(s).map(f=>f*2)}else o=Ew(s);return o}function hg(e){return e%2===0}function wy(e,t){if(e=e.slice(-2),t=t.slice(-2),pn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e[e.length-1],r=t[t.length-1];if(n===r||hg(n)&&hg(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&hg(e[0])&&hg(t[0])}let $x,_x;function Xoe(e){if($x==null){const t=Qo(e);$x=t.getParameter(t.MAX_TEXTURE_SIZE)}return $x}function Yoe(e){if(_x==null){const t=Qo(e);_x=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,_x)}function Qoe(e){if(e===0)return 0;let t;const n=Qo(e);return vo(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:vo(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function vo(e,t){return e.getExtension(t)!=null}function K3(e){try{if(Qo(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function Zoe(e){if(e===0)return!1;const t=Qo(e);if(e===1){if(!vo(t,"OES_texture_float"))return!1}else if(!vo(t,"EXT_color_buffer_float"))return!1;return ub(t)}function Joe(e){if(e===0)return!1;const t=Qo(e);if(e===1){if(!vo(t,"OES_texture_float")||!vo(t,"WEBGL_color_buffer_float"))return!1}else{if(vo(t,"EXT_color_buffer_float"))return ub(t);const r="EXT_color_buffer_half_float";if(vo(t,r)){const s=t.getExtension(r);return eae(t,s)}return!1}return ub(t)}function ub(e){const t=mS(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(o),a}function eae(e,t){const n=mS(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(a),i}function tae(e){return e!==2?!1:Qo(e).fenceSync!=null}function kp(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&V(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const We=de();We.registerFlag("HAS_WEBGL",()=>We.getNumber("WEBGL_VERSION")>0);We.registerFlag("WEBGL_VERSION",()=>K3(2)?2:K3(1)?1:0);We.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);We.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>We.get("WEBGL_VERSION")===2);We.registerFlag("WEBGL_CPU_FORWARD",()=>!0);We.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);We.registerFlag("WEBGL_PACK",()=>We.getBool("HAS_WEBGL"));We.registerFlag("WEBGL_PACK_NORMALIZATION",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_CLIP",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_REDUCE",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_LAZILY_UNPACK",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_CONV_IM2COL",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>We.getBool("WEBGL_PACK"));We.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Xoe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Yoe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=We.getNumber("WEBGL_VERSION");return e===0?0:Qoe(e)});We.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>We.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!iP());We.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Zoe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>We.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:We.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));We.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Joe(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_FENCE_API_ENABLED",()=>tae(We.getNumber("WEBGL_VERSION")));We.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>We.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);We.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});We.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>iP()?1:-1,e=>{if(typeof e!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${e}.`);if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});We.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);We.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);We.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);We.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);We.registerFlag("WEBGL_EXP_CONV",()=>!1);We.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>We.getBool("IS_TEST"));We.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);We.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);We.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);We.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lr(){let e,t,n,r,s,o,a,i,l,c;return de().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",s="texture",o="outputColor",a="out vec4 outputColor;",i=de().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",s="texture2D",o="gl_FragColor",a="",i=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:s,output:o,defineOutput:a,defineSpecialNaN:i,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gc(e,t,n="index"){const r=or(t);return r.map((s,o)=>{const a=`int ${e[o]} = ${n} / ${s}`,i=o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * ${s}`:`index -= ${e[o]} * ${s}`;return`${a}; ${i};`}).join("")}function g0(e,t,n="index"){const r=or(t);return r.map((s,o)=>{const a=`int ${e[o]} = ${n} / outShapeStrides[${o}]`,i=o===r.length-1?`int ${e[o+1]} = ${n} - ${e[o]} * outShapeStrides[${o}]`:`index -= ${e[o]} * outShapeStrides[${o}]`;return`${a}; ${i};`}).join("")}function nae(e,t){const n=e.length,r=e.map(o=>`${t}[${o}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let o=n-3;o>=0;--o)s[o]=`(${s[o+1]} * ${r[o+1]})`;return s}function rae(e,t,n="index"){const r=e.map((o,a)=>a),s=nae(r,t);return s.map((o,a)=>{const i=`int ${e[a]} = ${n} / ${s[a]}`,l=a===s.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${s[a]}`:`index -= ${e[a]} * ${s[a]}`;return`${i}; ${l};`}).join("")}function gS(e){const t=or(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function yS(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const SF=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:CF}=wre;function sae(e,t,n){const r=[];if(e.forEach(g=>{const y=_e(g.shapeInfo.logicalShape);if(g.shapeInfo.isUniform?r.push(`uniform float ${g.name}${y>1?`[${y}]`:""};`):(r.push(`uniform sampler2D ${g.name};`),r.push(`uniform int offset${g.name};`)),n.enableShapeUniforms){const{uniformShape:x}=vS(n.packedInputs,g.shapeInfo.logicalShape,g.shapeInfo.texShape);switch(x.length){case 1:r.push(`uniform int ${g.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${g.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${g.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${g.name}Shape;`);break}r.push(`uniform ivec2 ${g.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(g=>{r.push(`uniform ${g.type} ${g.name}${g.arrayIndex?`[${g.arrayIndex}]`:""};`)});const s=r.join(`
`),o=e.map(g=>oae(g,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),a=t.texShape,i=Lr(),l=lae(i);let c,f,h=dae(i);return t.isPacked?(c=aae(t.logicalShape,a,n.enableShapeUniforms),f=cae(i)):(c=iae(t.logicalShape,a,n.enableShapeUniforms),f=uae(i)),n.packedInputs&&(h+=mae),[h,l,f,s,c,o,n.userCode].join(`
`)}function ff(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return kae(e,t);case 1:return _ae(e,t);case 2:return Iae(e,t);case 3:return Aae(e,t);case 4:return Dae(e,t);case 5:return Fae(e);case 6:return Lae(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function EF(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return Tae(e);case 1:return $ae(e,t);case 2:return Rae(e,t);case 3:return Oae(e,t);default:return Pae(e,t)}}function oae(e,t,n=!1,r){let s="";n?s+=EF(e,r):s+=ff(e,r);const o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(n?s+=Mae(e,t):s+=Bae(e,t)),s}function aae(e,t,n){switch(e.length){case 0:return NF();case 1:return gae(e,t,n);case 2:return Eae(e,t,n);case 3:return vae(e,t,n);default:return wae(e,t,n)}}function iae(e,t,n){switch(e.length){case 0:return NF();case 1:return yae(e,t,n);case 2:return Nae(e,t,n);case 3:return xae(e,t,n);case 4:return bae(e,t,n);case 5:return Sae(e,t);case 6:return Cae(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function lae(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function uae(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function cae(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function dae(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${fae}
    ${hae}
    ${pae}
  `}const fae=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,hae=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,pae=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,mae=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function NF(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function gae(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function yae(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function vae(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[2]/2),o=s*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function xae(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${g0(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const r=gc(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function wae(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],s=Math.ceil(e[e.length-1]/2),o=s*Math.ceil(e[e.length-2]/2);let a=o,i="",l="b, r, c";for(let c=2;c<e.length-1;c++)a*=e[e.length-c-1],i=`
      int b${c} = index / ${a};
      index -= b${c} * ${a};
    `+i,l=`b${c}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${i}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${e.length}(${l});
    }
  `}function bae(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${g0(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const r=gc(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function Sae(e,t){const n=gc(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function Cae(e,t){const n=gc(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function Eae(e,t,n){const r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(pn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function Nae(e,t,n){return pn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function yc(e){return`offset${e}`}function Tae(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Lr();return`
    vec4 ${n}() {
      return ${r.texture2D}(${t}, halfCR);
    }
  `}function kae(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,o]=e.shapeInfo.texShape;if(s===1&&o===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=yc(n);if(t)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});
      return sampleTexture(${n}, uv);
    }
  `;const[i,l]=e.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${i}, ${l}, ${a});
      return sampleTexture(${n}, uv);
    }
  `}function $ae(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e.shapeInfo.texShape,o=Lr();if(t)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${n}, uv);
    }
  `;const a=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${a[0]}, ${a[1]}, index);
      return ${o.texture2D}(${n}, uv);
    }
  `}function _ae(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${hf(e)}
      }
    `;const s=e.shapeInfo.texShape,o=s[0],a=s[1];if(a===1&&o===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=yc(n);return a===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${o}.0);
        return sampleTexture(${n}, uv);
      }
    `:o===1?t?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${i}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${a}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${i});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${o}, ${a}, index + ${i});
      return sampleTexture(${n}, uv);
    }
  `}function Rae(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],i=o[1],l=Lr();if(o!=null&&pn(n,o))return t?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${a}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(t)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],f=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${f}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function Iae(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(o!=null&&pn(n,o)){if(t)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const p=o[0],g=o[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${g}.0, ${p}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:a,keptDims:i}=Al(n),l=a;if(l.length<n.length){const p=pf(e,l),g=["row","col"];return`
      ${ff(p,t)}
      float ${s}(int row, int col) {
        return ${s}(${mf(g,i)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${hf(e)}
      }
    `;const c=o[0],f=o[1],h=yc(r);return f===1?t?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?t?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${h}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${h}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${f}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:t?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${h};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${h};
    vec2 uv = uvFromFlat(${c}, ${f}, index);
    return sampleTexture(${r}, uv);
  }
`}function Oae(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(n[0]===1){const p=n.slice(1),g=[1,2],y=pf(e,p),x=["b","row","col"];return`
        ${EF(y,t)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${mf(x,g)});
        }
      `}const i=Lr();if(t)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${i.texture2D}(${r}, uv);
    }
  `;const l=a[0],c=a[1],f=Math.ceil(n[2]/2),h=f*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${h}, ${f}, b, row, col);
      return ${i.texture2D}(${r}, uv);
    }
  `}function Aae(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:i,keptDims:l}=Al(n),c=i;if(c.length<n.length){const x=pf(e,c),v=["row","col","depth"];return`
        ${ff(x,t)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${mf(v,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${a}, 1)));
        ${hf(e)}
      }
    `;const f=e.shapeInfo.texShape,h=f[0],p=f[1],g=e.shapeInfo.flatOffset;if(p===o&&g==null)return t?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${a}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${h}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(p===a&&g==null)return t?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `;const y=yc(r);return t?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${y};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${a} + depth + ${y};
        vec2 uv = uvFromFlat(${h}, ${p}, index);
        return sampleTexture(${r}, uv);
      }
  `}function Pae(e,t){const n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Lr();if(t)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const o=e.shapeInfo.logicalShape,a=o.length,i=e.shapeInfo.texShape,l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=l[0],f=l[1],h=Math.ceil(o[a-1]/2);let p=h*Math.ceil(o[a-2]/2),g="int b, int row, int col",y=`b * ${p} + (row / 2) * ${h} + (col / 2)`;for(let x=2;x<a-1;x++)g=`int b${x}, `+g,p*=o[a-x-1],y=`b${x} * ${p} + `+y;return`
    vec4 ${r}(${g}) {
      int index = ${y};
      int texR = index / ${f};
      int texC = index - texR * ${f};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function Dae(e,t){const n=e.shapeInfo.logicalShape,r=e.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,i=n[1]*a,{newShape:l,keptDims:c}=Al(n);if(l.length<n.length){const N=pf(e,l),_=["row","col","depth","depth2"];return`
      ${ff(N,t)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${mf(_,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${i}, ${a}, ${o}, 1)));
        ${hf(e)}
      }
    `;const f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],g=h[1],y=`int stride2 = ${r}Shape[3];`,x=`int stride1 = ${r}Shape[2] * stride2;`,v=`int stride0 = ${r}Shape[1] * stride1;`;if(g===i&&f==null)return t?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${y}
        ${x}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${a}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(g===o&&f==null)return t?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${r}, uv);
      }
    `;const S=yc(r);return t?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${y}
      ${x}
      ${v}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${S});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${a} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${p}, ${g}, index + ${S});
      return sampleTexture(${r}, uv);
    }
  `}function Fae(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t[4],o=t[3]*s,a=t[2]*o,i=t[1]*a,{newShape:l,keptDims:c}=Al(t);if(l.length<t.length){const x=pf(e,l),v=["row","col","depth","depth2","depth3"];return`
      ${ff(x)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${mf(v,c)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${i}, ${a}, ${o}, ${s})) +
          depth3;
        ${hf(e)}
      }
    `;const f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],g=h[1];if(g===i&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${a}, ${o}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(g===s&&f==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${g}.0, ${p}.0);
        return sampleTexture(${n}, uv);
      }
    `;const y=yc(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${i} + col * ${a} + depth * ${o} +
          depth2 * ${s} + depth3 + ${y};
      vec2 uv = uvFromFlat(${p}, ${g}, index);
      return sampleTexture(${n}, uv);
    }
  `}function Lae(e){const t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:o}=Al(t);if(s.length<t.length){const v=pf(e,s),S=["row","col","depth","depth2","depth3","depth4"];return`
      ${ff(v)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${mf(S,o)});
      }
    `}const a=t[5],i=t[4]*a,l=t[3]*i,c=t[2]*l,f=t[1]*c;if(e.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${f}, ${c}, ${l}, ${i})) +
          dot(
            vec2(depth3, depth4),
            vec2(${a}, 1)));
        ${hf(e)}
      }
    `;const h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,g=p[0],y=p[1];if(y===f&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${i}, ${a})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(y===a&&h==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${y}.0, ${g}.0);
        return sampleTexture(${n}, uv);
      }
    `;const x=yc(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${f} + col * ${c} + depth * ${l} +
          depth2 * ${i} + depth3 * ${a} + depth4 + ${x};
      vec2 uv = uvFromFlat(${g}, ${y}, index);
      return sampleTexture(${n}, uv);
    }
  `}function hf(e){const t=e.name,n=_e(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function Mae(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=e.shapeInfo.logicalShape.length,a=t.logicalShape.length,i=CF(e.shapeInfo.logicalShape,t.logicalShape),l=Gt(a),c=a-o;let f;const h=["x","y","z","w","u","v"];o===0?f="":a<2&&i.length>=1?f="coords = 0;":f=i.map(N=>`coords.${h[N+c]} = 0;`).join(`
`);let p="";a<2&&o>0?p="coords":p=e.shapeInfo.logicalShape.map((N,_)=>`coords.${h[_+c]}`).join(", ");let g="return outputValue;";const x=_e(e.shapeInfo.logicalShape)===1,S=_e(t.logicalShape)===1;if(o===1&&!x&&!S)g=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(x&&!S)a===1?g=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:g=`
        return vec4(outputValue.x);
      `;else if(i.length){const N=o-2,_=o-1;i.indexOf(N)>-1&&i.indexOf(_)>-1?g="return vec4(outputValue.x);":i.indexOf(N)>-1?g="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(_)>-1&&(g="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${f}
      vec4 outputValue = get${r}(${p});
      ${g}
    }
  `}function Bae(e,t){const n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===l&&e.shapeInfo.flatOffset==null&&pn(a,o))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=Gt(l),f=CF(e.shapeInfo.logicalShape,t.logicalShape),h=l-i;let p;const g=["x","y","z","w","u","v"];i===0?p="":l<2&&f.length>=1?p="coords = 0;":p=f.map(x=>`coords.${g[x+h]} = 0;`).join(`
`);let y="";return l<2&&i>0?y="coords":y=e.shapeInfo.logicalShape.map((x,v)=>`coords.${g[v+h]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${r}(${y});
    }
  `}function Gt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function vS(e,t,n){const{newShape:r,keptDims:s}=Al(t),o=t.length,a=e&&o===3&&t[0]===1,i=a?t.slice(1):r,l=!e&&o>1&&!pn(t,n)&&r.length<o||a;return{useSqueezeShape:l,uniformShape:l?i:t,keptDims:s}}function pf(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function mf(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jae(e,t,n,r){const s=n.map((f,h)=>{const p={logicalShape:f.shape,texShape:f.isUniform?null:f.texData.texShape,isUniform:f.isUniform,isPacked:f.isUniform?!1:f.texData.isPacked,flatOffset:null};return f.texData!=null&&f.texData.slice!=null&&f.texData.slice.flatOffset>0&&(p.flatOffset=f.texData.slice.flatOffset),{name:t.variableNames[h],shapeInfo:p}}),o=s.map(f=>f.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},i=sae(s,a,t),l=Aoe(e.gl,i),c=e.createProgram(l);return de().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:i,webGLProgram:c,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(c),Object.assign({program:t,fragmentShader:l,source:i,webGLProgram:c,inShapeInfos:o,outShapeInfo:a},TF(e,t,c)))}function TF(e,t,n){const r=[],s=[];let o,a,i,l=null,c=null;c=e.getUniformLocation(n,"NAN",!1),de().getNumber("WEBGL_VERSION")===1&&(l=e.getUniformLocation(n,"INFINITY",!1));const f=!1;for(const h of t.variableNames){const p={name:h,uniform:e.getUniformLocation(n,h,f),offset:e.getUniformLocation(n,`offset${h}`,f)};t.enableShapeUniforms&&(p.shape=e.getUniformLocation(n,`${h}Shape`,f),p.texShape=e.getUniformLocation(n,`${h}TexShape`,f)),r.push(p)}if(t.enableShapeUniforms&&(o=e.getUniformLocation(n,"outShape",f),i=e.getUniformLocation(n,"outShapeStrides",f),a=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms)for(const h of t.customUniforms)s.push(e.getUniformLocation(n,h.name,f));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:i,outTexShapeLocation:a}}function X3(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,r)=>{const s=n.logicalShape,o=t[r],a=o.shape;if(!pn(s,a))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${a} must match`);if(n.isUniform&&o.isUniform)return;const i=n.texShape,l=o.isUniform?null:o.texData.texShape;if(!pn(i,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${i} and ${l} must match`)})}function Uae(e,t,n,r,s){t.program.enableShapeUniforms||(X3(t.inShapeInfos,n),X3([t.outShapeInfo],[r]));const o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),de().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:f,offset:h,shape:p,texShape:g}=t.variablesLocations[l];if(p){const{uniformShape:y}=vS(t.program.packedInputs,c.shape,c.texData.texShape);switch(y.length){case 1:e.gl.uniform1iv(p,new Int32Array(y));break;case 2:e.gl.uniform2iv(p,new Int32Array(y));break;case 3:e.gl.uniform3iv(p,new Int32Array(y));break;case 4:e.gl.uniform4iv(p,new Int32Array(y));break}}if(g&&e.gl.uniform2i(g,c.texData.texShape[0],c.texData.texShape[1]),f!=null){if(c.isUniform){if(_e(c.shape)<2)e.gl.uniform1f(f,c.uniformValues[0]);else{let y=c.uniformValues;y instanceof Float32Array||(y=new Float32Array(y)),e.gl.uniform1fv(f,y)}continue}c.texData.slice!=null&&h!=null&&e.gl.uniform1i(h,c.texData.slice.flatOffset),e.setInputMatrixTexture(c.texData.texture.texture,f,l)}}const i=t.outShapeLocation;if(i)switch(r.shape.length){case 1:e.gl.uniform1iv(i,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(i,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(i,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(i,new Int32Array(r.shape));break}if(t.outShapeStridesLocation){const l=or(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&s)for(let l=0;l<t.program.customUniforms.length;++l){const c=t.program.customUniforms[l],f=t.customUniformLocations[l],h=s[l];if(c.type==="float")e.gl.uniform1fv(f,h);else if(c.type==="vec2")e.gl.uniform2fv(f,h);else if(c.type==="vec3")e.gl.uniform3fv(f,h);else if(c.type==="vec4")e.gl.uniform4fv(f,h);else if(c.type==="int")e.gl.uniform1iv(f,h);else if(c.type==="ivec2")e.gl.uniform2iv(f,h);else if(c.type==="ivec3")e.gl.uniform3iv(f,h);else if(c.type==="ivec4")e.gl.uniform4iv(f,h);else throw Error(`uniform type ${c.type} is not supported yet.`)}e.executeProgram()}function Wae(e,t,n){let r="";t.concat(n).forEach(a=>{const i=a.texData!=null&&a.texData.slice!=null&&a.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!a.isUniform){const l=a.texData.texShape,{useSqueezeShape:c,uniformShape:f,keptDims:h}=vS(e.packedInputs,a.shape,l);let p="",g="",y="";if(f.length===1&&e.packedInputs){const A=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${A[0]>1}_${A[1]>1}`}else if(f.length===2&&!e.packedInputs)g=`${f[0]>1}_${f[1]>1}`;else if(f.length>2&&!e.packedInputs){const A=or(f);y=`${A[0]===l[1]}_${A[A.length-1]===l[1]}`}const x=a.shape.length,v=f.length===2&&pn(a.shape,l),S=_e(a.shape)===1,N=cy(a.shape,n.shape),_=!e.packedInputs&&x===n.shape.length&&pn(l,n.texData.texShape),I=e.packedInputs||f.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${x}_${_}_${c?h:""}_${f.length}_${S}_${N}_${v}_${p}_${g}_${y}_${I}_${i}`}else{const l=a.isUniform?"uniform":a.texData.texShape;r+=`${a.shape}_${l}_${i}`}});const s=e.userCode;let o=e.constructor.name;return o+="_"+r+"_"+s+`${de().getNumber("WEBGL_VERSION")}`,o}function yr(e){return de().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vae{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ep.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Lr();this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?g0(["r","c","d"],t):gc(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zae{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ep.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Lr();this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?g0(["r","c","d"],t):gc(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gae{constructor(t){this.variableNames=["A"],this.outTexUsage=Bs.DOWNLOAD;const n=Lr();this.outputShape=t,this.userCode=`
      ${SF}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hae{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Bs.DOWNLOAD;const n=Lr();this.outputShape=t,this.userCode=`
      ${SF}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qae={R:0,G:1,B:2,A:3};class Y3{constructor(t,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Lr();this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)");let a="";for(let i=0;i<r.length;i++){const l=r[i];a+=`
          if(offset == ${i}) {
            result = values[${qae[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?yS():gS(t)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${a}
        }
        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kae{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Lr();this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length);let s="",o="result";n&&(o="floor(result * 255. + 0.5)");for(let a=0;a<=1;a++)for(let i=0;i<=1;i++){const l=a*2+i;s+=`
          localCoords = coords;
          if(localCoords[2] + ${i} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${i};
          if (localCoords[1] + ${a} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${a};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?yS():gS(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${o};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xae(e){const t=Lr(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Ooe(e,n)}function Yae(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Loe(e,t)}function Qae(e){const t=new Uint16Array([0,1,2,2,1,3]);return Moe(e,t)}function $p(e,t,n,r,s,o){joe(t,n);const a=Boe(e),i=e.TEXTURE_2D;return Le(e,()=>e.bindTexture(i,a)),Le(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Le(e,()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Le(e,()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST)),Le(e,()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST)),de().getNumber("WEBGL_VERSION")===1?Le(e,()=>e.texImage2D(i,0,r,t,n,0,s,o,null)):Le(e,()=>e.texStorage2D(i,1,r,t,n)),Le(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:a,texShape:[n,t]}}function kF(e){return e.internalFormatFloat}function Zae(e,t,n,r){const[s,o]=Tp(t,n);return $p(e,s,o,kF(r),r.textureFormatFloat,e.FLOAT)}function $F(e){return e.internalFormatHalfFloat}function Jae(e,t,n,r){const[s,o]=Tp(t,n);return $p(e,s,o,$F(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function _F(e){return e.downloadTextureFormat}function eie(e,t,n,r){const[s,o]=Tp(t,n);return $p(e,s,o,_F(r),e.RGBA,e.UNSIGNED_BYTE)}function RF(e){return e.internalFormatPackedFloat}function tie(e,t,n,r){const[s,o]=df(t,n);return $p(e,s,o,RF(r),e.RGBA,e.FLOAT)}function IF(e){return e.internalFormatPackedHalfFloat}function nie(e,t,n,r){const[s,o]=df(t,n);return $p(e,s,o,IF(r),e.RGBA,r.textureTypeHalfFloat)}function rie(e,t,n){return Le(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),H3(e,t,"clipSpacePos",n,3,20,0)&&H3(e,t,"uv",n,2,20,12)}function sie(e,t,n,r,s,o){Le(e,()=>e.bindTexture(e.TEXTURE_2D,t));let a,i,l;s instanceof Uint8Array?(a=new Uint8Array(n*r*4),i=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),i=e.FLOAT,l=o.internalFormatPackedFloat),a.set(s),de().getNumber("WEBGL_VERSION")===2?Le(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,i,a)):Le(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,i,a)),Le(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function oie(e,t,n){Le(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?de().getNumber("WEBGL_VERSION")===2?Le(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Le(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):de().getNumber("WEBGL_VERSION")===2?Le(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Le(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Le(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function aie(e,t,n,r){const s=e.createBuffer();Le(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,s));const i=4*4*t*n;return Le(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)),Le(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Le(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),s}function iie(e,t,n){const r=e,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function lie(e,t,n,r){const[s,o]=Tp(t,n),a=4,i=new Uint8Array(Noe(t*n,a));return Le(e,()=>e.readPixels(0,0,s,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,i)),new Float32Array(i.buffer)}function uie(e,t,n,r,s,o,a,i){const l=e,c=new Float32Array(Toe(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function cie(e,t,n){const r=new Float32Array(t*n*4);return Le(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rx{constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=de().getNumber("WEBGL_VERSION");if(t!=null?(this.gl=t,Soe(n,t)):this.gl=Qo(n),t=this.gl,de().getNumber("WEBGL_VERSION")===2){const o=t;this.createVertexArray=()=>Le(o,()=>o.createVertexArray()),this.bindVertexArray=a=>Le(o,()=>o.bindVertexArray(a)),this.deleteVertexArray=a=>Le(o,()=>o.deleteVertexArray(a)),this.getVertexArray=()=>Le(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(t!=null){const o=t.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Le(t,()=>o.createVertexArrayOES()),this.bindVertexArray=a=>Le(t,()=>o.bindVertexArrayOES(a)),this.deleteVertexArray=a=>Le(t,()=>o.deleteVertexArrayOES(a)),this.getVertexArray=()=>Le(t,()=>t.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),de().getNumber("WEBGL_VERSION")===1){const o="OES_texture_float",a="OES_texture_half_float";if(this.textureFloatExtension=cg(this.gl,o),vo(this.gl,a))this.textureHalfFloatExtension=cg(this.gl,a);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),vo(this.gl,s))this.colorBufferHalfFloatExtension=cg(this.gl,s);else if(de().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",vo(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(vo(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=Yae(this.gl),this.indexBuffer=Qae(this.gl),this.framebuffer=Uoe(this.gl),this.textureConfig=mS(this.gl,this.textureHalfFloatExtension)}get debug(){return de().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Le(t,()=>t.finish()),Le(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Le(t,()=>t.deleteFramebuffer(this.framebuffer)),Le(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Le(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Le(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),Zae(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),Jae(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),eie(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),oie(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,r,s){this.throwIfDisposed(),sie(this.gl,t,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),nie(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),tie(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(q3(this.gl,this.framebuffer),this.outputTexture=null),Le(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,r){return this.downloadMatrixDriver(t,()=>lie(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,r,s,o,a){return uie(this.gl,t,n,r,s,o,a,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return iie(this.gl,t,n)}createBufferFromTexture(t,n,r){this.bindTextureToFrameBuffer(t);const s=aie(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,r;if(de().getBool("WEBGL_FENCE_API_ENABLED")){const s=t,o=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=()=>{const a=s.clientWaitSync(o,0,0);return a===s.ALREADY_SIGNALED||a===s.CONDITION_SATISFIED},n=o}else de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(t,n,r){return this.downloadMatrixDriver(t,()=>cie(this.gl,n,r))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=Xae(n));const r=Doe(n);Le(n,()=>n.attachShader(r,this.vertexShader)),Le(n,()=>n.attachShader(r,t)),Foe(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&Tx(n,s),s}buildVao(t){this.setProgram(t),this.bindVertexArray(t.vao);const n=this.gl;Le(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),rie(n,t,this.vertexBuffer)}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&(Le(this.gl,()=>this.gl.deleteProgram(t)),this.deleteVertexArray(t.vao))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Tx(this.gl,this.program),Le(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,r=!0){return this.throwIfDisposed(),r?Voe(this.gl,t,n):zoe(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Le(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),Goe(this.gl,t,n,r)}setOutputMatrixTexture(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)}setOutputPackedMatrixTexture(t,n,r){this.throwIfDisposed();const[s,o]=df(n,r);this.setOutputMatrixTextureDriver(t,s,o)}setOutputMatrixWriteRegion(t,n,r,s){this.setOutputMatrixWriteRegionDriver(r,t,s,n)}setOutputPackedMatrixWriteRegion(t,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&Tx(this.gl,this.program),dg(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Le(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Le(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=cg(this.gl,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,o),o}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await n3(()=>this.disposed||this.isQueryAvailable(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=die(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){if(this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in de().platform&&(r=de().platform.setTimeoutCustom.bind(de().platform)),n3(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(t){this.throwIfDisposed(),kx(this.gl,t,this.framebuffer),this.debug&&dg(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(kx(this.gl,this.outputTexture,this.framebuffer),this.debug&&dg(this.gl)):q3(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(t,n,r){this.throwIfDisposed();const s=this.gl;kx(s,t,this.framebuffer),this.debug&&dg(s),this.outputTexture=t,Le(s,()=>s.viewport(0,0,n,r)),Le(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(t,n,r,s){this.throwIfDisposed(),Le(this.gl,()=>this.gl.scissor(t,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function die(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qr(e){return(t,n,r,s,o)=>{const a=Ot(t,n),i=a.length,l=or(a),c=_e(a),f=Nl(o,c),h=t.length,p=n.length,g=or(t),y=or(n),x=cy(t,a),v=cy(n,a);if(x.length+v.length===0)for(let S=0;S<f.length;++S)f[S]=e(r[S%r.length],s[S%s.length]);else for(let S=0;S<f.length;++S){const N=L2(S,i,l),_=N.slice(-h);x.forEach(L=>_[L]=0);const I=$w(_,h,g),A=N.slice(-p);v.forEach(L=>A[L]=0);const M=$w(A,p,y);f[S]=e(r[I],s[M])}return[f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(e,t,n,r){if(r==="int32"){const s=Int32Array.from(e);return[t,"int32",s]}if(r==="bool"){const s=n0([0],n),[o,a]=Qr((i,l)=>i!==l?1:0)(t,[],e,s,"bool");return[a,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pie=Qr(((e,t)=>e+t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(e,t,n,r,s){const o=_e(r),a=Tl(s,n);for(let i=0;i<e.length;i++){const l=e[i];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(o>0?a[l]+=t[i]:a[l]+=1)}return a}function gie(e,t,n,r=!1){const s=e.shape[0],o=e.shape[1],a=mn([s,n],t.dtype);for(let i=0;i<s;i++)for(let l=0;l<o;l++){const c=e.get(i,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,i,c):t.size>0?a.set(a.get(i,c)+t.get(i,l),i,c):a.set(a.get(i,c)+1,i,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yie=Qr(((e,t)=>e&t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ki(e){return(t,n,r)=>{const s=Kn(n,t.length);for(let o=0;o<t.length;++o)s[o]=e(t[o],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vie=ki(e=>Math.ceil(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xie(e,t,n,r){const s=Kn(n,_e(t));if(r&&n!=="string"){let o=0;e.forEach(a=>{const i=_e(a.shape);s.set(a.vals,o),o+=i})}else{let o=0;e.forEach(a=>{const i=n==="string"?Fd(a.vals):a.vals;let l=0;for(let c=0;c<a.shape[0];++c){const f=c*t[1]+o;for(let h=0;h<a.shape[1];++h)s[f+h]=i[l++]}o+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wie=Qr((e,t)=>e===t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bie=ki(e=>Math.exp(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sie=ki(e=>Math.expm1(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cie=ki(e=>Math.floor(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eie=Qr((e,t)=>Math.floor(e/t));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(e,t,n,r,s,o,a,i,l){const c=mn([r,o],n);for(let f=0;f<r;f++){const h=[];let p=0;for(let g=0;g<s;g++){const y=e[f*s+g];p+=y*a[g],h.push(y)}if(p<0||p>=l/o)throw new Error(`Invalid indices: ${h} does not index into ${i}`);for(let g=0;g<o;g++)c.values[f*o+g]=t.get(...t.indexToLoc(p*o+g))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(e,t,n){const r=mn(n,e.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),i=a[0],l=a[2],c=t.locToIndex([i,l]);a[2]=t.values[c];const f=e.locToIndex(a);0<=f&&f<e.values.length&&(r.values[s]=e.values[f])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kie=Qr((e,t)=>e>t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ie=Qr((e,t)=>e>=t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ie=Qr((e,t)=>e<t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rie=Qr((e,t)=>e<=t?1:0);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iie(e,t,n){const r=(t-e)/(n-1),s=Tl(n,"float32");s[0]=e;for(let o=1;o<s.length;o++)s[o]=s[o-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oie=ki(e=>Math.log(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(e,t,n,r){const s=Nl(r,_e(n));for(let o=0;o<s.length;++o){const a=o*t;let i=e[a];for(let l=0;l<t;++l){const c=e[a+l];(Number.isNaN(c)||c>i)&&(i=c)}s[o]=i}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pie=Qr(((e,t)=>Math.max(e,t)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Die=Qr(((e,t)=>Math.min(e,t)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OF=Qr(((e,t)=>e*t));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fie(e,t,n){const r=lf(-1,n);return OF([],t,r,e,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lie=Qr(((e,t)=>e!==t?1:0));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mie(e,t,n,r,s){const o=t.length,a=_e(t),i=or(t),l=or(s),c=Nl(n,_e(s));for(let f=0;f<a;++f){const h=L2(f,o,i),p=new Array(h.length);for(let y=0;y<p.length;y++)p[y]=h[r[y]];const g=$w(p,o,l);c[g]=e[f]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(e,t,n,r){const[s,o]=Ma(e,r),a=Aa(t,"int32"),i=Tl(_e(s),a),l=_e(o);for(let c=0;c<i.length;++c){const f=c*l;let h=1;for(let p=0;p<l;++p)h*=n[f+p];i[c]=h}return{outVals:i,outShape:s,outDtype:a}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(e,t,n){e.forEach((r,s)=>{if(r<0||r>=n){const o=L2(s,t.length,or(t)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function Uie(e,t){for(let n=0;n<e.length;++n){const r=e[n],s=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function Wie(e,t,n,r){const s=[];let o=0;const a=t.length-1+n.length,i=new Array(a).fill(null).map(()=>[0]);Uie(n,r);let l=1;for(let c=0;c<t.length-1;++c){l*=t[c];const f=t[c+1];for(let h=1;h<l+1;++h)i[c].push(h*f)}for(let c=0;c<e.length;++c){let f=e[c],h=e[c]+1;for(let p=0;p<n.length;++p){const g=n[p],y=p+t.length-1;if(y>=0){const x=i[y],v=x[x.length-1]-g[f];for(let S=f;S<h;++S)i[y].push(g[S+1]+v)}f=g[f],h=g[h]}h!==f&&(s.push([f,h]),o+=h-f)}return{outSplits:i,valueSlices:s,numValues:o}}function Vie(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,s=Kn("int32",r);t.push(s),e[n].forEach((o,a)=>s[a]=o)}return t}function Q3(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function zie(e,t,n,r,s,o){const a=Q3(t,2)[1],i=Q3(o,2)[1];let l=0;for(const c of n)for(let f=c[0];f<c[1];++f){for(let h=0;h<r;++h)s[l*i+h]=e[f*a+h];++l}}function Gie(e,t,n,r,s){const o=t.slice();o[0]=s;const a=Kn(n,_e(o)),i=e.length,l=i===0?0:i/t[0];return zie(e,t,r,l,a,o),[a,o]}function Hie(e,t,n,r,s,o,a,i){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const l=t[0][0]-1;if(jie(o,a,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:f,valueSlices:h,numValues:p}=Wie(o,a,e,c),g=Vie(f),y=Gie(n,r,s,h,p);return[g,y[0],y[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z3=2147483647;function qie(e,t,n,r,s,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const i=t.length===0,l=s.length===0,c=a.length===0,f=[];i||f.push(t[0]),l||f.push(s[0]),c||f.push(a[0]);for(let v=1;v<f.length;++v)if(f[v]!==f[v-1])throw new Error("starts, limits, and deltas must have the same shape");const h=f.length===0?1:f[0],p=Kn("int32",h+1);p[0]=0;for(let v=0;v<h;++v){const S=i?e[0]:e[v],N=l?r[0]:r[v],_=c?o[0]:o[v];if(_===0)throw new Error("Requires delta != 0");let I;if(_>0&&N<S||_<0&&N>S)I=0;else if(I=Math.ceil(Math.abs((N-S)/_)),I>Z3)throw new Error(`Requires ((limit - start) / delta) <= ${Z3}`);p[v+1]=p[v]+I}const g=p[h],y=Kn(n,g);let x=0;for(let v=0;v<h;++v){const S=p[v+1]-p[v];let N=i?e[0]:e[v];const _=c?o[0]:o[v];for(let I=0;I<S;++I)y[x++]=N,N+=_}return[p,y]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var co=Vo;class by{constructor(t,n,r,s,o,a,i,l,c,f){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=DD(f),this.raggedRank=FD(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case co.VALUE_ROWIDS:return by.getMaxWidthValueRowID(n);case co.ROW_SPLITS:return by.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${co[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const o=t[s+1]-t[s];o>r&&(r=o)}return r}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let r=0,s=t[0],o=0;for(let a=1;a<n;++a){const i=t[a];i!==s&&(s=i,o=Math.max(a-r,o),r=a)}return Math.max(n-r,o)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return ek(t,r)}calculateOutputSize(t){const n=this.valuesShape,r=this.defaultValueShape;LD(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=PD(this.raggedRank,s,n);a[0]<0&&(a[0]=t);for(let i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}calculateFirstParentOutputIndex(t,n,r){const s=Math.min(t,r),o=[];let a=0;for(let i=0;i<s;++i,a+=n)o.push(a);for(let i=s;i<t;++i)o.push(-1);return V(o.length===t,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(t,n,r,s){const o=t.length,a=[];for(let i=0;i<o-1;++i){const l=t[i+1]-t[i];let c=Math.min(s,l),f=n[i];f===-1&&(c=0);for(let h=0;h<c;++h)a.push(f),f+=r;for(let h=0;h<l-c;++h)a.push(-1)}if(o>0&&a.length!==t[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(t,n,r,s){const o=t.length,a=[];if(o===0)return[];let i=0,l=t[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];a.push(c);for(let f=1;f<o;++f){const h=t[f];if(h===l)c>=0&&(++i,i<s?c+=r:c=-1);else{if(i=0,l=h,h>=n.length)throw new Error(`Got nextValueRowId=${h} which is not less than ${n.length}`);c=n[h]}a.push(c)}if(a.length!==t.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(t,n,r,s){const o=this.getRowPartitionTensor(t),a=this.getRowPartitionTypeByDimension(t);switch(a){case co.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,s);case co.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,s);default:throw new Error(`Unsupported partition type: ${co[a]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case co.FIRST_DIM_SIZE:return t[0];case co.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case co.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${co[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const o=ek(r,!1),a=Kn(this.valuesDType,_e(o));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,a,o)}return[o,a]}setOutput(t,n,r,s){if(r.length===0)return;const o=this.values,a=r;let i=s.slice();i=i.slice(t+1);const l=_e(i),c=n.length;let f=this.defaultValue;if(f.length!==l&&f.length!==1){const y=this.defaultValueShape;bt(()=>{const x=be(f,y);f=Ah(x,i).dataSync()})}let h=0,p=0,g=0;for(let y=0;y<=c;++y){let x=y<c?n[y]:-1;if(x===g){++g;continue}if(p<g){const v=o.subarray(h*l),S=a.subarray(p*l),N=(g-p)*l;J3(S,v,N)}if(y>=c){const v=r.length;x=Math.floor(v/l)}if(x>g)if(this.defaultValue.length===1)a.subarray(g*l,x*l).fill(this.defaultValue[0]),g=x;else for(;x>g;){const v=a.slice(g*l);J3(v,f,l),++g}x<0?(h=y+1,p=g):(h=y,p=g,g=p+1)}}}function J3(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function ek(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function Kie(e,t,n,r,s,o,a,i,l,c){return new by(e,t,n,r,s,o,a,i,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie(e,t,n,r){const s=e===t,o=e<t&&n<0,a=t<e&&n>1;if(s||o||a)return Tl(0,r);const i=Math.abs(Math.ceil((t-e)/n)),l=Tl(i,r);t<e&&n===1&&(n=-1),l[0]=e;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yie=ki(e=>1/Math.sqrt(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qie(e,t,n,r,s,o,a,i,l,c){const f=[r/s,s],h=e.values,p=t.values;if(r===0)return mn(n,t.dtype);const g=l instanceof Pd?l:mn(f,t.dtype);typeof l=="string"||typeof l=="number"?g.values.fill(l):typeof l=="boolean"&&g.values.fill(+l);for(let y=0;y<o;y++){const x=[];let v=0;for(let S=0;S<a;S++){const N=h[y*a+S];x.push(N),v+=N*i[S]}if(v<0||v>=r/s)throw new Error(`Invalid indices: ${x} does not index into ${n}`);for(let S=0;S<s;S++)c?g.values[v*s+S]+=p[y*s+S]:g.values[v*s+S]=t.rank===0?p[0]:p[y*s+S]}return g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zie=ki(e=>1/(1+Math.exp(-e)));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jie(e,t,n,r,s){const o=lS(r,t,n),a=_e(n),i=or(r);if(o){const h=uS(t,i);return s==="string"?e.slice(h,h+a):e.subarray(h,h+a)}const l=s==="string"?Fd(e):e,c=mn(r,s,l),f=mn(n,s);for(let h=0;h<f.size;++h){const p=f.indexToLoc(h),g=p.map((y,x)=>y+t[x]);f.set(c.get(...g),...p)}return s==="string"?mF(f.values):f.values}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ele(e,t,n,r,s,o,a){const i=t[0],l=o[0],c=new Array(l),f=new Array(i),h=t[1];if(l===0){if(i!==0)throw new Error(tF(i));const v=Kn(n,0),S=Kn(s,0);return[v,[0,h],S,c,f]}let p=!0,g=0;const y=new Array(l).fill(0);for(let v=0;v<i;++v){const S=e[v*h];if(S<0)throw new Error(nF(v,S));if(S>=l)throw new Error(rF(v,S,l));++y[S],p=p&&S>=g,g=S}let x=!0;for(let v=0;v<l;++v){const S=y[v]===0;c[v]=S,x=x&&!S,y[v]=Math.max(y[v],1),v>0&&(y[v]+=y[v-1])}if(x&&p){const v=e,S=r;for(let N=0;N<i;++N)f[N]=N;return[v,[i,h],S,c,f]}else{const v=y[l-1],S=Kn(n,v*h),N=Kn(s,v),_=new Array(l).fill(0);for(let I=0;I<i;++I){const A=e[I*h],M=_[A],L=(A===0?0:y[A-1])+M;_[A]++;for(let W=0;W<h;++W)S[L*h+W]=e[I*h+W];N[L]=r[I],f[I]=L}for(let I=0;I<l;++I)if(_[I]===0){const M=I===0?0:y[I-1];S[M*h+0]=I;for(let L=1;L<h;++L)S[M*h+L]=0;N[M]=a}return[S,[v,h],N,c,f]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tle(e,t,n,r,s){const o=_e(r),a=t[0],i=s.length,l=[];let c=1,f=-1;for(let v=0;v<i;++v){const S=s[v];if(S===-1){if(f!==-1)throw new Error(sF(f,v));f=v,l.push(1)}else{if(S<0)throw new Error(oF(v,S));c*=S,l.push(S)}}if(f!==-1){if(c<=0)throw new Error(aF());const v=Math.trunc(o/c);if(c*v!==o)throw new Error(iF(r,l));l[f]=v}if(_e(l)!==o)throw new Error(lF(r,l));const p=r.length,g=[];if(p>0){g[p-1]=1;for(let v=p-2;v>=0;--v)g[v]=g[v+1]*r[v+1]}const y=[];if(i>0){y[i-1]=1;for(let v=i-2;v>=0;--v)y[v]=y[v+1]*l[v+1]}const x=Kn(n,a*i);for(let v=0;v<a;++v){let S=0;for(let N=0;N<p;++N)S+=e[v*p+N]*g[N];for(let N=0;N<i;++N)x[v*i+N]=Math.trunc(S/y[N]),S%=y[N]}return[x,[a,i],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nle(e,t,n,r,s,o=!1,a=0){const i=r.length,l=[t[0],e.length/t[0]],c=l[1],h=i>0?s[i-1]+1:0;if(h<0)throw new Error(Qw());const p=t.slice();p[0]=h;const g=p.reduce((_,I)=>_*I,1),y=Kn(n,g);if(i===0)return h>0&&y.fill(a),[y,p];if(h<=0)throw new Error(Qw());let x=0,v=1,S=0,N=s[x];for(;;){let _=0;if(v<i){if(_=s[v],N===_){++v;continue}if(N>=_)throw new Error(uF())}if(N<0||N>=h)throw new Error(cF(N,h));N>S&&y.fill(a,S*c,N*c);for(let I=x;I<v;++I){const A=r[I];if(A<0||A>=l[0])throw new Error(dF(I,r[I],l[0]));for(let M=0;M<c;M++)y[N*c+M]+=e[A*c+M]}if(o)for(let I=0;I<c;I++)y[N*c+I]/=v-x;if(x=v,++v,S=N+1,N=_,v>i)break}return S<h&&y.fill(a,S*c,h*c),[y,p]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rle=ki(e=>Math.sqrt(e));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sle=Qr(((e,t)=>{const n=e-t;return n*n}));/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ole=ki((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=t;return e.replace(new RegExp(n,r?"g":""),s)});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(e,t,n,r){const s=mn(e,t.dtype);for(let o=0;o<s.size;o++){const a=s.indexToLoc(o),i=new Array(a.length);for(let l=0;l<i.length;l++)i[l]=a[l]*n[l]+r[l];s.set(t.get(...i),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ile{constructor(t,n,r,s,o,a){this.separator=Fu(t),this.nGramWidths=n,this.leftPad=Fu(r),this.rightPad=Fu(s),this.padWidth=o,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,s,o,a){for(let i=0;i<o;++i){const l=this.getPadWidth(a),c=Math.max(0,l-i),f=Math.max(0,l-(o-(i+1))),h=a-(c+f),p=n+(c>0?0:i-l);let g=0;g+=c*this.leftPad.length;for(let N=0;N<h;++N)g+=t[p+N].length;g+=f*this.rightPad.length;const y=c+f+h-1;g+=y*this.separator.length,r[s+i]=new Uint8Array(g);const x=r[s+i];let v=0;const S=N=>N.forEach(_=>x[v++]=_);for(let N=0;N<c;++N)S(this.leftPad),S(this.separator);for(let N=0;N<h-1;++N)S(t[p+N]),S(this.separator);if(h>0){S(t[p+h-1]);for(let N=0;N<f;++N)S(this.separator),S(this.rightPad)}else{for(let N=0;N<f-1;++N)S(this.rightPad),S(this.separator);S(this.rightPad)}}}compute(t,n){const r=t.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let f=n[c]>=l;if(f=f&&n[c]<=r,!f)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const o=s-1,a=Kn("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=o;++c)a[c]=0;return[l,a]}a[0]=0;for(let l=1;l<=o;++l){const c=n[l]-n[l-1];let f=0;this.nGramWidths.forEach(h=>{f+=this.getNumNGrams(c,h)}),this.preserveShort&&c>0&&f===0&&(f=1),a[l]=a[l-1]+f}const i=new Array(a[o]);for(let l=0;l<o;++l){const c=n[l];let f=a[l];if(this.nGramWidths.forEach(h=>{const p=n[l+1]-n[l],g=this.getNumNGrams(p,h);this.createNGrams(t,c,i,f,g,h),f+=g}),this.preserveShort&&f===a[l]){const h=n[l+1]-n[l];if(h===0)continue;const p=h+2*this.padWidth;this.createNGrams(t,c,i,f,1,p)}}return[i,a]}}function lle(e,t,n,r,s,o,a,i){return new ile(n,r,s,o,a,i).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ule(e,t,n,r){if(!e.length)return;if(t.length===0){for(let o=0;o<e.length;++o)r.push(e.subarray(o,o+1));return}if(t.length===1){const o=t[0];let a=e.indexOf(o);for(;a!==-1;){const i=e.subarray(0,a);(!n||i.length!==0)&&r.push(i),e=e.subarray(a+1),a=e.indexOf(o)}(!n||e.length!==0)&&r.push(e);return}let s=0;for(let o=0;o<e.length+1;o++)if(o===e.length||t.indexOf(e[o])!==-1){const a=e.subarray(s,o);(!n||a.length!==0)&&r.push(a),s=o+1}}function cle(e,t,n){const r=e.length,s=[];let o=0,a=0;const i=new Array(r);for(let p=0;p<r;++p){const g=s.length;ule(e[p],t,n,s);const y=s.length-g;i[p]=y,o+=y,a=Math.max(a,y)}const l=Kn("int32",o*2),c=new Array(o),f=[r,a];let h=0;for(let p=0;p<r;++p)for(let g=0;g<i[p];++g)l[h*2]=p,l[h*2+1]=g,c[h]=s[h],++h;return[l,c,f]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dle(e,t){const n=Kn("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Sq(e[r]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fle=Qr(((e,t)=>e-t));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hle(e,t){const n=new Array(e.rank);for(let s=0;s<n.length;s++)n[s]=e.shape[s]*t[s];const r=mn(n,e.dtype);for(let s=0;s<r.values.length;++s){const o=r.indexToLoc(s),a=new Array(e.rank);for(let l=0;l<a.length;l++)a[l]=o[l]%e.shape[l];const i=e.locToIndex(a);r.values[s]=e.values[i]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Th=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function AF(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,l=t-n+1,c=Math.log(i),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(i-f)/i)*Math.sign(l-i/2),p=Math.max(n,Math.floor(t-l*f/i+h)),g=Math.min(r,Math.floor(t+(i-l)*f/i+h));AF(e,t,p,g)}const s=e[t];let o=n,a=r;for(gh(e,n,t),Th(e[r],s)>0&&gh(e,n,r);o<a;){for(gh(e,o,a),o++,a--;Th(e[o],s)<0;)o=o+1;for(;Th(e[a],s)>0;)a=a-1}Th(e[n],s)===0?gh(e,n,a):(a=a+1,gh(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function ple(e,t,n,r,s){const o=t[t.length-1],[a,i]=[e.length/o,o],l=Nl(n,a*r),c=Nl("int32",a*r);for(let h=0;h<a;h++){const p=h*i,g=e.subarray(p,p+i);let y=new Array(g.length);g.forEach((N,_)=>y[_]={value:N,index:_}),r<y.length&&(AF(y,r),y=y.slice(0,r)),s&&y.sort(Th);const x=h*r,v=l.subarray(x,x+r),S=c.subarray(x,x+r);for(let N=0;N<r;N++)v[N]=y[N].value,S[N]=y[N].index}const f=t.slice();return f[f.length-1]=r,[mn(f,n,l),mn(f,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mle(e,t,n,r){const s=Xn(t,n)[0],o=[1,n[0],1];for(let y=0;y<s;y++)o[0]*=n[y];o[1]=n[s];for(let y=s+1;y<n.length;y++)o[2]*=n[y];const a=new Map,i=new Int32Array(n[s]),l=new Pd(o,r,e),c=[],f=o[0]===1&&o[2]===1;for(let y=0;y<n[s];y++){let x;if(f)x=e[y].toString();else{const S=[];for(let N=0;N<o[0];N++)for(let _=0;_<o[2];_++)S.push(l.get(N,y,_));x=S.join(",")}const v=a.get(x);if(v!=null)i[y]=v;else{const S=a.size;a.set(x,S),i[y]=S,c.push(y)}}const h=o.slice();h[1]=a.size;const p=new Pd(h,r);c.forEach((y,x)=>{for(let v=0;v<o[0];v++)for(let S=0;S<o[2];S++)p.set(l.get(v,y,S),v,x,S)});const g=n.slice();return g[s]=h[1],{outputValues:p.values,outputShape:g,indices:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gle=Object.freeze(Object.defineProperty({__proto__:null,addImpl:pie,bincountImpl:mie,bincountReduceImpl:gie,bitwiseAndImpl:yie,castImpl:hie,ceilImpl:vie,concatImpl:xie,equalImpl:wie,expImpl:bie,expm1Impl:Sie,floorDivImpl:Eie,floorImpl:Cie,gatherNdImpl:Nie,gatherV2Impl:Tie,greaterEqualImpl:$ie,greaterImpl:kie,lessEqualImpl:Rie,lessImpl:_ie,linSpaceImpl:Iie,logImpl:Oie,maxImpl:Aie,maximumImpl:Pie,minimumImpl:Die,multiplyImpl:OF,negImpl:Fie,notEqualImpl:Lie,prodImpl:Bie,raggedGatherImpl:Hie,raggedRangeImpl:qie,raggedTensorToTensorImpl:Kie,rangeImpl:Xie,rsqrtImpl:Yie,scatterImpl:Qie,sigmoidImpl:Zie,simpleAbsImpl:fie,sliceImpl:Jie,sparseFillEmptyRowsImpl:ele,sparseReshapeImpl:tle,sparseSegmentReductionImpl:nle,sqrtImpl:rle,squaredDifferenceImpl:sle,staticRegexReplaceImpl:ole,stridedSliceImpl:ale,stringNGramsImpl:lle,stringSplitImpl:cle,stringToHashBucketFastImpl:dle,subImpl:fle,tileImpl:hle,topKImpl:ple,transposeImpl:Mie,uniqueImpl:mle},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:yle,bincountImpl:PF,bincountReduceImpl:vle,bitwiseAndImpl:xle,castImpl:wle,ceilImpl:ble,concatImpl:Sle,equalImpl:Cle,expImpl:Ele,expm1Impl:Nle,floorImpl:Tle,gatherNdImpl:kle,gatherV2Impl:$le,greaterImpl:_le,greaterEqualImpl:Rle,lessImpl:Ile,lessEqualImpl:Ole,linSpaceImpl:Ale,logImpl:Ple,maxImpl:Dle,maximumImpl:Fle,minimumImpl:Lle,multiplyImpl:Mle,negImpl:Ble,notEqualImpl:jle,prodImpl:Ule,raggedGatherImpl:Wle,raggedRangeImpl:Vle,raggedTensorToTensorImpl:zle,rangeImpl:Gle,rsqrtImpl:Hle,scatterImpl:qle,sigmoidImpl:Kle,simpleAbsImpl:DF,sliceImpl:Xle,sparseFillEmptyRowsImpl:Yle,sparseReshapeImpl:Qle,sparseSegmentReductionImpl:FF,sqrtImpl:Zle,staticRegexReplaceImpl:Jle,stridedSliceImpl:eue,stringNGramsImpl:tue,stringSplitImpl:nue,stringToHashBucketFastImpl:rue,subImpl:sue,tileImpl:oue,topKImpl:aue,transposeImpl:xS,uniqueImpl:iue}=gle;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LF(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Pr(e,t){return t===1?[e]:LF(e,t)}function lue(e,t){if(e===1)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uue{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=yr(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Pr("rc",this.rank),r=Gt(this.rank),s=this.getOutOfBoundsCondition(n),o=this.getSetup(n),a=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${a}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let o=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let a=2;a<this.rank;a++)o=`${t[t.length-1-a]},`+o;n.push(o)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${t[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MF{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length);let r="";for(let s=0;s<4;s++){let o="thisRC = rc;";s%2===1&&(o+="thisRC.z += 1;"),s>1&&(o+="thisRC.y += 1;"),r+=`
        ${o}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${cue(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?yS():gS(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${r}

        setOutput(result);
      }
    `}}function cue(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?rae(["r","c","d"],"inputShape"):gc(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class due{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(t,n,r){const s=nk(n,r),o=rk(t,s,r);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);const a=tk(t,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();const l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let i;return s===sr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):s===sr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):s===sr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):s===sr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):s===sr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(i),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),i}releaseTexture(t,n,r,s){if(this.freeTextures==null)return;const o=nk(r,s),a=rk(n,o,s);a in this.freeTextures||(this.freeTextures[a]=[]);const i=tk(n,o,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=de().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=i):(this.freeTextures[a].push(t),this.numFreeTextures++,this._numBytesFree+=i),this.numUsedTextures--;const c=this.usedTextures[a],f=c&&c.indexOf(t);if(f==null||f<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[f]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function fue(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function tk(e,t,n,r,s){const o=hue(t,r);let a;if(s){const[l,c]=df(e[0],e[1]);a=l*c}else{const[l,c]=Tp(e[0],e[1]);a=l*c}const i=fue(n,o);return a*i}function hue(e,t){switch(e){case sr.PACKED_2X2_FLOAT32:return RF(t);case sr.PACKED_2X2_FLOAT16:return IF(t);case sr.UNPACKED_FLOAT32:return kF(t);case sr.UNPACKED_FLOAT16:return $F(t);case sr.PACKED_4X1_UNSIGNED_BYTE:return _F(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function pue(e){return de().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?sr.PACKED_2X2_FLOAT32:sr.UNPACKED_FLOAT32:e?sr.PACKED_2X2_FLOAT16:sr.UNPACKED_FLOAT16}function nk(e,t){if(e===Bs.UPLOAD)return sr.PACKED_2X2_FLOAT32;if(e===Bs.RENDER||e==null)return pue(t);if(e===Bs.DOWNLOAD||e===Bs.PIXELS)return sr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function rk(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ka{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const To="if (isnan(x)) return x;",mue="return x;",sk="return abs(x);",gue="return (x >= 0.0) ? x : (exp(x) - 1.0);",yue=To+`
  return (x < 0.0) ? 0.0 : x;
`,vue=To+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,il="return x;",xue="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wue="return x;",bue=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Sue=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Cue=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Eue="return 1.0 / (1.0 + exp(-1.0 * x));";class fl{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nue{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length);const n=t.length,r=Pr("rc",n),s=Gt(n),o=lue(n,r),a=r.slice(-2),i=n<=1?"rc":`vec2(${a.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${i}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tue=oD,kue=1e-7,$ue=1e-4,pg={};function _ue(e){return e in pg||(pg[e]={}),pg[e]}const Rue=de().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Iue=600;function Oue(){return de().global.screen==null?1024:de().global.screen.height*de().global.screen.width*window.devicePixelRatio*Iue/1024/1024}class y0 extends eI{nextDataId(){return y0.nextDataId++}constructor(t){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!de().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof Rx)n=t;else{const r=Qo(de().getNumber("WEBGL_VERSION"),t);n=new Rx(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=Qo(de().getNumber("WEBGL_VERSION"));n=new Rx(r),this.binaryCache=_ue(de().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new due(this.gpgpu),this.numMBBeforeWarning=Oue(),this.texData=new UH(this,rl())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(t,n,r,s,o,a){const i=this.makeTensorInfo(n,r),l=this.texData.get(i.dataId);l.isPacked=!1,l.texture={texture:t,texShape:[s,o]},l.texShape=[s,o];const c=fg(n),f=new Y3(c,!1,a),h=this.runWebGLProgram(f,[i],r,[[s,o]]);return h.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(i),h.dataId}write(t,n,r){if((de().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||de().getBool("DEBUG"))&&this.checkNumericalProblems(t),r==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:t,usage:Bs.UPLOAD,refCount:1}),s}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,r,s,o){if(de().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:r,dtype:s,values:n,usage:Bs.UPLOAD,refCount:o})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:r,dtype:s,complexTensorInfos:o,slice:a,shape:i,isPacked:l}=n;if(a!=null){let p;l?p=new fl(i,il):p=new ka(i,il);const g=this.runWebGLProgram(p,[{dataId:t,shape:i,dtype:s}],s),y=this.readSync(g.dataId);return this.disposeIntermediateTensorInfo(g),y}if(r!=null)return this.convertAndCacheOnCPU(t);if(s==="string")return r;const c=this.activeTimers!=null;let f;c&&(f=Uo());let h;if(s==="complex64"){const p=this.readSync(o.real.dataId),g=this.readSync(o.imag.dataId);h=Yw(p,g)}else h=this.getValuesFromTexture(t);return c&&(this.downloadWaitMs+=Uo()-f),this.convertAndCacheOnCPU(t,h)}async read(t){if(this.pendingRead.has(t)){const y=this.pendingRead.get(t);return new Promise(x=>y.push(x))}const n=this.texData.get(t),{values:r,shape:s,slice:o,dtype:a,complexTensorInfos:i,isPacked:l}=n;if(o!=null){let y;l?y=new fl(s,il):y=new ka(s,il);const x=this.runWebGLProgram(y,[{dataId:t,shape:s,dtype:a}],a),v=this.read(x.dataId);return this.disposeIntermediateTensorInfo(x),v}if(r!=null)return this.convertAndCacheOnCPU(t);if(de().getBool("DEBUG")&&!de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&de().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,f;if(a!=="complex64"&&de().get("WEBGL_BUFFER_SUPPORTED")){f=this.decode(t);const y=this.texData.get(f.dataId);c=this.gpgpu.createBufferFromTexture(y.texture.texture,...ug(s))}this.pendingRead.set(t,[]),a!=="complex64"&&await this.gpgpu.createAndWaitForFence();let h;if(a==="complex64"){const y=await Promise.all([this.read(i.real.dataId),this.read(i.imag.dataId)]),x=y[0],v=y[1];h=Yw(x,v)}else if(c==null)h=this.getValuesFromTexture(t);else{const y=_e(s);h=this.gpgpu.downloadFloat32MatrixFromBuffer(c,y)}if(f!=null&&this.disposeIntermediateTensorInfo(f),c!=null){const y=this.gpgpu.gl;Le(y,()=>y.deleteBuffer(c))}const p=this.convertAndCacheOnCPU(t,h),g=this.pendingRead.get(t);return this.pendingRead.delete(t),g.forEach(y=>y(p)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&rl().removeDataId(t,this),this.pendingDeletes--),p}readToGPU(t,n={}){const r=this.texData.get(t),{values:s,shape:o,slice:a,dtype:i,isPacked:l,texture:c}=r;if(i==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let g;l?g=new fl(o,il):g=new ka(o,il);const y=this.runWebGLProgram(g,[{dataId:t,shape:o,dtype:i}],i),x=this.readToGPU(y,n);return this.disposeIntermediateTensorInfo(y),x}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const f=this.decode(t,n.customTexShape),h=rl().makeTensorFromTensorInfo(f),p=this.texData.get(f.dataId);return Object.assign({tensorRef:h},p.texture)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(s=>Ad(s));return mn(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return mn(t.shape,t.dtype,n)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const r=t[n];if(!Roe(r))throw de().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:r,isPacked:s}=this.texData.get(t),o=_e(n);if(de().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const p=this.decode(t),g=this.texData.get(p.dataId),y=this.gpgpu.downloadMatrixFromPackedTexture(g.texture.texture,...ug(n)).subarray(0,o);return this.disposeIntermediateTensorInfo(p),y}const a=de().getBool("WEBGL_PACK")&&s===!0,i=a?fg(n):n,l=a?new Hae(i):new Gae(i),c=this.runWebGLProgram(l,[{shape:i,dtype:r,dataId:t}],"float32"),f=this.texData.get(c.dataId),h=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,o);return this.disposeIntermediateTensorInfo(c),h}timerAvailable(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,t();const o=Ku(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),a=Ku(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const i={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(o);i.kernelMs=WH(l),i.getExtraProfileInfo=()=>l.map((c,f)=>({name:a[f],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else i.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,i})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Uo(),endMs:null}}endTimer(t){return de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Uo(),t)}async getQueryTime(t){if(de().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:r}=this.texData.get(t);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:r,texShape:s,usage:o,isPacked:a,slice:i}=this.texData.get(t),l=i&&i.origDataId||t,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,o,a)));const f=this.texData.get(t);f.texture=null,f.texShape=null,f.isPacked=!1,f.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=Rue){return de().getBool("WEBGL_CPU_FORWARD")&&t.every(r=>this.texData.get(r.dataId).texture==null&&_e(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){zo("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return Tue(t.shape,n)}packedUnaryOp(t,n,r){const s=new fl(t.shape,n),o=this.compileAndRun(s,[t],r);return rl().makeTensorFromTensorInfo(o)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const s=DF(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,s)}if(de().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,sk,t.dtype);const n=new ka(t.shape,sk),r=this.compileAndRun(n,[t]);return rl().makeTensorFromTensorInfo(r)}makeTensorInfo(t,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&e0(r[0])){const o=r.map(a=>Fu(a));s=this.write(o,t,n)}else s=this.write(r,t,n);return this.texData.get(s).usage=null,{dataId:s,shape:t,dtype:n}}makeOutput(t,n,r){return rl().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,r),this)}unpackTensor(t){const n=new Nue(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new uue(t.shape);return this.runWebGLProgram(n,[t],t.dtype,null,!0)}packedReshape(t,n){const r=[Ld(t.shape),...Md(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},o=[Ld(n),...Md(n)],a=new MF(o,r),i=!0,l=[r],c=this.runWebGLProgram(a,[s],t.dtype,l,i);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(t,n){const r=this.texData.get(t),{isPacked:s,shape:o,dtype:a}=r;if(n!=null){const p=_e(o),g=n[0]*n[1]*4;V(p<=g,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const i=fg(o);let l;s?l=new zae(i):l=new Vae(i);const c=!0,f=[n??ug(i)],h=this.runWebGLProgram(l,[{shape:i,dtype:a,dataId:t}],a,f,c,n);return{dtype:a,shape:o,dataId:h.dataId}}runWebGLProgram(t,n,r,s,o=!1,a){const i=this.makeTensorInfo(t.outputShape,r),l=this.texData.get(i.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===ep.DENSE){const S=a??ug(t.outputShape);l.texShape=S.map(N=>N*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),_e(i.shape)===0)return l.values=Nl(i.dtype,0),i;const c=[],f=n.map(S=>{if(S.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let N=this.texData.get(S.dataId);if(N.texture==null){if(!t.packedInputs&&_e(S.shape)<=de().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:S.shape,texData:null,isUniform:!0,uniformValues:N.values};t.packedInputs&&(N.isPacked=!0,N.shape=S.shape)}if(this.uploadToGPU(S.dataId),!!N.isPacked!=!!t.packedInputs)S=N.isPacked?this.unpackTensor(S):this.packTensor(S),c.push(S),N=this.texData.get(S.dataId);else if(N.isPacked&&!wy(N.shape,S.shape)){const _=S,I=S.shape;S.shape=N.shape,S=this.packedReshape(S,I),c.push(S),N=this.texData.get(S.dataId),_.shape=I}return{shape:S.shape,texData:N,isUniform:!1}});this.uploadToGPU(i.dataId);const h={shape:i.shape,texData:l,isUniform:!1},p=Wae(t,f,h),g=this.getAndSaveBinary(p,()=>jae(this.gpgpu,t,f,h)),y=this.activeTimers!=null;let x;y&&(x=this.startTimer()),de().get("ENGINE_COMPILE_ONLY")||Uae(this.gpgpu,g,f,h,s),c.forEach(S=>this.disposeIntermediateTensorInfo(S)),y&&(x=this.endTimer(x),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(x)}));const v=de().getNumber("WEBGL_FLUSH_THRESHOLD");if(v>0){const S=Uo();S-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=S)}if(!de().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&o===!1){const S=this.unpackTensor(i);return this.disposeIntermediateTensorInfo(i),S}return i}compileAndRun(t,n,r,s,o=!1){return r=r||n[0].dtype,this.runWebGLProgram(t,n,r,s,o)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(de().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=bt(()=>{if(!de().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=de().getBool("DEBUG");de().set("DEBUG",!1);const n=this.abs(Tt(1e-8)).dataSync()[0];if(de().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?kue:$ue}uploadToGPU(t){const n=this.texData.get(t),{shape:r,dtype:s,values:o,texture:a,usage:i,isPacked:l}=n;if(a!=null)return;const c=this.activeTimers!=null;let f;c&&(f=Uo());let h=n.texShape;if(h==null&&(h=Koe(r,l),n.texShape=h),o!=null){const p=fg(r);let g,y=h[1],x=h[0];const v=o instanceof Uint8Array||o instanceof Uint8ClampedArray;(l||!v)&&([y,x]=df(h[0],h[1])),l?g=new Kae(p,v):g=new Y3(p,v);const S=v?[x,y]:h,N=this.makeTensorInfo(S,s),_=this.texData.get(N.dataId);v?_.usage=Bs.PIXELS:_.usage=Bs.UPLOAD,_.texShape=S,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(N.dataId),y,x,o);const I=[[x,y]],M=this.runWebGLProgram(g,[N],s,I,!0),L=this.texData.get(M.dataId);n.texShape=L.texShape,n.isPacked=L.isPacked,n.usage=L.usage,de().get("ENGINE_COMPILE_ONLY")?this.disposeData(M.dataId):(n.texture=L.texture,n.values=null,this.texData.delete(M.dataId)),this.disposeIntermediateTensorInfo(N),c&&(this.uploadWaitMs+=Uo()-f)}else{const p=this.acquireTexture(h,i,s,l);n.texture=p}}convertAndCacheOnCPU(t,n){const r=this.texData.get(t),{dtype:s}=r;return n!=null&&(r.values=Aue(n,s)),r.values}acquireTexture(t,n,r,s){if(this.numBytesInGPU+=this.computeBytes(t,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${o} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,s)}computeBytes(t,n){return t[0]*t[1]*ay(n)}checkCompileCompletion(){for(const[,t]of Object.entries(this.binaryCache))this.checkCompletion_(t)}async checkCompileCompletionAsync(){const t=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))t.push(this.checkCompletionAsync_(n));return Promise.all(t)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(o){throw o}});t.push(r)}return Promise.all(t)}}async checkCompletionAsync_(t){return this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(t):(await ure(),this.checkCompletionAsync_(t))}checkCompletion_(t){if(this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(t.webGLProgram)),this.gpgpu.gl.getShaderParameter(t.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(bF(t.source,this.gpgpu.gl.getShaderInfoLog(t.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const t of Object.values(this.binaryCache)){this.gpgpu.buildVao(t.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:o,outShapeLocation:a,outShapeStridesLocation:i,outTexShapeLocation:l}=TF(this.gpgpu,t.program,t.webGLProgram);t.variablesLocations=n,t.customUniformLocations=r,t.infLoc=s,t.nanLoc=o,t.outShapeLocation=a,t.outShapeStridesLocation=i,t.outTexShapeLocation=l}}createTensorFromGPUData(t,n,r){t.channels=t.channels||"RGBA";const{texture:s,height:o,width:a,channels:i}=t,l=rl().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,o,a,i);return rl().makeTensorFromDataId(c,n,r,l)}}y0.nextDataId=0;function Aue(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}else throw new Error(`Unknown dtype ${t}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */lP()&&Wq("webgl",()=>new y0,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wS=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class sc{constructor(t,n,r){this.variableNames=["A","B"],this.outputShape=Ot(n,r),this.enableShapeUniforms=yr(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vc=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class gf{constructor(t,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ot(n,r);const o=this.outputShape.length;this.enableShapeUniforms=yr(o);let a="";if(s)if(o===0||_e(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          ${Gt(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?a+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:a+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Pr("coords",o);this.enableShapeUniforms?a+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:a+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${a}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ss(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const Pue={kernelName:U2,backendName:"webgl",kernelFunc:Ss};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fl(e){const{inputs:t,backend:n}=e,{real:r,imag:s}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),i=Ss({inputs:{x:r},backend:n}),l=Ss({inputs:{x:s},backend:n});return a.complexTensorInfos={real:i,imag:l},o}const Due={kernelName:kI,backendName:"webgl",kernelFunc:Fl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BF="return (a < 0.) ? b * a : a;",jF=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Fue(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{alpha:o}=r,a=n.makeTensorInfo([],"float32",lf(o,"float32")),i=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gf(jF,s.shape,a.shape):new sc(BF,s.shape,a.shape),l=n.runWebGLProgram(i,[s,a],"float32");return n.disposeIntermediateTensorInfo(a),l}const Lue={kernelName:gO,backendName:"webgl",kernelFunc:Fue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UF="return (a < 0.) ? b * a : a;",WF=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function Mue(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gf(WF,r.shape,s.shape):new sc(UF,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],"float32")}const Bue={kernelName:KO,backendName:"webgl",kernelFunc:Mue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yf="if (isnan(x)) return x;";function _t({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:o})=>{const{x:a}=s,i=o,l=r||a.dtype;if(i.shouldExecuteOnCPU([a])&&n!=null){const h=i.texData.get(a.dataId),p=n(h.values,l);return i.makeTensorInfo(a.shape,l,p)}const c=de().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let f;return c?f=new fl(a.shape,t):f=new ka(a.shape,e),i.runWebGLProgram(f,[a],l)}}function lr({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:o}){return({inputs:a,backend:i})=>{const{a:l,b:c}=a,f=i;if(r&&l.dtype==="complex64"){const y=f.texData.get(l.dataId),x=f.texData.get(c.dataId),[v,S]=[[y.complexTensorInfos.real,x.complexTensorInfos.real],[y.complexTensorInfos.imag,x.complexTensorInfos.imag]].map(_=>{const[I,A]=_,M={dataId:I.dataId,dtype:I.dtype,shape:l.shape},L={dataId:A.dataId,dtype:A.dtype,shape:c.shape},W=new sc(e,l.shape,c.shape);return f.runWebGLProgram(W,[M,L],Aa(I.dtype,A.dtype))}),N=Fl({inputs:{real:v,imag:S},backend:f});return f.disposeIntermediateTensorInfo(v),f.disposeIntermediateTensorInfo(S),N}const h=o||Aa(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||f.shouldExecuteOnCPU([l,c]))&&s!=null){const y=f.texData.get(l.dataId).values,x=f.texData.get(c.dataId).values,v=l.dtype==="string"?Fd(y):y,S=l.dtype==="string"?Fd(x):x,[N,_]=s(l.shape,c.shape,v,S,h),I=f.makeTensorInfo(_,h),A=f.texData.get(I.dataId);return A.values=N,I}const p=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let g;return p?g=new gf(t,l.shape,c.shape,n):g=new sc(e,l.shape,c.shape),f.runWebGLProgram(g,[l,c],h)}}function tp(e,t=!1){if(e==="linear")return t?wue:mue;if(e==="relu")return t?Sue:yue;if(e==="elu")return t?bue:gue;if(e==="relu6")return t?Cue:vue;if(e==="prelu")return t?WF:UF;if(e==="leakyrelu")return t?jF:BF;if(e==="sigmoid")return t?Eue:xue;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VF{constructor(t,n,r,s=!1,o=!1,a=!1,i=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=yr(this.outputShape.length);const f=s?t[1]:t[2],h=Math.ceil(f/2),p=s?"i * 2, rc.y":"rc.y, i * 2",g=o?"rc.z, i * 2":"i * 2, rc.z",y=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],x=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let v="",S="";i&&(l?v=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:c?v=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:v=`vec4 activation(vec4 x) {
          ${i}
        }`,S="result = activation(result);");const N=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let _="rc.x",I="rc.x";t[0]<n[0]?_=`imod(rc.x, ${t[0]})`:n[0]<t[0]&&(I=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${v}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${h}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${_};
        int batchB = ${I};
        for (int i = 0; i < ${h}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${g});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${y[0]} * ${x[0]});
          result += (${y[1]} * ${x[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${N}

        ${S}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ok={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class ak{constructor(t,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ot(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ik="return a * b;";function bS(e){const{inputs:t,backend:n}=e,{a:r,b:s}=t,o=Aa(r.dtype,s.dtype);if(r.dtype==="complex64"){const i=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new ak(ok.REAL,r.shape,s.shape),f=new ak(ok.IMAG,r.shape,s.shape),h=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:r.shape},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),y=Fl({inputs:{real:p,imag:g},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}if(n.shouldExecuteOnCPU([r,s])){const i=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,f]=Mle(r.shape,s.shape,i.values,l.values,o),h=n.makeTensorInfo(f,o),p=n.texData.get(h.dataId);return p.values=c,h}let a;return de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?a=new gf(ik,r.shape,s.shape):a=new sc(ik,r.shape,s.shape),n.runWebGLProgram(a,[r,s],o)}const jue={kernelName:LO,backendName:"webgl",kernelFunc:bS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uue(e,t,n){const r=[Ld(e.shape),...Md(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},o=[Ld(t),...Md(t)],a=new MF(o,r),i=!0,l=[r],c=n.runWebGLProgram(a,[s],e.dtype,l,i);return{dataId:c.dataId,shape:t,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:o}=r,a=n,i=_e(s.shape),l=zH(o,i),c=_e(l);V(i===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`);const f=a.texData.get(s.dataId);return f.isPacked&&!wy(s.shape,l)&&!(f.texture!==null&&wy(f.shape,l))?Uue(s,l,a):(a.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const Wue={kernelName:rA,backendName:"webgl",kernelFunc:Pe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lk{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:a}=t;this.outputShape=[s,a];const i=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const h=1/n;c=`sumValue += dot(values * ${Od(h)?h.toPrecision(2):h}, ones);`}let f="";o%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${i}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${i};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vue{constructor(t,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:o,outSize:a}=t;this.outputShape=[s,a];let i="0.0",l="";n==="prod"?i="1.0":n==="min"?(i="1.0 / 1e-20",l="min"):n==="max"&&(i="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const f=Math.floor(r/4)*4,h=r%4;let p=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,g="vec4";n==="all"?(i="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,g="bvec4"):n==="any"&&(i="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,g="bvec4");let y="";o%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${i};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${y}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${i});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===2}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${h===3}) {
          ${g} values = ${g}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zue(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],r=m0(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}function xc(e,t,n,r){const s=zue(e.shape);let o=e;for(let a=0;a<s.length;a++){const{inSize:i,windowSize:l,outSize:c}=s[a];let f,h;n==="mean"?f=a===0?new lk({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:c},i):new lk({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:c}):f=new Vue({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:c},n),h=o,o=r.runWebGLProgram(f,[o],t),h.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(h)}return o}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gue{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;const s=Gt(this.rank),o=Hue(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}}function Hue(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let s=0;s<e.length;s++)r[e[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class que{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(t.length);for(let f=0;f<r.length;f++)r[f]=t[n[f]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=Gt(this.rank),o=LF("rc",this.rank),a=new Array(this.rank);for(let f=0;f<n.length;f++)a[n[f]]=o[f];const i=`vec2(${a.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${a.join()}), ${i})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v0(e,t,n){const r=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new que(e.shape,t):new Gue(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kue(e,t,n,r){const s=t,o=e.shape.length,a=Xn(s,e.shape);let i=a;const l=Eo(i,o),c=l!=null;let f=e;c&&(f=v0(e,l,r),i=No(i.length,o)),ea("sum",i,o);const[h,p]=Ma(f.shape,i);let g=h;n&&(g=Ys(h,a));const y=_e(p),v=_e(e.shape)/y,S=Pe({inputs:{x:f},attrs:{shape:[v,y]},backend:r}),N=V2(e.dtype),_=xc(S,N,"sum",r),I=Pe({inputs:{x:_},attrs:{shape:g},backend:r});return r.disposeIntermediateTensorInfo(S),r.disposeIntermediateTensorInfo(_),c&&r.disposeIntermediateTensorInfo(f),I}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x0(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;return Kue(s,o,a,n)}const Xue={kernelName:SA,backendName:"webgl",kernelFunc:x0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fr(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{perm:o}=r,a=n,i=s.shape.length,l=new Array(i);for(let f=0;f<l.length;f++)l[f]=s.shape[o[f]];let c;if(a.shouldExecuteOnCPU([s])){const h=a.texData.get(s.dataId).values,p=xS(h,s.shape,s.dtype,o,l);c=a.makeTensorInfo(l,s.dtype);const g=a.texData.get(c.dataId);g.values=p}else c=v0(s,o,a);return c}const Yue={kernelName:_g,backendName:"webgl",kernelFunc:Fr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zF=1e3;function Sy({a:e,b:t,transposeA:n,transposeB:r,backend:s,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:i=0,activation:l=null}){const c=e.shape.length,f=t.shape.length,h=n?e.shape[c-2]:e.shape[c-1],p=r?t.shape[f-1]:t.shape[f-2],g=n?e.shape[c-1]:e.shape[c-2],y=r?t.shape[f-2]:t.shape[f-1],x=e.shape.slice(0,-2),v=t.shape.slice(0,-2),S=_e(x),N=_e(v),I=Ot(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([g,y]);V(h===p,()=>`Error in matMul: inner shapes (${h}) and (${p}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);const A=n?[S,h,g]:[S,g,h],M=r?[N,y,p]:[N,p,y],L=Pe({inputs:{x:e},backend:s,attrs:{shape:A}}),W=Pe({inputs:{x:t},backend:s,attrs:{shape:M}}),j=[L,W],U=Math.max(S,N),P=n?L.shape[1]:L.shape[2],X=o!=null,ae=a!=null,ee=l==="leakyrelu",ie=l!=null?tp(l,!0):null,le=X||ae||ee||ie!=null;let we;if((g===1||y===1)&&P>zF&&le===!1){let oe=L,pe=W;n&&(oe=Fr({inputs:{x:L},backend:s,attrs:{perm:[0,2,1]}}),j.push(oe)),r&&(pe=Fr({inputs:{x:W},backend:s,attrs:{perm:[0,2,1]}}),j.push(pe));const Y=y!==1,G=y===1;let re=oe;Y&&(re=Pe({inputs:{x:oe},backend:s,attrs:{shape:[U,P,1]}}),j.push(re));const ce=y===1?2:1;let xe=pe;G&&(xe=Pe({inputs:{x:pe},backend:s,attrs:{shape:[U,1,P]}}),j.push(xe));const Ce=bS({inputs:{a:re,b:xe},backend:s});we=x0({inputs:{x:Ce},backend:s,attrs:{axis:ce,keepDims:!0}}),j.push(Ce)}else{const oe=Aa(e.dtype,t.dtype),pe=new VF(A,M,[U,g,y],n,r,X,ie,ae,ee),Y=[L,W];if(o!=null&&Y.push(o),ae&&Y.push(a),ee){const G=s.makeTensorInfo([],"float32",lf(i,"float32"));Y.push(G),j.push(G)}we=s.runWebGLProgram(pe,Y,oe)}const te=Pe({inputs:{x:we},backend:s,attrs:{shape:I}});j.push(we);for(const oe of j)s.disposeIntermediateTensorInfo(oe);return te}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Que(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o,bias:a,preluActivationWeights:i}=t,{transposeA:l,transposeB:c,activation:f,leakyreluAlpha:h}=r;return Sy({a:s,b:o,transposeA:l,transposeB:c,backend:n,bias:a,preluActivationWeights:i,leakyreluAlpha:h,activation:f})}const Zue={kernelName:Rw,backendName:"webgl",kernelFunc:Que};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uk="return abs(x);";function Jue(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const o=n.texData.get(r.dataId),a=DF(o.values);return n.makeTensorInfo(r.shape,r.dtype,a)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new fl(r.shape,uk):s=new ka(r.shape,uk),n.runWebGLProgram(s,[r],r.dtype)}const ece={kernelName:oI,backendName:"webgl",kernelFunc:Jue};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tce=To+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,nce=_t({opSnippet:tce}),rce={kernelName:aI,backendName:"webgl",kernelFunc:nce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sce=To+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,oce=_t({opSnippet:sce}),ace={kernelName:iI,backendName:"webgl",kernelFunc:oce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ck="return a + b;",ice=lr({opSnippet:ck,packedOpSnippet:ck,supportsComplex:!0,cpuKernelImpl:yle}),lce={kernelName:B2,backendName:"webgl",kernelFunc:ice};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uce{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((o,a)=>`T${a}`);const r=[];this.variableNames.forEach(o=>{r.push(`float v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cce{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((o,a)=>`T${a}`);const r=[];this.variableNames.forEach(o=>{r.push(`vec4 v${o} = get${o}AtOutCoords();`)});const s=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jg(e){const{inputs:t,backend:n}=e,r=t;if(r.length===1)return Ss({inputs:{x:r[0]},backend:n});if(r.length>de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=jg({inputs:r.slice(0,l),backend:n}),f=jg({inputs:r.slice(l),backend:n});return jg({inputs:[c,f],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>Aa(l,c)),o=r.map(l=>l.shape),i=de().getBool("WEBGL_PACK")?new cce(r[0].shape,o):new uce(r[0].shape,o);return n.runWebGLProgram(i,r,s)}const dce={kernelName:lI,backendName:"webgl",kernelFunc:jg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r,i=s.shape.length,l=Xn(o,s.shape);let c=l;const f=Eo(c,i);let h=s;f!=null&&(h=Fr({inputs:{x:s},backend:n,attrs:{perm:f}}),c=No(c.length,i)),ea("all",c,i);const[p,g]=Ma(h.shape,c),y=_e(g),x=Pe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=xc(x,x.dtype,"all",n);let S;if(a){const N=Ys(p,l);S=Pe({inputs:{x:v},backend:n,attrs:{shape:N}})}else S=Pe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),S}const hce={kernelName:uI,backendName:"webgl",kernelFunc:fce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r,i=s.shape.length,l=Xn(o,s.shape);let c=l;const f=Eo(c,i);let h=s;f!=null&&(h=Fr({inputs:{x:s},backend:n,attrs:{perm:f}}),c=No(c.length,i)),ea("any",c,i);const[p,g]=Ma(h.shape,c),y=_e(g),x=Pe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=xc(x,x.dtype,"any",n);let S;if(a){const N=Ys(p,l);S=Pe({inputs:{x:v},backend:n,attrs:{shape:N}})}else S=Pe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),S}const mce={kernelName:cI,backendName:"webgl",kernelFunc:pce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gce{constructor(t,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:o,outSize:a}=t;r||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];const i=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${i} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yce{constructor(t,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,V(t.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const o=t[t.length-1],a=Math.ceil(o/n);this.outputShape=t.slice(0,-1),a>1&&this.outputShape.push(a),s||this.variableNames.push("bestIndicesA");const i=this.outputShape,l=i.length,c=Gt(l),f=Pr("coords",l);let h,p;if(a===1){p=l+1;const W=Gt(p);h=`
        ${W} sourceLocR = ${W}(${f.join()}, 0);
        ++${f[l-1]};
        ${W} sourceLocG = ${W}(${f.join()}, 0);
        ++${f[l-2]};
        ${W} sourceLocA = ${W}(${f.join()}, 0);
        --${f[l-1]};
        ${W} sourceLocB = ${W}(${f.join()}, 0);
        --${f[l-2]};`}else p=l,h=`
        ${c} sourceLocR = coords;
        ++${f[l-1]};
        ${c} sourceLocG = coords;
        ++${f[l-2]};
        ${c} sourceLocA = coords;
        --${f[l-1]};
        ${c} sourceLocB = coords;
        --${f[l-2]};`;const g=["x","y","z","w","u","v"].slice(0,p),y="."+g[p-1],x=g.map(W=>"int "+W),v=Pr("sourceLocR",p-1).concat("inIdx.r"),S=Pr("sourceLocG",p-1).concat("inIdx.g"),N=Pr("sourceLocB",p-1).concat("inIdx.b"),_=Pr("sourceLocA",p-1).concat("inIdx.a"),I=r==="max"?"greaterThan":"lessThan",A=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${S.join()}),
                             getBestIndicesAChannel(${N.join()}),
                             getBestIndicesAChannel(${_.join()})));`,M=`vec4(
            getAChannel(${v.join()}),
            hasNextCol ? getAChannel(${S.join()}) : 0.,
            hasNextRow ? getAChannel(${N.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${_.join()}) : 0.)`,L=s?"":`
      float getBestIndicesAChannel(${x.join()}) {
        return getChannel(getBestIndicesA(${g.join()}),
                                          vec2(${g.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${x.join()}) {
        return getChannel(getA(${g.join()}),
                               vec2(${g.slice(-2).join()}));
      }
      ${L}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${f[l-1]} < ${i[l-1]-1};
        bool hasNextRow = ${f[l-2]} < ${i[l-2]-1};
        ${h}
        ivec4 srcIdx = ivec4(sourceLocR${y}, sourceLocG${y},
          sourceLocB${y}, sourceLocA${y}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${M};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${A}
          vec4 candidate = ${M};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${I}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GF(e,t,n,r=null){let s=t.shape[0],o=t.shape[1];r!=null&&(s=r.shape[0],o=r.shape[1]);const a=m0(o),i={windowSize:a,inSize:o,batchSize:s,outSize:Math.ceil(o/a)},l=new gce(i,n,r==null),c=[t];r!=null&&c.push(r);const f=e.runWebGLProgram(l,c,"int32");if(f.shape[1]===1)return f;const h=GF(e,t,n,f);return e.disposeIntermediateTensorInfo(f),h}function HF(e,t,n,r=null){const s=r!=null?r.shape:t.shape,o=s[s.length-1],a=m0(o),i=new yce(s,a,n,r==null),l=r==null?[t]:[t,r],c=e.runWebGLProgram(i,l,"int32");if(c.shape.length===t.shape.length){const f=HF(e,t,n,c);return e.disposeIntermediateTensorInfo(c),f}return c}function qF(e,t,n,r){const s=[n];if(ea("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,t.shape.length),!de().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const o=[],a=e.texData.get(t.dataId),i=a!==null&&a.isPacked;let l=t;i&&(l=e.unpackTensor(t),o.push(l));const[c,f]=Ma(l.shape,s),h=_e(f),p=Pe({inputs:{x:l},backend:e,attrs:{shape:[-1,h]}});o.push(p);const g=GF(e,p,r);o.push(g);const y=Pe({inputs:{x:g},backend:e,attrs:{shape:c}});return o.forEach(x=>e.disposeIntermediateTensorInfo(x)),y}return HF(e,t,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;let a=Xn(o,s.shape);const i=Eo(a,s.shape.length);let l=s;const c=[];i!=null&&(l=Fr({inputs:{x:s},backend:n,attrs:{perm:i}}),c.push(l),a=No(a.length,l.shape.length)),ea("argMax",[a[0]],l.shape.length);const f=qF(n,l,a[0],"max");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const xce={kernelName:dI,backendName:"webgl",kernelFunc:vce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;let a=Xn(o,s.shape);const i=Eo(a,s.shape.length);let l=s;const c=[];i!=null&&(l=Fr({inputs:{x:s},backend:n,attrs:{perm:i}}),c.push(l),a=No(a.length,l.shape.length)),ea("argMin",[a[0]],l.shape.length);const f=qF(n,l,a[0],"min");return c.forEach(h=>n.disposeIntermediateTensorInfo(h)),f}const bce={kernelName:fI,backendName:"webgl",kernelFunc:wce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sce=To+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Cce=_t({opSnippet:Sce}),Ece={kernelName:hI,backendName:"webgl",kernelFunc:Cce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nce=To+"return log(x + sqrt(x * x + 1.0));",Tce=_t({opSnippet:Nce}),kce={kernelName:pI,backendName:"webgl",kernelFunc:Tce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce=To+`
  return atan(x);
`,_ce=_t({opSnippet:$ce}),Rce={kernelName:mI,backendName:"webgl",kernelFunc:_ce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ice=wS+`
  return atan(a, b);
`,Oce=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vc+`
  return result;
`,Ace=lr({opSnippet:Ice,packedOpSnippet:Oce}),Pce={kernelName:yI,backendName:"webgl",kernelFunc:Ace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dce=To+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Fce=_t({opSnippet:Dce}),Lce={kernelName:gI,backendName:"webgl",kernelFunc:Fce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class np{constructor(t,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,i=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;const x=n==="avg",v=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,S=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let N="0.0";if(x||(N="-1.0 / 1e-20"),r){this.userCode=`
        const ivec2 strides = ivec2(${i}, ${l});
        const ivec2 pads = ivec2(${g}, ${y});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${f}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?o?v:S:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const _="max";let I=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(I="avgValue / max(count, 1.0)");const A=Math.floor(a/4)*4,M=a%4,L=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${_}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${l});
      const ivec2 pads = ivec2(${g}, ${y});
      const float initializationValue = ${N};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${N});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${h};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${A}; wC += 4) {
            int xC = xCCorner + wC * ${f};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              getValue(batch, xR, xC + 3 * ${f}, d)
            );

            ${L}
          }

          int xC = xCCorner + ${A};
          if (${M===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${M===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              initializationValue,
              initializationValue
            );

            ${L}
          } else if (${M===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${f}, d),
              getValue(batch, xR, xC + 2 * ${f}, d),
              initializationValue
            );

            ${L}
          }
        }
        setOutput(${I});
      }
    `}}class SS{constructor(t,n,r,s=!1,o=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const a=t.filterWidth,i=t.strideDepth,l=t.strideHeight,c=t.strideWidth,f=t.dilationDepth,h=t.dilationHeight,p=t.dilationWidth,g=t.effectiveFilterDepth,y=t.effectiveFilterHeight,x=t.effectiveFilterWidth,v=t.padInfo.front,S=t.padInfo.top,N=t.padInfo.left;this.outputShape=t.outShape;const _=n==="avg";let I="0.0";if(_||(I="-1.0 / 1e-20"),r){this.userCode=`
        const ivec3 strides =
            ivec3(${i}, ${l}, ${c});
        const ivec3 pads = ivec3(${v}, ${S}, ${N});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${g};
              wD += ${f}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${y};
                wR += ${h}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${x};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?o?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${y} * ${x} +
                      wR * ${x} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const A="max";let M=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(M="avgValue / max(count, 1.0)");const L=Math.floor(a/4)*4,W=a%4,j=`
      if (${_}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${A}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${i}, ${l}, ${c});
      const ivec3 pads = ivec3(${v}, ${S}, ${N});
      const float initializationValue = ${I};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${I});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${g};
            wD += ${f}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${y};
            wR += ${h}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${L}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${j}
            }

            int xC = xCCorner + ${L};
            if (${W===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${j}
            } else if (${W===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${j}
            } else if (${W===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${j}
            }
          }
        }
        setOutput(${M});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;kp(s,"avgPool");const{filterSize:o,strides:a,pad:i,dimRoundingMode:l}=r,c=1;V(Es(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=hc(s.shape,o,a,c,i,l);if(f.filterWidth===1&&f.filterHeight===1&&pn(f.inShape,f.outShape))return Ss({inputs:{x:s},backend:n});const h=new np(f,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const Bce={kernelName:vI,backendName:"webgl",kernelFunc:Mce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jce(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:l,dataFormat:c}=r,f=[1,1,1],h=Sp(s.shape,o,a,f,i,l,c),p=new SS(h,"avg",!1);return n.runWebGLProgram(p,[s],"float32")}const Uce={kernelName:xI,backendName:"webgl",kernelFunc:jce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wce{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,s=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,f=l-1-t.padInfo.top,h=c-1-t.padInfo.left,p=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${f}, ${h});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${a}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${i}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class Vce{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,s=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,g=t.effectiveFilterWidth,y=h-1-t.padInfo.front,x=p-1-t.padInfo.top,v=g-1-t.padInfo.left,S=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${y}, ${x}, ${v});
      const float avgMultiplier = float(${S});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${g};
                wC += ${f}) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zce(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,a=o,{filterSize:i,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=Sp(a.shape,i,l,h,c,f),g=new Vce(p);return n.runWebGLProgram(g,[s],a.dtype)}const Gce={kernelName:sq,backendName:"webgl",kernelFunc:zce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hce(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,a=o;kp([s,o],"avgPoolGrad");const{filterSize:i,strides:l,pad:c}=r,f=hc(a.shape,i,l,1,c),h=new Wce(f);return n.runWebGLProgram(h,[s],a.dtype)}const qce={kernelName:rq,backendName:"webgl",kernelFunc:Hce};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kce(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o}=t,{transposeA:a,transposeB:i}=r;return Sy({a:s,b:o,transposeA:a,transposeB:i,backend:n})}const Xce={kernelName:wI,backendName:"webgl",kernelFunc:Kce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Yce{constructor(t,n,r,s,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Ot(t,n),Ot(t,r);let i="0.0";s!=null&&(Ot(t,s),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let l="1.0";o!=null&&(Ot(t,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${i};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${a}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qce{constructor(t,n,r,s,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ot(t,n),Ot(t,r);let i="vec4(0.0)";s!=null&&(Ot(t,s),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(Ot(t,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${i};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${a}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zce=({inputs:e,backend:t,attrs:n})=>{const{x:r,mean:s,variance:o,offset:a,scale:i}=e;V(s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),V(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),V(i==null||s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,o];let f=null;a!=null&&(f=a.shape,c.push(a));let h=null;i!=null&&(h=i.shape,c.push(i));const p=de().getBool("WEBGL_PACK_NORMALIZATION")?new Qce(r.shape,s.shape,o.shape,f,h,l):new Yce(r.shape,s.shape,o.shape,f,h,l);return t.runWebGLProgram(p,c,c[0].dtype)},Jce={kernelName:aO,backendName:"webgl",kernelFunc:Zce};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ede{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=Gt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=tde(this.rank);let s;const o=t.map((a,i)=>`sourceLoc.${cb[i]} = start[${i}] + coords.${cb[i]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const cb=["x","y","z","w","u","v"];function tde(e){if(e===1)return"sourceLoc";if(e<=6)return cb.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nde{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Gt(this.rank),r=Pr("coords",this.rank),s=Pr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,a=`getChannel(getSource(${s.join()}), ${o})`,i=`
      result.x = ${a};
      if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${a};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${t[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${a};
        if (++${r[this.rank-1]} < ${t[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${a};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((f,h)=>`start[${h}]`).join()});`:t.map((f,h)=>`${s[h]} = ${r[h]} + start[${h}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${i}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rde(e,t,n,r){const s=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,s),a.refCount=1,a.shape=n,a.dtype=e.dtype;let i=uS(t,or(e.shape));s.slice&&(i+=s.slice.flatOffset),a.slice={flatOffset:i,origDataId:s.slice&&s.slice.origDataId||e.dataId};const l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}function vf(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,size:a}=r,[i,l]=ID(s,o,a);if(bD(s,i,l),_e(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const h=n.texData.get(s.dataId),p=Xle(h.values,i,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,p)}const{isPacked:c}=n.texData.get(s.dataId),f=lS(s.shape,i,l);if(c||!f){const h=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nde(l):new ede(l),p=[i];return n.runWebGLProgram(h,[s],s.dtype,p)}return n.uploadToGPU(s.dataId),rde(s,i,l,n)}const sde={kernelName:mA,backendName:"webgl",kernelFunc:vf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ode=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,crops:a}=r;V(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const i=o.reduce((N,_)=>N*_),l=dS(s.shape,o,i),c=fS(l.length,o.length),f=hS(s.shape,o,i),h=BD(a,o.length),p=jD(f,a,o.length),g=[],y=Pe({inputs:{x:s},backend:n,attrs:{shape:l}}),x=Fr({inputs:{x:y},backend:n,attrs:{perm:c}}),v=Pe({inputs:{x},backend:n,attrs:{shape:f}}),S=vf({inputs:{x:v},backend:n,attrs:{begin:h,size:p}});return g.push(y),g.push(x),g.push(v),g.forEach(N=>n.disposeIntermediateTensorInfo(N)),S},ade={kernelName:bI,backendName:"webgl",kernelFunc:ode};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ide(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:o}=t,{size:a}=r,i=n.readSync(s.dataId),l=n.readSync(o.dataId),c=PF(i,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,c)}const lde={kernelName:SI,backendName:"webgl",kernelFunc:ide};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ude=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,cde=`
  return float(int(a.r) & int(b.r));
`;function dde(e){const{inputs:t,backend:n}=e,{a:r,b:s}=t,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS"),a=de().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||a===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[f,h]=xle(r.shape,s.shape,l,c,r.dtype),p=n.makeTensorInfo(h,r.dtype),g=n.texData.get(p.dataId);return g.values=f,p}let i;return o?i=new gf(ude,r.shape,s.shape,!1):i=new sc(cde,r.shape,s.shape),n.runWebGLProgram(i,[r,s],r.dtype)}const fde={kernelName:CI,backendName:"webgl",kernelFunc:dde};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hde(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,o=n.readSync(r.dataId),a=n.readSync(s.dataId),i=Ot(Array.from(o),Array.from(a));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}const pde={kernelName:EI,backendName:"webgl",kernelFunc:hde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mde="return float(a != b);",KF=lr({opSnippet:mde,cpuKernelImpl:jle,dtype:"bool"}),gde={kernelName:BO,backendName:"webgl",kernelFunc:KF};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _p(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.texData.get(r.dataId);return Ss({inputs:{x:s.complexTensorInfos.real},backend:n})}const yde={kernelName:eA,backendName:"webgl",kernelFunc:_p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vde="return float(int(x));";function xde(e,t){const n=new ka(e.shape,vde),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function db(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return Ss({inputs:{x:s},backend:n});const a=Ju(s.shape),i=db({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Fl({inputs:{real:i,imag:a},backend:n});return a.dispose(),n.disposeIntermediateTensorInfo(i),l}if(s.dtype==="complex64"){const a=_p({inputs:{input:s},backend:n}),i=db({inputs:{x:a},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(a),i}if(!qH(s.dtype,o)){const a=Ss({inputs:{x:s},backend:n});return{dataId:a.dataId,shape:a.shape,dtype:o}}if(n.shouldExecuteOnCPU([s])){const a=n.texData.get(s.dataId).values,[i,l,c]=wle(a,s.shape,s.dtype,o);return n.makeTensorInfo(i,l,c)}if(o==="int32")return xde(s,n);if(o==="bool"){const a=n.makeTensorInfo([],"bool",Nl("bool",1)),l=KF({inputs:{a:s,b:a},backend:n});return n.disposeIntermediateTensorInfo(a),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${o}`)}const wde={kernelName:j2,backendName:"webgl",kernelFunc:db};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dk="return ceil(x);",bde=_t({opSnippet:dk,packedOpSnippet:dk,cpuKernelImpl:ble}),Sde={kernelName:NI,backendName:"webgl",kernelFunc:bde};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cde{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ede{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nde(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{clipValueMin:o,clipValueMax:a}=r;let i;de().getBool("WEBGL_PACK_CLIP")?i=new Ede(s.shape):i=new Cde(s.shape);const l=[[o],[a]];return n.runWebGLProgram(i,[s],s.dtype,l)}const Tde={kernelName:TI,backendName:"webgl",kernelFunc:Nde};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kde{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fk(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function $de(e){const{inputs:t,backend:n}=e,{x:r}=t,s=n.texData.get(r.dataId),o=new kde(r.shape),a=[fk(r,s.complexTensorInfos.real),fk(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}const _de={kernelName:$I,backendName:"webgl",kernelFunc:$de};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rde{constructor(t){this.outputShape=[],this.outputShape=nc(t,1),this.variableNames=t.map((a,i)=>`T${i}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let a=1;a<n.length;a++)n[a]=n[a-1]+t[a][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let a=1;a<n.length;a++){const i=n[a-1];r.push(`else if (yC < ${n[a]}) setOutput(getT${a}(yR, yC-${i}));`)}const s=n.length,o=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ide{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=nc(t,n);const r=this.outputShape,s=r.length,o=Gt(s),a=Pr("coords",s),i=["x","y","z","w","u","v"].slice(0,s);this.variableNames=t.map((x,v)=>`T${v}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let x=1;x<l.length;x++)l[x]=l[x-1]+t[x][n];const c=i[n],f=i.slice(-2),h=i.join();let p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${h}), vec2(${f.join()}));
        }`;for(let x=1;x<l.length;x++){const v=l[x-1];p+=`
        if (${c} < ${l[x]}  && ${c} >= ${l[x-1]}) {
          return getChannel(
            getT${x}(${mg(i,c,v)}),
            vec2(${mg(f,c,v)}));
        }`}const g=l.length,y=l[l.length-1];p+=`
        return getChannel(
          getT${g}(${mg(i,c,y)}),
          vec2(${mg(f,c,y)}));`,this.userCode=`
      float getValue(${i.map(x=>"int "+x)}) {
        ${p}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${a}), 0., 0., 0.);

        ${a[s-1]} = ${a[s-1]} + 1;
        if (${a[s-1]} < ${r[s-1]}) {
          result.g = getValue(${a});
        }

        ${a[s-2]} = ${a[s-2]} + 1;
        if (${a[s-2]} < ${r[s-2]}) {
          result.a = getValue(${a});
        }

        ${a[s-1]} = ${a[s-1]} - 1;
        if (${a[s-2]} < ${r[s-2]} &&
            ${a[s-1]} < ${r[s-1]}) {
          result.b = getValue(${a});
        }
        setOutput(result);
      }
    `}}function mg(e,t,n){const r=e.indexOf(t);return e.map((o,a)=>a===r?`${o} - ${n}`:o).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w0(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.texData.get(r.dataId);return Ss({inputs:{x:s.complexTensorInfos.imag},backend:n})}const Ode={kernelName:fO,backendName:"webgl",kernelFunc:w0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kh(e,t,n){const r=e[0].dtype;if(r==="complex64"){const g=e.map(N=>_p({inputs:{input:N},backend:n})),y=e.map(N=>w0({inputs:{input:N},backend:n})),x=kh(g,t,n),v=kh(y,t,n),S=Fl({inputs:{real:x,imag:v},backend:n});return g.forEach(N=>n.disposeIntermediateTensorInfo(N)),y.forEach(N=>n.disposeIntermediateTensorInfo(N)),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),S}let s=n.shouldExecuteOnCPU(e);if(r==="string"&&(s=!0),s){const g=e.map(I=>{const M=[-1,_e(I.shape.slice(t))];return Pe({inputs:{x:I},backend:n,attrs:{shape:M}})}),y=g.map(I=>({vals:n.readSync(I.dataId),shape:I.shape})),x=nc(g.map(I=>I.shape),1),v=g[0].shape[0]===1,S=Sle(y,x,r,v),N=nc(e.map(I=>I.shape),t),_=n.makeTensorInfo(N,r,S);return g.forEach(I=>n.disposeIntermediateTensorInfo(I)),_}const o=e.filter(g=>_e(g.shape)>0),a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){const g=a?new ka(e[0].shape,il):new fl(e[0].shape,il);return n.runWebGLProgram(g,e,r)}const i=de().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>i){const g=[];for(let x=0;x<o.length;x+=i){const v=o.slice(x,x+i);g.push(kh(v,t,n))}const y=kh(g,t,n);for(const x of g)n.disposeIntermediateTensorInfo(x);return y}if(a){const g=new Ide(o.map(y=>y.shape),t);return n.runWebGLProgram(g,o,r)}const{tensors2D:l,outShape:c}=Ade(o,t,n),f=new Rde(l.map(g=>g.shape)),h=n.runWebGLProgram(f,l,r);l.forEach(g=>n.disposeIntermediateTensorInfo(g));const p=Pe({inputs:{x:h},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(h),p}function Ade(e,t,n){const r=nc(e.map(o=>o.shape),t);return{tensors2D:e.map(o=>Pe({inputs:{x:o},attrs:{shape:[-1,_e(o.shape.slice(t))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XF(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,o=Xn(s,t[0].shape)[0],a=t.map(c=>c.shape);AD(a,o);const i=nc(t.map(c=>c.shape),o);if(_e(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const l=t.filter(c=>_e(c.shape)>0);return l.length===1?Ss({inputs:{x:l[0]},backend:n}):kh(l,o,n)}const Pde={kernelName:_I,backendName:"webgl",kernelFunc:XF};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YF{constructor(t,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const a=t.padInfo.top,i=t.padInfo.left,l=t.strideHeight,c=t.strideWidth,f=t.dilationHeight,h=t.dilationWidth,p=t.filterHeight,g=t.filterWidth,y=Math.floor(t.inChannels/4)*4,x=t.inChannels%4,v=t.dataFormat==="channelsLast",S=v?1:2,N=v?2:3,_=v?3:1;let I="",A="";r&&(s?I=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?I=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:I=`
          float activation(float x) {
            ${r}
          }
        `,A="result = activation(result);");const M=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${I}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${_}];

        ivec2 xRCCorner =
            ivec2(coords[${S}], coords[${N}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${f};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${g}; wC++) {
            int xC = xCCorner + wC * ${h};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${y}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${v}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${x===1}) {

              if (${v}) {
                dotProd +=
                    getX(batch, xR, xC, ${y}) *
                    getW(wR, wC, ${y}, d2);
              } else {
                dotProd +=
                    getX(batch, ${y}, xR, xC) *
                    getW(wR, wC, ${y}, d2);
              }

            } else if (${x===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2)
              );

              if (${v}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${x===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${y}, d2),
                getW(wR, wC, ${y} + 1, d2),
                getW(wR, wC, ${y} + 2, d2)
              );

              if (${v}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${y}),
                  getX(batch, xR, xC, ${y} + 1),
                  getX(batch, xR, xC, ${y} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${y}, xR, xC),
                  getX(batch, ${y} + 1, xR, xC),
                  getX(batch, ${y} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${M}
        ${A}
        setOutput(result);
      }
    `}}class Dde{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,r=t.padInfo.top,s=t.padInfo.left,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=t.dilationDepth,c=t.dilationHeight,f=t.dilationWidth,h=t.filterDepth,p=t.filterHeight,g=t.filterWidth,y=Math.floor(t.inChannels/4)*4,x=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${a}, ${i});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${h}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${g}; wC++) {
              int xC = xCCorner + wC * ${f};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${y}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${x===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${y}) *
                  getW(wF, wR, wC, ${y}, d2);
              } else if (${x===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${x===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${y}),
                  getX(batch, xF, xR, xC, ${y} + 1),
                  getX(batch, xF, xR, xC, ${y} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${y}, d2),
                  getW(wF, wR, wC, ${y} + 1, d2),
                  getW(wF, wR, wC, ${y} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class QF{constructor(t,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=yr(this.outputShape.length);const a=t.padInfo.left,i=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,f=t.filterWidth,h=f;let p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<f;v++)p+=`
           vec4 xTexelC${v*2};
           int xTexelC${v*2}Ready;
           vec4 xTexelC${v*2+1};
           int xTexelC${v*2+1}Ready;
           vec4 xC${v};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${t.inChannels}; d1 += 2) {
       `;for(let v=0;v<f;v++)p+=`
           xTexelC${v*2} = vec4(0.0);
           xTexelC${v*2}Ready = 0;
           xTexelC${v*2+1} = vec4(0.0);
           xTexelC${v*2+1}Ready = 0;
           xC${v} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let v=0;v<(h+1)/2;v++){const S=v*2;if(p+=`
           xC = xCCorner + ${S*l};
           `,i===1){if(S<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }
               `,l===1&&S>0?p+=`
                 xC${S} = vec4(xTexelC${S-2}.zw, xTexelC${S}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${S} = vec4(previous.zw, xTexelC${S}.xy);
                   } else {
                     xC${S} = vec4(0.0, 0.0, xTexelC${S}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xC${S} = xTexelC${S};
                 `,S+1<f)){const N=a%2===0?F2(l):l;l%2===0&&a%2===1||l%2!==0&&a%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${N};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                     xTexelC${S+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${S+1}.zw = vec2(0.0);
                     }
                     xTexelC${S+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${S+1} = vec4(previous.zw, xTexelC${S+1}.xy);
                     } else {
                      xC${S+1} = vec4(0.0, 0.0, xTexelC${S+1}.xy);
                     }
                     `:p+=`
                     xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.xy);
                     `):N===1?p+=`
                     xC${S+1} = xTexelC${S};
                     `:p+=`
                     xCOffset = xC + ${N};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                       xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${S+1}.zw = vec2(0.0);
                       }
                       xTexelC${S+1}Ready = 1;
                     }

                     xC${S+1} = xTexelC${S+1};
                     `}}else S<f&&(a%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.0);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
               `,S+1<f&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${S+1} = vec4(xTexelC${S+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${S}Ready == 0) {
                   xTexelC${S} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${S}.zw = vec2(0.0);
                   }
                   xTexelC${S}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${S+1}Ready == 0) {
                   xTexelC${S+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${S+1}.zw = vec2(0.);
                   }
                   xTexelC${S+1}Ready = 1;
                 }

                 xC${S} = vec4(
                   xTexelC${S}.xy, xTexelC${S+1}.xy);
               `,S+1<f&&(p+=`
                   xC${S+1} = vec4(xTexelC${S}.zw, xTexelC${S+1}.zw);
                 `)));S<f&&(p+=`
             wTexel = getW(r, ${S}, d1, d2);
             dotProd += xC${S}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${t.inChannels}) {
               dotProd += xC${S}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,S+1<f&&(p+=`
               wTexel = getW(r, ${S+1}, d1, d2);
               dotProd += xC${S+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${t.inChannels}) {
                 dotProd += xC${S+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let g="",y="";r&&(s?g=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:o?g=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:g=`vec4 activation(vec4 x) {
           ${r}
         }`,y="result = activation(result);");const x=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${g}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${x}
         ${y}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fde{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=yr(this.outputShape.length);const{dataFormat:r}=n,s=Lr(),o=r==="channelsLast",a=o?1:2,i=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${t[2]} && pos < ${t[1]}) {`;let c="";for(let f=0;f<=1;f++)for(let h=0;h<=1;h++)c+=`
          blockIndex = rc.z + ${h};
          pos = rc.y + ${f};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${a}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${i}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${f*2+h}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cy(e,t){const n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&n===1&&e[0]>1?[e[0],1]:null}function ZF({x:e,filter:t,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:i=null}){const l=e.shape,c=r.texData.get(e.dataId),f=n.inChannels,h=l[0]*l[1]*l[2],p=n.outChannels,g=n.dataFormat==="channelsLast",y=!1,x=!1;let v;const S=[];if(o!=null){const I=Cy(o.shape,g);I!=null&&(o=Pe({inputs:{x:o},backend:r,attrs:{shape:I}}),S.push(o))}if(s!=null){const I=Cy(s.shape,g);I!=null&&(s=Pe({inputs:{x:s},backend:r,attrs:{shape:I}}),S.push(s))}if(!((h===1||p===1)&&f>zF)&&c.isPacked&&g&&c.texture!=null&&l[2]%2!==0&&pn(c.shape.slice(-3),l.slice(-3))){const I=l[0]*l[1]*(l[2]+1),A={dataId:e.dataId,shape:[1,I,n.inChannels],dtype:e.dtype},M=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,V(wy(c.shape,A.shape),()=>`packed reshape ${c.shape} to ${A.shape} isn't free`);const L=Pe({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});S.push(L);const W=Sy({a:A,b:L,backend:r,transposeA:y,transposeB:x,bias:s,activation:i,preluActivationWeights:o,leakyreluAlpha:a}),j=r.texData.get(W.dataId);V(j.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=M,j.shape=n.outShape,v=Ss({inputs:{x:W},backend:r}),v.shape=n.outShape,S.push(W)}else{const I=n.outHeight*n.outWidth,A=Pe({inputs:{x:e},backend:r,attrs:{shape:g?[n.batchSize,I,n.inChannels]:[n.batchSize,n.inChannels,I]}}),M=Pe({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),L=Sy({a:g?A:M,b:g?M:A,transposeA:!g,transposeB:x,backend:r,bias:s,activation:i,preluActivationWeights:o,leakyreluAlpha:a});v=Pe({inputs:{x:L},backend:r,attrs:{shape:n.outShape}}),S.push(A),S.push(M),S.push(L)}for(const I of S)r.disposeIntermediateTensorInfo(I);return v}function JF({x:e,filter:t,convInfo:n,backend:r,bias:s=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:i=null}){const{filterWidth:l,filterHeight:c,inChannels:f,outWidth:h,outHeight:p,dataFormat:g}=n,y=g==="channelsLast",x=l*c*f,v=p*h,S=[n.batchSize,x,v],N=!0,_=!1,I=[];if(o!=null){const te=Cy(o.shape,y);te!=null&&(o=Pe({inputs:{x:o},backend:r,attrs:{shape:te}}),I.push(o))}if(s!=null){const te=Cy(s.shape,y);te!=null&&(s=Pe({inputs:{x:s},backend:r,attrs:{shape:te}}),I.push(s))}const A=Pe({inputs:{x:t},backend:r,attrs:{shape:[1,x,_e(t.shape)/x]}});I.push(A);const M=new Fde(S,n),L=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],W=r.runWebGLProgram(M,[e],"float32",L),j=Pe({inputs:{x:W},backend:r,attrs:{shape:S}});I.push(W),I.push(j);const U=s!=null,P=o!=null,X=i==="leakyrelu",ae=i?tp(i,!0):null,ee=new VF(y?j.shape:A.shape,y?A.shape:j.shape,y?[n.batchSize,v,n.outChannels]:[n.batchSize,n.outChannels,v],N,_,U,ae,P,X),ie=y?[j,A]:[A,j];if(s&&ie.push(s),P&&ie.push(o),X){const te=r.makeTensorInfo([],"float32",lf(a,"float32"));ie.push(te),I.push(te)}const le=r.runWebGLProgram(ee,ie,"float32"),we=Pe({inputs:{x:le},backend:r,attrs:{shape:n.outShape}});I.push(le);for(const te of I)r.disposeIntermediateTensorInfo(te);return we}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lde(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dataFormat:l,dilations:c,dimRoundingMode:f}=r,h=uf(l),p=Xs(s.shape,o.shape,a,c,i,f,!1,h);let g;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))g=ZF({x:s,filter:o,convInfo:p,backend:n});else if(p.strideWidth<=2&&h==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const x=new QF(p),v=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];g=n.runWebGLProgram(x,[s,o],"float32",v)}else if(de().getBool("WEBGL_CONV_IM2COL"))g=JF({x:s,filter:o,convInfo:p,backend:n});else{const x=new YF(p);g=n.runWebGLProgram(x,[s,o],"float32")}const y=Pe({inputs:{x:g},backend:n,attrs:{shape:p.outShape}});return n.disposeIntermediateTensorInfo(g),y}const Mde={kernelName:RI,backendName:"webgl",kernelFunc:Lde};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bde{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,s=t.padInfo.top,o=t.padInfo.left,a=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              ${a?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class jde{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,s=t.strideHeight,o=t.strideWidth,a=t.dataFormat==="channelsLast",i=n-1-t.padInfo.top,l=r-1-t.padInfo.left,c=a?1:2,f=a?2:3,h=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${h}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${f}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${a}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Ude{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,r=t.strideHeight,s=t.strideWidth,o=t.padInfo.front,a=t.padInfo.top,i=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${o};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${a};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${i};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Wde{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,r=t.filterHeight,s=t.filterWidth,o=t.strideDepth,a=t.strideHeight,i=t.strideWidth,l=n-1-t.padInfo.front,c=r-1-t.padInfo.top,f=s-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${a}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${i}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vde(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,pad:i,dataFormat:l,dimRoundingMode:c,filterShape:f}=r,h=uf(l),p=Xs(s.shape,f,a,1,i,c,!1,h),g=new Bde(p);return n.runWebGLProgram(g,[s,o],"float32")}const zde={kernelName:II,backendName:"webgl",kernelFunc:Vde};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gde{constructor(t){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=t.inShape,this.enableShapeUniforms=yr(this.outputShape.length);const n=t.filterHeight,r=t.filterWidth,s=n-1-t.padInfo.top,o=r-1-t.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${t.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${t.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${t.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hde(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{inputShape:a,strides:i,pad:l,dataFormat:c,dimRoundingMode:f}=r,h=uf(c),p=Xs(a,o.shape,i,1,l,f,!1,h);if(de().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&h==="channelsLast"){const g=[[p.strideHeight,p.strideWidth]],y=new Gde(p);return n.runWebGLProgram(y,[s,o],"float32",g)}else{const g=new jde(p);return n.runWebGLProgram(g,[s,o],"float32")}}const qde={kernelName:OI,backendName:"webgl",kernelFunc:Hde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kde(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:l}=r,c=Cp(s.shape,o.shape,a,l,i),f=new Dde(c);return n.runWebGLProgram(f,[s,o],"float32")}const Xde={kernelName:AI,backendName:"webgl",kernelFunc:Kde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yde(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,pad:i,filterShape:l}=r,c=Cp(s.shape,l,a,1,i),f=new Ude(c);return n.runWebGLProgram(f,[s,o],"float32")}const Qde={kernelName:oq,backendName:"webgl",kernelFunc:Yde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zde(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{pad:a,strides:i,inputShape:l}=r,c=Cp(l,o.shape,i,1,a),f=new Wde(c);return n.runWebGLProgram(f,[s,o],"float32")}const Jde={kernelName:PI,backendName:"webgl",kernelFunc:Zde};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const efe=yf+`
  return cos(x);
`,tfe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${vc}
  return result;
`,nfe=_t({opSnippet:efe,packedOpSnippet:tfe}),rfe={kernelName:DI,backendName:"webgl",kernelFunc:nfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sfe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,ofe=_t({opSnippet:sfe}),afe={kernelName:FI,backendName:"webgl",kernelFunc:ofe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ife{constructor(t,n,r,s,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[a,i,l,c]=t,[f]=n,[h,p]=r;this.outputShape=[f,h,p,c];const g=s==="bilinear"?1:0,[y,x]=[`${i-1}.0`,`${l-1}.0`],[v,S,N]=h>1?[`${(i-1)/(h-1)}`,"(y2-y1) * height_ratio",`y1*${y} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${y}`],[_,I,A]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${x} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${x}`];this.userCode=`
      const float height_ratio = float(${v});
      const float width_ratio = float(${_});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${a}) {
          return;
        }

        float height_scale = ${S};
        float width_scale = ${I};

        float in_y = ${N};
        if( in_y < 0.0 || in_y > ${y} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${A};
        if( in_x < 0.0 || in_x > ${x} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${g} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lfe=e=>{const{inputs:t,backend:n,attrs:r}=e,{image:s,boxes:o,boxInd:a}=t,{cropSize:i,method:l,extrapolationValue:c}=r,f=new ife(s.shape,o.shape,i,l,c);return n.runWebGLProgram(f,[s,o,a],"float32")},ufe={kernelName:BI,backendName:"webgl",kernelFunc:lfe};var rp;(function(e){e.Prod="*",e.Sum="+"})(rp||(rp={}));class hk{constructor(t,n,r,s){this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const o=this.outputShape.length,a=this.op===rp.Prod?"1.0":"0.0",i=r?a:`getX(${pk(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",f="";r?(c=s?`end != ${l-1}`:"end != 0",f=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",f=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Gt(o)} coords = getOutputCoords();
        int end = ${mk(o,"coords",this.op)};
        float val = ${i};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${f};
          ${mk(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${pk(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function pk(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function mk(e,t,n){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eL(e,t,n,r,s,o){const a=t.shape.length,i=Eo([r],a);let l=t;i!=null&&(l=Fr({inputs:{x:t},backend:n,attrs:{perm:i}}));const c=No(1,a)[0];if(c!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);const f=l.shape[c];let h=Ss({inputs:{x:l},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new hk(e,l.shape,!1,o),y=[[p]],x=h;h=n.runWebGLProgram(g,[h],h.dtype,y),n.disposeIntermediateTensorInfo(x)}if(s){const p=new hk(e,l.shape,s,o),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(i!=null){const p=X2(i),g=Fr({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(l),g}return h}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r;return eL(rp.Prod,s,n,o,a,i)}const dfe={kernelName:LI,backendName:"webgl",kernelFunc:cfe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ffe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r;return eL(rp.Sum,s,n,o,a,i)}const hfe={kernelName:MI,backendName:"webgl",kernelFunc:ffe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:o}=t,{size:a,binaryOutput:i}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(o.dataId),f=PF(l,c,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,f)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(o),f=vle(l,c,a,i);return n.makeTensorInfo(f.shape,o.dtype,f.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const mfe={kernelName:jI,backendName:"webgl",kernelFunc:pfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gfe{constructor(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockSize:o,dataFormat:a}=r,i=s.shape[0],l=a==="NHWC"?s.shape[1]:s.shape[2],c=a==="NHWC"?s.shape[2]:s.shape[3],f=a==="NHWC"?s.shape[3]:s.shape[1],h=l*o,p=c*o,g=f/(o*o),y=a==="NHWC"?[i,h,p,g]:[i,g,h,p],x=new gfe(y,o,a);return n.runWebGLProgram(x,[s],s.dtype)}const vfe={kernelName:UI,backendName:"webgl",kernelFunc:yfe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tL{constructor(t,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=yr(this.outputShape.length);const a=t.filterHeight,i=t.filterWidth,l=t.outChannels/t.inChannels;let c="",f="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,f="result = activation(result);");const h=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${a}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${i}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${h}
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nL{constructor(t,n=!1,r=null,s=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=yr(this.outputShape.length);const a=t.outChannels/t.inChannels,i=t.padInfo.left,l=t.strideWidth,c=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=h;let g=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let S=0;S<h;S++)g+=`
          vec4 xTexelC${S*2};
          int xTexelC${S*2}Ready;
          vec4 xTexelC${S*2+1};
          int xTexelC${S*2+1}Ready;
          vec4 xC${S};`;g+=`
    for (int r = 0; r < ${f}; r++) {
      `;for(let S=0;S<h;S++)g+=`
          xTexelC${S*2} = vec4(0.0);
          xTexelC${S*2}Ready = 0;
          xTexelC${S*2+1} = vec4(0.0);
          xTexelC${S*2+1}Ready = 0;
          xC${S} = vec4(0.0);`;g+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let S=0;S<(p+1)/2;S++){const N=S*2;if(g+=`
          xC = xCCorner + ${N*c};
          `,l===1){if(N<h&&(i%2===1?(g+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }
              `,c===1&&N>0?g+=`
                xC${N} = vec4(xTexelC${N-2}.zw, xTexelC${N}.xy);
                `:g+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${N} = vec4(previous.zw, xTexelC${N}.xy);
                  } else {
                    xC${N} = vec4(0.0, 0.0, xTexelC${N}.xy);
                  }
                  `):g+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xC${N} = xTexelC${N};
                `,N+1<h)){const _=i%2===0?F2(c):c;c%2===0&&i%2===1||c%2!==0&&i%2!==1?(g+=`
                  xCOffset = xC + imod(pads[1], 2) + ${_};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                    xTexelC${N+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${N+1}.zw = vec2(0.0);
                    }
                    xTexelC${N+1}Ready = 1;
                  }
                  `,c>1?g+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${N+1} = vec4(previous.zw, xTexelC${N+1}.xy);
                    } else {
                     xC${N+1} = vec4(0.0, 0.0, xTexelC${N+1}.xy);
                    }
                    `:g+=`
                    xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.xy);
                    `):_===1?g+=`
                    xC${N+1} = xTexelC${N};
                    `:g+=`
                    xCOffset = xC + ${_};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                      xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${N+1}.zw = vec2(0.0);
                      }
                      xTexelC${N+1}Ready = 1;
                    }

                    xC${N+1} = xTexelC${N+1};
                    `}}else N<h&&(i%2===1?(g+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.0);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
              `,N+1<h&&(g+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${N+1} = vec4(xTexelC${N+1}.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${N}Ready == 0) {
                  xTexelC${N} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${N}.zw = vec2(0.0);
                  }
                  xTexelC${N}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${N+1}Ready == 0) {
                  xTexelC${N+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${N+1}.zw = vec2(0.);
                  }
                  xTexelC${N+1}Ready = 1;
                }

                xC${N} = vec4(
                  xTexelC${N}.xy, xTexelC${N+1}.xy);
              `,N+1<h&&(g+=`
                  xC${N+1} = vec4(xTexelC${N}.zw, xTexelC${N+1}.zw);
                `)));N<h&&(g+=`
            wTexel = getW(r, ${N}, d1, q);
            dotProd += xC${N} * vec4(wTexel.xz, wTexel.xz);
          `,N+1<h&&(g+=`
              wTexel = getW(r, ${N+1}, d1, q);
              dotProd += xC${N+1} * vec4(wTexel.xz, wTexel.xz);
            `))}g+=`
    }
  `,g+=`
      }
    `;let y="",x="";r&&(s?y=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:o?y=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:y=`vec4 activation(vec4 x) {
          ${r}
        }`,x="result = activation(result);");const v=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${a};
        int q = d2 - d1 * ${a};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${g}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${v}
        ${x}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:l,dimRoundingMode:c}=r;let f=l;f==null&&(f=[1,1]),V(Es(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const h=Xs(s.shape,o.shape,a,f,i,c,!0);let p;de().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?p=new nL(h):p=new tL(h);const g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(p,[s,o],"float32",g)}const wfe={kernelName:WI,backendName:"webgl",kernelFunc:xfe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bfe{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,r=t.strideWidth,s=t.padInfo.top,o=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${a} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${o};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Sfe{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,r=t.filterWidth,s=t.strideHeight,o=t.strideWidth,a=n-1-t.padInfo.top,i=r-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cfe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:c,filterShape:f}=r,h=Xs(s.shape,f,a,i,l,c,!0),p=new bfe(h);return n.runWebGLProgram(p,[s,o],"float32")}const Efe={kernelName:VI,backendName:"webgl",kernelFunc:Cfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nfe(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{strides:a,dilations:i,pad:l,dimRoundingMode:c,inputShape:f}=r,h=Xs(f,o.shape,a,i,l,c,!0),p=new Sfe(h);return n.runWebGLProgram(p,[s,o],"float32")}const Tfe={kernelName:zI,backendName:"webgl",kernelFunc:Nfe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kfe{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $fe(e){const{inputs:t,backend:n}=e,{x:r}=t,s=[...r.shape,...r.shape],o=_e(r.shape),a=Pe({inputs:{x:r},backend:n,attrs:{shape:[o]}}),i=new kfe(o),l=n.runWebGLProgram(i,[a],a.dtype),c=Pe({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const _fe={kernelName:GI,backendName:"webgl",kernelFunc:$fe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rfe{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:o,strideWidth:a,filterHeight:i,filterWidth:l,dilationHeight:c,dilationWidth:f}=t,{top:h,left:p}=s;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${a});
      const ivec2 pads = ivec2(${h}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${i}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${f};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ife(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:l}=r,c=NP(s.shape,o.shape,a,i,"NHWC",l);let f;const h=new Rfe(c);f=n.runWebGLProgram(h,[s,o],"float32");const p=Pe({inputs:{x:f},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(f),p}const Ofe={kernelName:HI,backendName:"webgl",kernelFunc:Ife};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Afe(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,o=t,{allDims:a,summedDims:i,idDims:l}=XD(s,o.length);QD(a.length,l,o);const{path:c,steps:f}=ZD(i,l),h=f.length;let p=null,g=a.length;const y=[];for(let x=0;x<h;++x){for(const v of f[x]){const{permutationIndices:S,expandDims:N}=YD(g,l[v]);let _;JD(S)?_=o[v]:(_=Fr({inputs:{x:o[v]},backend:n,attrs:{perm:S}}),y.push(_));const I=_.shape.slice();for(let A=0;A<N.length;++A)I.splice(N[A],0,1);pn(_.shape,I)||(_=Pe({inputs:{x:_},backend:n,attrs:{shape:I}}),y.push(_)),p===null?p=_:(p=bS({inputs:{a:_,b:p},backend:n}),y.push(p))}x<h-1&&(c[x]>=0&&(p=x0({inputs:{x:p},backend:n,attrs:{axis:c[x]-(a.length-g),keepDims:!1}}),y.push(p)),g--)}for(const x of y)x!==p&&n.disposeIntermediateTensorInfo(x);return p}const Pfe={kernelName:KI,backendName:"webgl",kernelFunc:Afe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dfe="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ffe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Lfe=_t({opSnippet:Dfe,packedOpSnippet:Ffe}),Mfe={kernelName:XI,backendName:"webgl",kernelFunc:Lfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bfe="return (b >= 0.0) ? a : a * (b + 1.0);",jfe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Ufe=e=>{const{inputs:t,backend:n}=e,{dy:r,y:s}=t,o=de().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new gf(jfe,r.shape,s.shape):new sc(Bfe,r.shape,s.shape);return n.runWebGLProgram(o,[r,s],r.dtype)},Wfe={kernelName:aq,backendName:"webgl",kernelFunc:Ufe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vfe=`
  return vec4(equal(a, b));
`,zfe="return float(a == b);",Gfe=lr({opSnippet:zfe,packedOpSnippet:Vfe,dtype:"bool",cpuKernelImpl:Cle}),Hfe={kernelName:QI,backendName:"webgl",kernelFunc:Gfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qfe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${VD};
  float a1 = ${zD};
  float a2 = ${GD};
  float a3 = ${HD};
  float a4 = ${qD};
  float a5 = ${KD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,Kfe=_t({opSnippet:qfe}),Xfe={kernelName:YI,backendName:"webgl",kernelFunc:Kfe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yfe=yf+`
  return exp(x);
`,Qfe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rL=_t({opSnippet:Yfe,packedOpSnippet:Qfe,cpuKernelImpl:Ele,dtype:"float32"}),Zfe={kernelName:ZI,backendName:"webgl",kernelFunc:rL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fb(e){const{inputs:t,attrs:n,backend:r}=e,{dim:s}=n,{input:o}=t,a=o.shape.length,i=o.shape.slice();let l=s;return s<0&&(V(-(a+1)<=s,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+s+1),i.splice(l,0,1),Pe({inputs:{x:o},backend:r,attrs:{shape:i}})}const Jfe={kernelName:JI,backendName:"webgl",kernelFunc:fb};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gk="return exp(x) - 1.0;",ehe=_t({opSnippet:gk,packedOpSnippet:gk,cpuKernelImpl:Nle}),the={kernelName:eO,backendName:"webgl",kernelFunc:ehe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yk{constructor(t,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const o=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,a=r?`${s}.0`:"1.0";let i;if(t==="real")i="return real * expR - imag * expI;";else if(t==="imag")i="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${i}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${a};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sL(e,t,n){const r=n.texData.get(e.dataId),s=_e(e.shape),o=e.shape[e.shape.length-1],a=s/o,i=Pe({inputs:{x:e},backend:n,attrs:{shape:[a,o]}}),l=i.shape,c=new yk("real",l,t),f=new yk("imag",l,t),h=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],p=n.runWebGLProgram(c,h,"float32"),g=n.runWebGLProgram(f,h,"float32"),y=Fl({inputs:{real:p,imag:g},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g);const x=Pe({inputs:{x:y},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(y),x}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nhe(e){const{inputs:t,backend:n}=e,{input:r}=t;return sL(r,!1,n)}const rhe={kernelName:tO,backendName:"webgl",kernelFunc:nhe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class she{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rp(e){const{backend:t,attrs:n}=e,{shape:r,value:s}=n;let{dtype:o}=n;if(o=o||wp(s),o==="string"){const a=Kn(o,_e(r));return a.fill(s),t.makeTensorInfo(r,o,a)}else{const a=new she(r,s),i=[[s]];return t.runWebGLProgram(a,[],o,i)}}const ohe={kernelName:nO,backendName:"webgl",kernelFunc:Rp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ahe{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ihe={kernelName:rO,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,r=t,s=new ahe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vk="return floor(x);",lhe=_t({opSnippet:vk,packedOpSnippet:vk,cpuKernelImpl:Tle}),uhe={kernelName:sO,backendName:"webgl",kernelFunc:lhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const che=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,dhe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,fhe=lr({opSnippet:che,packedOpSnippet:dhe,dtype:"int32"}),hhe={kernelName:oO,backendName:"webgl",kernelFunc:fhe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class phe{constructor(t){this.variableNames=["A"];const n=Lr(),[r,s]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mhe{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Lr(),[r,s]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ghe={kernelName:_w,backendName:"webgl",kernelFunc:yhe};let ld,Ix=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function yhe(e){const{inputs:t,backend:n,attrs:r}=e;let{pixels:s}=t;const{numChannels:o}=r,a=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,i=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=a?[s.videoWidth,s.videoHeight]:[s.width,s.height],f=[c,l],h=[c,l,o];if(i||a){const x=de().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(ld==null||x!==Ix)&&(Ix=x,ld=document.createElement("canvas").getContext("2d",{willReadFrequently:Ix})),ld.canvas.width=l,ld.canvas.height=c,ld.drawImage(s,0,0,l,c),s=ld.canvas}const p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=Bs.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),s);const g=de().getBool("WEBGL_PACK")?new mhe(h):new phe(h),y=n.runWebGLProgram(g,[p],"int32");return n.disposeData(p.dataId),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vhe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:l,pad:c,dataFormat:f,dilations:h,dimRoundingMode:p,activation:g,leakyreluAlpha:y}=r,x=uf(f),v=Xs(s.shape,o.shape,l,h,c,p,!1,x);let S;const N=[],_=a!=null,I=i!=null,A=g==="leakyrelu",M=()=>{const W=[s,o],j=(U,P)=>{if(P==="NCHW"&&U.shape.length===1&&U.shape[0]!==1){const X=Pe({inputs:{x:U},backend:n,attrs:{shape:[U.shape[0],1,1]}});return N.push(X),X}return U};if(_&&W.push(j(a,f)),I&&W.push(j(i,f)),A){const U=n.makeTensorInfo([],"float32",lf(y,"float32"));W.push(U),N.push(U)}return W};if(v.filterHeight===1&&v.filterWidth===1&&v.dilationHeight===1&&v.dilationWidth===1&&v.strideHeight===1&&v.strideWidth===1&&(v.padInfo.type==="SAME"||v.padInfo.type==="VALID"))S=ZF({x:s,filter:o,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:i,leakyreluAlpha:y});else if(v.strideWidth<=2&&x==="channelsLast"&&de().getBool("WEBGL_EXP_CONV")){const W=g?tp(g,!0):null,j=new QF(v,_,W,I,A),U=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],P=M();S=n.runWebGLProgram(j,P,"float32",U)}else if(de().getBool("WEBGL_CONV_IM2COL"))S=JF({x:s,filter:o,convInfo:v,backend:n,bias:a,activation:g,preluActivationWeights:i,leakyreluAlpha:y});else{const W=g?tp(g,!1):null,j=new YF(v,_,W,I,A),U=M();S=n.runWebGLProgram(j,U,"float32")}const L=Pe({inputs:{x:S},backend:n,attrs:{shape:v.outShape}});return N.push(S),N.forEach(W=>n.disposeIntermediateTensorInfo(W)),L}const xhe={kernelName:Iw,backendName:"webgl",kernelFunc:vhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:l,pad:c,dilations:f,dimRoundingMode:h,activation:p,leakyreluAlpha:g}=r,y=[];let x=f;x==null&&(x=[1,1]),V(Es(l,x),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${x}'`);const v=Xs(s.shape,o.shape,l,x,c,h,!0),S=de().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,N=p?tp(p,S):null,_=[s,o],I=a!=null,A=i!=null,M=p==="leakyrelu";if(I&&_.push(a),A&&_.push(i),M){const U=n.makeTensorInfo([],"float32",lf(g,"float32"));_.push(U),y.push(U)}let L;S?L=new nL(v,I,N,A,M):L=new tL(v,I,N,A,M);const W=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],j=n.runWebGLProgram(L,_,"float32",W);return y.forEach(U=>n.disposeIntermediateTensorInfo(U)),j}const bhe={kernelName:Ow,backendName:"webgl",kernelFunc:whe};class She{constructor(t,n,r,s){this.sliceDim=t,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const o=Gt(r.length);let a=`
    int index;`;for(let i=0;i<this.sliceDim;i++)a+=`
          index = round(getIndices(coords[0], ${i}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[i]};
          flattenIndex += index * ${this.strides[i]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${a}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Che(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,o=s.shape,a=o[o.length-1],i=_e(r.shape),[l,c,f,h]=wD(r,s),p=Pe({inputs:{x:s},backend:n,attrs:{shape:[c,a]}}),g=Pe({inputs:{x:r},backend:n,attrs:{shape:[_e(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const S=n.readSync(s.dataId),N=n.bufferSync(r),_=kle(S,N,r.dtype,c,a,f,h,r.shape,i);return n.makeTensorInfo(l,r.dtype,_.values)}const y=new She(a,h,[c,f],r.shape),x=n.runWebGLProgram(y,[g,p],g.dtype),v=Pe({inputs:{x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(x),v}const Ehe={kernelName:lO,backendName:"webgl",kernelFunc:Che};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Nhe{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=Gt(this.rank),s=The(t);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function The(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<e.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oL(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,indices:o}=t,{axis:a,batchDims:i}=r,l=Xn(a,s.shape)[0];if(de().get("DEBUG")){const N=n.readSync(o.dataId),_=s.shape[l];for(let I=0;I<N.length;++I){const A=N[I];V(A<=_-1&&A>=0,()=>`GatherV2: the index value ${A} is not in [0, ${_-1}]`)}}const c=pF(s,o,l,i),f=_e(o.shape),h=[],p=Pe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),g=Pe({inputs:{x:o},backend:n,attrs:{shape:[c.batchSize,f/c.batchSize]}});h.push(p),h.push(g);const y=[c.batchSize,c.outerSize,f/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const N=n.bufferSync(g),_=n.bufferSync(p),I=$le(_,N,y);return h.forEach(A=>n.disposeIntermediateTensorInfo(A)),n.makeTensorInfo(c.outputShape,I.dtype,I.values)}const x=new Nhe(p.shape,y),v=n.runWebGLProgram(x,[p,g],p.dtype);h.push(v);const S=Pe({inputs:{x:v},backend:n,attrs:{shape:c.outputShape}});return h.forEach(N=>n.disposeIntermediateTensorInfo(N)),S}const khe={kernelName:iO,backendName:"webgl",kernelFunc:oL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $he="return float(a > b);",_he=`
  return vec4(greaterThan(a, b));
`,Rhe=lr({opSnippet:$he,packedOpSnippet:_he,cpuKernelImpl:_le,dtype:"bool"}),Ihe={kernelName:uO,backendName:"webgl",kernelFunc:Rhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ohe="return float(a >= b);",Ahe=`
  return vec4(greaterThanEqual(a, b));
`,Phe=lr({opSnippet:Ohe,packedOpSnippet:Ahe,dtype:"bool",cpuKernelImpl:Rle}),Dhe={kernelName:cO,backendName:"webgl",kernelFunc:Phe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fhe(e){const{inputs:t,backend:n}=e,{input:r}=t;return sL(r,!0,n)}const Lhe={kernelName:dO,backendName:"webgl",kernelFunc:Fhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mhe="return float(!isnan(x) && !isinf(x));",Bhe=_t({opSnippet:Mhe,dtype:"bool"}),jhe={kernelName:hO,backendName:"webgl",kernelFunc:Bhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uhe="return float(isinf(x));",Whe=_t({opSnippet:Uhe,dtype:"bool"}),Vhe={kernelName:pO,backendName:"webgl",kernelFunc:Whe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zhe="return float(isnan(x));",Ghe=_t({opSnippet:zhe,dtype:"bool"}),Hhe={kernelName:mO,backendName:"webgl",kernelFunc:Ghe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qhe="return float(a < b);",Khe=`
  return vec4(lessThan(a, b));
`,Xhe=lr({opSnippet:qhe,packedOpSnippet:Khe,cpuKernelImpl:Ile,dtype:"bool"}),Yhe={kernelName:yO,backendName:"webgl",kernelFunc:Xhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qhe="return float(a <= b);",Zhe=`
  return vec4(lessThanEqual(a, b));
`,Jhe=lr({opSnippet:Qhe,packedOpSnippet:Zhe,cpuKernelImpl:Ole,dtype:"bool"}),epe={kernelName:vO,backendName:"webgl",kernelFunc:Jhe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tpe(e){const{backend:t,attrs:n}=e,{start:r,stop:s,num:o}=n,a=Ale(r,s,o);return t.makeTensorInfo([a.length],"float32",a)}const npe={kernelName:xO,backendName:"webgl",kernelFunc:tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rpe=yf+`
  return x < 0.0 ? 0./0. : log(x);
`,spe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,ope=_t({opSnippet:rpe,packedOpSnippet:spe,cpuKernelImpl:Ple}),ape={kernelName:wO,backendName:"webgl",kernelFunc:ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ipe=yf+`
  return log(1.0 + x);
`,lpe=_t({opSnippet:ipe}),upe={kernelName:bO,backendName:"webgl",kernelFunc:lpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cpe="return float(a >= 1.0 && b >= 1.0);",dpe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,fpe=lr({opSnippet:cpe,packedOpSnippet:dpe,dtype:"bool"}),hpe={kernelName:SO,backendName:"webgl",kernelFunc:fpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ppe="return float(!(x >= 1.0));",mpe=_t({opSnippet:ppe}),gpe={kernelName:CO,backendName:"webgl",kernelFunc:mpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ype="return float(a >= 1.0 || b >= 1.0);",vpe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,xpe=lr({opSnippet:ype,packedOpSnippet:vpe,dtype:"bool"}),wpe={kernelName:EO,backendName:"webgl",kernelFunc:xpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bpe{constructor(t,n,r,s,o){this.variableNames=["x"],this.outputShape=[];const a=n,i=t[3]-1;this.outputShape=t;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${a}; j <= ${a}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${i}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Spe{constructor(t,n,r,s,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const a=n,i=t[3]-1;this.outputShape=t;let l;const c=`float(${r}) + float(${s}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${a};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${a}; j <= ${a}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${i}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cpe=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:o,bias:a,alpha:i,beta:l}=r,c=de().getBool("WEBGL_PACK_NORMALIZATION")?new Spe(s.shape,o,a,i,l):new bpe(s.shape,o,a,i,l);return n.runWebGLProgram(c,[s],s.dtype)},Epe={kernelName:NO,backendName:"webgl",kernelFunc:Cpe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Npe{constructor(t,n,r,s,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s,y:o,dy:a}=t,{depthRadius:i,bias:l,alpha:c,beta:f}=r,h=new Npe(s.shape,i,l,c,f);return n.runWebGLProgram(h,[s,o,a],s.dtype)},kpe={kernelName:iq,backendName:"webgl",kernelFunc:Tpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $pe(e,t,n,r){const s=_e(t),a=_e(e.shape)/s,i=Pe({inputs:{x:e},attrs:{shape:[a,s]},backend:r}),l=xc(i,e.dtype,"max",r),c=Pe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aL(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reductionIndices:o,keepDims:a}=r,i=s.shape.length,l=Xn(o,s.shape);let c=l;const f=Eo(c,i),h=f!=null,p=n.shouldExecuteOnCPU([s]);let g=s;if(h){if(p){const _=n.texData.get(g.dataId).values,I=new Array(i);for(let L=0;L<I.length;L++)I[L]=s.shape[f[L]];const A=xS(_,s.shape,s.dtype,f,I);g=n.makeTensorInfo(I,s.dtype);const M=n.texData.get(g.dataId);M.values=A}else g=v0(s,f,n);c=No(c.length,i)}ea("max",c,i);const[y,x]=Ma(g.shape,c);let v=y;a&&(v=Ys(y,l));let S;if(p){const _=n.texData.get(g.dataId).values,I=Dle(_,_e(x),v,s.dtype);S=n.makeTensorInfo(v,s.dtype);const A=n.texData.get(S.dataId);A.values=I}else S=$pe(g,x,v,n);return h&&n.disposeIntermediateTensorInfo(g),S}const _pe={kernelName:TO,backendName:"webgl",kernelFunc:aL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rpe=wS+`
  return max(a, b);
`,Ipe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vc+`
  return result;
`,Ope=lr({opSnippet:Rpe,packedOpSnippet:Ipe,cpuKernelImpl:Fle}),Ape={kernelName:kO,backendName:"webgl",kernelFunc:Ope};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ppe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;kp(s,"maxPool");const{filterSize:o,strides:a,pad:i,dimRoundingMode:l}=r,c=1;V(Es(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const f=hc(s.shape,o,a,c,i,l);if(f.filterWidth===1&&f.filterHeight===1&&pn(f.inShape,f.outShape))return Ss({inputs:{x:s},backend:n});const h=new np(f,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const Dpe={kernelName:$O,backendName:"webgl",kernelFunc:Ppe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fpe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dataFormat:l,dimRoundingMode:c}=r,f=[1,1,1],h=Sp(s.shape,o,a,f,i,c,l),p=new SS(h,"max",!1);return n.runWebGLProgram(p,[s],s.dtype)}const Lpe={kernelName:_O,backendName:"webgl",kernelFunc:Fpe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mpe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,r=t.strideWidth,s=t.dilationHeight,o=t.effectiveFilterHeight,a=t.effectiveFilterWidth,i=o-1-t.padInfo.top,l=a-1-t.padInfo.left,c=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${a}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${a} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class Bpe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,r=t.strideHeight,s=t.strideWidth,o=t.dilationDepth,a=t.dilationHeight,i=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=l-1-t.padInfo.front,p=c-1-t.padInfo.top,g=f-1-t.padInfo.left,y=l*c*f-1;this.userCode=`
      const ivec3 pads = ivec3(${h}, ${p}, ${g});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${a}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${i}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${y} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${f} +
                  wR * ${f} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jpe(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,a=o,{filterSize:i,strides:l,pad:c,dimRoundingMode:f}=r,h=[1,1,1],p=Sp(a.shape,i,l,h,c,f),g=new SS(p,"max",!0),y=n.runWebGLProgram(g,[a],a.dtype),x=new Bpe(p),v=n.runWebGLProgram(x,[s,y],a.dtype);return n.disposeIntermediateTensorInfo(y),v}const Upe={kernelName:uq,backendName:"webgl",kernelFunc:jpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wpe(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o,output:a}=t,i=o;kp([o,a],"maxPoolGrad");const{filterSize:l,strides:c,pad:f,dimRoundingMode:h}=r,p=hc(i.shape,l,c,1,f,h),g=!0,y=new np(p,"max",g),x=n.runWebGLProgram(y,[i],i.dtype),v=new Mpe(p),S=n.runWebGLProgram(v,[s,x],i.dtype);return n.disposeIntermediateTensorInfo(x),S}const Vpe={kernelName:lq,backendName:"webgl",kernelFunc:Wpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zpe(e,t,n,r){let s=new np(n,"max",!1);const o=r.runWebGLProgram(s,[e],"float32");s=new np(n,"max",!0,!0,t);const a=r.runWebGLProgram(s,[e],"float32");return[o,a]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe={kernelName:RO,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:s,strides:o,pad:a,includeBatchInIndex:i}=t,l=n;V(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];V(Es(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const f=hc(r.shape,s,o,c,a),[h,p]=zpe(r,i,f,l);return[h,p]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hpe(e,t,n,r){const s=_e(t),a=_e(e.shape)/s,i=Pe({inputs:{x:e},attrs:{shape:[a,s]},backend:r}),l=xc(i,"float32","mean",r),c=Pe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe={kernelName:IO,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{keepDims:s,axis:o}=t,a=n,i=r.shape.length,l=Xn(o,r.shape);let c=l;const f=Eo(c,i),h=f!=null,p=a.shouldExecuteOnCPU([r]),g=[];let y=r;if(h){if(p){const I=a.texData.get(y.dataId).values,A=new Array(i);for(let W=0;W<A.length;W++)A[W]=r.shape[f[W]];const M=xS(I,r.shape,r.dtype,f,A);y=a.makeTensorInfo(A,r.dtype);const L=a.texData.get(y.dataId);L.values=M}else y=v0(r,f,a);g.push(y),c=No(c.length,i)}ea("sum",c,i);const[x,v]=Ma(y.shape,c);let S=x;s&&(S=Ys(x,l));const N=Hpe(y,v,S,a);for(const _ of g)a.disposeIntermediateTensorInfo(_);return N}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kpe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r,i=s.shape.length,l=Xn(o,s.shape);let c=l;const f=Eo(c,i);let h=s;f!=null&&(h=Fr({inputs:{x:s},backend:n,attrs:{perm:f}}),c=No(c.length,s.shape.length)),ea("min",c,i);const[p,g]=Ma(h.shape,c),y=_e(g),x=Pe({inputs:{x:h},backend:n,attrs:{shape:[-1,y]}}),v=xc(x,x.dtype,"min",n);let S;if(a){const N=Ys(p,l);S=Pe({inputs:{x:v},backend:n,attrs:{shape:N}})}else S=Pe({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(v),f!=null&&n.disposeIntermediateTensorInfo(h),S}const Xpe={kernelName:OO,backendName:"webgl",kernelFunc:Kpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype=wS+`
  return min(a, b);
`,Qpe=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+vc+`
  return result;
`,Zpe=lr({opSnippet:Ype,packedOpSnippet:Qpe,cpuKernelImpl:Lle}),Jpe={kernelName:AO,backendName:"webgl",kernelFunc:Zpe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eme{constructor(t,n,r){this.variableNames=["x"],this.outputShape=n.map((f,h)=>f[0]+t[h]+f[1]);const s=t.length,o=Gt(s),a=n.map(f=>f[0]).join(","),i=n.map((f,h)=>f[0]+t[h]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${a};
        int end = ${i};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${a});
      ${o} end = ${o}(${i});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tme{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((y,x)=>y[0]+t[x]+y[1]);const s=t.length,o=Gt(s),a=n.map(y=>y[0]).join(","),i=n.map((y,x)=>y[0]+t[x]).join(","),l=Pr("rc",s),c=Pr("source",s),f=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=r==="reflect"?0:1;let g="";if(s===1){const y=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;g=`
        ${o} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
      `}else{const y=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;g=`
        ${o} rc = outputLoc;
        ${y}
        result[0] = getChannel(getX(${c.join()}), ${h});
        ${l[s-1]} += 1;
        if(${f}) {
          ${y}
          result[1] = getChannel(getX(${c.join()}), ${h});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${y}
          result[2] = getChannel(getX(${c.join()}), ${h});
          ${l[s-1]} += 1;
          if(${f}) {
            ${y}
            result[3] = getChannel(getX(${c.join()}), ${h});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${a});
      const ${o} end = ${o}(${i});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nme=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{paddings:s,mode:o}=n,a=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tme(r.shape,s,o):new eme(r.shape,s,o);return t.runWebGLProgram(a,[r],r.dtype)},rme={kernelName:PO,backendName:"webgl",kernelFunc:nme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme=`if (b == 0.0) return NAN;
  return mod(a, b);`,ome=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+vc+`
  return result;
`,ame=lr({opSnippet:sme,packedOpSnippet:ome}),ime={kernelName:DO,backendName:"webgl",kernelFunc:ame};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lme{constructor(t,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume=`
if (a == b) {
  return 1.0;
};
return a / b;`,cme=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,iL=lr({opSnippet:ume,packedOpSnippet:cme,checkOutOfBounds:!0}),dme={kernelName:qI,backendName:"webgl",kernelFunc:iL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xk="return a - b;",lL=lr({opSnippet:xk,packedOpSnippet:xk,supportsComplex:!0,cpuKernelImpl:sue}),fme={kernelName:LA,backendName:"webgl",kernelFunc:lL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uL(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:o}=r,a=Xn([o],s.shape),i=aL({inputs:{x:s},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=Ys(i.shape,a),c=Pe({inputs:{x:i},backend:n,attrs:{shape:l}}),f=lL({inputs:{a:s,b:c},backend:n}),h=rL({inputs:{x:f},backend:n}),p=x0({inputs:{x:h},backend:n,attrs:{axis:a,keepDims:!1}}),g=Pe({inputs:{x:p},backend:n,attrs:{shape:l}}),y=iL({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),y}const hme={kernelName:NA,backendName:"webgl",kernelFunc:uL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pme(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{numSamples:o,seed:a,normalized:i}=r,l=i?s:uL({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],f=l.shape[1],h=new lme(c,f,o),p=[[a]],g=n.runWebGLProgram(h,[l],"int32",p);return i||n.disposeIntermediateTensorInfo(l),g}const mme={kernelName:FO,backendName:"webgl",kernelFunc:pme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gme=To+`
  return -x;
`,yme=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function vme(e){const{inputs:t,backend:n}=e,{x:r}=t;if(n.shouldExecuteOnCPU([r])){const o=n.texData.get(r.dataId),[a,i]=Ble(o.values,r.shape,r.dtype);return n.makeTensorInfo(i,r.dtype,a)}let s;return de().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new fl(r.shape,yme):s=new ka(r.shape,gme),n.runWebGLProgram(s,[r],r.dtype)}const xme={kernelName:MO,backendName:"webgl",kernelFunc:vme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wme=cD;function bme(e){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l}=r,c=n.readSync(s.dataId),f=n.readSync(o.dataId),{selectedIndices:h}=wme(c,f,a,i,l);return n.makeTensorInfo([h.length],"int32",new Int32Array(h))}const Sme={kernelName:jO,backendName:"webgl",kernelFunc:bme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cme=dD;function Eme(e){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:c}=r,f=n.readSync(s.dataId),h=n.readSync(o.dataId),{selectedIndices:p,validOutputs:g}=Cme(f,h,a,i,l,c);return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([g]))]}const Nme={kernelName:UO,backendName:"webgl",kernelFunc:Eme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tme=fD;function kme(e){zo("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:l,softNmsSigma:c}=r,f=n.readSync(s.dataId),h=n.readSync(o.dataId),p=a,g=i,y=l,x=c,{selectedIndices:v,selectedScores:S}=Tme(f,h,p,g,y,x);return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([S.length],"float32",new Float32Array(S))]}const $me={kernelName:WO,backendName:"webgl",kernelFunc:kme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _me{constructor(t,n,r,s){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rme=e=>{const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{dtype:o,depth:a,onValue:i,offValue:l}=r,c=_e(s.shape),f=new _me(c,a,i,l),h=Pe({inputs:{x:s},backend:n,attrs:{shape:[c]}}),p=n.runWebGLProgram(f,[h],o);n.disposeIntermediateTensorInfo(h);const g=[...s.shape,a],y=Pe({inputs:{x:p},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(p),y},Ime={kernelName:zO,backendName:"webgl",kernelFunc:Rme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ey(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="complex64"){const s=_p({inputs:{input:r},backend:n}),o=Ey({inputs:{x:s},backend:n}),a=w0({inputs:{input:r},backend:n}),i=Ey({inputs:{x:a},backend:n}),l=Fl({inputs:{real:o,imag:i},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return Rp({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const Ome={kernelName:GA,backendName:"webgl",kernelFunc:Ey};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cL(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=_p({inputs:{input:r},backend:n}),o=cL({inputs:{x:s},backend:n}),a=w0({inputs:{input:r},backend:n}),i=Ey({inputs:{x:a},backend:n}),l=Fl({inputs:{real:o,imag:i},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),l}else return Rp({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const Ame={kernelName:VO,backendName:"webgl",kernelFunc:cL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pme(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(t.length===1)return fb({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const o=t[0].shape,a=t[0].dtype;t.forEach(f=>{qs(o,f.shape,"All tensors passed to stack must have matching shapes"),V(a===f.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],l=t.map(f=>{const h=fb({inputs:{input:f},backend:n,attrs:{dim:s}});return i.push(h),h}),c=XF({inputs:l,backend:n,attrs:{axis:s}});return i.forEach(f=>n.disposeIntermediateTensorInfo(f)),c}const Dme={kernelName:GO,backendName:"webgl",kernelFunc:Pme};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Fme{constructor(t,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,f)=>c[0]+t[f]+c[1]);const s=t.length,o=Gt(s),a=n.map(c=>c[0]).join(","),i=n.map((c,f)=>c[0]+t[f]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${a};
        int end = ${i};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${a});
      ${o} end = ${o}(${i});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Lme{constructor(t,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((x,v)=>x[0]+t[v]+x[1]);const s=t.length,o=Gt(s),a=n.map(x=>x[0]).join(","),i=n.map((x,v)=>x[0]+t[v]).join(","),l=Pr("rc",s),c=Pr("source",s),f=`${l[s-1]} < ${this.outputShape[s-1]}`,h=s===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${o} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${f}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${f}) {`],g=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let y="";for(let x=0,v=s===1?2:4;x<v;x++)y+=`
        ${p[x]}
        if (${g}) {
          result[${x}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${x}] = getChannel(getX(${c.join()}), ${h});
        }
      `;y+=s===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${a});
      const ${o} end = ${o}(${i});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${y}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dL=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:o,constantValue:a}=r;if(_e(s.shape)===0){const c=o.map((f,h)=>f[0]+s.shape[h]+f[1]);return Rp({backend:n,attrs:{shape:c,value:a,dtype:s.dtype}})}const i=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Lme(s.shape,o,a):new Fme(s.shape,o,a),l=[[a]];return n.runWebGLProgram(i,[s],s.dtype,l)},Mme={kernelName:HO,backendName:"webgl",kernelFunc:dL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bme=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,jme=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+vc+`
  return result;
`,Ume=lr({opSnippet:Bme,packedOpSnippet:jme}),Wme={kernelName:qO,backendName:"webgl",kernelFunc:Ume};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vme(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r,i=s.shape.length,l=[],c=Xn(o,s.shape);let f=c;const h=Eo(f,i);let p=s;h!=null&&(p=Fr({inputs:{x:s},backend:n,attrs:{perm:h}}),f=No(f.length,i),l.push(p)),ea("prod",f,i);let g;if(n.shouldExecuteOnCPU([p])){const y=n.texData.get(p.dataId).values,{outVals:x,outShape:v,outDtype:S}=Ule(p.shape,p.dtype,y,f);g=n.makeTensorInfo(v,S,x)}else{const[y,x]=Ma(p.shape,f),v=_e(x),S=Pe({inputs:{x:p},backend:n,attrs:{shape:[-1,v]}}),N=V2(s.dtype),_=xc(S,N,"prod",n);g=Pe({inputs:{x:_},backend:n,attrs:{shape:y}}),l.push(S),l.push(_)}if(a){l.push(g);const y=Ys(g.shape,c);g=Pe({inputs:{x:g},backend:n,attrs:{shape:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),g}const zme={kernelName:XO,backendName:"webgl",kernelFunc:Vme};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gme(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:s,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:i}=r,l=s.map(S=>n.readSync(S.dataId)),c=s.map(S=>S.shape),f=n.readSync(o.dataId),h=n.readSync(a.dataId),[p,g,y]=Wle(l,c,f,o.shape,o.dtype,h,a.shape,i),x=p.map(S=>n.makeTensorInfo([S.length],"int32",S)),v=n.makeTensorInfo(y,o.dtype,g);return x.concat([v])}const Hme={kernelName:YO,backendName:"webgl",kernelFunc:Gme};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qme(e){const{inputs:t,backend:n}=e,{starts:r,limits:s,deltas:o}=t,a=n.readSync(r.dataId),i=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,f]=Vle(a,r.shape,r.dtype,i,s.shape,l,o.shape),h=n.makeTensorInfo([c.length],"int32",c),p=n.makeTensorInfo([f.length],r.dtype,f);return[h,p]}const Kme={kernelName:QO,backendName:"webgl",kernelFunc:qme};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xme(e){const{inputs:t,backend:n,attrs:r}=e,{shape:s,values:o,defaultValue:a,rowPartitionTensors:i}=t,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),f=n.readSync(o.dataId),h=n.readSync(a.dataId),p=i.map(v=>n.readSync(v.dataId)),g=i.map(v=>v.shape),[y,x]=zle(c,s.shape,f,o.shape,o.dtype,h,a.shape,p,g,l);return n.makeTensorInfo(y,o.dtype,x)}const Yme={kernelName:ZO,backendName:"webgl",kernelFunc:Xme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fL=e=>{const{backend:t,attrs:n}=e,{start:r,stop:s,step:o,dtype:a}=n,i=Gle(r,s,o,a);return t.makeTensorInfo([i.length],a,i)},Qme={kernelName:JO,backendName:"webgl",kernelFunc:fL};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zme="return 1.0 / x;",Jme=_t({opSnippet:Zme}),ege={kernelName:tA,backendName:"webgl",kernelFunc:Jme};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tge=To+`
  return (x < 0.0) ? 0.0 : x;
`,nge=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,rge=_t({opSnippet:tge,packedOpSnippet:nge}),sge={kernelName:nA,backendName:"webgl",kernelFunc:rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oge=To+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,age=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,ige=_t({opSnippet:oge,packedOpSnippet:age}),lge={kernelName:aA,backendName:"webgl",kernelFunc:ige};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uge{constructor(t,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[a,i,l,c]=t;this.outputShape=[a,n,r,c];const f=[s&&n>1?i-1:i,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${i}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cge{constructor(t,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,l,c]=t;this.outputShape=[a,n,r,c];const f=[s&&n>1?i-1:i,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r];let p;o?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${i}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dge(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:a,size:i}=r,[l,c]=i,f=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new cge(s.shape,l,c,o,a):new uge(s.shape,l,c,o,a);return n.runWebGLProgram(f,[s],"float32")}const fge={kernelName:oA,backendName:"webgl",kernelFunc:dge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hge{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,a,i]=t,l=[r&&a>1?s-1:s,r&&i>1?o-1:o],c=[r&&a>1?a-1:a,r&&i>1?i-1:i],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${i}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pge(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r,i=new hge(o.shape,s.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const mge={kernelName:dq,backendName:"webgl",kernelFunc:pge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gge{constructor(t,n,r,s,o){this.variableNames=["A"],this.outputShape=[];const[a,i,l,c]=t;this.outputShape=[a,n,r,c];const f=[s&&n>1?i-1:i,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;o?g="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":g="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${f[0]/h[0]},
          ${f[1]/h[1]});
      const vec2 inputShapeRC = vec2(${i}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yge{constructor(t,n,r,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[a,i,l,c]=t;this.outputShape=[a,n,r,c];const f=[s&&n>1?i-1:i,s&&r>1?l-1:l],h=[s&&n>1?n-1:n,s&&r>1?r-1:r],p=s?"0.5":"0.0";let g;o?g="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":g="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${f[0]/h[0]},
          ${f[1]/h[1]},
          ${f[1]/h[1]});
      const vec3 inputShapeRC = vec3(${i}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${g};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vge(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:a,size:i}=r,[l,c]=i,f=de().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new yge(s.shape,l,c,o,a):new gge(s.shape,l,c,o,a);return n.runWebGLProgram(f,[s],s.dtype)}const xge={kernelName:sA,backendName:"webgl",kernelFunc:vge};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wge{constructor(t,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,o]=n,[,a,i]=t,l=[r&&a>1?s-1:s,r&&i>1?o-1:o],c=[r&&a>1?a-1:a,r&&i>1?i-1:i],f=l[0]/c[0],h=l[1]/c[1],p=1/f,g=1/h,y=Math.ceil(p)*2+2,x=Math.ceil(g)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${f});
        const float widthScale = float(${h});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${g});

        const int winHeight = int(${y});
        const int winWidth = int(${x});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${a}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${i}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bge(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r,i=new wge(o.shape,s.shape,a);return n.runWebGLProgram(i,[o],o.dtype)}const Sge={kernelName:cq,backendName:"webgl",kernelFunc:bge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Cge{constructor(t,n){this.variableNames=["x"];const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=t,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const s=i=>n.indexOf(i)!==-1&&t[i]!==1?`${t[i]} - coords[${i}] - 1`:`coords[${i}]`,o=t.map((i,l)=>s(l)).join(","),a=Gt(r);this.userCode=`
      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ege{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=t.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=t;const s=Pr("rc",r),o=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,a=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,i=Gt(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${o}){
            result.g = ${c(s.slice())};
          }
          if(${a}) {
            result.b = ${f(s.slice())};
            if(${o}) {
              result.a = ${h(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(y){return p(y)}function c(y){return y[r-1]="("+y[r-1]+" + 1)",p(y)}function f(y){return y[r-2]="("+y[r-2]+" + 1)",p(y)}function h(y){return y[r-1]="("+y[r-1]+" + 1)",y[r-2]="("+y[r-2]+" + 1)",p(y)}function p(y){const x=t.map((N,_)=>g(_,y)),v=x.join(","),S=x.slice(-2).join(",");return`getChannel(getX(${v}), vec2(${S}))`}function g(y,x){return n.indexOf(y)!==-1&&t[y]!==1?`${t[y]} - ${x[y]} - 1`:`${x[y]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nge(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:o}=r,a=s.shape.length,i=Xn(o,s.shape);if(a===0)return Ss({inputs:{x:s},backend:n});const l=de().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ege(s.shape,i):new Cge(s.shape,i);return n.runWebGLProgram(l,[s],s.dtype)}const Tge={kernelName:iA,backendName:"webgl",kernelFunc:Nge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kge{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=t[1],s=t[2];this.outputShape=t;let o="";typeof n=="number"?o=`float outputValue = ${n.toFixed(2)};`:o=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ge={kernelName:qA,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:s,fillValue:o,center:a}=t,i=n,l=new kge(r.shape,o),[c,f]=MD(a,r.shape[1],r.shape[2]),h=[[c,f,Math.sin(s),Math.cos(s)]];return i.runWebGLProgram(l,[r],r.dtype,h)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ge=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,Rge=_t({opSnippet:_ge}),Ige={kernelName:lA,backendName:"webgl",kernelFunc:Rge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oge="return inversesqrt(x);",Age=_t({opSnippet:Oge,cpuKernelImpl:Hle}),Pge={kernelName:uA,backendName:"webgl",kernelFunc:Age};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CS{constructor(t,n,r,s,o,a,i=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;const c=Gt(o.length),f=Gt(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const v=`getDefaultValue(${x})`,S=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${f} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${S};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${y};
              found = true;
            }
          }
          setOutput(mix(${v}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dge{constructor(t,n,r,s,o,a,i=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=a;const c=Gt(o.length),f=Gt(a.length);let h="";r===1?h="i":r===2&&(h="i, j");const p=`getIndices(${h})`;let g="";s===1?g="i":s===2&&(g="i, coords[1]");const y=`getUpdates(${g})`;let x="";l&&(x="coords[0], coords[1]");const v=`getDefaultValue(${x})`,S=n>1?"strides[j]":"strides",N=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${f} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${t}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${S};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${N};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${y};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${v}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fge(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:o}=t,{shape:a}=r,{sliceRank:i,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=u0(o,s,a),p=[h/c,c];if(h===0)return n.makeTensorInfo(a,s.dtype);const g=Pe({inputs:{x:s},backend:n,attrs:{shape:[l,i]}}),y=Pe({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),x=n.makeTensorInfo([],"float32",new Float32Array([0]));let v;de().getBool("WEBGL_PACK")?v=new Dge(l,i,g.shape.length,y.shape.length,f,p):v=new CS(l,i,g.shape.length,y.shape.length,f,p);const S=n.runWebGLProgram(v,[y,g,x],y.dtype),N=Pe({inputs:{x:S},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(S),n.disposeIntermediateTensorInfo(x),N}const Lge={kernelName:cA,backendName:"webgl",kernelFunc:Fge};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mge{constructor(t,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];const o="while (left < right) {",a=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,i=de().getNumber("WEBGL_VERSION")===2?o:a,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${i}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bge(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:s,values:o}=t,{side:a}=r,i=new Mge(s.shape[0],s.shape[1],o.shape[1],a),l=[[s.shape[1]]];return n.runWebGLProgram(i,[s,o],"int32",l)}const jge={kernelName:fA,backendName:"webgl",kernelFunc:Bge};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uge{constructor(t,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,o;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)o="resRC",s="resRC";else{const i=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let f=0;f<n.length;f++)c.push(`${i[f]}`),f<t&&l.push(`${i[f]}`);s=l.join(),o=c.join()}const a=Gt(r);this.userCode=`
      void main() {
        ${a} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wge(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:o}=t,a=new Uge(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(a,[r,s,o],Aa(s.dtype,o.dtype))}const Vge={kernelName:hA,backendName:"webgl",kernelFunc:Wge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zge=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${UD};
  float scale = ${WD};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Gge=_t({opSnippet:zge}),Hge={kernelName:pA,backendName:"webgl",kernelFunc:Gge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qge=yf+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Kge=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Xge=_t({opSnippet:qge,packedOpSnippet:Kge,cpuKernelImpl:Kle}),Yge={kernelName:xA,backendName:"webgl",kernelFunc:Xge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qge=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Zge=_t({opSnippet:Qge}),Jge={kernelName:vA,backendName:"webgl",kernelFunc:Zge};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eye=yf+`
  return sin(x);
`,tye=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${vc}
  return result;
`,nye=_t({opSnippet:eye,packedOpSnippet:tye}),rye={kernelName:gA,backendName:"webgl",kernelFunc:nye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sye=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,oye=_t({opSnippet:sye}),aye={kernelName:yA,backendName:"webgl",kernelFunc:oye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iye=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,lye=_t({opSnippet:iye}),uye={kernelName:wA,backendName:"webgl",kernelFunc:lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cye=e=>{const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,paddings:a}=r;V(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const i=o.reduce((S,N)=>S*N),l=[[0,0]];l.push(...a);for(let S=1+o.length;S<s.shape.length;++S)l.push([0,0]);const c=[],f=dL({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),h=dS(f.shape,o,i,!1),p=fS(h.length,o.length,!1),g=hS(f.shape,o,i,!1),y=Pe({inputs:{x:f},backend:n,attrs:{shape:h}}),x=Fr({inputs:{x:y},backend:n,attrs:{perm:p}}),v=Pe({inputs:{x},backend:n,attrs:{shape:g}});return c.push(f),c.push(y),c.push(x),c.forEach(S=>n.disposeIntermediateTensorInfo(S)),v},dye={kernelName:CA,backendName:"webgl",kernelFunc:cye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fye(e){const{inputs:t,backend:n}=e,{indices:r,values:s,denseShape:o,defaultValue:a}=t;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const i=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(o.dataId),f=n.readSync(a.dataId)[0],[h,p,g,y,x]=Yle(i,r.shape,r.dtype,l,s.dtype,c,f);return[n.makeTensorInfo(p,r.dtype,h),n.makeTensorInfo([p[0]],s.dtype,g),n.makeTensorInfo([y.length],"bool",new Uint8Array(y.map(v=>Number(v)))),n.makeTensorInfo([x.length],r.dtype,new Int32Array(x))]}const hye={kernelName:TA,backendName:"webgl",kernelFunc:fye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pye(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:s,newShape:o}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.readSync(s.dataId)),i=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[c,f,h]=Qle(i,r.shape,r.dtype,a,l);return[n.makeTensorInfo(f,r.dtype,c),n.makeTensorInfo([h.length],o.dtype,new Int32Array(h))]}const mye={kernelName:kA,backendName:"webgl",kernelFunc:pye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gye(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);const a=n.readSync(r.dataId),i=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,f]=FF(a,r.shape,r.dtype,i,l,!0);return n.makeTensorInfo(f,r.dtype,c)}const yye={kernelName:$A,backendName:"webgl",kernelFunc:gye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vye(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);const a=n.readSync(r.dataId),i=n.readSync(s.dataId),l=n.readSync(o.dataId),[c,f]=FF(a,r.shape,r.dtype,i,l);return n.makeTensorInfo(f,r.dtype,c)}const xye={kernelName:_A,backendName:"webgl",kernelFunc:vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wye(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:o,defaultValue:a}=t,{outputShape:i}=r,{sliceRank:l,numUpdates:c,sliceSize:f,strides:h,outputSize:p}=u0(o,s,i),g=!1;if(o.dtype==="string"){const S=n.bufferSync(s),N=n.bufferSync(o),_=Ad(n.readSync(a.dataId)[0]),I=qle(S,N,i,p,f,c,l,h,_,g);return n.makeTensorInfo(i,I.dtype,I.values)}const y=new CS(c,l,s.shape.length,o.shape.length,h,[p,1],g),x=n.runWebGLProgram(y,[o,s,a],o.dtype),v=Pe({inputs:{x},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(x),v}const bye={kernelName:RA,backendName:"webgl",kernelFunc:wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sye(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:o,axis:a}=r,i=Xn(a,s.shape)[0],l=eF(s,o,i),c=s.shape.length,f=new Array(c).fill(0),h=s.shape.slice();return l.map(p=>{const g=[...h];g[i]=p;const y=vf({inputs:{x:s},backend:n,attrs:{begin:f,size:g}});return f[i]+=p,y})}const Cye={kernelName:EA,backendName:"webgl",kernelFunc:Sye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wk="return sqrt(x);",Eye=_t({opSnippet:wk,packedOpSnippet:wk,cpuKernelImpl:Zle}),Nye={kernelName:bA,backendName:"webgl",kernelFunc:Eye};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tye="return x * x;",kye=_t({opSnippet:Tye}),$ye={kernelName:fq,backendName:"webgl",kernelFunc:kye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bk="return (a - b) * (a - b);",_ye=lr({opSnippet:bk,packedOpSnippet:bk}),Rye={kernelName:IA,backendName:"webgl",kernelFunc:_ye};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iye(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const o=n.readSync(s.dataId),a=Fd(o),i=Jle(a,"string",r);return n.makeTensorInfo(s.shape,"string",i)}const Oye={kernelName:OA,backendName:"webgl",kernelFunc:Iye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aye({inputs:e,attrs:t,backend:n}){const{x:r}=e,s=To+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,o=new ka(r.shape,s);return n.runWebGLProgram(o,[r],r.dtype)}const Pye={kernelName:HA,backendName:"webgl",kernelFunc:Aye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dye{constructor(t,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,o=Gt(r.length),a=Gt(r.length);let i="";if(s===1)i="coords * strides + begin";else{let l=0;i=r.map((c,f)=>(l++,r.length===1?`coords * strides[${f}] + begin[${f}]`:`coords[${l-1}] * strides[${f}] + begin[${f}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${t});
      ${o} strides = ${o}(${n});

      void main() {
        ${a} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fye(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,end:a,strides:i,beginMask:l,endMask:c,ellipsisMask:f,newAxisMask:h,shrinkAxisMask:p}=r,{finalShapeSparse:g,finalShape:y,isIdentity:x,sliceDim0:v,isSimpleSlice:S,begin:N,end:_,strides:I}=OD(s.shape,o,a,i,l,c,f,h,p);let A;if(x)A=Pe({inputs:{x:s},backend:n,attrs:{shape:y}});else if(v||S){V(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const L=SD(N,_,I),W=vf({inputs:{x:s},backend:n,attrs:{begin:N,size:L}});A=Pe({inputs:{x:W},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(W)}else if(n.shouldExecuteOnCPU([s])){const W=n.readSync(s.dataId),j=mn(s.shape,s.dtype,W),U=eue(g,j,I,N);A=n.makeTensorInfo(y,s.dtype,U.values)}else{const W=new Dye(N,I,g);A=n.runWebGLProgram(W,[s],s.dtype)}const M=Pe({inputs:{x:A},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(A),M}const Lye={kernelName:AA,backendName:"webgl",kernelFunc:Fye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mye(e){const{inputs:t,backend:n,attrs:r}=e,{separator:s,nGramWidths:o,leftPad:a,rightPad:i,padWidth:l,preserveShortSequences:c}=r,{data:f,dataSplits:h}=t,p=n.readSync(f.dataId),g=n.readSync(h.dataId),[y,x]=tue(p,g,s,o,a,i,l,c);return[n.makeTensorInfo([y.length],"string",y),n.makeTensorInfo(h.shape,"int32",x)]}const Bye={kernelName:PA,backendName:"webgl",kernelFunc:Mye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jye(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:s}=r,{input:o,delimiter:a}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const i=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[c,f,h]=nue(i,l,s),p=f.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",f),n.makeTensorInfo([2],"int32",new Int32Array(h))]}const Uye={kernelName:DA,backendName:"webgl",kernelFunc:jye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wye(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:s}=r,{input:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.readSync(o.dataId),i=rue(a,s);return n.makeTensorInfo(o.shape,"int32",i)}const Vye={kernelName:FA,backendName:"webgl",kernelFunc:Wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zye="return tan(x);",Gye=_t({opSnippet:zye}),Hye={kernelName:MA,backendName:"webgl",kernelFunc:Gye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qye=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,Kye=_t({opSnippet:qye}),Xye={kernelName:BA,backendName:"webgl",kernelFunc:Kye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yye(e){const{inputs:t,backend:n,attrs:r}=e,{tensor:s,indices:o,updates:a}=t,{sliceRank:i,numUpdates:l,sliceSize:c,strides:f,outputSize:h}=u0(a,o,s.shape),p=[h/c,c];if(h===0)return n.makeTensorInfo(s.shape,o.dtype);const g=Pe({inputs:{x:o},backend:n,attrs:{shape:[l,i]}}),y=Pe({inputs:{x:a},backend:n,attrs:{shape:[l,c]}}),x=Pe({inputs:{x:s},backend:n,attrs:{shape:p}}),v=new CS(l,i,g.shape.length,y.shape.length,f,p,!1,!0),S=n.runWebGLProgram(v,[y,g,x],x.dtype),N=Pe({inputs:{x:S},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(S),N}const Qye={kernelName:dA,backendName:"webgl",kernelFunc:Yye};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zye{constructor(t,n){this.variableNames=["A"];const r=new Array(t.length);for(let a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;const s=Gt(this.rank),o=Jye(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}}function Jye(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<e.length;s++)r.push(`imod(${n[s]}, ${e[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hL(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reps:o}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(p=>Ad(p)):l,f=mn(s.shape,s.dtype,c),h=oue(f,o);return n.makeTensorInfo(h.shape,h.dtype,h.values)}const a=new Zye(s.shape,o);return n.runWebGLProgram(a,[s],s.dtype)}const e0e={kernelName:W2,backendName:"webgl",kernelFunc:hL};class t0e{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class n0e{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wu(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function Sk(e){let t=1;for(;t<e;)t*=2;return t}function r0e(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{k:o,sorted:a}=r,i=de().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=de().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,f=c[c.length-1];if(n.shouldExecuteOnCPU([s])||f<i||o>l){const U=n.readSync(s.dataId),[P,X]=aue(U,c,s.dtype,o,a);return[n.makeTensorInfo(P.shape,P.dtype,P.values),n.makeTensorInfo(X.shape,X.dtype,X.values)]}if(o===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(f===1)return[s,Rp({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const h=n.texData.get(s.dataId),p=h!==null&&h.isPacked,g=p?n.unpackTensor(s):s,x=_e(c)/f,v=Pe({inputs:{x:g},attrs:{shape:[x,f]},backend:n});p&&wu(n,g);const S=Sk(o),N=Sk(f);let _=null;const I=()=>_===null?[v,v]:[v,_],A=(U,P,X)=>{const ae=I(),ee=new t0e(X),le=[[f],[_===null?1:0],[Number.NEGATIVE_INFINITY],[U],[P]],we=_;_=n.runWebGLProgram(ee,ae,"int32",le),wu(n,we)};for(let U=1;U<S;U*=2){const P=U*2;for(let X=U;X>=1;X/=2)A(P,X,[x,N])}for(let U=N;U>S;U/=2){const P=I(),X=new n0e([x,U/2]),ee=[[f],[_===null?1:0],[S]],ie=_;_=n.runWebGLProgram(X,P,"int32",ee),wu(n,ie);const le=S/2,we=le*2;for(let te=le;te>=1;te/=2)A(we,te,_.shape)}let M=_;_=vf({inputs:{x:_},backend:n,attrs:{begin:0,size:[x,o]}}),wu(n,M);let L=oL({inputs:{x:v,indices:_},backend:n,attrs:{axis:1,batchDims:1}});wu(n,v);const W=c.slice(0,-1);W.push(o),M=_,_=Pe({inputs:{x:_},attrs:{shape:W},backend:n}),wu(n,M);const j=L;return L=Pe({inputs:{x:L},attrs:{shape:W},backend:n}),wu(n,j),[L,_]}const s0e={kernelName:jA,backendName:"webgl",kernelFunc:r0e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o0e{constructor(t,n,r,s,o,a){this.variableNames=["Image","Transforms"],this.outputShape=a;const i=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${i} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0e(e){const{inputs:t,backend:n,attrs:r}=e,{image:s,transforms:o}=t,{interpolation:a,fillMode:i,fillValue:l,outputShape:c}=r,[f,h,p,g]=s.shape,[y,x]=c??[h,p],v=[f,y,x,g],S=new o0e(h,p,a,i,l,v);return n.runWebGLProgram(S,[s,o],"float32")}const i0e={kernelName:UA,backendName:"webgl",kernelFunc:a0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l0e(e){const{inputs:t,attrs:n,backend:r}=e,{axis:s}=n,{x:o}=t;kp(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const a=r.readSync(o.dataId),{outputValues:i,outputShape:l,indices:c}=iue(a,s,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,i),r.makeTensorInfo([c.length],"int32",c)]}const u0e={kernelName:WA,backendName:"webgl",kernelFunc:l0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c0e(e){const{inputs:t,backend:n,attrs:r}=e,{value:s}=t;let{axis:o}=r;o<0&&(o+=s.shape.length);const a=s,i=a.shape.length,l=s.shape[o],c=new Array(i-1);let f=0;for(let x=0;x<i;x++)x!==o&&(c[f++]=a.shape[x]);const h=[],p=new Array(i).fill(0),g=a.shape.slice();g[o]=1;const y=new Array(l);for(let x=0;x<y.length;x++){p[o]=x;const v=vf({inputs:{x:a},backend:n,attrs:{begin:p,size:g}}),S=Pe({inputs:{x:v},backend:n,attrs:{shape:c}});y[x]=S,h.push(v)}return h.forEach(x=>n.disposeIntermediateTensorInfo(x)),y}const d0e={kernelName:VA,backendName:"webgl",kernelFunc:c0e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f0e{constructor(t,n){this.variableNames=["x","segmentIds"];const r=t.windowSize,s=t.batchSize,o=t.inSize,a=t.numSegments,i=a*Math.ceil(o/r);this.outputShape=[s,i];const l="0.0",c="sumValue",f=Math.floor(r/4)*4,h=r%4,p=`
        sumValue += dot(values, segFilter);
    `;let g="";o%r>0&&(g=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let y="";o%r>0&&(y=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${g}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${y}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${a})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${a})));

        float sumValue = 0.0;

        for (int i = 0; i < ${f}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${f};
        if (${h===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${h===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${h===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0e(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,segmentIds:o}=t,{numSegments:a}=r,i=s.shape.length,l=[];let c=0;const f=Eo([c],i);let h=s;f!=null&&(h=Fr({inputs:{x:s},backend:n,attrs:{perm:f}}),l.push(h),c=No(1,i)[0]);const p=hF(h.shape,c,a),g=_e([h.shape[c]]),y=Pe({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}});l.push(y);const x=V2(s.dtype),v=(I,A,M,L,W)=>{const j=I.shape[0],U=I.shape[1],P=fF(U,W),X={windowSize:P,inSize:U,batchSize:j,numSegments:W},ae=new f0e(X,A),ee=n.compileAndRun(ae,[I,M],L);if(l.push(ee),ee.shape[1]===W)return ee;const ie=fL({backend:n,attrs:{start:0,stop:W,step:1,dtype:"float32"}}),le=hL({inputs:{x:ie},backend:n,attrs:{reps:[U/P]}});return l.push(ie),l.push(le),v(ee,A,le,L,W)},S=v(y,"unsortedSegmentSum",o,x,a),N=Pe({inputs:{x:S},backend:n,attrs:{shape:p}});let _=N;if(f!=null){l.push(N);const I=X2(f);_=Fr({inputs:{x:_},backend:n,attrs:{perm:I}})}return l.forEach(I=>n.disposeIntermediateTensorInfo(I)),_}const p0e={kernelName:zA,backendName:"webgl",kernelFunc:h0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m0e=[Zue,ece,rce,ace,lce,dce,hce,mce,xce,bce,Ece,kce,Rce,Pce,Lce,Bce,Uce,Gce,qce,Xce,Jce,ade,lde,fde,pde,wde,Sde,Tde,Due,_de,Pde,Mde,zde,qde,Xde,Qde,Jde,rfe,afe,ufe,dfe,hfe,mfe,vfe,wfe,Efe,Tfe,_fe,Ofe,Pfe,Mfe,Wfe,Hfe,Xfe,Zfe,Jfe,the,rhe,ohe,ihe,uhe,hhe,ghe,xhe,bhe,Ehe,khe,Ihe,Dhe,Pue,Lhe,Ode,jhe,Vhe,Hhe,Lue,Yhe,epe,npe,ape,upe,hpe,gpe,wpe,Epe,kpe,_pe,Ape,Dpe,Lpe,Upe,Vpe,Gpe,qpe,Xpe,Jpe,rme,ime,mme,jue,xme,Sme,Nme,$me,gde,Ime,Ame,Dme,Mme,Wme,Bue,zme,Hme,Kme,Yme,Qme,yde,dme,ege,sge,lge,Wue,fge,mge,xge,Sge,Tge,$ge,Ige,Pge,Lge,jge,Vge,Hge,Yge,Jge,rye,aye,sde,hme,uye,dye,hye,mye,yye,xye,bye,Cye,Nye,$ye,Rye,Oye,Pye,Lye,Bye,Uye,Vye,fme,Xue,Hye,Xye,Qye,e0e,s0e,i0e,Yue,u0e,d0e,p0e,Ome];for(const e of m0e)mq(e);let gg=null;async function g0e(){if(gg)return gg;const e=xy.MediaPipeHands;return gg=await boe(e,{runtime:"tfjs",modelType:"full",maxHands:1}),gg}const y0e=[4,8,12,16,20],v0e=[3,6,10,14,18],x0e=[2,5,9,13,17],w0e=.01;function pL(e){const{video:t,enabled:n,fps:r=24,holdMs:s=150,smoothWindow:o=5,isMirrored:a}=e,[i,l]=T.useState(null),[c,f]=T.useState(!1),[h,p]=T.useState(),[g,y]=T.useState(0),x=T.useRef(0),[v,S]=T.useState(0),[N,_]=T.useState(0),[I,A]=T.useState(void 0),[M,L]=T.useState(void 0),[W,j]=T.useState(void 0),U=T.useRef(null),P=T.useRef([]),X=T.useRef(0),ae=T.useRef(0),ee=T.useRef(0),ie=(re,ce)=>Math.hypot((re.x??0)-(ce.x??0),(re.y??0)-(ce.y??0)),le=(re,ce)=>({x:(re.x??0)-(ce.x??0),y:(re.y??0)-(ce.y??0),z:(re.z??0)-(ce.z??0)}),we=(re,ce)=>re.x*ce.x+re.y*ce.y+re.z*ce.z,te=re=>Math.hypot(re.x,re.y,re.z),oe=(re,ce)=>{const xe=te(re),Ce=te(ce);return xe===0||Ce===0?-1:we(re,ce)/(xe*Ce)},pe=re=>{if(!re||re.length<21)return;const ce=re[5],xe=re[17];return ie(ce,xe)},Y=(re,ce,xe)=>xe?ie(re,ce)/xe:0,G=(re,ce,xe)=>{const Ce=re[y0e[ce]],ye=re[v0e[ce]],Ee=re[x0e[ce]];if(!Ce||!ye||!Ee||!xe)return!1;const ke=oe(v1,v2)>.7,De=Y(Ce,Ee,xe)>Y(ye,Ee,xe)*1.03;if(ce===0){const Ze=re[0],ht=re[5];if(!Ze||!ht)return!1;const dt=le(ht,Ze),Rt=le(Ce,Ee),Mr=Math.abs(oe(dt,Rt))<.8,Br=Math.hypot(Ce.x-Ee.x,Ce.y-Ee.y),vr=Math.hypot(ye.x-Ee.x,ye.y-Ee.y);return Br>vr*1.01&&Mr}return ke&&De};return T.useEffect(()=>{n&&!i&&g0e().then(re=>{l(re),f(!0)}).catch(re=>{console.error("Failed to load HandDetector:",re),p("Failed to load hand detection model."),f(!1)})},[n,i]),T.useEffect(()=>{if(!n||!i||!c){U.current&&cancelAnimationFrame(U.current),U.current=null,y(0),S(0),_(0),A(void 0),L(void 0),j(void 0),P.current=[],X.current=0,ae.current=0;return}let re=-1,ce;const xe=async()=>{if(t&&t.readyState===4&&!t.paused&&t.currentTime!==re){const Ce=await i.estimateHands(t);if(re=t.currentTime,Ce&&Ce.length>0){const ye=Ce[0],Ee=ye.keypoints;A([Ee]);const ke=pe(Ee);if(!ke||ke<w0e)ee.current&&performance.now()-ee.current>150&&(x.current=0,y(0),j(ke));else{ee.current=performance.now(),j(ke);const De=ye.handedness;L(De?De==="Right":void 0);let Ze=0;for(let ht=0;ht<5;ht++)G(Ee,ht,ke)&&Ze++;x.current=Ze,y(Ze)}}else ee.current&&performance.now()-ee.current>150&&(x.current=0,y(0),A(void 0),L(void 0),j(void 0))}else t&&t.readyState===4||ee.current&&performance.now()-ee.current>150&&(x.current=0,y(0));ce=requestAnimationFrame(xe)};return ce=requestAnimationFrame(xe),U.current=ce,()=>{U.current&&cancelAnimationFrame(U.current),U.current=null}},[n,t,i,c]),T.useEffect(()=>{const re=setInterval(()=>{if(!n||!c)return;P.current.push(x.current),P.current.length>o&&P.current.shift();const ce={};for(const ke of P.current)ce[ke]=(ce[ke]||0)+1;let xe=0,Ce=-1;for(const ke in ce){const De=parseInt(ke,10);ce[De]>Ce&&(Ce=ce[De],xe=De)}S(xe);let ye=0;xe===1?ye=1:xe===2?ye=2:xe>=3&&(ye=3);const Ee=performance.now();ye===X.current?Ee-ae.current>=s&&N!==ye&&_(ye):(X.current=ye,ae.current=Ee)},1e3/r);return()=>clearInterval(re)},[n,c,r,s,o,N]),{pose:N,rawCount:g,count:v,ready:c,error:h,landmarks:I,isRight:M,isMirrored:a,palmWidth:W}}var Bd=typeof self<"u"?self:{};function bu(){throw Error("Invalid UTF8")}function Ck(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let yg,Ox;const b0e=typeof TextDecoder<"u";let S0e;const C0e=typeof TextEncoder<"u";function mL(e){if(C0e)e=(S0e||=new TextEncoder).encode(e);else{let n=0;const r=new Uint8Array(3*e.length);for(let s=0;s<e.length;s++){var t=e.charCodeAt(s);if(t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&s<e.length){const o=e.charCodeAt(++s);if(o>=56320&&o<=57343){t=1024*(t-55296)+o-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}s--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var ES,Ny;e:{for(var Ek=["CLOSURE_FLAGS"],Ax=Bd,Px=0;Px<Ek.length;Px++)if((Ax=Ax[Ek[Px]])==null){Ny=null;break e}Ny=Ax}var sp,Nk=Ny&&Ny[610401301];ES=Nk!=null&&Nk;const Tk=Bd.navigator;function hb(e){return!!ES&&!!sp&&sp.brands.some((({brand:t})=>t&&t.indexOf(e)!=-1))}function yo(e){var t;return(t=Bd.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function ll(){return!!ES&&!!sp&&sp.brands.length>0}function Dx(){return ll()?hb("Chromium"):(yo("Chrome")||yo("CriOS"))&&!(!ll()&&yo("Edge"))||yo("Silk")}function b0(e){return b0[" "](e),e}sp=Tk&&Tk.userAgentData||null,b0[" "]=function(){};var E0e=!ll()&&(yo("Trident")||yo("MSIE"));!yo("Android")||Dx(),Dx(),yo("Safari")&&(Dx()||!ll()&&yo("Coast")||!ll()&&yo("Opera")||!ll()&&yo("Edge")||(ll()?hb("Microsoft Edge"):yo("Edg/"))||ll()&&hb("Opera"));var gL={},$h=null;function N0e(e){const t=e.length;let n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);const r=new Uint8Array(n);let s=0;return(function(o,a){function i(c){for(;l<o.length;){const f=o.charAt(l++),h=$h[f];if(h!=null)return h;if(!/^[\s\xa0]*$/.test(f))throw Error("Unknown base64 encoding at char: "+f)}return c}yL();let l=0;for(;;){const c=i(-1),f=i(0),h=i(64),p=i(64);if(p===64&&c===-1)break;a(c<<2|f>>4),h!=64&&(a(f<<4&240|h>>2),p!=64&&a(h<<6&192|p))}})(e,(function(o){r[s++]=o})),s!==n?r.subarray(0,s):r}function yL(){if(!$h){$h={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const r=e.concat(t[n].split(""));gL[n]=r;for(let s=0;s<r.length;s++){const o=r[s];$h[o]===void 0&&($h[o]=s)}}}}var vL=typeof Uint8Array<"u",xL=!E0e&&typeof btoa=="function";function kk(e){if(!xL){var t;t===void 0&&(t=0),yL(),t=gL[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let l=0,c=0;for(;l<e.length-2;l+=3){var s=e[l],o=e[l+1],a=e[l+2],i=t[s>>2];s=t[(3&s)<<4|o>>4],o=t[(15&o)<<2|a>>6],a=t[63&a],n[c++]=i+s+o+a}switch(i=0,a=r,e.length-l){case 2:a=t[(15&(i=e[l+1]))<<2]||r;case 1:e=e[l],n[c]=t[e>>2]+t[(3&e)<<4|i>>4]+a+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const $k=/[-_.]/g,T0e={"-":"+",_:"/",".":"="};function k0e(e){return T0e[e]||""}function wL(e){if(!xL)return N0e(e);$k.test(e)&&(e=e.replace($k,k0e)),e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function oc(e){return vL&&e!=null&&e instanceof Uint8Array}var jd={};function ac(){return $0e||=new fi(null,jd)}function NS(e){bL(jd);var t=e.g;return(t=t==null||oc(t)?t:typeof t=="string"?wL(t):null)==null?t:e.g=t}var fi=class{h(){return new Uint8Array(NS(this)||0)}constructor(t,n){if(bL(n),this.g=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}};let $0e,_0e;function bL(e){if(e!==jd)throw Error("illegal external caller")}function SL(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function pb(e){return SL(e=Error(e),"warning"),e}function TS(e){if(e!=null){var t=_0e??={},n=t[e]||0;n>=5||(t[e]=n+1,SL(e=Error(),"incident"),(function(r){Bd.setTimeout((()=>{throw r}),0)})(e))}}var S0=typeof Symbol=="function"&&typeof Symbol()=="symbol";function xf(e,t,n=!1){return typeof Symbol=="function"&&typeof Symbol()=="symbol"?n&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t}var R0e=xf("jas",void 0,!0),_k=xf(void 0,"0di"),xh=xf(void 0,"1oa"),Ud=xf(void 0,Symbol()),I0e=xf(void 0,"0actk"),CL=xf(void 0,"8utk");const Xe=S0?R0e:"Ea",EL={Ea:{value:0,configurable:!0,writable:!0,enumerable:!1}},NL=Object.defineProperties;function C0(e,t){S0||Xe in e||NL(e,EL),e[Xe]|=t}function Fn(e,t){S0||Xe in e||NL(e,EL),e[Xe]=t}function wf(e){return C0(e,34),e}function O0e(e,t){Fn(t,-15615&(0|e))}function mb(e,t){Fn(t,-15581&(34|e))}function E0(){return typeof BigInt=="function"}function xs(e){return Array.prototype.slice.call(e)}var kS,Ip={};function N0(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function $S(e,t){if(e!=null){if(typeof e=="string")e=e?new fi(e,jd):ac();else if(e.constructor!==fi)if(oc(e))e=e.length?new fi(new Uint8Array(e),jd):ac();else{if(!t)throw Error();e=void 0}}return e}const Rk=[];function Ll(e){if(2&e)throw Error()}Fn(Rk,55),kS=Object.freeze(Rk);class Ik{constructor(t,n,r){this.g=t,this.h=n,this.l=r}next(){const t=this.g.next();return t.done||(t.value=this.h.call(this.l,t.value)),t}[Symbol.iterator](){return this}}function _S(e){return Ud?e[Ud]:void 0}var A0e=Object.freeze({});function T0(e){return e.Na=!0,e}var P0e=T0((e=>typeof e=="number")),Ok=T0((e=>typeof e=="string")),D0e=T0((e=>typeof e=="boolean")),k0=typeof Bd.BigInt=="function"&&typeof Bd.BigInt(0)=="bigint";function vl(e){var t=e;if(Ok(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(P0e(t)&&!Number.isSafeInteger(t))throw Error(String(t));return k0?BigInt(e):e=D0e(e)?e?"1":"0":Ok(e)?e.trim()||"0":String(e)}var gb=T0((e=>k0?e>=L0e&&e<=B0e:e[0]==="-"?Ak(e,F0e):Ak(e,M0e)));const F0e=Number.MIN_SAFE_INTEGER.toString(),L0e=k0?BigInt(Number.MIN_SAFE_INTEGER):void 0,M0e=Number.MAX_SAFE_INTEGER.toString(),B0e=k0?BigInt(Number.MAX_SAFE_INTEGER):void 0;function Ak(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const r=e[n],s=t[n];if(r>s)return!1;if(r<s)return!0}}const j0e=typeof Uint8Array.prototype.slice=="function";let TL,Xt=0,Nn=0;function Pk(e){const t=e>>>0;Xt=t,Nn=(e-t)/4294967296>>>0}function ic(e){if(e<0){Pk(-e);const[t,n]=AS(Xt,Nn);Xt=t>>>0,Nn=n>>>0}else Pk(e)}function RS(e){const t=TL||=new DataView(new ArrayBuffer(8));t.setFloat32(0,+e,!0),Nn=0,Xt=t.getUint32(0,!0)}function IS(e,t){const n=4294967296*t+(e>>>0);return Number.isSafeInteger(n)?n:op(e,t)}function OS(e,t){const n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=IS(e,t))=="number"?n?-e:e:n?"-"+e:e}function op(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else E0()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+Dk(n)+Dk(e));return n}function Dk(e){return e=String(e),"0000000".slice(e.length)+e}function kL(){var e=Xt,t=Nn;if(2147483648&t)if(E0())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=AS(e,t);e="-"+op(n,r)}else e=op(e,t);return e}function $0(e){if(e.length<16)ic(Number(e));else if(E0())e=BigInt(e),Xt=Number(e&BigInt(4294967295))>>>0,Nn=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");Nn=Xt=0;const n=e.length;for(let r=t,s=(n-t)%6+t;s<=n;r=s,s+=6){const o=Number(e.slice(r,s));Nn*=1e6,Xt=1e6*Xt+o,Xt>=4294967296&&(Nn+=Math.trunc(Xt/4294967296),Nn>>>=0,Xt>>>=0)}if(t){const[r,s]=AS(Xt,Nn);Xt=r,Nn=s}}}function AS(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}const ap=typeof BigInt=="function"?BigInt.asIntN:void 0,U0e=typeof BigInt=="function"?BigInt.asUintN:void 0,xl=Number.isSafeInteger,_0=Number.isFinite,Wd=Math.trunc,W0e=vl(0);function Ml(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function $L(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const V0e=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function ip(e){switch(typeof e){case"bigint":return!0;case"number":return _0(e);case"string":return V0e.test(e);default:return!1}}function bf(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return _0(e)?0|e:void 0}function _L(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return _0(e)?e>>>0:void 0}function Fk(e){if(e[0]==="-")return!1;const t=e.length;return t<20||t===20&&Number(e.substring(0,6))<184467}function RL(e){const t=e.length;return e[0]==="-"?t<20||t===20&&Number(e.substring(0,7))>-922337:t<19||t===19&&Number(e.substring(0,6))<922337}function IL(e){return RL(e)?e:($0(e),kL())}function PS(e){return e=Wd(e),xl(e)||(ic(e),e=OS(Xt,Nn)),e}function OL(e){var t=Wd(Number(e));return xl(t)?String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),IL(e))}function Lk(e){var t=Wd(Number(e));return xl(t)?vl(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),E0()?vl(ap(64,BigInt(e))):vl(IL(e)))}function Mk(e){if(xl(e))e=vl(PS(e));else{if(e=Wd(e),xl(e))e=String(e);else{const t=String(e);RL(t)?e=t:(ic(e),e=kL())}e=vl(e)}return e}function yb(e){return e==null?e:typeof e=="bigint"?(gb(e)?e=Number(e):(e=ap(64,e),e=gb(e)?Number(e):String(e)),e):ip(e)?typeof e=="number"?PS(e):OL(e):void 0}function z0e(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(U0e(64,e));if(ip(e)){if(t==="string")return t=Wd(Number(e)),xl(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),Fk(e)||($0(e),e=op(Xt,Nn))),e;if(t==="number")return(e=Wd(e))>=0&&xl(e)?e:(function(n){if(n<0){ic(n);var r=op(Xt,Nn);return n=Number(r),xl(n)?n:r}return Fk(r=String(n))?r:(ic(n),IS(Xt,Nn))})(e)}}function AL(e){if(typeof e!="string")throw Error();return e}function Sf(e){if(e!=null&&typeof e!="string")throw Error();return e}function Vd(e){return e==null||typeof e=="string"?e:void 0}function DS(e,t,n,r){if(e!=null&&typeof e=="object"&&e.W===Ip)return e;if(!Array.isArray(e))return n?2&r?((e=t[_k])||(wf((e=new t).u),e=t[_k]=e),t=e):t=new t:t=void 0,t;let s=n=0|e[Xe];return s===0&&(s|=32&r),s|=2&r,s!==n&&Fn(e,s),new t(e)}function G0e(e,t,n){if(t)e:{if(!ip(t=e))throw pb("int64");switch(typeof t){case"string":t=Lk(t);break e;case"bigint":t=vl(ap(64,t));break e;default:t=Mk(t)}}else e=typeof(t=e),t=t==null?t:e==="bigint"?vl(ap(64,t)):ip(t)?e==="string"?Lk(t):Mk(t):void 0;return(e=t)==null?n?W0e:void 0:e}function H0e(e){return e}const q0e={};let K0e=(function(){try{return b0(new class extends Map{constructor(){super()}}),!1}catch{return!0}})(),Fx=class{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}};const X0e=K0e?(Object.setPrototypeOf(Fx.prototype,Map.prototype),Object.defineProperties(Fx.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),Fx):class extends Map{constructor(){super()}};function Bk(e){return e}function Lx(e){if(2&e.M)throw Error("Cannot mutate an immutable Map")}var Pa=class extends X0e{constructor(e,t,n=Bk,r=Bk){super();let s=0|e[Xe];s|=64,Fn(e,s),this.M=s,this.I=t,this.S=n,this.X=this.I?Y0e:r;for(let o=0;o<e.length;o++){const a=e[o],i=n(a[0],!1,!0);let l=a[1];t?l===void 0&&(l=null):l=r(a[1],!1,!0,void 0,void 0,s),super.set(i,l)}}La(){var e=t1e;if(this.size!==0)return Array.from(super.entries(),(t=>(t[0]=e(t[0]),t[1]=e(t[1]),t)))}da(e=Q0e){const t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){Lx(this),super.clear()}delete(e){return Lx(this),super.delete(this.S(e,!0,!1))}entries(){if(this.I){var e=super.keys();e=new Ik(e,Z0e,this)}else e=super.entries();return e}values(){if(this.I){var e=super.keys();e=new Ik(e,Pa.prototype.get,this)}else e=super.values();return e}forEach(e,t){this.I?super.forEach(((n,r,s)=>{e.call(t,s.get(r),r,s)})):super.forEach(e,t)}set(e,t){return Lx(this),(e=this.S(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.X(t,!0,!0,this.I,!1,this.M))}Ja(e){const t=this.S(e[0],!1,!0);e=e[1],e=this.I?e===void 0?null:e:this.X(e,!1,!0,void 0,!1,this.M),super.set(t,e)}has(e){return super.has(this.S(e,!1,!1))}get(e){e=this.S(e,!1,!1);const t=super.get(e);if(t!==void 0){var n=this.I;return n?((n=this.X(t,!1,!0,n,this.pa,this.M))!==t&&super.set(e,n),n):t}}[Symbol.iterator](){return this.entries()}};function Y0e(e,t,n,r,s,o){return e=DS(e,r,n,o),s&&(e=O0(e)),e}function Q0e(e){return e}function Z0e(e){return[e,this.get(e)]}let J0e,PL,DL,e1e;function jk(){return J0e||=new Pa(wf([]),void 0,void 0,void 0,q0e)}function vb(e,t,n,r,s){if(e!=null){if(Array.isArray(e)){const o=0|e[Xe];return e.length===0&&1&o?void 0:s&&2&o?e:R0(e,t,n,r!==void 0,s)}return t(e,r)}}function R0(e,t,n,r,s){const o=r||n?0|e[Xe]:0,a=r?!!(32&o):void 0;let i=0;const l=(r=xs(e)).length;for(let y=0;y<l;y++){var c=r[y];if(y===l-1&&N0(c)){var f=t,h=n,p=a,g=s;let x;for(let v in c){const S=vb(c[v],f,h,p,g);S!=null&&((x??={})[v]=S)}c=x}else c=vb(r[y],t,n,a,s);r[y]=c,c!=null&&(i=y+1)}return i<l&&(r.length=i),n&&((e=_S(e))&&(r[Ud]=xs(e)),n(o,r)),r}function t1e(e){return vb(e,FS,void 0,void 0,!1)}function FS(e){switch(typeof e){case"number":return Number.isFinite(e)?e:""+e;case"bigint":return gb(e)?Number(e):""+e;case"boolean":return e?1:0;case"object":if(oc(e))return oc(e)&&TS(CL),kk(e);if(e.W===Ip)return FL(e);if(e instanceof fi){const t=e.g;return t==null?"":typeof t=="string"?t:e.g=kk(t)}return e instanceof Pa?e.La():void 0}return e}function FL(e){var t=e.u;e=R0(t,FS,void 0,void 0,!1);var n=0|t[Xe];if((t=e.length)&&!(512&n)){var r=e[t-1],s=!1;N0(r)?(t--,s=!0):r=void 0;var o=t-(n=512&n?0:-1),a=(PL??H0e)(o,n,e,r);if(r&&(e[t]=void 0),o<a&&r){for(var i in o=!0,r){const l=+i;l<=a?(e[s=l+n]=r[i],t=Math.max(s+1,t),s=!1,delete r[i]):o=!1}o&&(r=void 0)}for(o=t-1;t>0;o=t-1)if((i=e[o])==null)t--,s=!0;else{if(!((o-=n)>=a))break;(r??={})[o]=i,t--,s=!0}s&&(e.length=t),r&&e.push(r)}return e}function wl(e,t,n){return e=LL(e,t[0],t[1],n?1:2),t!==DL&&n&&C0(e,8192),e}function LL(e,t,n,r){if(e==null){var s=96;n?(e=[n],s|=512):e=[],t&&(s=-16760833&s|(1023&t)<<14)}else{if(!Array.isArray(e))throw Error("narr");if(8192&(s=0|e[Xe])||!(64&s)||2&s||TS(I0e),1024&s)throw Error("farr");if(64&s)return e;if(r===1||r===2||(s|=64),n&&(s|=512,n!==e[0]))throw Error("mid");e:{var o=(n=e).length;if(o){var a=o-1;if(N0(r=n[a])){if((a-=t=512&(s|=256)?0:-1)>=1024)throw Error("pvtlmt");for(var i in r)(o=+i)<a&&(n[o+t]=r[i],delete r[i]);s=-16760833&s|(1023&a)<<14;break e}}if(t){if((i=Math.max(t,o-(512&s?0:-1)))>1024)throw Error("spvt");s=-16760833&s|(1023&i)<<14}}}return Fn(e,s),e}function xb(e,t,n=mb){if(e!=null){if(vL&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=0|e[Xe];return 2&r?e:(t&&=r===0||!!(32&r)&&!(64&r||!(16&r)),t?(Fn(e,34|r),4&r&&Object.freeze(e),e):R0(e,xb,4&r?mb:n,!0,!0))}return e.W===Ip?e=2&(r=0|(n=e.u)[Xe])?e:new e.constructor(I0(n,r,!0)):e instanceof Pa&&!(2&e.M)&&(n=wf(e.da(xb)),e=new Pa(n,e.I,e.S,e.X)),e}}function I0(e,t,n){const r=n||2&t?mb:O0e,s=!!(32&t);return e=(function(o,a,i){const l=xs(o);var c=l.length;const f=256&a?l[c-1]:void 0;for(c+=f?-1:0,a=512&a?1:0;a<c;a++)l[a]=i(l[a]);if(f){a=l[a]={};for(const h in f)a[h]=i(f[h])}return(o=_S(o))&&(l[Ud]=xs(o)),l})(e,t,(o=>xb(o,s,r))),C0(e,32|(n?2:0)),e}function O0(e){const t=e.u,n=0|t[Xe];return 2&n?new e.constructor(I0(t,n,!1)):e}function zd(e,t){return $i(e=e.u,0|e[Xe],t)}function $i(e,t,n){if(n===-1)return null;const r=n+(512&t?0:-1),s=e.length-1;return r>=s&&256&t?e[s][n]:r<=s?e[r]:void 0}function Jt(e,t,n){const r=e.u;let s=0|r[Xe];return Ll(s),wn(r,s,t,n),e}function wn(e,t,n,r){const s=512&t?0:-1,o=n+s;var a=e.length-1;return o>=a&&256&t?(e[a][n]=r,t):o<=a?(e[o]=r,t):(r!==void 0&&(n>=(a=t>>14&1023||536870912)?r!=null&&(e[a+s]={[n]:r},Fn(e,t|=256)):e[o]=r),t)}function Ug(e,t){let n=0|(e=e.u)[Xe];const r=$i(e,n,t),s=Ml(r);return s!=null&&s!==r&&wn(e,n,t,s),s}function ML(e){let t=0|(e=e.u)[Xe];const n=$i(e,t,1),r=$S(n,!0);return r!=null&&r!==n&&wn(e,t,1,r),r}function Ou(){return A0e===void 0?2:4}function Au(e,t,n,r,s){const o=e.u,a=2&(e=0|o[Xe])?1:r;s=!!s;let i=0|(r=LS(o,e,t))[Xe];if(!(4&i)){4&i&&(r=xs(r),i=hi(i,e),e=wn(o,e,t,r));let l=0,c=0;for(;l<r.length;l++){const f=n(r[l]);f!=null&&(r[c++]=f)}c<l&&(r.length=c),i=MS(i,e),n=-2049&(20|i),i=n&=-4097,Fn(r,i),2&i&&Object.freeze(r)}return a===1||a===4&&32&i?ui(i)||(s=i,i|=2,i!==s&&Fn(r,i),Object.freeze(r)):(a===2&&ui(i)&&(r=xs(r),i=hi(i,e),i=bl(i,e,s),Fn(r,i),e=wn(o,e,t,r)),ui(i)||(t=i,i=bl(i,e,s),i!==t&&Fn(r,i))),r}function LS(e,t,n){return e=$i(e,t,n),Array.isArray(e)?e:kS}function MS(e,t){return e===0&&(e=hi(e,t)),1|e}function ui(e){return!!(2&e)&&!!(4&e)||!!(1024&e)}function BL(e){e=xs(e);for(let t=0;t<e.length;t++){const n=e[t]=xs(e[t]);Array.isArray(n[1])&&(n[1]=wf(n[1]))}return e}function wb(e,t,n,r){let s=0|(e=e.u)[Xe];Ll(s),wn(e,s,t,(r==="0"?Number(n)===0:n===r)?void 0:n)}function Cf(e,t,n,r){Ll(t);let s=LS(e,t,n);const o=s!==kS;if(64&t||!(8192&t)||!o){const a=o?0|s[Xe]:0;let i=a;(!o||2&i||ui(i)||4&i&&!(32&i))&&(s=xs(s),i=hi(i,t),t=wn(e,t,n,s)),i=-13&MS(i,t),i=bl(r?-17&i:16|i,t,!0),i!==a&&Fn(s,i)}return s}function Mx(e,t){var n=kM;return jS(BS(e=e.u),e,0|e[Xe],n)===t?t:-1}function BS(e){if(S0)return e[xh]??(e[xh]=new Map);if(xh in e)return e[xh];const t=new Map;return Object.defineProperty(e,xh,{value:t}),t}function jL(e,t,n,r){const s=BS(e),o=jS(s,e,t,n);return o!==r&&(o&&(t=wn(e,t,o)),s.set(n,r)),t}function jS(e,t,n,r){let s=e.get(r);if(s!=null)return s;s=0;for(let o=0;o<r.length;o++){const a=r[o];$i(t,n,a)!=null&&(s!==0&&(n=wn(t,n,s)),s=a)}return e.set(r,s),s}function US(e,t,n){let r=0|e[Xe];const s=$i(e,r,n);let o;if(s!=null&&s.W===Ip)return(t=O0(s))!==s&&wn(e,r,n,t),t.u;if(Array.isArray(s)){const a=0|s[Xe];o=2&a?wl(I0(s,a,!1),t,!0):64&a?s:wl(o,t,!0)}else o=wl(void 0,t,!0);return o!==s&&wn(e,r,n,o),o}function UL(e,t,n){let r=0|(e=e.u)[Xe];const s=$i(e,r,n);return(t=DS(s,t,!1,r))!==s&&t!=null&&wn(e,r,n,t),t}function Pt(e,t,n){if((t=UL(e,t,n))==null)return t;let r=0|(e=e.u)[Xe];if(!(2&r)){const s=O0(t);s!==t&&wn(e,r,n,t=s)}return t}function WL(e,t,n,r,s,o,a){e=e.u;var i=!!(2&t);const l=i?1:s;o=!!o,a&&=!i;var c=0|(s=LS(e,t,r))[Xe];if(!(i=!!(4&c))){var f=s,h=t;const p=!!(2&(c=MS(c,t)));p&&(h|=2);let g=!p,y=!0,x=0,v=0;for(;x<f.length;x++){const S=DS(f[x],n,!1,h);if(S instanceof n){if(!p){const N=!!(2&(0|S.u[Xe]));g&&=!N,y&&=N}f[v++]=S}}v<x&&(f.length=v),c|=4,c=y?16|c:-17&c,Fn(f,c=g?8|c:-9&c),p&&Object.freeze(f)}if(a&&!(8&c||!s.length&&(l===1||l===4&&32&c))){for(ui(c)&&(s=xs(s),c=hi(c,t),t=wn(e,t,r,s)),n=s,a=c,f=0;f<n.length;f++)(c=n[f])!==(h=O0(c))&&(n[f]=h);a|=8,Fn(n,a=n.length?-17&a:16|a),c=a}return l===1||l===4&&32&c?ui(c)||(t=c,(c|=!s.length||16&c&&(!i||32&c)?2:1024)!==t&&Fn(s,c),Object.freeze(s)):(l===2&&ui(c)&&(Fn(s=xs(s),c=bl(c=hi(c,t),t,o)),t=wn(e,t,r,s)),ui(c)||(r=c,(c=bl(c,t,o))!==r&&Fn(s,c))),s}function Si(e,t,n){const r=0|e.u[Xe];return WL(e,r,t,n,Ou(),!1,!(2&r))}function nt(e,t,n,r){return r==null&&(r=void 0),Jt(e,n,r)}function Dh(e,t,n,r){r==null&&(r=void 0);e:{let s=0|(e=e.u)[Xe];if(Ll(s),r==null){const o=BS(e);if(jS(o,e,s,n)!==t)break e;o.set(n,0)}else s=jL(e,s,n,t);wn(e,s,t,r)}}function hi(e,t){return-1025&(e=32|(2&t?2|e:-3&e))}function bl(e,t,n){return 32&t&&n||(e&=-33),e}function A0(e,t,n){Ll(0|e.u[Xe]),Au(e,t,Vd,2,!0).push(AL(n))}function Ty(e,t,n,r){const s=0|e.u[Xe];Ll(s),e=WL(e,s,n,t,2,!0),r=r??new n,e.push(r),e[Xe]=2&(0|r.u[Xe])?-9&e[Xe]:-17&e[Xe]}function xo(e,t){return bf(zd(e,t))}function So(e,t){return Vd(zd(e,t))}function $n(e,t){return Ug(e,t)??0}function lp(e,t,n){if(n!=null&&typeof n!="boolean")throw e=typeof n,Error(`Expected boolean but got ${e!="object"?e:n?Array.isArray(n)?"array":e:"null"}: ${n}`);Jt(e,t,n)}function Da(e,t,n){if(n!=null){if(typeof n!="number"||!_0(n))throw pb("int32");n|=0}Jt(e,t,n)}function qe(e,t,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);Jt(e,t,n)}function ky(e,t,n){{const a=e.u;let i=0|a[Xe];if(Ll(i),n==null)wn(a,i,t);else{var r=e=0|n[Xe],s=ui(e),o=s||Object.isFrozen(n);for(s||(e=0),o||(n=xs(n),r=0,e=bl(e=hi(e,i),i,!0),o=!1),e|=21,s=0;s<n.length;s++){const l=n[s],c=AL(l);Object.is(l,c)||(o&&(n=xs(n),r=0,e=bl(e=hi(e,i),i,!0),o=!1),n[s]=c)}e!==r&&(o&&(n=xs(n),e=bl(e=hi(e,i),i,!0)),Fn(n,e)),wn(a,i,t,n)}}}function VL(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function WS(){return Error("Failed to read varint, encoding is invalid.")}function zL(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function VS(e){if(typeof e=="string")return{buffer:wL(e),O:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),O:!1};if(e.constructor===Uint8Array)return{buffer:e,O:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),O:!1};if(e.constructor===fi)return{buffer:NS(e)||new Uint8Array(0),O:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),O:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function zS(e,t){let n,r=0,s=0,o=0;const a=e.h;let i=e.g;do n=a[i++],r|=(127&n)<<o,o+=7;while(o<32&&128&n);for(o>32&&(s|=(127&n)>>4),o=3;o<32&&128&n;o+=7)n=a[i++],s|=(127&n)<<o;if(Bu(e,i),n<128)return t(r>>>0,s>>>0);throw WS()}function GS(e){let t=0,n=e.g;const r=n+10,s=e.h;for(;n<r;){const o=s[n++];if(t|=o,(128&o)==0)return Bu(e,n),!!(127&t)}throw WS()}function _l(e){const t=e.h;let n=e.g,r=t[n++],s=127&r;if(128&r&&(r=t[n++],s|=(127&r)<<7,128&r&&(r=t[n++],s|=(127&r)<<14,128&r&&(r=t[n++],s|=(127&r)<<21,128&r&&(r=t[n++],s|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw WS();return Bu(e,n),s}function Ci(e){return _l(e)>>>0}function bb(e){var t=e.h;const n=e.g,r=t[n],s=t[n+1],o=t[n+2];return t=t[n+3],Bu(e,e.g+4),(r<<0|s<<8|o<<16|t<<24)>>>0}function Sb(e){var t=bb(e);e=2*(t>>31)+1;const n=t>>>23&255;return t&=8388607,n==255?t?NaN:e*(1/0):n==0?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(t+8388608)}function n1e(e){return _l(e)}function Bx(e,t,{aa:n=!1}={}){e.aa=n,t&&(t=VS(t),e.h=t.buffer,e.m=t.O,e.j=0,e.l=e.h.length,e.g=e.j)}function Bu(e,t){if(e.g=t,t>e.l)throw zL(e.l,t)}function GL(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const n=e.g,r=n+t;if(r>e.l)throw zL(t,e.l-n);return e.g=r,n}function HL(e,t){if(t==0)return ac();var n=GL(e,t);return e.aa&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):j0e?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?ac():new fi(n,jd)}Pa.prototype.toJSON=void 0;var Uk=[];function qL(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=Ci(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5))throw VL(n,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=n,!0}function Wg(e){switch(e.h){case 0:e.h!=0?Wg(e):GS(e.g);break;case 1:Bu(e=e.g,e.g+8);break;case 2:if(e.h!=2)Wg(e);else{var t=Ci(e.g);Bu(e=e.g,e.g+t)}break;case 5:Bu(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!qL(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Wg(e)}break;default:throw VL(e.h,e.l)}}function Op(e,t,n){const r=e.g.l,s=Ci(e.g),o=e.g.g+s;let a=o-r;if(a<=0&&(e.g.l=o,n(t,e,void 0,void 0,void 0),a=o-e.g.g),a)throw Error(`Message parsing ended unexpectedly. Expected to read ${s} bytes, instead read ${s-a} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=o,e.g.l=r,t}function HS(e){var t=Ci(e.g),n=GL(e=e.g,t);if(e=e.h,b0e){var r,s=e;(r=Ox)||(r=Ox=new TextDecoder("utf-8",{fatal:!0})),t=n+t,s=n===0&&t===s.length?s:s.subarray(n,t);try{var o=r.decode(s)}catch(i){if(yg===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),yg=!0}catch{yg=!1}}throw!yg&&(Ox=void 0),i}}else{t=(o=n)+t,n=[];let i,l=null;for(;o<t;){var a=e[o++];a<128?n.push(a):a<224?o>=t?bu():(i=e[o++],a<194||(192&i)!=128?(o--,bu()):n.push((31&a)<<6|63&i)):a<240?o>=t-1?bu():(i=e[o++],(192&i)!=128||a===224&&i<160||a===237&&i>=160||(192&(r=e[o++]))!=128?(o--,bu()):n.push((15&a)<<12|(63&i)<<6|63&r)):a<=244?o>=t-2?bu():(i=e[o++],(192&i)!=128||i-144+(a<<28)>>30!=0||(192&(r=e[o++]))!=128||(192&(s=e[o++]))!=128?(o--,bu()):(a=(7&a)<<18|(63&i)<<12|(63&r)<<6|63&s,a-=65536,n.push(55296+(a>>10&1023),56320+(1023&a)))):bu(),n.length>=8192&&(l=Ck(l,n),n.length=0)}o=Ck(l,n)}return o}function KL(e){const t=Ci(e.g);return HL(e.g,t)}function P0(e,t,n){var r=Ci(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var vg=[];function ta(e,t,n){t.g?t.m(e,t.g,t.h,n):t.m(e,t.h,n)}var ze=class{constructor(e,t){this.u=LL(e,t)}toJSON(){try{var e=FL(this)}finally{PL=void 0}return e}l(){var e=M1e;return e.g?e.l(this,e.g,e.h):e.l(this,e.h,e.defaultValue)}clone(){const e=this.u;return new this.constructor(I0(e,0|e[Xe],!1))}O(){return!!(2&(0|this.u[Xe]))}};function Wk(e){return e?/^\d+$/.test(e)?($0(e),new Cb(Xt,Nn)):null:r1e||=new Cb(0,0)}ze.prototype.W=Ip,ze.prototype.toString=function(){return this.u.toString()};var Cb=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let r1e;function Vk(e){return e?/^-?\d+$/.test(e)?($0(e),new Eb(Xt,Nn)):null:s1e||=new Eb(0,0)}var Eb=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let s1e;function Nd(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function Ef(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function D0(e,t){if(t>=0)Ef(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function up(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Gd(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Qs(e,t,n){Ef(e.g,8*t+n)}function qS(e,t){return Qs(e,t,2),t=e.g.end(),Gd(e,t),t.push(e.h),t}function KS(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function F0(e,t,n){Qs(e,t,2),Ef(e.g,n.length),Gd(e,e.g.end()),Gd(e,n)}function $y(e,t,n,r){n!=null&&(t=qS(e,t),r(n,e),KS(e,t))}function na(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var XS=na(),XL=na(),YS=na(),QS=na(),YL=na(),QL=na(),ZS=na(),ZL=na(),JL=na(),Nf=class{constructor(e,t,n){this.g=e,this.h=t,e=XS,this.l=!!e&&n===e||!1}};function L0(e,t){return new Nf(e,t,XS)}function eM(e,t,n,r,s){$y(e,n,sM(t,r),s)}const o1e=L0((function(e,t,n,r,s){return e.h===2&&(Op(e,US(t,r,n),s),!0)}),eM),a1e=L0((function(e,t,n,r,s){return e.h===2&&(Op(e,US(t,r,n),s),!0)}),eM);var M0=Symbol(),JS=Symbol(),zk=Symbol(),Gk=Symbol();let tM,nM;function wc(e,t,n,r){var s=r[e];if(s)return s;(s={}).Ma=r,s.T=(function(h){switch(typeof h){case"boolean":return DL||=[0,void 0,!0];case"number":return h>0?void 0:h===0?e1e||=[0,void 0]:[-h,void 0];case"string":return[0,h];case"object":return h}})(r[0]);var o=r[1];let a=1;o&&o.constructor===Object&&(s.ga=o,typeof(o=r[++a])=="function"&&(s.la=!0,tM??=o,nM??=r[a+1],o=r[a+=2]));const i={};for(;o&&Array.isArray(o)&&o.length&&typeof o[0]=="number"&&o[0]>0;){for(var l=0;l<o.length;l++)i[o[l]]=o;o=r[++a]}for(l=1;o!==void 0;){let h;typeof o=="number"&&(l+=o,o=r[++a]);var c=void 0;if(o instanceof Nf?h=o:(h=o1e,a--),h?.l){o=r[++a],c=r;var f=a;typeof o=="function"&&(o=o(),c[f]=o),c=o}for(f=l+1,typeof(o=r[++a])=="number"&&o<0&&(f-=o,o=r[++a]);l<f;l++){const p=i[l];c?n(s,l,h,c,p):t(s,l,h,p)}}return r[e]=s}function rM(e){return Array.isArray(e)?e[0]instanceof Nf?e:[a1e,e]:[e,void 0]}function sM(e,t){return e instanceof ze?e.u:Array.isArray(e)?wl(e,t,!1):void 0}function eC(e,t,n,r){const s=n.g;e[t]=r?(o,a,i)=>s(o,a,i,r):s}function tC(e,t,n,r,s){const o=n.g;let a,i;e[t]=(l,c,f)=>o(l,c,f,i||=wc(JS,eC,tC,r).T,a||=nC(r),s)}function nC(e){let t=e[zk];if(t!=null)return t;const n=wc(JS,eC,tC,e);return t=n.la?(r,s)=>tM(r,s,n):(r,s)=>{const o=0|r[Xe];for(;qL(s)&&s.h!=4;){var a=s.m,i=n[a];if(i==null){var l=n.ga;l&&(l=l[a])&&(l=i1e(l))!=null&&(i=n[a]=l)}i!=null&&i(s,r,a)||(a=(i=s).l,Wg(i),i.fa?i=void 0:(l=i.g.g-a,i.g.g=a,i=HL(i.g,l)),a=r,i&&((l=a[Ud])?l.push(i):a[Ud]=[i]))}return 8192&o&&wf(r),!0},e[zk]=t}function i1e(e){const t=(e=rM(e))[0].g;if(e=e[1]){const n=nC(e),r=wc(JS,eC,tC,e).T;return(s,o,a)=>t(s,o,a,r,n)}return t}function B0(e,t,n){e[t]=n.h}function j0(e,t,n,r){let s,o;const a=n.h;e[t]=(i,l,c)=>a(i,l,c,o||=wc(M0,B0,j0,r).T,s||=oM(r))}function oM(e){let t=e[Gk];if(!t){const n=wc(M0,B0,j0,e);t=(r,s)=>aM(r,s,n),e[Gk]=t}return t}function aM(e,t,n){(function(r,s,o){const a=512&s?0:-1,i=r.length,l=i+((s=64&s?256&s:!!i&&N0(r[i-1]))?-1:0);for(let c=0;c<l;c++)o(c-a,r[c]);if(s){r=r[i-1];for(const c in r)!isNaN(c)&&o(+c,r[c])}})(e,0|e[Xe]|(n.T[1]?512:0),((r,s)=>{if(s!=null){var o=(function(a,i){var l=a[i];if(l)return l;if((l=a.ga)&&(l=l[i])){var c=(l=rM(l))[0].h;if(l=l[1]){const f=oM(l),h=wc(M0,B0,j0,l).T;l=a.la?nM(h,f):(p,g,y)=>c(p,g,y,h,f)}else l=c;return a[i]=l}})(n,r);o&&o(t,s,r)}})),(e=_S(e))&&(function(r,s){Gd(r,r.g.end());for(let o=0;o<s.length;o++)Gd(r,NS(s[o])||new Uint8Array(0))})(t,e)}function Tf(e,t){if(Array.isArray(t)){var n=0|t[Xe];if(4&n)return t;for(var r=0,s=0;r<t.length;r++){const o=e(t[r]);o!=null&&(t[s++]=o)}return s<r&&(t.length=s),Fn(t,-6145&(5|n)),2&n&&Object.freeze(t),t}}function Zr(e,t,n){return new Nf(e,t,n)}function kf(e,t,n){return new Nf(e,t,n)}function Jr(e,t,n){wn(e,0|e[Xe],t,n)}var l1e=L0((function(e,t,n,r,s){return e.h===2&&(e=Op(e,wl([void 0,void 0],r,!0),s),Ll(r=0|t[Xe]),(s=$i(t,r,n))instanceof Pa?(2&s.M)!=0?((s=s.da()).push(e),wn(t,r,n,s)):s.Ja(e):Array.isArray(s)?(2&(0|s[Xe])&&wn(t,r,n,s=BL(s)),s.push(e)):wn(t,r,n,[e]),!0)}),(function(e,t,n,r,s){if(t instanceof Pa)t.forEach(((o,a)=>{$y(e,n,wl([a,o],r,!1),s)}));else if(Array.isArray(t))for(let o=0;o<t.length;o++){const a=t[o];Array.isArray(a)&&$y(e,n,wl(a,r,!1),s)}}));function iM(e,t,n){if(t=(function(r){if(r==null)return r;const s=typeof r;if(s==="bigint")return String(ap(64,r));if(ip(r)){if(s==="string")return OL(r);if(s==="number")return PS(r)}})(t),t!=null&&(typeof t=="string"&&Vk(t),t!=null))switch(Qs(e,n,0),typeof t){case"number":e=e.g,ic(t),Nd(e,Xt,Nn);break;case"bigint":n=BigInt.asUintN(64,t),n=new Eb(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Nd(e.g,n.h,n.g);break;default:n=Vk(t),Nd(e.g,n.h,n.g)}}function lM(e,t,n){(t=bf(t))!=null&&t!=null&&(Qs(e,n,0),D0(e.g,t))}function uM(e,t,n){(t=$L(t))!=null&&(Qs(e,n,0),e.g.g.push(t?1:0))}function cM(e,t,n){(t=Vd(t))!=null&&F0(e,n,mL(t))}function dM(e,t,n,r,s){$y(e,n,sM(t,r),s)}function fM(e,t,n){t==null||typeof t=="string"||t instanceof fi||(oc(t)?oc(t)&&TS(CL):t=void 0),t!=null&&F0(e,n,VS(t).buffer)}function hM(e,t,n){return(e.h===5||e.h===2)&&(t=Cf(t,0|t[Xe],n,!1),e.h==2?P0(e,Sb,t):t.push(Sb(e.g)),!0)}var ai=Zr((function(e,t,n){if(e.h!==1)return!1;var r=e.g;e=bb(r);const s=bb(r);r=2*(s>>31)+1;const o=s>>>20&2047;return e=4294967296*(1048575&s)+e,Jr(t,n,o==2047?e?NaN:r*(1/0):o==0?5e-324*r*e:r*Math.pow(2,o-1075)*(e+4503599627370496)),!0}),(function(e,t,n){(t=Ml(t))!=null&&(Qs(e,n,1),e=e.g,(n=TL||=new DataView(new ArrayBuffer(8))).setFloat64(0,+t,!0),Xt=n.getUint32(0,!0),Nn=n.getUint32(4,!0),up(e,Xt),up(e,Nn))}),na()),Ln=Zr((function(e,t,n){return e.h===5&&(Jr(t,n,Sb(e.g)),!0)}),(function(e,t,n){(t=Ml(t))!=null&&(Qs(e,n,5),e=e.g,RS(t),up(e,Xt))}),ZS),u1e=kf(hM,(function(e,t,n){if((t=Tf(Ml,t))!=null)for(let a=0;a<t.length;a++){var r=e,s=n,o=t[a];o!=null&&(Qs(r,s,5),r=r.g,RS(o),up(r,Xt))}}),ZS),rC=kf(hM,(function(e,t,n){if((t=Tf(Ml,t))!=null&&t.length){Qs(e,n,2),Ef(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,RS(t[r]),up(n,Xt)}}),ZS),Rl=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,zS(e.g,OS)),!0)}),iM,QL),jx=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,(e=zS(e.g,OS))===0?void 0:e),!0)}),iM,QL),c1e=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,zS(e.g,IS)),!0)}),(function(e,t,n){if((t=z0e(t))!=null&&(typeof t=="string"&&Wk(t),t!=null))switch(Qs(e,n,0),typeof t){case"number":e=e.g,ic(t),Nd(e,Xt,Nn);break;case"bigint":n=BigInt.asUintN(64,t),n=new Cb(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),Nd(e.g,n.h,n.g);break;default:n=Wk(t),Nd(e.g,n.h,n.g)}}),na()),Tn=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,_l(e.g)),!0)}),lM,QS),U0=kf((function(e,t,n){return(e.h===0||e.h===2)&&(t=Cf(t,0|t[Xe],n,!1),e.h==2?P0(e,_l,t):t.push(_l(e.g)),!0)}),(function(e,t,n){if((t=Tf(bf,t))!=null&&t.length){n=qS(e,n);for(let r=0;r<t.length;r++)D0(e.g,t[r]);KS(e,n)}}),QS),gd=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,(e=_l(e.g))===0?void 0:e),!0)}),lM,QS),fn=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,GS(e.g)),!0)}),uM,XL),Td=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,(e=GS(e.g))===!1?void 0:e),!0)}),uM,XL),_r=kf((function(e,t,n){return e.h===2&&(e=HS(e),Cf(t,0|t[Xe],n,!1).push(e),!0)}),(function(e,t,n){if((t=Tf(Vd,t))!=null)for(let a=0;a<t.length;a++){var r=e,s=n,o=t[a];o!=null&&F0(r,s,mL(o))}}),YS),ul=Zr((function(e,t,n){return e.h===2&&(Jr(t,n,(e=HS(e))===""?void 0:e),!0)}),cM,YS),jt=Zr((function(e,t,n){return e.h===2&&(Jr(t,n,HS(e)),!0)}),cM,YS),Hn=(function(e,t,n=XS){return new Nf(e,t,n)})((function(e,t,n,r,s){return e.h===2&&(r=wl(void 0,r,!0),Cf(t,0|t[Xe],n,!0).push(r),Op(e,r,s),!0)}),(function(e,t,n,r,s){if(Array.isArray(t))for(let o=0;o<t.length;o++)dM(e,t[o],n,r,s)})),Bt=L0((function(e,t,n,r,s,o){return e.h===2&&(jL(t,0|t[Xe],o,n),Op(e,t=US(t,r,n),s),!0)}),dM),pM=Zr((function(e,t,n){return e.h===2&&(Jr(t,n,KL(e)),!0)}),fM,ZL),d1e=kf((function(e,t,n){return(e.h===0||e.h===2)&&(t=Cf(t,0|t[Xe],n,!1),e.h==2?P0(e,Ci,t):t.push(Ci(e.g)),!0)}),(function(e,t,n){if((t=Tf(_L,t))!=null)for(let a=0;a<t.length;a++){var r=e,s=n,o=t[a];o!=null&&(Qs(r,s,0),Ef(r.g,o))}}),YL),f1e=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,(e=Ci(e.g))===0?void 0:e),!0)}),(function(e,t,n){(t=_L(t))!=null&&t!=null&&(Qs(e,n,0),Ef(e.g,t))}),YL),Vs=Zr((function(e,t,n){return e.h===0&&(Jr(t,n,_l(e.g)),!0)}),(function(e,t,n){(t=bf(t))!=null&&(t=parseInt(t,10),Qs(e,n,0),D0(e.g,t))}),JL);class h1e{constructor(t,n){this.h=t,this.g=n,this.l=Pt,this.m=nt,this.defaultValue=void 0}register(){b0(this)}}function ra(e,t){return new h1e(e,t)}function Bl(e,t){return(n,r)=>{if(vg.length){const o=vg.pop();o.o(r),Bx(o.g,n,r),n=o}else n=new class{constructor(o,a){if(Uk.length){const i=Uk.pop();Bx(i,o,a),o=i}else o=new class{constructor(i,l){this.h=null,this.m=!1,this.g=this.l=this.j=0,Bx(this,i,l)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.aa=!1}}(o,a);this.g=o,this.l=this.g.g,this.h=this.m=-1,this.o(a)}o({fa:o=!1}={}){this.fa=o}}(n,r);try{const o=new e,a=o.u;nC(t)(a,n);var s=o}finally{n.g.clear(),n.m=-1,n.h=-1,vg.length<100&&vg.push(n)}return s}}function W0(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const a=this.g;return this.g=[],a}}}};aM(this.u,t,wc(M0,B0,j0,e)),Gd(t,t.g.end());const n=new Uint8Array(t.h),r=t.l,s=r.length;let o=0;for(let a=0;a<s;a++){const i=r[a];n.set(i,o),o+=i.length}return t.l=[n],n}}var Hk=class extends ze{constructor(e){super(e)}},qk=[0,ul,Zr((function(e,t,n){return e.h===2&&(Jr(t,n,(e=KL(e))===ac()?void 0:e),!0)}),(function(e,t,n){if(t!=null){if(t instanceof ze){const r=t.Oa;return void(r&&(t=r(t),t!=null&&F0(e,n,VS(t).buffer)))}if(Array.isArray(t))return}fM(e,t,n)}),ZL)];let Ux,Kk=globalThis.trustedTypes;function Xk(e){Ux===void 0&&(Ux=(function(){let n=null;if(!Kk)return n;try{const r=s=>s;n=Kk.createPolicy("goog#html",{createHTML:r,createScript:r,createScriptURL:r})}catch{}return n})());var t=Ux;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function p1e(e,...t){if(t.length===0)return Xk(e[0]);let n=e[0];for(let r=0;r<t.length;r++)n+=encodeURIComponent(t[r])+e[r+1];return Xk(n)}var mM=[0,Tn,Vs,fn,-1,U0,Vs,-1],m1e=class extends ze{constructor(e){super(e)}},gM=[0,fn,jt,fn,Vs,-1,kf((function(e,t,n){return(e.h===0||e.h===2)&&(t=Cf(t,0|t[Xe],n,!1),e.h==2?P0(e,n1e,t):t.push(_l(e.g)),!0)}),(function(e,t,n){if((t=Tf(bf,t))!=null&&t.length){n=qS(e,n);for(let r=0;r<t.length;r++)D0(e.g,t[r]);KS(e,n)}}),JL),jt,-1,[0,fn,-1],Vs,fn,-1],yM=[0,jt,-2],Yk=class extends ze{constructor(e){super(e)}},vM=[0],xM=[0,Tn,fn,1,fn,-3],zs=class extends ze{constructor(e){super(e,2)}},Bn={};Bn[336783863]=[0,jt,fn,-1,Tn,[0,[1,2,3,4,5,6,7,8,9],Bt,vM,Bt,gM,Bt,yM,Bt,xM,Bt,mM,Bt,[0,jt,-2],Bt,[0,jt,Vs],Bt,[0,Vs,jt,-1],Bt,[0,Vs,-1]],[0,jt],fn,[0,[1,3],[2,4],Bt,[0,U0],-1,Bt,[0,_r],-1,Hn,[0,jt,-1]],jt];var Qk=[0,jx,-1,Td,-3,jx,U0,ul,gd,jx,-1,Td,gd,Td,-2,ul];function Zs(e,t){wb(e,2,Sf(t),"")}function en(e,t){A0(e,3,t)}function $t(e,t){A0(e,4,t)}var Yr=class extends ze{constructor(e){super(e,500)}o(e){return nt(this,0,7,e)}},Fh=[-1,{}],Zk=[0,jt,1,Fh],Jk=[0,jt,_r,Fh];function Js(e,t){Ty(e,1,Yr,t)}function on(e,t){A0(e,10,t)}function Lt(e,t){A0(e,15,t)}var Ns=class extends ze{constructor(e){super(e,500)}o(e){return nt(this,0,1001,e)}},wM=[-500,Hn,[-500,ul,-1,_r,-3,[-2,Bn,fn],Hn,qk,gd,-1,Zk,Jk,Hn,[0,ul,Td],ul,Qk,gd,_r,987,_r],4,Hn,[-500,jt,-1,[-1,{}],998,jt],Hn,[-500,jt,_r,-1,[-2,{},fn],997,_r,-1],gd,Hn,[-500,jt,_r,Fh,998,_r],_r,gd,Zk,Jk,Hn,[0,ul,-1,Fh],_r,-2,Qk,ul,-1,Td,[0,Td,f1e],978,Fh,Hn,qk];Ns.prototype.g=W0(wM);var g1e=Bl(Ns,wM),y1e=class extends ze{constructor(e){super(e)}},bM=class extends ze{constructor(e){super(e)}g(){return Si(this,y1e,1)}},SM=[0,Hn,[0,Tn,Ln,jt,-1]],V0=Bl(bM,SM),v1e=class extends ze{constructor(e){super(e)}},x1e=class extends ze{constructor(e){super(e)}},Wx=class extends ze{constructor(e){super(e)}h(){return Pt(this,v1e,2)}g(){return Si(this,x1e,5)}},CM=Bl(class extends ze{constructor(e){super(e)}},[0,_r,U0,rC,[0,Vs,[0,Tn,-3],[0,Ln,-3],[0,Tn,-1,[0,Hn,[0,Tn,-2]]],Hn,[0,Ln,-1,jt,Ln]],jt,-1,Rl,Hn,[0,Tn,Ln],_r,Rl]),EM=class extends ze{constructor(e){super(e)}},kd=Bl(class extends ze{constructor(e){super(e)}},[0,Hn,[0,Ln,-4]]),NM=class extends ze{constructor(e){super(e)}},Ap=Bl(class extends ze{constructor(e){super(e)}},[0,Hn,[0,Ln,-4]]),w1e=class extends ze{constructor(e){super(e)}},b1e=[0,Tn,-1,rC,Vs],TM=class extends ze{constructor(e){super(e)}};TM.prototype.g=W0([0,Ln,-4,Rl]);var S1e=class extends ze{constructor(e){super(e)}},C1e=Bl(class extends ze{constructor(e){super(e)}},[0,Hn,[0,1,Tn,jt,SM],Rl]),e4=class extends ze{constructor(e){super(e)}},E1e=class extends ze{constructor(e){super(e)}ma(){const e=ML(this);return e??ac()}},N1e=class extends ze{constructor(e){super(e)}},kM=[1,2],T1e=Bl(class extends ze{constructor(e){super(e)}},[0,Hn,[0,kM,Bt,[0,rC],Bt,[0,pM],Tn,jt],Rl]),sC=class extends ze{constructor(e){super(e)}},$M=[0,jt,Tn,Ln,_r,-1],t4=class extends ze{constructor(e){super(e)}},k1e=[0,fn,-1],n4=class extends ze{constructor(e){super(e)}},Vg=[1,2,3,4,5],_y=class extends ze{constructor(e){super(e)}g(){return ML(this)!=null}h(){return So(this,2)!=null}},gn=class extends ze{constructor(e){super(e)}g(){return $L(zd(this,2))??!1}},_M=[0,pM,jt,[0,Tn,Rl,-1],[0,c1e,Rl]],Rn=[0,_M,fn,[0,Vg,Bt,xM,Bt,gM,Bt,mM,Bt,vM,Bt,yM],Vs],z0=class extends ze{constructor(e){super(e)}},oC=[0,Rn,Ln,-1,Tn],$1e=ra(502141897,z0);Bn[502141897]=oC;var _1e=Bl(class extends ze{constructor(e){super(e)}},[0,[0,Vs,-1,u1e,d1e],b1e]),RM=class extends ze{constructor(e){super(e)}},IM=class extends ze{constructor(e){super(e)}},aC=[0,Rn,Ln,[0,Rn],fn],OM=[0,Rn,oC,aC,Ln,[0,[0,_M]]],R1e=ra(508968150,IM);Bn[508968150]=OM,Bn[508968149]=aC;var AM=class extends ze{constructor(e){super(e)}},I1e=ra(513916220,AM);Bn[513916220]=[0,Rn,OM,Tn];var ud=class extends ze{constructor(e){super(e)}h(){return Pt(this,sC,2)}g(){Jt(this,2)}},PM=[0,Rn,$M];Bn[478825465]=PM;var O1e=class extends ze{constructor(e){super(e)}},DM=class extends ze{constructor(e){super(e)}},iC=class extends ze{constructor(e){super(e)}},lC=class extends ze{constructor(e){super(e)}},FM=class extends ze{constructor(e){super(e)}},r4=[0,Rn,[0,Rn],PM,-1],LM=[0,Rn,Ln,Tn],uC=[0,Rn,Ln],MM=[0,Rn,LM,uC,Ln],A1e=ra(479097054,FM);Bn[479097054]=[0,Rn,MM,r4],Bn[463370452]=r4,Bn[464864288]=LM;var P1e=ra(462713202,lC);Bn[462713202]=MM,Bn[474472470]=uC;var D1e=class extends ze{constructor(e){super(e)}},BM=class extends ze{constructor(e){super(e)}},jM=class extends ze{constructor(e){super(e)}},UM=class extends ze{constructor(e){super(e)}},cC=[0,Rn,Ln,-1,Tn],Nb=[0,Rn,Ln,fn];UM.prototype.g=W0([0,Rn,uC,[0,Rn],oC,aC,cC,Nb]);var WM=class extends ze{constructor(e){super(e)}},F1e=ra(456383383,WM);Bn[456383383]=[0,Rn,$M];var VM=class extends ze{constructor(e){super(e)}},L1e=ra(476348187,VM);Bn[476348187]=[0,Rn,k1e];var zM=class extends ze{constructor(e){super(e)}},s4=class extends ze{constructor(e){super(e)}},GM=[0,Vs,-1],M1e=ra(458105876,class extends ze{constructor(e){super(e)}g(){var e=this.u;const t=0|e[Xe],n=2&t;return e=(function(r,s,o){var a=s4;const i=2&s;let l=!1;if(o==null){if(i)return jk();o=[]}else if(o.constructor===Pa){if((2&o.M)==0||i)return o;o=o.da()}else Array.isArray(o)?l=!!(2&(0|o[Xe])):o=[];if(i){if(!o.length)return jk();l||(l=!0,wf(o))}else l&&(l=!1,o=BL(o));return l||(64&(0|o[Xe])?o[Xe]&=-33:32&s&&C0(o,32)),wn(r,s,2,a=new Pa(o,a,G0e,void 0)),a})(e,t,$i(e,t,2)),!n&&s4&&(e.pa=!0),e}});Bn[458105876]=[0,GM,l1e,[!0,Rl,[0,jt,-1,_r]]];var dC=class extends ze{constructor(e){super(e)}},HM=ra(458105758,dC);Bn[458105758]=[0,Rn,jt,GM];var qM=class extends ze{constructor(e){super(e)}},B1e=ra(443442058,qM);Bn[443442058]=[0,Rn,jt,Tn,Ln,_r,-1,fn,Ln],Bn[514774813]=cC;var KM=class extends ze{constructor(e){super(e)}},j1e=ra(516587230,KM);function Tb(e,t){return t=t?t.clone():new sC,e.displayNamesLocale!==void 0?Jt(t,1,Sf(e.displayNamesLocale)):e.displayNamesLocale===void 0&&Jt(t,1),e.maxResults!==void 0?Da(t,2,e.maxResults):"maxResults"in e&&Jt(t,2),e.scoreThreshold!==void 0?qe(t,3,e.scoreThreshold):"scoreThreshold"in e&&Jt(t,3),e.categoryAllowlist!==void 0?ky(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&Jt(t,4),e.categoryDenylist!==void 0?ky(t,5,e.categoryDenylist):"categoryDenylist"in e&&Jt(t,5),t}function fC(e,t=-1,n=""){return{categories:e.map((r=>({index:xo(r,1)??0??-1,score:$n(r,2)??0,categoryName:So(r,3)??""??"",displayName:So(r,4)??""??""}))),headIndex:t,headName:n}}function XM(e){var t=Au(e,3,Ml,Ou()),n=Au(e,2,bf,Ou()),r=Au(e,1,Vd,Ou()),s=Au(e,9,Vd,Ou());const o={categories:[],keypoints:[]};for(let a=0;a<t.length;a++)o.categories.push({score:t[a],index:n[a]??-1,categoryName:r[a]??"",displayName:s[a]??""});if((t=Pt(e,Wx,4)?.h())&&(o.boundingBox={originX:xo(t,1)??0,originY:xo(t,2)??0,width:xo(t,3)??0,height:xo(t,4)??0,angle:0}),Pt(e,Wx,4)?.g().length)for(const a of Pt(e,Wx,4).g())o.keypoints.push({x:Ug(a,1)??0,y:Ug(a,2)??0,score:Ug(a,4)??0,label:So(a,3)??""});return o}function G0(e){const t=[];for(const n of Si(e,NM,1))t.push({x:$n(n,1)??0,y:$n(n,2)??0,z:$n(n,3)??0,visibility:$n(n,4)??0});return t}function Lh(e){const t=[];for(const n of Si(e,EM,1))t.push({x:$n(n,1)??0,y:$n(n,2)??0,z:$n(n,3)??0,visibility:$n(n,4)??0});return t}function o4(e){return Array.from(e,(t=>t>127?t-256:t))}function a4(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,r=0,s=0;for(let o=0;o<e.length;o++)n+=e[o]*t[o],r+=e[o]*e[o],s+=t[o]*t[o];if(r<=0||s<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*s)}let xg;Bn[516587230]=[0,Rn,cC,Nb,Ln],Bn[518928384]=Nb;const U1e=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function YM(){if(xg===void 0)try{await WebAssembly.instantiate(U1e),xg=!0}catch{xg=!1}return xg}async function wh(e,t=p1e``){const n=await YM()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${n}.js`,wasmBinaryPath:`${t}/${e}_${n}.wasm`}}var Eu=class{};function QM(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function i4(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((n,r)=>{t.addEventListener("load",(()=>{n()}),!1),t.addEventListener("error",(s=>{r(s)}),!1),document.body.appendChild(t)}))}importScripts(e.toString())}function ZM(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function Ke(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function l4(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,s]=ZM(t);return!e.l||r===e.i.canvas.width&&s===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=s),[r,s]}function u4(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(t.length);for(let s=0;s<t.length;s++)r[s]=e.i.stringToNewUTF8(t[s]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(const s of r)e.i._free(s);e.i._free(t)}function ya(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function sl(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(s,o,a)=>{o?(n(r,a),r=[]):r.push(s)}}Eu.forVisionTasks=function(e){return wh("vision",e)},Eu.forTextTasks=function(e){return wh("text",e)},Eu.forGenAiExperimentalTasks=function(e){return wh("genai_experimental",e)},Eu.forGenAiTasks=function(e){return wh("genai",e)},Eu.forAudioTasks=function(e){return wh("audio",e)},Eu.isSimdSupported=function(){return YM()};async function W1e(e,t,n,r){return e=await(async(s,o,a,i,l)=>{if(o&&await i4(o),!self.ModuleFactory||a&&(await i4(a),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&l&&((o=self.Module).locateFile=l.locateFile,l.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=l.mainScriptUrlOrBlob)),l=await self.ModuleFactory(self.Module||l),self.ModuleFactory=self.Module=void 0,new s(l,i)})(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:s=>s.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&s.endsWith(".data")?n.assetBinaryPath.toString():s}),await e.o(r),e}function Vx(e,t){const n=Pt(e.baseOptions,_y,1)||new _y;typeof t=="string"?(Jt(n,2,Sf(t)),Jt(n,1)):t instanceof Uint8Array&&(Jt(n,1,$S(t,!1)),Jt(n,2)),nt(e.baseOptions,0,1,n)}function c4(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map((n=>n.message)).join(", "))}finally{e.G=[]}}function je(e,t){e.B=Math.max(e.B,t)}function H0(e,t){e.A=new Yr,Zs(e.A,"PassThroughCalculator"),en(e.A,"free_memory"),$t(e.A,"free_memory_unused_out"),on(t,"free_memory"),Js(t,e.A)}function Hd(e,t){en(e.A,t),$t(e.A,t+"_unused_out")}function q0(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var kb=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){if(t){const n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(Pt(this.baseOptions,_y,1)?.g()||Pt(this.baseOptions,_y,1)?.h()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(r,s){let o=Pt(r.baseOptions,n4,3);if(!o){var a=o=new n4,i=new Yk;Dh(a,4,Vg,i)}"delegate"in s&&(s.delegate==="GPU"?(s=o,a=new m1e,Dh(s,2,Vg,a)):(s=o,a=new Yk,Dh(s,4,Vg,a))),nt(r.baseOptions,0,3,o)})(this,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then((r=>{if(r.ok)return r.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${r.status})`)})).then((r=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(r),!0,!1,!1),Vx(this,"/model.dat"),this.m(),this.J()}));if(n.modelAssetBuffer instanceof Uint8Array)Vx(this,n.modelAssetBuffer);else if(n.modelAssetBuffer)return(async function(r){const s=[];for(var o=0;;){const{done:a,value:i}=await r.read();if(a)break;s.push(i),o+=i.length}if(s.length===0)return new Uint8Array(0);if(s.length===1)return s[0];r=new Uint8Array(o),o=0;for(const a of s)r.set(a,o),o+=a.length;return r})(n.modelAssetBuffer).then((r=>{Vx(this,r),this.m(),this.J()}))}return this.m(),this.J(),Promise.resolve()}J(){}ca(){let e;if(this.g.ca((t=>{e=g1e(t)})),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener(((n,r)=>{this.G.push(Error(r))})),this.g.Ha(),this.g.setGraph(e,t),this.A=void 0,c4(this)}finishProcessing(){this.g.finishProcessing(),c4(this)}close(){this.A=void 0,this.g.closeGraph()}};function pi(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}kb.prototype.close=kb.prototype.close;class V1e{constructor(t,n,r,s){this.g=t,this.h=n,this.m=r,this.l=s}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function d4(e,t,n){const r=e.g;if(n=pi(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(e.h,n),n}function f4(e,t){const n=e.g,r=pi(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);const s=pi(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,s),n.enableVertexAttribArray(e.P),n.vertexAttribPointer(e.P,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const o=pi(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.J),n.vertexAttribPointer(e.J,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new V1e(n,r,s,o)}function hC(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function pC(e,t,n,r){return hC(e,t),e.h||(e.m(),e.C()),n?(e.s||(e.s=f4(e,!0)),n=e.s):(e.v||(e.v=f4(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function K0(e,t,n){return hC(e,t),e=pi(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function X0(e,t,n){hC(e,t),e.A||(e.A=pi(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function mC(e){e.g?.bindFramebuffer(e.g.FRAMEBUFFER,null)}var gC=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=pi(e.createProgram(),"Failed to create WebGL program"),this.Z=d4(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.Y=d4(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.P=e.getAttribLocation(this.h,"aVertex"),this.J=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.Z),e.deleteShader(this.Y)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function li(e,t){switch(t){case 0:return e.g.find((n=>n instanceof Uint8Array));case 1:return e.g.find((n=>n instanceof Float32Array));case 2:return e.g.find((n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function $b(e){var t=li(e,1);if(!t){if(t=li(e,0))t=new Float32Array(t).map((r=>r/255));else{t=new Float32Array(e.width*e.height);const r=qd(e);var n=yC(e);if(X0(n,r,JM(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let s=0,o=0;s<t.length;++s,o+=4)t[s]=n[o]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function JM(e){let t=li(e,2);if(!t){const n=qd(e);t=t6(e);const r=$b(e),s=e6(e);n.texImage2D(n.TEXTURE_2D,0,s,e.width,e.height,0,n.RED,n.FLOAT,r),_b(e)}return t}function qd(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=pi(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function e6(e){if(e=qd(e),!wg)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))wg=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");wg=e.R16F}return wg}function yC(e){return e.l||(e.l=new gC),e.l}function t6(e){const t=qd(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=li(e,2);return n||(n=K0(yC(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function _b(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var wg,er=class{constructor(e,t,n,r,s,o,a){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=s,this.width=o,this.height=a,this.j&&--h4===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Da(){return!!li(this,0)}ja(){return!!li(this,1)}R(){return!!li(this,2)}ia(){return(t=li(e=this,0))||(t=$b(e),t=new Uint8Array(t.map((n=>255*n))),e.g.push(t)),t;var e,t}ha(){return $b(this)}N(){return JM(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const r=qd(this),s=yC(this);r.activeTexture(r.TEXTURE1),n=K0(s,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);const o=e6(this);r.texImage2D(r.TEXTURE_2D,0,o,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),X0(s,r,n),pC(s,r,!1,(()=>{t6(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),_b(this)})),mC(s),_b(this)}}e.push(n)}return new er(e,this.m,this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&qd(this).deleteTexture(li(this,2)),h4=-1}};er.prototype.close=er.prototype.close,er.prototype.clone=er.prototype.clone,er.prototype.getAsWebGLTexture=er.prototype.N,er.prototype.getAsFloat32Array=er.prototype.ha,er.prototype.getAsUint8Array=er.prototype.ia,er.prototype.hasWebGLTexture=er.prototype.R,er.prototype.hasFloat32Array=er.prototype.ja,er.prototype.hasUint8Array=er.prototype.Da;var h4=250;function Ca(e,t){switch(t){case 0:return e.g.find((n=>n instanceof ImageData));case 1:return e.g.find((n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap));case 2:return e.g.find((n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function n6(e){var t=Ca(e,0);if(!t){t=Kd(e);const n=Y0(e),r=new Uint8Array(e.width*e.height*4);X0(n,t,zg(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),mC(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function zg(e){let t=Ca(e,2);if(!t){const n=Kd(e);t=Gg(e);const r=Ca(e,1)||n6(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),_h(e)}return t}function Kd(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=pi(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function Y0(e){return e.l||(e.l=new gC),e.l}function Gg(e){const t=Kd(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=Ca(e,2);return n||(n=K0(Y0(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function _h(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function p4(e){const t=Kd(e);return pC(Y0(e),t,!0,(()=>(function(n,r){const s=n.canvas;if(s.width===n.width&&s.height===n.height)return r();const o=s.width,a=s.height;return s.width=n.width,s.height=n.height,n=r(),s.width=o,s.height=a,n})(e,(()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))))}var tr=class{constructor(e,t,n,r,s,o,a){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=s,this.width=o,this.height=a,(this.j||this.m)&&--m4===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ca(){return!!Ca(this,0)}ka(){return!!Ca(this,1)}R(){return!!Ca(this,2)}Aa(){return n6(this)}za(){var e=Ca(this,1);return e||(zg(this),Gg(this),e=p4(this),_h(this),this.g.push(e),this.j=!0),e}N(){return zg(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const r=Kd(this),s=Y0(this);r.activeTexture(r.TEXTURE1),n=K0(s,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),X0(s,r,n),pC(s,r,!1,(()=>{Gg(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),_h(this)})),mC(s),_h(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);zg(this),Gg(this),n=p4(this),_h(this)}e.push(n)}return new tr(e,this.ka(),this.R(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Ca(this,1).close(),this.m&&Kd(this).deleteTexture(Ca(this,2)),m4=-1}};tr.prototype.close=tr.prototype.close,tr.prototype.clone=tr.prototype.clone,tr.prototype.getAsWebGLTexture=tr.prototype.N,tr.prototype.getAsImageBitmap=tr.prototype.za,tr.prototype.getAsImageData=tr.prototype.Aa,tr.prototype.hasWebGLTexture=tr.prototype.R,tr.prototype.hasImageBitmap=tr.prototype.ka,tr.prototype.hasImageData=tr.prototype.Ca;var m4=250;function sa(...e){return e.map((([t,n])=>({start:t,end:n})))}const z1e=(function(e){return class extends e{Ha(){this.i._registerModelResourcesGraphService()}}})((g4=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:QM()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,s){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),Ke(this,r||"input_audio",(o=>{Ke(this,s=s||"audio_header",(a=>{this.i._configureAudio(o,a,e,t??0,n)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}ca(e){ya(this,"__graph_config__",(t=>{e(t)})),Ke(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,s){const o=4*e.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(e,this.g/4),Ke(this,r,(a=>{this.i._addAudioToInputStream(this.g,t,n,a,s)}))}addGpuBufferToStream(e,t,n){Ke(this,t,(r=>{const[s,o]=l4(this,e,r);this.i._addBoundTextureToStream(r,s,o,n)}))}addBoolToStream(e,t,n){Ke(this,t,(r=>{this.i._addBoolToInputStream(e,r,n)}))}addDoubleToStream(e,t,n){Ke(this,t,(r=>{this.i._addDoubleToInputStream(e,r,n)}))}addFloatToStream(e,t,n){Ke(this,t,(r=>{this.i._addFloatToInputStream(e,r,n)}))}addIntToStream(e,t,n){Ke(this,t,(r=>{this.i._addIntToInputStream(e,r,n)}))}addUintToStream(e,t,n){Ke(this,t,(r=>{this.i._addUintToInputStream(e,r,n)}))}addStringToStream(e,t,n){Ke(this,t,(r=>{Ke(this,e,(s=>{this.i._addStringToInputStream(s,r,n)}))}))}addStringRecordToStream(e,t,n){Ke(this,t,(r=>{u4(this,Object.keys(e),(s=>{u4(this,Object.values(e),(o=>{this.i._addFlatHashMapToInputStream(s,o,Object.keys(e).length,r,n)}))}))}))}addProtoToStream(e,t,n,r){Ke(this,n,(s=>{Ke(this,t,(o=>{const a=this.i._malloc(e.length);this.i.HEAPU8.set(e,a),this.i._addProtoToInputStream(a,e.length,o,s,r),this.i._free(a)}))}))}addEmptyPacketToStream(e,t){Ke(this,e,(n=>{this.i._addEmptyPacketToInputStream(n,t)}))}addBoolVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateBoolVector(e.length);if(!s)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(s,o);this.i._addBoolVectorToInputStream(s,r,n)}))}addDoubleVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateDoubleVector(e.length);if(!s)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(s,o);this.i._addDoubleVectorToInputStream(s,r,n)}))}addFloatVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateFloatVector(e.length);if(!s)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(s,o);this.i._addFloatVectorToInputStream(s,r,n)}))}addIntVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateIntVector(e.length);if(!s)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(s,o);this.i._addIntVectorToInputStream(s,r,n)}))}addUintVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateUintVector(e.length);if(!s)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(s,o);this.i._addUintVectorToInputStream(s,r,n)}))}addStringVectorToStream(e,t,n){Ke(this,t,(r=>{const s=this.i._allocateStringVector(e.length);if(!s)throw Error("Unable to allocate new string vector on heap.");for(const o of e)Ke(this,o,(a=>{this.i._addStringVectorEntry(s,a)}));this.i._addStringVectorToInputStream(s,r,n)}))}addBoolToInputSidePacket(e,t){Ke(this,t,(n=>{this.i._addBoolToInputSidePacket(e,n)}))}addDoubleToInputSidePacket(e,t){Ke(this,t,(n=>{this.i._addDoubleToInputSidePacket(e,n)}))}addFloatToInputSidePacket(e,t){Ke(this,t,(n=>{this.i._addFloatToInputSidePacket(e,n)}))}addIntToInputSidePacket(e,t){Ke(this,t,(n=>{this.i._addIntToInputSidePacket(e,n)}))}addUintToInputSidePacket(e,t){Ke(this,t,(n=>{this.i._addUintToInputSidePacket(e,n)}))}addStringToInputSidePacket(e,t){Ke(this,t,(n=>{Ke(this,e,(r=>{this.i._addStringToInputSidePacket(r,n)}))}))}addProtoToInputSidePacket(e,t,n){Ke(this,n,(r=>{Ke(this,t,(s=>{const o=this.i._malloc(e.length);this.i.HEAPU8.set(e,o),this.i._addProtoToInputSidePacket(o,e.length,s,r),this.i._free(o)}))}))}addBoolVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const s of e)this.i._addBoolVectorEntry(r,s);this.i._addBoolVectorToInputSidePacket(r,n)}))}addDoubleVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const s of e)this.i._addDoubleVectorEntry(r,s);this.i._addDoubleVectorToInputSidePacket(r,n)}))}addFloatVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const s of e)this.i._addFloatVectorEntry(r,s);this.i._addFloatVectorToInputSidePacket(r,n)}))}addIntVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const s of e)this.i._addIntVectorEntry(r,s);this.i._addIntVectorToInputSidePacket(r,n)}))}addUintVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const s of e)this.i._addUintVectorEntry(r,s);this.i._addUintVectorToInputSidePacket(r,n)}))}addStringVectorToInputSidePacket(e,t){Ke(this,t,(n=>{const r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const s of e)Ke(this,s,(o=>{this.i._addStringVectorEntry(r,o)}));this.i._addStringVectorToInputSidePacket(r,n)}))}attachBoolListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachBoolListener(n)}))}attachBoolVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachBoolVectorListener(n)}))}attachIntListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachIntListener(n)}))}attachIntVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachIntVectorListener(n)}))}attachUintListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachUintListener(n)}))}attachUintVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachUintVectorListener(n)}))}attachDoubleListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachDoubleListener(n)}))}attachDoubleVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachDoubleVectorListener(n)}))}attachFloatListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachFloatListener(n)}))}attachFloatVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachFloatVectorListener(n)}))}attachStringListener(e,t){ya(this,e,t),Ke(this,e,(n=>{this.i._attachStringListener(n)}))}attachStringVectorListener(e,t){sl(this,e,t),Ke(this,e,(n=>{this.i._attachStringVectorListener(n)}))}attachProtoListener(e,t,n){ya(this,e,t),Ke(this,e,(r=>{this.i._attachProtoListener(r,n||!1)}))}attachProtoVectorListener(e,t,n){sl(this,e,t),Ke(this,e,(r=>{this.i._attachProtoVectorListener(r,n||!1)}))}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),ya(this,e,((r,s)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),t(r,s)})),Ke(this,e,(r=>{this.i._attachAudioListener(r,n||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends g4{get ea(){return this.i}oa(e,t,n){Ke(this,t,(r=>{const[s,o]=l4(this,e,r);this.ea._addBoundTextureAsImageToStream(r,s,o,n)}))}V(e,t){ya(this,e,t),Ke(this,e,(n=>{this.ea._attachImageListener(n)}))}ba(e,t){sl(this,e,t),Ke(this,e,(n=>{this.ea._attachImageVectorListener(n)}))}}));var g4,ko=class extends z1e{};async function kt(e,t,n){return(async function(r,s,o,a){return W1e(r,s,o,a)})(e,n.canvas??(QM()?void 0:document.createElement("canvas")),t,n)}function r6(e,t,n,r){if(e.U){const o=new TM;if(n?.regionOfInterest){if(!e.na)throw Error("This task doesn't support region-of-interest.");var s=n.regionOfInterest;if(s.left>=s.right||s.top>=s.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(s.left<0||s.top<0||s.right>1||s.bottom>1)throw Error("Expected RectF values to be in [0,1].");qe(o,1,(s.left+s.right)/2),qe(o,2,(s.top+s.bottom)/2),qe(o,4,s.right-s.left),qe(o,3,s.bottom-s.top)}else qe(o,1,.5),qe(o,2,.5),qe(o,4,1),qe(o,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error("Expected rotation to be a multiple of 90°.");if(qe(o,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){const[a,i]=ZM(t);n=$n(o,3)*i/a,s=$n(o,4)*a/i,qe(o,4,n),qe(o,3,s)}}e.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",e.U,r)}e.g.oa(t,e.Z,r??performance.now()),e.finishProcessing()}function $o(e,t,n){if(e.baseOptions?.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");r6(e,t,n,e.B+1)}function Ba(e,t,n,r){if(!e.baseOptions?.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");r6(e,t,n,r)}function Xd(e,t,n,r){var s=t.data;const o=t.width,a=o*(t=t.height);if((s instanceof Uint8Array||s instanceof Float32Array)&&s.length!==a)throw Error("Unsupported channel count: "+s.length/a);return e=new er([s],n,!1,e.g.i.canvas,e.P,o,t),r?e.clone():e}var Cs=class extends kb{constructor(e,t,n,r){super(e),this.g=e,this.Z=t,this.U=n,this.na=r,this.P=new gC}l(e,t=!0){if("runningMode"in e&&lp(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.P.close(),super.close()}};Cs.prototype.close=Cs.prototype.close;var fo=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},nt(e=this.h=new z0,0,1,t=new gn),qe(this.h,2,.5),qe(this.h,3,.3)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&qe(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&qe(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},$o(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},Ba(this,e,n,t),this.j}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect_in"),Lt(e,"detections");const t=new zs;ta(t,$1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect_in"),$t(n,"DETECTIONS:detections"),n.o(t),Js(e,n),this.g.attachProtoVectorListener("detections",((r,s)=>{for(const o of r)r=CM(o),this.j.detections.push(XM(r));je(this,s)})),this.g.attachEmptyPacketListener("detections",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};fo.prototype.detectForVideo=fo.prototype.F,fo.prototype.detect=fo.prototype.D,fo.prototype.setOptions=fo.prototype.o,fo.createFromModelPath=async function(e,t){return kt(fo,e,{baseOptions:{modelAssetPath:t}})},fo.createFromModelBuffer=function(e,t){return kt(fo,e,{baseOptions:{modelAssetBuffer:t}})},fo.createFromOptions=function(e,t){return kt(fo,e,t)};var vC=sa([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),xC=sa([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),wC=sa([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),s6=sa([474,475],[475,476],[476,477],[477,474]),bC=sa([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),SC=sa([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),o6=sa([469,470],[470,471],[471,472],[472,469]),CC=sa([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),a6=[...vC,...xC,...wC,...bC,...SC,...CC],i6=sa([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function y4(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var En=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,nt(e=this.h=new IM,0,1,t=new gn),this.v=new RM,nt(this.h,0,3,this.v),this.s=new z0,nt(this.h,0,2,this.s),Da(this.s,4,1),qe(this.s,2,.5),qe(this.v,2,.5),qe(this.h,4,.5)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return"numFaces"in e&&Da(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&qe(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&qe(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&qe(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return y4(this),$o(this,e,t),this.j}F(e,t,n){return y4(this),Ba(this,e,n,t),this.j}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"face_landmarks");const t=new zs;ta(t,R1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),Js(e,n),this.g.attachProtoVectorListener("face_landmarks",((r,s)=>{for(const o of r)r=Ap(o),this.j.faceLandmarks.push(G0(r));je(this,s)})),this.g.attachEmptyPacketListener("face_landmarks",(r=>{je(this,r)})),this.outputFaceBlendshapes&&(Lt(e,"blendshapes"),$t(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((r,s)=>{if(this.outputFaceBlendshapes)for(const o of r)r=V0(o),this.j.faceBlendshapes.push(fC(r.g()??[]));je(this,s)})),this.g.attachEmptyPacketListener("blendshapes",(r=>{je(this,r)}))),this.outputFacialTransformationMatrixes&&(Lt(e,"face_geometry"),$t(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((r,s)=>{if(this.outputFacialTransformationMatrixes)for(const o of r)(r=Pt(_1e(o),w1e,2))&&this.j.facialTransformationMatrixes.push({rows:xo(r,1)??0??0,columns:xo(r,2)??0??0,data:Au(r,3,Ml,Ou()).slice()??[]});je(this,s)})),this.g.attachEmptyPacketListener("face_geometry",(r=>{je(this,r)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};En.prototype.detectForVideo=En.prototype.F,En.prototype.detect=En.prototype.D,En.prototype.setOptions=En.prototype.o,En.createFromModelPath=function(e,t){return kt(En,e,{baseOptions:{modelAssetPath:t}})},En.createFromModelBuffer=function(e,t){return kt(En,e,{baseOptions:{modelAssetBuffer:t}})},En.createFromOptions=function(e,t){return kt(En,e,t)},En.FACE_LANDMARKS_LIPS=vC,En.FACE_LANDMARKS_LEFT_EYE=xC,En.FACE_LANDMARKS_LEFT_EYEBROW=wC,En.FACE_LANDMARKS_LEFT_IRIS=s6,En.FACE_LANDMARKS_RIGHT_EYE=bC,En.FACE_LANDMARKS_RIGHT_EYEBROW=SC,En.FACE_LANDMARKS_RIGHT_IRIS=o6,En.FACE_LANDMARKS_FACE_OVAL=CC,En.FACE_LANDMARKS_CONTOURS=a6,En.FACE_LANDMARKS_TESSELATION=i6;var va=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!0),nt(e=this.j=new AM,0,1,t=new gn)}get baseOptions(){return Pt(this.j,gn,1)}set baseOptions(e){nt(this.j,0,1,e)}o(e){return super.l(e)}Ka(e,t,n){const r=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:n,$o(this,e,r??{}),!this.h)return this.s}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"stylized_image");const t=new zs;ta(t,I1e,this.j);const n=new Yr;Zs(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),Js(e,n),this.g.V("stylized_image",((r,s)=>{var o=!this.h,a=r.data,i=r.width;const l=i*(r=r.height);if(a instanceof Uint8Array)if(a.length===3*l){const c=new Uint8ClampedArray(4*l);for(let f=0;f<l;++f)c[4*f]=a[3*f],c[4*f+1]=a[3*f+1],c[4*f+2]=a[3*f+2],c[4*f+3]=255;a=new ImageData(c,i,r)}else{if(a.length!==4*l)throw Error("Unsupported channel count: "+a.length/l);a=new ImageData(new Uint8ClampedArray(a.buffer,a.byteOffset,a.length),i,r)}else if(!(a instanceof WebGLTexture))throw Error(`Unsupported format: ${a.constructor.name}`);i=new tr([a],!1,!1,this.g.i.canvas,this.P,i,r),this.s=o=o?i.clone():i,this.h&&this.h(o),je(this,s)})),this.g.attachEmptyPacketListener("stylized_image",(r=>{this.s=null,this.h&&this.h(null),je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};va.prototype.stylize=va.prototype.Ka,va.prototype.setOptions=va.prototype.o,va.createFromModelPath=function(e,t){return kt(va,e,{baseOptions:{modelAssetPath:t}})},va.createFromModelBuffer=function(e,t){return kt(va,e,{baseOptions:{modelAssetBuffer:t}})},va.createFromOptions=function(e,t){return kt(va,e,t)};var EC=sa([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function v4(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function x4(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function w4(e,t=!0){const n=[];for(const s of e){var r=V0(s);e=[];for(const o of r.g())r=t&&xo(o,1)!=null?xo(o,1)??0:-1,e.push({score:$n(o,2)??0,index:r,categoryName:So(o,3)??""??"",displayName:So(o,4)??""??""});n.push(e)}return n}var As=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(e=this.j=new FM,0,1,t=new gn),this.s=new lC,nt(this.j,0,2,this.s),this.C=new iC,nt(this.s,0,3,this.C),this.v=new DM,nt(this.s,0,2,this.v),this.h=new O1e,nt(this.j,0,3,this.h),qe(this.v,2,.5),qe(this.s,4,.5),qe(this.C,2,.5)}get baseOptions(){return Pt(this.j,gn,1)}set baseOptions(e){nt(this.j,0,1,e)}o(e){if(Da(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&qe(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&qe(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&qe(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new ud,n=t,r=Tb(e.cannedGesturesClassifierOptions,Pt(this.h,ud,3)?.h());nt(n,0,2,r),nt(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&Pt(this.h,ud,3)?.g();return e.customGesturesClassifierOptions?(nt(n=t=new ud,0,2,r=Tb(e.customGesturesClassifierOptions,Pt(this.h,ud,4)?.h())),nt(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&Pt(this.h,ud,4)?.g(),this.l(e)}Fa(e,t){return v4(this),$o(this,e,t),x4(this)}Ga(e,t,n){return v4(this),Ba(this,e,n,t),x4(this)}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"hand_gestures"),Lt(e,"hand_landmarks"),Lt(e,"world_hand_landmarks"),Lt(e,"handedness");const t=new zs;ta(t,A1e,this.j);const n=new Yr;Zs(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"HAND_GESTURES:hand_gestures"),$t(n,"LANDMARKS:hand_landmarks"),$t(n,"WORLD_LANDMARKS:world_hand_landmarks"),$t(n,"HANDEDNESS:handedness"),n.o(t),Js(e,n),this.g.attachProtoVectorListener("hand_landmarks",((r,s)=>{for(const o of r){r=Ap(o);const a=[];for(const i of Si(r,NM,1))a.push({x:$n(i,1)??0,y:$n(i,2)??0,z:$n(i,3)??0,visibility:$n(i,4)??0});this.landmarks.push(a)}je(this,s)})),this.g.attachEmptyPacketListener("hand_landmarks",(r=>{je(this,r)})),this.g.attachProtoVectorListener("world_hand_landmarks",((r,s)=>{for(const o of r){r=kd(o);const a=[];for(const i of Si(r,EM,1))a.push({x:$n(i,1)??0,y:$n(i,2)??0,z:$n(i,3)??0,visibility:$n(i,4)??0});this.worldLandmarks.push(a)}je(this,s)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(r=>{je(this,r)})),this.g.attachProtoVectorListener("hand_gestures",((r,s)=>{this.gestures.push(...w4(r,!1)),je(this,s)})),this.g.attachEmptyPacketListener("hand_gestures",(r=>{je(this,r)})),this.g.attachProtoVectorListener("handedness",((r,s)=>{this.handedness.push(...w4(r)),je(this,s)})),this.g.attachEmptyPacketListener("handedness",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function b4(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}As.prototype.recognizeForVideo=As.prototype.Ga,As.prototype.recognize=As.prototype.Fa,As.prototype.setOptions=As.prototype.o,As.createFromModelPath=function(e,t){return kt(As,e,{baseOptions:{modelAssetPath:t}})},As.createFromModelBuffer=function(e,t){return kt(As,e,{baseOptions:{modelAssetBuffer:t}})},As.createFromOptions=function(e,t){return kt(As,e,t)},As.HAND_CONNECTIONS=EC;var ps=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],nt(e=this.h=new lC,0,1,t=new gn),this.s=new iC,nt(this.h,0,3,this.s),this.j=new DM,nt(this.h,0,2,this.j),Da(this.j,3,1),qe(this.j,2,.5),qe(this.s,2,.5),qe(this.h,4,.5)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return"numHands"in e&&Da(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&qe(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&qe(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&qe(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],$o(this,e,t),b4(this)}F(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],Ba(this,e,n,t),b4(this)}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"hand_landmarks"),Lt(e,"world_hand_landmarks"),Lt(e,"handedness");const t=new zs;ta(t,P1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"LANDMARKS:hand_landmarks"),$t(n,"WORLD_LANDMARKS:world_hand_landmarks"),$t(n,"HANDEDNESS:handedness"),n.o(t),Js(e,n),this.g.attachProtoVectorListener("hand_landmarks",((r,s)=>{for(const o of r)r=Ap(o),this.landmarks.push(G0(r));je(this,s)})),this.g.attachEmptyPacketListener("hand_landmarks",(r=>{je(this,r)})),this.g.attachProtoVectorListener("world_hand_landmarks",((r,s)=>{for(const o of r)r=kd(o),this.worldLandmarks.push(Lh(r));je(this,s)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(r=>{je(this,r)})),this.g.attachProtoVectorListener("handedness",((r,s)=>{var o=this.handedness,a=o.push;const i=[];for(const l of r){r=V0(l);const c=[];for(const f of r.g())c.push({score:$n(f,2)??0,index:xo(f,1)??0??-1,categoryName:So(f,3)??""??"",displayName:So(f,4)??""??""});i.push(c)}a.call(o,...i),je(this,s)})),this.g.attachEmptyPacketListener("handedness",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ps.prototype.detectForVideo=ps.prototype.F,ps.prototype.detect=ps.prototype.D,ps.prototype.setOptions=ps.prototype.o,ps.createFromModelPath=function(e,t){return kt(ps,e,{baseOptions:{modelAssetPath:t}})},ps.createFromModelBuffer=function(e,t){return kt(ps,e,{baseOptions:{modelAssetBuffer:t}})},ps.createFromOptions=function(e,t){return kt(ps,e,t)},ps.HAND_CONNECTIONS=EC;var l6=sa([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function S4(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function C4(e){try{if(!e.C)return e.h;e.C(e.h)}finally{q0(e)}}function bg(e,t){e=Ap(e),t.push(G0(e))}var un=class extends Cs{constructor(e,t){super(new ko(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,nt(e=this.j=new UM,0,1,t=new gn),this.K=new iC,nt(this.j,0,2,this.K),this.Y=new D1e,nt(this.j,0,3,this.Y),this.s=new z0,nt(this.j,0,4,this.s),this.H=new RM,nt(this.j,0,5,this.H),this.v=new BM,nt(this.j,0,6,this.v),this.L=new jM,nt(this.j,0,7,this.L),qe(this.s,2,.5),qe(this.s,3,.3),qe(this.H,2,.5),qe(this.v,2,.5),qe(this.v,3,.3),qe(this.L,2,.5),qe(this.K,2,.5)}get baseOptions(){return Pt(this.j,gn,1)}set baseOptions(e){nt(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&qe(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&qe(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&qe(this.H,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&qe(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&qe(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&qe(this.L,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&qe(this.K,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,n){const r=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:n,S4(this),$o(this,e,r),C4(this)}F(e,t,n,r){const s=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:r,S4(this),Ba(this,e,s,t),C4(this)}m(){var e=new Ns;on(e,"input_frames_image"),Lt(e,"pose_landmarks"),Lt(e,"pose_world_landmarks"),Lt(e,"face_landmarks"),Lt(e,"left_hand_landmarks"),Lt(e,"left_hand_world_landmarks"),Lt(e,"right_hand_landmarks"),Lt(e,"right_hand_world_landmarks");const t=new zs,n=new Hk;wb(n,1,Sf("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),(function(s,o){if(o!=null)if(Array.isArray(o))Jt(s,2,R0(o,FS,void 0,void 0,!1));else{if(!(typeof o=="string"||o instanceof fi||oc(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");wb(s,2,$S(o,!1),ac())}})(n,this.j.g());const r=new Yr;Zs(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),Ty(r,8,Hk,n),en(r,"IMAGE:input_frames_image"),$t(r,"POSE_LANDMARKS:pose_landmarks"),$t(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),$t(r,"FACE_LANDMARKS:face_landmarks"),$t(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),$t(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),$t(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),$t(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),Js(e,r),H0(this,e),this.g.attachProtoListener("pose_landmarks",((s,o)=>{bg(s,this.h.poseLandmarks),je(this,o)})),this.g.attachEmptyPacketListener("pose_landmarks",(s=>{je(this,s)})),this.g.attachProtoListener("pose_world_landmarks",((s,o)=>{var a=this.h.poseWorldLandmarks;s=kd(s),a.push(Lh(s)),je(this,o)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(s=>{je(this,s)})),this.outputPoseSegmentationMasks&&($t(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Hd(this,"pose_segmentation_mask"),this.g.V("pose_segmentation_mask",((s,o)=>{this.h.poseSegmentationMasks=[Xd(this,s,!0,!this.C)],je(this,o)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(s=>{this.h.poseSegmentationMasks=[],je(this,s)}))),this.g.attachProtoListener("face_landmarks",((s,o)=>{bg(s,this.h.faceLandmarks),je(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(s=>{je(this,s)})),this.outputFaceBlendshapes&&(Lt(e,"extra_blendshapes"),$t(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((s,o)=>{var a=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(s=V0(s),a.push(fC(s.g()??[]))),je(this,o)})),this.g.attachEmptyPacketListener("extra_blendshapes",(s=>{je(this,s)}))),this.g.attachProtoListener("left_hand_landmarks",((s,o)=>{bg(s,this.h.leftHandLandmarks),je(this,o)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(s=>{je(this,s)})),this.g.attachProtoListener("left_hand_world_landmarks",((s,o)=>{var a=this.h.leftHandWorldLandmarks;s=kd(s),a.push(Lh(s)),je(this,o)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(s=>{je(this,s)})),this.g.attachProtoListener("right_hand_landmarks",((s,o)=>{bg(s,this.h.rightHandLandmarks),je(this,o)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(s=>{je(this,s)})),this.g.attachProtoListener("right_hand_world_landmarks",((s,o)=>{var a=this.h.rightHandWorldLandmarks;s=kd(s),a.push(Lh(s)),je(this,o)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(s=>{je(this,s)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};un.prototype.detectForVideo=un.prototype.F,un.prototype.detect=un.prototype.D,un.prototype.setOptions=un.prototype.o,un.createFromModelPath=function(e,t){return kt(un,e,{baseOptions:{modelAssetPath:t}})},un.createFromModelBuffer=function(e,t){return kt(un,e,{baseOptions:{modelAssetBuffer:t}})},un.createFromOptions=function(e,t){return kt(un,e,t)},un.HAND_CONNECTIONS=EC,un.POSE_CONNECTIONS=l6,un.FACE_LANDMARKS_LIPS=vC,un.FACE_LANDMARKS_LEFT_EYE=xC,un.FACE_LANDMARKS_LEFT_EYEBROW=wC,un.FACE_LANDMARKS_LEFT_IRIS=s6,un.FACE_LANDMARKS_RIGHT_EYE=bC,un.FACE_LANDMARKS_RIGHT_EYEBROW=SC,un.FACE_LANDMARKS_RIGHT_IRIS=o6,un.FACE_LANDMARKS_FACE_OVAL=CC,un.FACE_LANDMARKS_CONTOURS=a6,un.FACE_LANDMARKS_TESSELATION=i6;var ho=class extends Cs{constructor(e,t){super(new ko(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},nt(e=this.h=new WM,0,1,t=new gn)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return nt(this.h,0,2,Tb(e,Pt(this.h,sC,2))),this.l(e)}qa(e,t){return this.j={classifications:[]},$o(this,e,t),this.j}ra(e,t,n){return this.j={classifications:[]},Ba(this,e,n,t),this.j}m(){var e=new Ns;on(e,"input_image"),on(e,"norm_rect"),Lt(e,"classifications");const t=new zs;ta(t,F1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),en(n,"IMAGE:input_image"),en(n,"NORM_RECT:norm_rect"),$t(n,"CLASSIFICATIONS:classifications"),n.o(t),Js(e,n),this.g.attachProtoListener("classifications",((r,s)=>{this.j=(function(o){const a={classifications:Si(o,S1e,1).map((i=>fC(Pt(i,bM,4)?.g()??[],xo(i,2)??0,So(i,3)??"")))};return yb(zd(o,2))!=null&&(a.timestampMs=yb(zd(o,2))??0),a})(C1e(r)),je(this,s)})),this.g.attachEmptyPacketListener("classifications",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};ho.prototype.classifyForVideo=ho.prototype.ra,ho.prototype.classify=ho.prototype.qa,ho.prototype.setOptions=ho.prototype.o,ho.createFromModelPath=function(e,t){return kt(ho,e,{baseOptions:{modelAssetPath:t}})},ho.createFromModelBuffer=function(e,t){return kt(ho,e,{baseOptions:{modelAssetBuffer:t}})},ho.createFromOptions=function(e,t){return kt(ho,e,t)};var Ps=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!0),this.h=new VM,this.embeddings={embeddings:[]},nt(e=this.h,0,1,t=new gn)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){var t=this.h,n=Pt(this.h,t4,2);return n=n?n.clone():new t4,e.l2Normalize!==void 0?lp(n,1,e.l2Normalize):"l2Normalize"in e&&Jt(n,1),e.quantize!==void 0?lp(n,2,e.quantize):"quantize"in e&&Jt(n,2),nt(t,0,2,n),this.l(e)}xa(e,t){return $o(this,e,t),this.embeddings}ya(e,t,n){return Ba(this,e,n,t),this.embeddings}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"embeddings_out");const t=new zs;ta(t,L1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"EMBEDDINGS:embeddings_out"),n.o(t),Js(e,n),this.g.attachProtoListener("embeddings_out",((r,s)=>{r=T1e(r),this.embeddings=(function(o){return{embeddings:Si(o,N1e,1).map((a=>{const i={headIndex:xo(a,3)??0??-1,headName:So(a,4)??""??""};if(UL(a,e4,Mx(a,1))!==void 0)a=Au(a=Pt(a,e4,Mx(a,1)),1,Ml,Ou()),i.floatEmbedding=a.slice();else{const l=new Uint8Array(0);i.quantizedEmbedding=Pt(a,E1e,Mx(a,2))?.ma()?.h()??l}return i})),timestampMs:yb(zd(o,2))??0}})(r),je(this,s)})),this.g.attachEmptyPacketListener("embeddings_out",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ps.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=a4(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=a4(o4(e.quantizedEmbedding),o4(t.quantizedEmbedding))}return e},Ps.prototype.embedForVideo=Ps.prototype.ya,Ps.prototype.embed=Ps.prototype.xa,Ps.prototype.setOptions=Ps.prototype.o,Ps.createFromModelPath=function(e,t){return kt(Ps,e,{baseOptions:{modelAssetPath:t}})},Ps.createFromModelBuffer=function(e,t){return kt(Ps,e,{baseOptions:{modelAssetBuffer:t}})},Ps.createFromOptions=function(e,t){return kt(Ps,e,t)};var Rb=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach((e=>{e.close()})),this.categoryMask?.close()}};function E4(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function N4(e){try{const t=new Rb(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{q0(e)}}Rb.prototype.close=Rb.prototype.close;var hs=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new dC,this.v=new zM,nt(this.h,0,3,this.v),nt(e=this.h,0,1,t=new gn)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Jt(this.h,2,Sf(e.displayNamesLocale)):"displayNamesLocale"in e&&Jt(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}J(){(function(e){const t=Si(e.ca(),Yr,1).filter((n=>(So(n,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(Pt(t[0],zs,7)?.l()?.g()??new Map).forEach(((n,r)=>{e.s[Number(r)]=So(n,1)??""}))})(this)}segment(e,t,n){const r=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,E4(this),$o(this,e,r),N4(this)}Ia(e,t,n,r){const s=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,E4(this),Ba(this,e,s,t),N4(this)}Ba(){return this.s}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect");const t=new zs;ta(t,HM,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),n.o(t),Js(e,n),H0(this,e),this.outputConfidenceMasks&&(Lt(e,"confidence_masks"),$t(n,"CONFIDENCE_MASKS:confidence_masks"),Hd(this,"confidence_masks"),this.g.ba("confidence_masks",((r,s)=>{this.confidenceMasks=r.map((o=>Xd(this,o,!0,!this.j))),je(this,s)})),this.g.attachEmptyPacketListener("confidence_masks",(r=>{this.confidenceMasks=[],je(this,r)}))),this.outputCategoryMask&&(Lt(e,"category_mask"),$t(n,"CATEGORY_MASK:category_mask"),Hd(this,"category_mask"),this.g.V("category_mask",((r,s)=>{this.categoryMask=Xd(this,r,!1,!this.j),je(this,s)})),this.g.attachEmptyPacketListener("category_mask",(r=>{this.categoryMask=void 0,je(this,r)}))),Lt(e,"quality_scores"),$t(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((r,s)=>{this.qualityScores=r,je(this,s)})),this.g.attachEmptyPacketListener("quality_scores",(r=>{this.categoryMask=void 0,je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};hs.prototype.getLabels=hs.prototype.Ba,hs.prototype.segmentForVideo=hs.prototype.Ia,hs.prototype.segment=hs.prototype.segment,hs.prototype.setOptions=hs.prototype.o,hs.createFromModelPath=function(e,t){return kt(hs,e,{baseOptions:{modelAssetPath:t}})},hs.createFromModelBuffer=function(e,t){return kt(hs,e,{baseOptions:{modelAssetBuffer:t}})},hs.createFromOptions=function(e,t){return kt(hs,e,t)};var Ib=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach((e=>{e.close()})),this.categoryMask?.close()}};Ib.prototype.close=Ib.prototype.close;var G1e=class extends ze{constructor(e){super(e)}},cd=[0,Tn,-2],Ry=[0,ai,-3,fn,ai,-1],T4=[0,Ry],k4=[0,Ry,Tn,-1],zx=class extends ze{constructor(e){super(e)}},$4=[0,ai,-1,fn],H1e=class extends ze{constructor(e){super(e)}},_4=class extends ze{constructor(e){super(e)}},Ob=[1,2,3,4,5,6,7,8,9,10,14,15],u6=class extends ze{constructor(e){super(e)}};u6.prototype.g=W0([0,Hn,[0,Ob,Bt,Ry,Bt,[0,Ry,cd],Bt,T4,Bt,[0,T4,cd],Bt,$4,Bt,[0,ai,-3,fn,Vs],Bt,[0,ai,-3,fn],Bt,[0,jt,ai,-2,fn,Tn,fn,-1,2,ai,cd],Bt,k4,Bt,[0,k4,cd],ai,cd,jt,Bt,[0,ai,-3,fn,cd,-1],Bt,[0,Hn,$4]],jt,[0,jt,Tn,-1,fn]]);var xa=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new dC,this.s=new zM,nt(this.h,0,3,this.s),nt(e=this.h,0,1,t=new gn)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,n,r){const s=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new u6;const o=new _4;var a=new G1e;if(Da(a,1,255),nt(o,0,12,a),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var i=new zx;lp(i,3,!0),qe(i,1,t.keypoint.x),qe(i,2,t.keypoint.y),Dh(o,5,Ob,i)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(i of(a=new H1e,t.scribble))lp(t=new zx,3,!0),qe(t,1,i.x),qe(t,2,i.y),Ty(a,1,zx,t);Dh(o,15,Ob,a)}Ty(r,1,_4,o),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),$o(this,e,s);e:{try{const c=new Ib(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var l=c;break e}this.j(c)}finally{q0(this)}l=void 0}return l}m(){var e=new Ns;on(e,"image_in"),on(e,"roi_in"),on(e,"norm_rect_in");const t=new zs;ta(t,HM,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),en(n,"IMAGE:image_in"),en(n,"ROI:roi_in"),en(n,"NORM_RECT:norm_rect_in"),n.o(t),Js(e,n),H0(this,e),this.outputConfidenceMasks&&(Lt(e,"confidence_masks"),$t(n,"CONFIDENCE_MASKS:confidence_masks"),Hd(this,"confidence_masks"),this.g.ba("confidence_masks",((r,s)=>{this.confidenceMasks=r.map((o=>Xd(this,o,!0,!this.j))),je(this,s)})),this.g.attachEmptyPacketListener("confidence_masks",(r=>{this.confidenceMasks=[],je(this,r)}))),this.outputCategoryMask&&(Lt(e,"category_mask"),$t(n,"CATEGORY_MASK:category_mask"),Hd(this,"category_mask"),this.g.V("category_mask",((r,s)=>{this.categoryMask=Xd(this,r,!1,!this.j),je(this,s)})),this.g.attachEmptyPacketListener("category_mask",(r=>{this.categoryMask=void 0,je(this,r)}))),Lt(e,"quality_scores"),$t(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((r,s)=>{this.qualityScores=r,je(this,s)})),this.g.attachEmptyPacketListener("quality_scores",(r=>{this.categoryMask=void 0,je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};xa.prototype.segment=xa.prototype.segment,xa.prototype.setOptions=xa.prototype.o,xa.createFromModelPath=function(e,t){return kt(xa,e,{baseOptions:{modelAssetPath:t}})},xa.createFromModelBuffer=function(e,t){return kt(xa,e,{baseOptions:{modelAssetBuffer:t}})},xa.createFromOptions=function(e,t){return kt(xa,e,t)};var po=class extends Cs{constructor(e,t){super(new ko(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},nt(e=this.h=new qM,0,1,t=new gn)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?Jt(this.h,2,Sf(e.displayNamesLocale)):"displayNamesLocale"in e&&Jt(this.h,2),e.maxResults!==void 0?Da(this.h,3,e.maxResults):"maxResults"in e&&Jt(this.h,3),e.scoreThreshold!==void 0?qe(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&Jt(this.h,4),e.categoryAllowlist!==void 0?ky(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&Jt(this.h,5),e.categoryDenylist!==void 0?ky(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&Jt(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},$o(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},Ba(this,e,n,t),this.j}m(){var e=new Ns;on(e,"input_frame_gpu"),on(e,"norm_rect"),Lt(e,"detections");const t=new zs;ta(t,B1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),en(n,"IMAGE:input_frame_gpu"),en(n,"NORM_RECT:norm_rect"),$t(n,"DETECTIONS:detections"),n.o(t),Js(e,n),this.g.attachProtoVectorListener("detections",((r,s)=>{for(const o of r)r=CM(o),this.j.detections.push(XM(r));je(this,s)})),this.g.attachEmptyPacketListener("detections",(r=>{je(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};po.prototype.detectForVideo=po.prototype.F,po.prototype.detect=po.prototype.D,po.prototype.setOptions=po.prototype.o,po.createFromModelPath=async function(e,t){return kt(po,e,{baseOptions:{modelAssetPath:t}})},po.createFromModelBuffer=function(e,t){return kt(po,e,{baseOptions:{modelAssetBuffer:t}})},po.createFromOptions=function(e,t){return kt(po,e,t)};var Ab=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach((e=>{e.close()}))}};function R4(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function I4(e){try{const t=new Ab(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{q0(e)}}Ab.prototype.close=Ab.prototype.close;var Ds=class extends Cs{constructor(e,t){super(new ko(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,nt(e=this.h=new KM,0,1,t=new gn),this.v=new jM,nt(this.h,0,3,this.v),this.j=new BM,nt(this.h,0,2,this.j),Da(this.j,4,1),qe(this.j,2,.5),qe(this.v,2,.5),qe(this.h,4,.5)}get baseOptions(){return Pt(this.h,gn,1)}set baseOptions(e){nt(this.h,0,1,e)}o(e){return"numPoses"in e&&Da(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&qe(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&qe(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&qe(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,n){const r=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,R4(this),$o(this,e,r),I4(this)}F(e,t,n,r){const s=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,R4(this),Ba(this,e,s,t),I4(this)}m(){var e=new Ns;on(e,"image_in"),on(e,"norm_rect"),Lt(e,"normalized_landmarks"),Lt(e,"world_landmarks"),Lt(e,"segmentation_masks");const t=new zs;ta(t,j1e,this.h);const n=new Yr;Zs(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),en(n,"IMAGE:image_in"),en(n,"NORM_RECT:norm_rect"),$t(n,"NORM_LANDMARKS:normalized_landmarks"),$t(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),Js(e,n),H0(this,e),this.g.attachProtoVectorListener("normalized_landmarks",((r,s)=>{this.landmarks=[];for(const o of r)r=Ap(o),this.landmarks.push(G0(r));je(this,s)})),this.g.attachEmptyPacketListener("normalized_landmarks",(r=>{this.landmarks=[],je(this,r)})),this.g.attachProtoVectorListener("world_landmarks",((r,s)=>{this.worldLandmarks=[];for(const o of r)r=kd(o),this.worldLandmarks.push(Lh(r));je(this,s)})),this.g.attachEmptyPacketListener("world_landmarks",(r=>{this.worldLandmarks=[],je(this,r)})),this.outputSegmentationMasks&&($t(n,"SEGMENTATION_MASK:segmentation_masks"),Hd(this,"segmentation_masks"),this.g.ba("segmentation_masks",((r,s)=>{this.segmentationMasks=r.map((o=>Xd(this,o,!0,!this.s))),je(this,s)})),this.g.attachEmptyPacketListener("segmentation_masks",(r=>{this.segmentationMasks=[],je(this,r)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ds.prototype.detectForVideo=Ds.prototype.F,Ds.prototype.detect=Ds.prototype.D,Ds.prototype.setOptions=Ds.prototype.o,Ds.createFromModelPath=function(e,t){return kt(Ds,e,{baseOptions:{modelAssetPath:t}})},Ds.createFromModelBuffer=function(e,t){return kt(Ds,e,{baseOptions:{modelAssetBuffer:t}})},Ds.createFromOptions=function(e,t){return kt(Ds,e,t)},Ds.POSE_CONNECTIONS=l6;function c6(e,t){const[n,r]=T.useState(null),s=T.useRef(null),o=T.useRef(null),a=T.useCallback(async()=>{if(s.current)return s.current;const i=await Eu.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm");return s.current=await ps.createFromOptions(i,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task"},numHands:1,runningMode:"VIDEO"}),s.current},[]);return T.useEffect(()=>{let i=!1;async function l(){if(!t)return;const c=e.current;if(!c)return;(c.readyState<2||c.videoWidth===0)&&(console.log("[useHandBox] Waiting for video metadata to load..."),await new Promise(p=>c.addEventListener("loadedmetadata",()=>p(),{once:!0})),console.log(`[useHandBox] Video metadata loaded. readyState=${c.readyState}, videoWidth=${c.videoWidth}, videoHeight=${c.videoHeight}`)),console.log(`[useHandBox] Video srcObject: ${c.srcObject?"present":"null"}`);const f=await a(),h=()=>{if(!i){try{const p=performance.now();let g=null;if(c.readyState===4&&!c.paused?(console.log(`[useHandBox] Detecting for video. State: readyState=${c.readyState}, paused=${c.paused}, width=${c.videoWidth}, height=${c.videoHeight}`),g=f.detectForVideo(c,p).landmarks?.[0]):(console.warn("[useHandBox] Video not ready or paused. Skipping detection."),r(null)),g){const y=g.map(A=>A.x),x=g.map(A=>A.y),v=Math.min(...y),S=Math.max(...y),N=Math.min(...x),_=Math.max(...x),I=.06;r({x:Math.max(0,v-I),y:Math.max(0,N-I),w:Math.min(1,S+I)-Math.max(0,v-I),h:Math.min(1,_+I)-Math.max(0,N-I)})}else r(null)}catch(p){console.error(p),r(null)}o.current=requestAnimationFrame(h)}};o.current=requestAnimationFrame(h)}return l(),()=>{i=!0,o.current&&cancelAnimationFrame(o.current)}},[t,a,e]),n}const d6=({handBox:e,pose:t,sequenceStep:n,isWrongPose:r,videoRef:s})=>{if(!e||!s.current)return null;const o=s.current,i=o.classList.contains("scale-x-[-1]")?o.offsetWidth-(e.x+e.w)*o.offsetWidth:e.x*o.offsetWidth,l=e.y*o.offsetHeight,c=e.w*o.offsetWidth,f=e.h*o.offsetHeight,h=r?"border-red-500":"border-emerald-500",p=r?"bg-red-500":"bg-emerald-500",g="text-white",y=r?"Wrong Pose":`Pose ${t}`;return C.jsx("div",{className:Ie("absolute rounded-md border-2",h),style:{left:i,top:l,width:c,height:f},children:t!==0&&C.jsx("div",{className:Ie("absolute -top-6 left-0 rounded-md px-2 py-0.5 text-xs font-semibold",p,g),children:y})})};function q1e({open:e,onOpenChange:t,onCapture:n,children:r}){const s=T.useRef(null),o=T.useRef(null),a=T.useRef(null),[i,l]=T.useState(null),[c,f]=T.useState(1),[h,p]=T.useState(!0),[g,y]=T.useState(!0),[x,v]=T.useState({}),[S,N]=T.useState(!1),[_,I]=T.useState(0),[A,M]=T.useState(!1),L=T.useRef(null),[W,j]=T.useState(!1),{toast:U}=Zb(),P=()=>{const Ee=T.useCallback(async()=>{l(null),v({}),N(!1),f(1),p(!0),M(!1),L.current&&(clearTimeout(L.current),L.current=null);try{const De=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}},audio:!1});s.current&&(s.current.srcObject=De,s.current.play()),a.current=De}catch(De){console.error("Error accessing webcam: ",De),l("Could not access webcam. Please ensure you have a webcam and granted permissions.")}},[]),ke=T.useCallback(()=>{a.current&&(a.current.getTracks().forEach(De=>De.stop()),a.current=null)},[]);return{startWebcam:Ee,stopWebcam:ke}},{startWebcam:X,stopWebcam:ae}=P(),ee=pL({video:s.current,enabled:e&&!S,fps:24,holdMs:450,smoothWindow:5,isMirrored:g}),{pose:ie,count:le,rawCount:we,ready:te,error:oe,isRight:pe,palmWidth:Y}=ee;T.useEffect(()=>{e?window.lastHandDebug={count:le,pose:ie,isRight:pe,isMirrored:g,palmWidth:Y,rawCount:we}:delete window.lastHandDebug},[e,le,ie,pe,g,Y,we]);const G=c6(s,e&&!S),re=T.useCallback(Ee=>{if(s.current&&o.current){const ke=s.current,De=o.current;De.width=ke.videoWidth,De.height=ke.videoHeight;const Ze=De.getContext("2d");if(Ze){g&&(Ze.translate(De.width,0),Ze.scale(-1,1)),Ze.drawImage(ke,0,0,De.width,De.height);const ht=De.toDataURL("image/png");v(dt=>({...dt,[Ee]:ht})),I(Date.now()),U({description:`Pose ${Ee} captured${Ee===3?" - great!":""}`}),console.log(`Frame captured for step ${Ee}. Image data length: ${ht.length}`)}}},[g,U]);T.useEffect(()=>(e?X():(ae(),v({}),N(!1),l(null),f(1),p(!0),M(!1),L.current&&(clearTimeout(L.current),L.current=null)),()=>{ae(),L.current&&(clearTimeout(L.current),L.current=null)}),[e,X,ae]),T.useEffect(()=>{},[e,ie,c,S,h,te,i,_,re,ae,U,x]);const ce=T.useCallback(()=>{re(1),re(2),re(3),N(!0),ae(),U({description:"Photo captured manually! Ready to use."})},[re,ae,U]),xe=()=>{x[3]&&(n(x[3]),t(!1))},Ce=()=>{v({}),N(!1),X(),f(1),p(!0),M(!1),L.current&&(clearTimeout(L.current),L.current=null)},ye=["/open1.svg","/open2.svg","/open3.svg"];return C.jsxs(Ky,{open:e,onOpenChange:t,children:[C.jsx(P2,{asChild:!0,children:r}),C.jsxs(Xy,{className:"sm:max-w-3xl rounded-xl bg-white shadow-2xl max-h-[653px] overflow-y-auto p-6",children:[C.jsxs(Yy,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[C.jsxs("div",{children:[C.jsx(Qy,{className:"text-2xl font-bold",children:"Raise Your Hand to Capture"}),C.jsx(Zy,{className:"text-sm text-gray-500",children:"We’ll take the photo once the correct hand pose is detected."})]}),C.jsx(vt,{variant:"ghost",onClick:()=>t(!1),className:"h-auto p-2",children:C.jsx(o2,{className:"h-5 w-5"})})]}),C.jsxs("div",{className:"grid gap-4 py-4",children:[i?C.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-muted rounded-xl border border-dashed text-red-500",children:[C.jsx("p",{className:"text-center",children:i}),C.jsx(vt,{onClick:X,className:"mt-4",children:"Retry Camera"})]}):S&&x[3]?C.jsx("div",{className:"relative flex flex-col items-center justify-center h-96 bg-muted rounded-xl border",children:C.jsx("img",{src:x[3],alt:"Captured",className:"max-w-full h-auto rounded-md object-contain"})}):C.jsxs("div",{className:"relative flex items-center justify-center h-96 bg-muted rounded-xl border aspect-video",children:[" ",C.jsx("video",{ref:s,className:"w-full h-full rounded-xl object-cover scale-x-[-1]",autoPlay:!0,playsInline:!0,muted:!0}),C.jsx("canvas",{ref:o,style:{display:"none"}}),G&&ie!==0&&!S&&s.current&&C.jsx(d6,{handBox:G,pose:ie,sequenceStep:c,isWrongPose:A,videoRef:s}),!te&&C.jsx("div",{className:"absolute bottom-4 right-4 bg-gray-800 text-white text-xs px-2 py-1 rounded-md",children:"Detecting hands..."}),W&&C.jsxs("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs p-2 rounded-md font-mono",children:[C.jsxs("div",{children:["rawCount: ",we]}),C.jsxs("div",{children:["count: ",le]}),C.jsxs("div",{children:["pose: ",ie]}),C.jsxs("div",{children:["isRight: ",pe?"true":"false"]})]})]}),oe&&C.jsx("div",{className:"text-red-500 text-center text-sm mt-2",children:oe}),C.jsxs("div",{className:"flex flex-col items-center mt-4",children:[C.jsx("p",{className:"text-sm text-gray-500 text-center mb-4",children:"To take a picture, follow the hand poses in the order shown below. The system will automatically capture the image once the final pose is detected."}),C.jsx("div",{className:"flex items-center gap-2",children:ye.map((Ee,ke)=>C.jsxs(he.Fragment,{children:[C.jsxs("div",{className:Ie("relative w-20 h-20 border rounded-md p-2 bg-gray-50 flex items-center justify-center",{"opacity-50":c<ke+1&&!x[ke+1]},{"border-primary":c===ke+1},{"border-emerald-500":x[ke+1]}),children:[C.jsx("img",{src:Ee,alt:`Pose ${ke+1}`,className:"w-full h-full object-contain"}),x[ke+1]&&C.jsx(tU,{className:"absolute top-1 right-1 h-5 w-5 text-emerald-500 bg-white rounded-full"})]}),ke<ye.length-1&&C.jsx(B8,{className:"h-5 w-5 text-gray-400"})]},ke))}),C.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[C.jsx(sy,{id:"auto-capture-mode",checked:h,onCheckedChange:p}),C.jsx(pr,{htmlFor:"auto-capture-mode",children:"Auto-capture (Disabled)"})]}),C.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[C.jsx(sy,{id:"debug-info-mode",checked:W,onCheckedChange:j}),C.jsx(pr,{htmlFor:"debug-info-mode",children:"Show Debug Info"})]}),C.jsxs("div",{className:"flex gap-2 mt-6",children:[C.jsx(vt,{onClick:Ce,variant:"outline",disabled:!S,children:"Retake"}),C.jsx(vt,{onClick:ce,disabled:S,className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Capture"}),C.jsx(vt,{onClick:xe,disabled:!S||!x[3],className:"bg-[#01959F] hover:bg-[#01959F]/90 text-white",children:"Use Photo"})]})]})]})]})]})}var O4=1,K1e=.9,X1e=.8,Y1e=.17,Gx=.1,Hx=.999,Q1e=.9999,Z1e=.99,J1e=/[\\\/_+.#"@\[\(\{&]/,eve=/[\\\/_+.#"@\[\(\{&]/g,tve=/[\s-]/,f6=/[\s-]/g;function Pb(e,t,n,r,s,o,a){if(o===t.length)return s===e.length?O4:Z1e;var i=`${s},${o}`;if(a[i]!==void 0)return a[i];for(var l=r.charAt(o),c=n.indexOf(l,s),f=0,h,p,g,y;c>=0;)h=Pb(e,t,n,r,c+1,o+1,a),h>f&&(c===s?h*=O4:J1e.test(e.charAt(c-1))?(h*=X1e,g=e.slice(s,c-1).match(eve),g&&s>0&&(h*=Math.pow(Hx,g.length))):tve.test(e.charAt(c-1))?(h*=K1e,y=e.slice(s,c-1).match(f6),y&&s>0&&(h*=Math.pow(Hx,y.length))):(h*=Y1e,s>0&&(h*=Math.pow(Hx,c-s))),e.charAt(c)!==t.charAt(o)&&(h*=Q1e)),(h<Gx&&n.charAt(c-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(c-1)!==r.charAt(o))&&(p=Pb(e,t,n,r,c+1,o+2,a),p*Gx>h&&(h=p*Gx)),h>f&&(f=h),c=n.indexOf(l,c+1);return a[i]=f,f}function A4(e){return e.toLowerCase().replace(f6," ")}function nve(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,Pb(e,t,A4(e),A4(t),0,0,{})}var bh='[cmdk-group=""]',qx='[cmdk-group-items=""]',rve='[cmdk-group-heading=""]',h6='[cmdk-item=""]',P4=`${h6}:not([aria-disabled="true"])`,Db="cmdk-item-select",pd="data-value",sve=(e,t,n)=>nve(e,t,n),p6=T.createContext(void 0),Pp=()=>T.useContext(p6),m6=T.createContext(void 0),NC=()=>T.useContext(m6),g6=T.createContext(void 0),y6=T.forwardRef((e,t)=>{let n=md(()=>{var G,re;return{search:"",value:(re=(G=e.value)!=null?G:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=md(()=>new Set),s=md(()=>new Map),o=md(()=>new Map),a=md(()=>new Set),i=v6(e),{label:l,children:c,value:f,onValueChange:h,filter:p,shouldFilter:g,loop:y,disablePointerSelection:x=!1,vimBindings:v=!0,...S}=e,N=js(),_=js(),I=js(),A=T.useRef(null),M=mve();lc(()=>{if(f!==void 0){let G=f.trim();n.current.value=G,L.emit()}},[f]),lc(()=>{M(6,ae)},[]);let L=T.useMemo(()=>({subscribe:G=>(a.current.add(G),()=>a.current.delete(G)),snapshot:()=>n.current,setState:(G,re,ce)=>{var xe,Ce,ye,Ee;if(!Object.is(n.current[G],re)){if(n.current[G]=re,G==="search")X(),U(),M(1,P);else if(G==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ke=document.getElementById(I);ke?ke.focus():(xe=document.getElementById(N))==null||xe.focus()}if(M(7,()=>{var ke;n.current.selectedItemId=(ke=ee())==null?void 0:ke.id,L.emit()}),ce||M(5,ae),((Ce=i.current)==null?void 0:Ce.value)!==void 0){let ke=re??"";(Ee=(ye=i.current).onValueChange)==null||Ee.call(ye,ke);return}}L.emit()}},emit:()=>{a.current.forEach(G=>G())}}),[]),W=T.useMemo(()=>({value:(G,re,ce)=>{var xe;re!==((xe=o.current.get(G))==null?void 0:xe.value)&&(o.current.set(G,{value:re,keywords:ce}),n.current.filtered.items.set(G,j(re,ce)),M(2,()=>{U(),L.emit()}))},item:(G,re)=>(r.current.add(G),re&&(s.current.has(re)?s.current.get(re).add(G):s.current.set(re,new Set([G]))),M(3,()=>{X(),U(),n.current.value||P(),L.emit()}),()=>{o.current.delete(G),r.current.delete(G),n.current.filtered.items.delete(G);let ce=ee();M(4,()=>{X(),ce?.getAttribute("id")===G&&P(),L.emit()})}),group:G=>(s.current.has(G)||s.current.set(G,new Set),()=>{o.current.delete(G),s.current.delete(G)}),filter:()=>i.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:N,inputId:I,labelId:_,listInnerRef:A}),[]);function j(G,re){var ce,xe;let Ce=(xe=(ce=i.current)==null?void 0:ce.filter)!=null?xe:sve;return G?Ce(G,n.current.search,re):0}function U(){if(!n.current.search||i.current.shouldFilter===!1)return;let G=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(xe=>{let Ce=s.current.get(xe),ye=0;Ce.forEach(Ee=>{let ke=G.get(Ee);ye=Math.max(ke,ye)}),re.push([xe,ye])});let ce=A.current;ie().sort((xe,Ce)=>{var ye,Ee;let ke=xe.getAttribute("id"),De=Ce.getAttribute("id");return((ye=G.get(De))!=null?ye:0)-((Ee=G.get(ke))!=null?Ee:0)}).forEach(xe=>{let Ce=xe.closest(qx);Ce?Ce.appendChild(xe.parentElement===Ce?xe:xe.closest(`${qx} > *`)):ce.appendChild(xe.parentElement===ce?xe:xe.closest(`${qx} > *`))}),re.sort((xe,Ce)=>Ce[1]-xe[1]).forEach(xe=>{var Ce;let ye=(Ce=A.current)==null?void 0:Ce.querySelector(`${bh}[${pd}="${encodeURIComponent(xe[0])}"]`);ye?.parentElement.appendChild(ye)})}function P(){let G=ie().find(ce=>ce.getAttribute("aria-disabled")!=="true"),re=G?.getAttribute(pd);L.setState("value",re||void 0)}function X(){var G,re,ce,xe;if(!n.current.search||i.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ce=0;for(let ye of r.current){let Ee=(re=(G=o.current.get(ye))==null?void 0:G.value)!=null?re:"",ke=(xe=(ce=o.current.get(ye))==null?void 0:ce.keywords)!=null?xe:[],De=j(Ee,ke);n.current.filtered.items.set(ye,De),De>0&&Ce++}for(let[ye,Ee]of s.current)for(let ke of Ee)if(n.current.filtered.items.get(ke)>0){n.current.filtered.groups.add(ye);break}n.current.filtered.count=Ce}function ae(){var G,re,ce;let xe=ee();xe&&(((G=xe.parentElement)==null?void 0:G.firstChild)===xe&&((ce=(re=xe.closest(bh))==null?void 0:re.querySelector(rve))==null||ce.scrollIntoView({block:"nearest"})),xe.scrollIntoView({block:"nearest"}))}function ee(){var G;return(G=A.current)==null?void 0:G.querySelector(`${h6}[aria-selected="true"]`)}function ie(){var G;return Array.from(((G=A.current)==null?void 0:G.querySelectorAll(P4))||[])}function le(G){let re=ie()[G];re&&L.setState("value",re.getAttribute(pd))}function we(G){var re;let ce=ee(),xe=ie(),Ce=xe.findIndex(Ee=>Ee===ce),ye=xe[Ce+G];(re=i.current)!=null&&re.loop&&(ye=Ce+G<0?xe[xe.length-1]:Ce+G===xe.length?xe[0]:xe[Ce+G]),ye&&L.setState("value",ye.getAttribute(pd))}function te(G){let re=ee(),ce=re?.closest(bh),xe;for(;ce&&!xe;)ce=G>0?hve(ce,bh):pve(ce,bh),xe=ce?.querySelector(P4);xe?L.setState("value",xe.getAttribute(pd)):we(G)}let oe=()=>le(ie().length-1),pe=G=>{G.preventDefault(),G.metaKey?oe():G.altKey?te(1):we(1)},Y=G=>{G.preventDefault(),G.metaKey?le(0):G.altKey?te(-1):we(-1)};return T.createElement(ot.div,{ref:t,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:G=>{var re;(re=S.onKeyDown)==null||re.call(S,G);let ce=G.nativeEvent.isComposing||G.keyCode===229;if(!(G.defaultPrevented||ce))switch(G.key){case"n":case"j":{v&&G.ctrlKey&&pe(G);break}case"ArrowDown":{pe(G);break}case"p":case"k":{v&&G.ctrlKey&&Y(G);break}case"ArrowUp":{Y(G);break}case"Home":{G.preventDefault(),le(0);break}case"End":{G.preventDefault(),oe();break}case"Enter":{G.preventDefault();let xe=ee();if(xe){let Ce=new Event(Db);xe.dispatchEvent(Ce)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:W.inputId,id:W.labelId,style:yve},l),Q0(e,G=>T.createElement(m6.Provider,{value:L},T.createElement(p6.Provider,{value:W},G))))}),ove=T.forwardRef((e,t)=>{var n,r;let s=js(),o=T.useRef(null),a=T.useContext(g6),i=Pp(),l=v6(e),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:a?.forceMount;lc(()=>{if(!c)return i.item(s,a?.id)},[c]);let f=x6(s,o,[e.value,e.children,o],e.keywords),h=NC(),p=Il(M=>M.value&&M.value===f.current),g=Il(M=>c||i.filter()===!1?!0:M.search?M.filtered.items.get(s)>0:!0);T.useEffect(()=>{let M=o.current;if(!(!M||e.disabled))return M.addEventListener(Db,y),()=>M.removeEventListener(Db,y)},[g,e.onSelect,e.disabled]);function y(){var M,L;x(),(L=(M=l.current).onSelect)==null||L.call(M,f.current)}function x(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:v,value:S,onSelect:N,forceMount:_,keywords:I,...A}=e;return T.createElement(ot.div,{ref:Uu(o,t),...A,id:s,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!p,"data-disabled":!!v,"data-selected":!!p,onPointerMove:v||i.getDisablePointerSelection()?void 0:x,onClick:v?void 0:y},e.children)}),ave=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:s,...o}=e,a=js(),i=T.useRef(null),l=T.useRef(null),c=js(),f=Pp(),h=Il(g=>s||f.filter()===!1?!0:g.search?g.filtered.groups.has(a):!0);lc(()=>f.group(a),[]),x6(a,i,[e.value,e.heading,l]);let p=T.useMemo(()=>({id:a,forceMount:s}),[s]);return T.createElement(ot.div,{ref:Uu(i,t),...o,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Q0(e,g=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},T.createElement(g6.Provider,{value:p},g))))}),ive=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,s=T.useRef(null),o=Il(a=>!a.search);return!n&&!o?null:T.createElement(ot.div,{ref:Uu(s,t),...r,"cmdk-separator":"",role:"separator"})}),lve=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,s=e.value!=null,o=NC(),a=Il(c=>c.search),i=Il(c=>c.selectedItemId),l=Pp();return T.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),T.createElement(ot.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":i,id:l.inputId,type:"text",value:s?e.value:a,onChange:c=>{s||o.setState("search",c.target.value),n?.(c.target.value)}})}),uve=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...s}=e,o=T.useRef(null),a=T.useRef(null),i=Il(c=>c.selectedItemId),l=Pp();return T.useEffect(()=>{if(a.current&&o.current){let c=a.current,f=o.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(h),p.unobserve(c)}}},[]),T.createElement(ot.div,{ref:Uu(o,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":r,id:l.listId},Q0(e,c=>T.createElement("div",{ref:Uu(a,l.listInnerRef),"cmdk-list-sizer":""},c)))}),cve=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:o,container:a,...i}=e;return T.createElement(jR,{open:n,onOpenChange:r},T.createElement(UR,{container:a},T.createElement(O2,{"cmdk-overlay":"",className:s}),T.createElement(A2,{"aria-label":e.label,"cmdk-dialog":"",className:o},T.createElement(y6,{ref:t,...i}))))}),dve=T.forwardRef((e,t)=>Il(n=>n.filtered.count===0)?T.createElement(ot.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),fve=T.forwardRef((e,t)=>{let{progress:n,children:r,label:s="Loading...",...o}=e;return T.createElement(ot.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Q0(e,a=>T.createElement("div",{"aria-hidden":!0},a)))}),Ts=Object.assign(y6,{List:uve,Item:ove,Input:lve,Group:ave,Separator:ive,Dialog:cve,Empty:dve,Loading:fve});function hve(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function pve(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function v6(e){let t=T.useRef(e);return lc(()=>{t.current=e}),t}var lc=typeof window>"u"?T.useEffect:T.useLayoutEffect;function md(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function Il(e){let t=NC(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function x6(e,t,n,r=[]){let s=T.useRef(),o=Pp();return lc(()=>{var a;let i=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():s.current}})(),l=r.map(c=>c.trim());o.value(e,i,l),(a=t.current)==null||a.setAttribute(pd,i),s.current=i}),s}var mve=()=>{let[e,t]=T.useState(),n=md(()=>new Map);return lc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,s)=>{n.current.set(r,s),t({})}};function gve(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Q0({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(gve(t),{ref:t.ref},n(t.props.children)):n(t)}var yve={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const w6=T.forwardRef(({className:e,...t},n)=>C.jsx(Ts,{ref:n,className:Ie("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));w6.displayName=Ts.displayName;const b6=T.forwardRef(({className:e,...t},n)=>C.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[C.jsx(j$,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),C.jsx(Ts.Input,{ref:n,className:Ie("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));b6.displayName=Ts.Input.displayName;const S6=T.forwardRef(({className:e,...t},n)=>C.jsx(Ts.List,{ref:n,className:Ie("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));S6.displayName=Ts.List.displayName;const C6=T.forwardRef((e,t)=>C.jsx(Ts.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));C6.displayName=Ts.Empty.displayName;const E6=T.forwardRef(({className:e,...t},n)=>C.jsx(Ts.Group,{ref:n,className:Ie("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));E6.displayName=Ts.Group.displayName;const vve=T.forwardRef(({className:e,...t},n)=>C.jsx(Ts.Separator,{ref:n,className:Ie("-mx-1 h-px bg-border",e),...t}));vve.displayName=Ts.Separator.displayName;const N6=T.forwardRef(({className:e,...t},n)=>C.jsx(Ts.Item,{ref:n,className:Ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));N6.displayName=Ts.Item.displayName;var Z0="Popover",[T6]=Fa(Z0,[rf]),Dp=rf(),[xve,jl]=T6(Z0),k6=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,i=Dp(t),l=T.useRef(null),[c,f]=T.useState(!1),[h,p]=Vu({prop:r,defaultProp:s??!1,onChange:o,caller:Z0});return C.jsx(v_,{...i,children:C.jsx(xve,{scope:t,contentId:js(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:T.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:T.useCallback(()=>f(!0),[]),onCustomAnchorRemove:T.useCallback(()=>f(!1),[]),modal:a,children:n})})};k6.displayName=Z0;var $6="PopoverAnchor",wve=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=jl($6,n),o=Dp(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:i}=s;return T.useEffect(()=>(a(),()=>i()),[a,i]),C.jsx(jy,{...o,...r,ref:t})});wve.displayName=$6;var _6="PopoverTrigger",R6=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=jl(_6,n),o=Dp(n),a=Mt(t,s.triggerRef),i=C.jsx(ot.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":D6(s.open),...r,ref:a,onClick:it(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?i:C.jsx(jy,{asChild:!0,...o,children:i})});R6.displayName=_6;var TC="PopoverPortal",[bve,Sve]=T6(TC,{forceMount:void 0}),I6=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,o=jl(TC,t);return C.jsx(bve,{scope:t,forceMount:n,children:C.jsx(Ei,{present:n||o.open,children:C.jsx(fp,{asChild:!0,container:s,children:r})})})};I6.displayName=TC;var Yd="PopoverContent",O6=T.forwardRef((e,t)=>{const n=Sve(Yd,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,o=jl(Yd,e.__scopePopover);return C.jsx(Ei,{present:r||o.open,children:o.modal?C.jsx(Eve,{...s,ref:t}):C.jsx(Nve,{...s,ref:t})})});O6.displayName=Yd;var Cve=Wu("PopoverContent.RemoveScroll"),Eve=T.forwardRef((e,t)=>{const n=jl(Yd,e.__scopePopover),r=T.useRef(null),s=Mt(t,r),o=T.useRef(!1);return T.useEffect(()=>{const a=r.current;if(a)return $2(a)},[]),C.jsx(Hy,{as:Cve,allowPinchZoom:!0,children:C.jsx(A6,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(e.onCloseAutoFocus,a=>{a.preventDefault(),o.current||n.triggerRef.current?.focus()}),onPointerDownOutside:it(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0,c=i.button===2||l;o.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:it(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Nve=T.forwardRef((e,t)=>{const n=jl(Yd,e.__scopePopover),r=T.useRef(!1),s=T.useRef(!1);return C.jsx(A6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;n.triggerRef.current?.contains(a)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),A6=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:f,...h}=e,p=jl(Yd,n),g=Dp(n);return k2(),C.jsx(zy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:C.jsx(Jd,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:f,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:C.jsx(g2,{"data-state":D6(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),P6="PopoverClose",Tve=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=jl(P6,n);return C.jsx(ot.button,{type:"button",...r,ref:t,onClick:it(e.onClick,()=>s.onOpenChange(!1))})});Tve.displayName=P6;var kve="PopoverArrow",$ve=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Dp(n);return C.jsx(y2,{...s,...r,ref:t})});$ve.displayName=kve;function D6(e){return e?"open":"closed"}var _ve=k6,Rve=R6,Ive=I6,F6=O6;const L6=_ve,M6=Rve,kC=T.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},s)=>C.jsx(Ive,{children:C.jsx(F6,{ref:s,align:t,sideOffset:n,className:Ie("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));kC.displayName=F6.displayName;const Sg=[{iso:"ID",name:"Indonesia",dialCode:"+62",flag:"🇮🇩"},{iso:"PS",name:"Palestine",dialCode:"+970",flag:"🇵🇸"},{iso:"PL",name:"Poland",dialCode:"+48",flag:"🇵🇱"},{iso:"PT",name:"Portugal",dialCode:"+351",flag:"🇵🇹"},{iso:"PR",name:"Puerto Rico",dialCode:"+1",flag:"🇵🇷"},{iso:"US",name:"United States",dialCode:"+1",flag:"🇺🇸"},{iso:"CA",name:"Canada",dialCode:"+1",flag:"🇨🇦"},{iso:"GB",name:"United Kingdom",dialCode:"+44",flag:"🇬🇧"},{iso:"DE",name:"Germany",dialCode:"+49",flag:"🇩🇪"},{iso:"FR",name:"France",dialCode:"+33",flag:"🇫🇷"},{iso:"ES",name:"Spain",dialCode:"+34",flag:"🇪🇸"},{iso:"IT",name:"Italy",dialCode:"+39",flag:"🇮🇹"},{iso:"AU",name:"Australia",dialCode:"+61",flag:"🇦🇺"},{iso:"JP",name:"Japan",dialCode:"+81",flag:"🇯🇵"},{iso:"CN",name:"China",dialCode:"+86",flag:"🇨🇳"}];function Ove({onCountryChange:e,defaultDialCode:t="+62"}){const[n,r]=T.useState(!1),[s,o]=T.useState(Sg.find(a=>a.dialCode===t)||Sg[0]);return T.useEffect(()=>{e(s.dialCode)},[t]),T.useEffect(()=>{e(s.dialCode)},[s]),C.jsxs(L6,{open:n,onOpenChange:r,children:[C.jsx(M6,{asChild:!0,children:C.jsxs(vt,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-fit justify-start rounded-r-none border-r-0 border-input bg-background hover:bg-accent hover:text-accent-foreground",children:[C.jsx("span",{className:"mr-2",children:s.flag}),C.jsx(J8,{className:"h-4 w-4 shrink-0 opacity-50"})]})}),C.jsx(kC,{className:"w-[200px] p-0",children:C.jsxs(w6,{children:[C.jsx(b6,{placeholder:"Search country..."}),C.jsxs(S6,{children:[C.jsx(C6,{children:"No country found."}),C.jsx(E6,{children:Sg.map(a=>C.jsxs(N6,{value:`${a.name.toLowerCase()} ${a.dialCode}`,onSelect:i=>{const l=Sg.find(c=>c.name.toLowerCase()===i.toLowerCase()||c.dialCode===i);l&&o(l),r(!1)},children:[C.jsx(r2,{className:Ie("mr-2 h-4 w-4",s.iso===a.iso?"opacity-100":"opacity-0")}),C.jsx("span",{className:"mr-2",children:a.flag}),a.name,C.jsx("span",{className:"ml-auto",children:a.dialCode})]},a.iso))})]})]})})]})}function Ave(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const Pve={},Rh={};function Pu(e,t){try{const r=(Pve[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return r in Rh?Rh[r]:D4(r,r.split(":"))}catch{if(e in Rh)return Rh[e];const n=e?.match(Dve);return n?D4(e,n.slice(1)):NaN}}const Dve=/([+-]\d\d):?(\d\d)?/;function D4(e,t){const n=+(t[0]||0),r=+(t[1]||0),s=+(t[2]||0)/60;return Rh[e]=n*60+r>0?n*60+r+s:n*60-r-s}class $a extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(Pu(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),B6(this),Fb(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new $a(...n,t):new $a(Date.now(),t)}withTimeZone(t){return new $a(+this,t)}getTimezoneOffset(){const t=-Pu(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),Fb(this),+this}[Symbol.for("constructDateFrom")](t){return new $a(+new Date(t),this.timeZone)}}const F4=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!F4.test(e))return;const t=e.replace(F4,"$1UTC");$a.prototype[t]&&(e.startsWith("get")?$a.prototype[e]=function(){return this.internal[t]()}:($a.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),Fve(this),+this},$a.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Fb(this),+this}))});function Fb(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-Pu(e.timeZone,e)*60))}function Fve(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),B6(e)}function B6(e){const t=Pu(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const s=-new Date(+e).getTimezoneOffset(),o=-new Date(+r).getTimezoneOffset(),a=s-o,i=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();a&&i&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+a);const l=s-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const c=new Date(+e);c.setUTCSeconds(0);const f=s>0?c.getSeconds():(c.getSeconds()-60)%60,h=Math.round(-(Pu(e.timeZone,e)*60))%60;(h||f)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+h+f));const p=Pu(e.timeZone,e),g=p>0?Math.floor(p):Math.ceil(p),x=-new Date(+e).getTimezoneOffset()-g,v=g!==n,S=x-l;if(v&&S){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+S);const N=Pu(e.timeZone,e),_=N>0?Math.floor(N):Math.ceil(N),I=g-_;I&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+I),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+I))}}class Rr extends $a{static tz(t,...n){return n.length?new Rr(...n,t):new Rr(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),s=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+s}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,s]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${r} ${n} ${s}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,s]=this.tzComponents();return`${t} GMT${n}${r}${s} (${Ave(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),s=String(Math.abs(t)%60).padStart(2,"0");return[n,r,s]}withTimeZone(t){return new Rr(+this,t)}[Symbol.for("constructDateFrom")](t){return new Rr(+new Date(t),this.timeZone)}}const L4=5,Lve=4;function Mve(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,s=t.addDays(e,-r+1),o=t.addDays(s,L4*7-1);return t.getMonth(e)===t.getMonth(o)?L4:Lve}function j6(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function Bve(e,t){const n=j6(e,t),r=Mve(e,t);return t.addDays(n,r*7-1)}class Gs{constructor(t,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Rr.tz(this.options.timeZone):new this.Date,this.newDate=(r,s,o)=>this.overrides?.newDate?this.overrides.newDate(r,s,o):this.options.timeZone?new Rr(r,s,o,this.options.timeZone):new Date(r,s,o),this.addDays=(r,s)=>this.overrides?.addDays?this.overrides.addDays(r,s):J_(r,s),this.addMonths=(r,s)=>this.overrides?.addMonths?this.overrides.addMonths(r,s):zh(r,s),this.addWeeks=(r,s)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,s):YV(r,s),this.addYears=(r,s)=>this.overrides?.addYears?this.overrides.addYears(r,s):nR(r,s),this.differenceInCalendarDays=(r,s)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,s):tR(r,s),this.differenceInCalendarMonths=(r,s)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,s):ez(r,s),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):nz(r),this.eachYearOfInterval=r=>{const s=this.overrides?.eachYearOfInterval?this.overrides.eachYearOfInterval(r):oz(r),o=new Set(s.map(i=>this.getYear(i)));if(o.size===s.length)return s;const a=[];return o.forEach(i=>{a.push(new Date(i,0,1))}),a},this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Bve(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):az(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):tz(r),this.endOfWeek=(r,s)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,s):iR(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):sz(r),this.format=(r,s,o)=>{const a=this.overrides?.format?this.overrides.format(r,s,this.options):yi(r,s,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(a):a},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):lR(r),this.getMonth=(r,s)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):rG(r,this.options),this.getYear=(r,s)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):sG(r,this.options),this.getWeek=(r,s)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):cR(r,this.options),this.isAfter=(r,s)=>this.overrides?.isAfter?this.overrides.isAfter(r,s):fR(r,s),this.isBefore=(r,s)=>this.overrides?.isBefore?this.overrides.isBefore(r,s):hR(r,s),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):rR(r),this.isSameDay=(r,s)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,s):JV(r,s),this.isSameMonth=(r,s)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,s):oG(r,s),this.isSameYear=(r,s)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,s):aG(r,s),this.max=r=>this.overrides?.max?this.overrides.max(r):QV(r),this.min=r=>this.overrides?.min?this.overrides.min(r):ZV(r),this.setMonth=(r,s)=>this.overrides?.setMonth?this.overrides.setMonth(r,s):CG(r,s),this.setYear=(r,s)=>this.overrides?.setYear?this.overrides.setYear(r,s):EG(r,s),this.startOfBroadcastWeek=(r,s)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):j6(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):Id(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):Gh(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):rz(r),this.startOfWeek=(r,s)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):Rd(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):aR(r),this.options={locale:T2,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let s=0;s<10;s++)r[s.toString()]=n.format(s);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&Gs.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:s}=this.options,o=n?.code;if(o&&Gs.yearFirstLocales.has(o))try{return new Intl.DateTimeFormat(o,{month:"long",year:"numeric",timeZone:r,numberingSystem:s}).format(t)}catch{}const a=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,a)}}Gs.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const ja=new Gs;class U6{constructor(t,n,r=ja){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class jve{constructor(t,n){this.date=t,this.weeks=n}}class Uve{constructor(t,n){this.days=n,this.weekNumber=t}}function Wve(e){return he.createElement("button",{...e})}function Vve(e){return he.createElement("span",{...e})}function zve(e){const{size:t=24,orientation:n="left",className:r}=e;return he.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&he.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&he.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&he.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&he.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Gve(e){const{day:t,modifiers:n,...r}=e;return he.createElement("td",{...r})}function Hve(e){const{day:t,modifiers:n,...r}=e,s=he.useRef(null);return he.useEffect(()=>{n.focused&&s.current?.focus()},[n.focused]),he.createElement("button",{ref:s,...r})}var Qe;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(Qe||(Qe={}));var xn;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(xn||(xn={}));var Go;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(Go||(Go={}));var Ls;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ls||(Ls={}));function qve(e){const{options:t,className:n,components:r,classNames:s,...o}=e,a=[s[Qe.Dropdown],n].join(" "),i=t?.find(({value:l})=>l===o.value);return he.createElement("span",{"data-disabled":o.disabled,className:s[Qe.DropdownRoot]},he.createElement(r.Select,{className:a,...o},t?.map(({value:l,label:c,disabled:f})=>he.createElement(r.Option,{key:l,value:l,disabled:f},c))),he.createElement("span",{className:s[Qe.CaptionLabel],"aria-hidden":!0},i?.label,he.createElement(r.Chevron,{orientation:"down",size:18,className:s[Qe.Chevron]})))}function Kve(e){return he.createElement("div",{...e})}function Xve(e){return he.createElement("div",{...e})}function Yve(e){const{calendarMonth:t,displayIndex:n,...r}=e;return he.createElement("div",{...r},e.children)}function Qve(e){const{calendarMonth:t,displayIndex:n,...r}=e;return he.createElement("div",{...r})}function Zve(e){return he.createElement("table",{...e})}function Jve(e){return he.createElement("div",{...e})}const W6=T.createContext(void 0);function $f(){const e=T.useContext(W6);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function exe(e){const{components:t}=$f();return he.createElement(t.Dropdown,{...e})}function txe(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:s,...o}=e,{components:a,classNames:i,labels:{labelPrevious:l,labelNext:c}}=$f(),f=T.useCallback(p=>{s&&n?.(p)},[s,n]),h=T.useCallback(p=>{r&&t?.(p)},[r,t]);return he.createElement("nav",{...o},he.createElement(a.PreviousMonthButton,{type:"button",className:i[Qe.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:h},he.createElement(a.Chevron,{disabled:r?void 0:!0,className:i[Qe.Chevron],orientation:"left"})),he.createElement(a.NextMonthButton,{type:"button",className:i[Qe.NextMonthButton],tabIndex:s?void 0:-1,"aria-disabled":s?void 0:!0,"aria-label":c(s),onClick:f},he.createElement(a.Chevron,{disabled:s?void 0:!0,orientation:"right",className:i[Qe.Chevron]})))}function nxe(e){const{components:t}=$f();return he.createElement(t.Button,{...e})}function rxe(e){return he.createElement("option",{...e})}function sxe(e){const{components:t}=$f();return he.createElement(t.Button,{...e})}function oxe(e){const{rootRef:t,...n}=e;return he.createElement("div",{...n,ref:t})}function axe(e){return he.createElement("select",{...e})}function ixe(e){const{week:t,...n}=e;return he.createElement("tr",{...n})}function lxe(e){return he.createElement("th",{...e})}function uxe(e){return he.createElement("thead",{"aria-hidden":!0},he.createElement("tr",{...e}))}function cxe(e){const{week:t,...n}=e;return he.createElement("th",{...n})}function dxe(e){return he.createElement("th",{...e})}function fxe(e){return he.createElement("tbody",{...e})}function hxe(e){const{components:t}=$f();return he.createElement(t.Dropdown,{...e})}const pxe=Object.freeze(Object.defineProperty({__proto__:null,Button:Wve,CaptionLabel:Vve,Chevron:zve,Day:Gve,DayButton:Hve,Dropdown:qve,DropdownNav:Kve,Footer:Xve,Month:Yve,MonthCaption:Qve,MonthGrid:Zve,Months:Jve,MonthsDropdown:exe,Nav:txe,NextMonthButton:nxe,Option:rxe,PreviousMonthButton:sxe,Root:oxe,Select:axe,Week:ixe,WeekNumber:cxe,WeekNumberHeader:dxe,Weekday:lxe,Weekdays:uxe,Weeks:fxe,YearsDropdown:hxe},Symbol.toStringTag,{value:"Module"}));function ci(e,t,n=!1,r=ja){let{from:s,to:o}=e;const{differenceInCalendarDays:a,isSameDay:i}=r;return s&&o?(a(o,s)<0&&([s,o]=[o,s]),a(t,s)>=(n?1:0)&&a(o,t)>=(n?1:0)):!n&&o?i(o,t):!n&&s?i(s,t):!1}function V6(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function $C(e){return!!(e&&typeof e=="object"&&"from"in e)}function z6(e){return!!(e&&typeof e=="object"&&"after"in e)}function G6(e){return!!(e&&typeof e=="object"&&"before"in e)}function H6(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function q6(e,t){return Array.isArray(e)&&e.every(t.isDate)}function di(e,t,n=ja){const r=Array.isArray(t)?t:[t],{isSameDay:s,differenceInCalendarDays:o,isAfter:a}=n;return r.some(i=>{if(typeof i=="boolean")return i;if(n.isDate(i))return s(e,i);if(q6(i,n))return i.includes(e);if($C(i))return ci(i,e,!1,n);if(H6(i))return Array.isArray(i.dayOfWeek)?i.dayOfWeek.includes(e.getDay()):i.dayOfWeek===e.getDay();if(V6(i)){const l=o(i.before,e),c=o(i.after,e),f=l>0,h=c<0;return a(i.before,i.after)?h&&f:f||h}return z6(i)?o(e,i.after)>0:G6(i)?o(i.before,e)>0:typeof i=="function"?i(e):!1})}function mxe(e,t,n,r,s){const{disabled:o,hidden:a,modifiers:i,showOutsideDays:l,broadcastCalendar:c,today:f}=t,{isSameDay:h,isSameMonth:p,startOfMonth:g,isBefore:y,endOfMonth:x,isAfter:v}=s,S=n&&g(n),N=r&&x(r),_={[xn.focused]:[],[xn.outside]:[],[xn.disabled]:[],[xn.hidden]:[],[xn.today]:[]},I={};for(const A of e){const{date:M,displayMonth:L}=A,W=!!(L&&!p(M,L)),j=!!(S&&y(M,S)),U=!!(N&&v(M,N)),P=!!(o&&di(M,o,s)),X=!!(a&&di(M,a,s))||j||U||!c&&!l&&W||c&&l===!1&&W,ae=h(M,f??s.today());W&&_.outside.push(A),P&&_.disabled.push(A),X&&_.hidden.push(A),ae&&_.today.push(A),i&&Object.keys(i).forEach(ee=>{const ie=i?.[ee];ie&&di(M,ie,s)&&(I[ee]?I[ee].push(A):I[ee]=[A])})}return A=>{const M={[xn.focused]:!1,[xn.disabled]:!1,[xn.hidden]:!1,[xn.outside]:!1,[xn.today]:!1},L={};for(const W in _){const j=_[W];M[W]=j.some(U=>U===A)}for(const W in I)L[W]=I[W].some(j=>j===A);return{...M,...L}}}function gxe(e,t,n={}){return Object.entries(e).filter(([,s])=>s===!0).reduce((s,[o])=>(n[o]?s.push(n[o]):t[xn[o]]?s.push(t[xn[o]]):t[Go[o]]&&s.push(t[Go[o]]),s),[t[Qe.Day]])}function yxe(e){return{...pxe,...e}}function vxe(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function _C(){const e={};for(const t in Qe)e[Qe[t]]=`rdp-${Qe[t]}`;for(const t in xn)e[xn[t]]=`rdp-${xn[t]}`;for(const t in Go)e[Go[t]]=`rdp-${Go[t]}`;for(const t in Ls)e[Ls[t]]=`rdp-${Ls[t]}`;return e}function K6(e,t,n){return(n??new Gs(t)).formatMonthYear(e)}const xxe=K6;function wxe(e,t,n){return(n??new Gs(t)).format(e,"d")}function bxe(e,t=ja){return t.format(e,"LLLL")}function Sxe(e,t,n){return(n??new Gs(t)).format(e,"cccccc")}function Cxe(e,t=ja){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function Exe(){return""}function X6(e,t=ja){return t.format(e,"yyyy")}const Nxe=X6,Txe=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:K6,formatDay:wxe,formatMonthCaption:xxe,formatMonthDropdown:bxe,formatWeekNumber:Cxe,formatWeekNumberHeader:Exe,formatWeekdayName:Sxe,formatYearCaption:Nxe,formatYearDropdown:X6},Symbol.toStringTag,{value:"Module"}));function kxe(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...Txe,...e}}function $xe(e,t,n,r,s){const{startOfMonth:o,startOfYear:a,endOfYear:i,eachMonthOfInterval:l,getMonth:c}=s;return l({start:a(e),end:i(e)}).map(p=>{const g=r.formatMonthDropdown(p,s),y=c(p),x=t&&p<o(t)||n&&p>o(n)||!1;return{value:y,label:g,disabled:x}})}function _xe(e,t={},n={}){let r={...t?.[Qe.Day]};return Object.entries(e).filter(([,s])=>s===!0).forEach(([s])=>{r={...r,...n?.[s]}}),r}function Rxe(e,t,n){const r=e.today(),s=t?e.startOfISOWeek(r):e.startOfWeek(r),o=[];for(let a=0;a<7;a++){const i=e.addDays(s,a);o.push(i)}return o}function Ixe(e,t,n,r,s=!1){if(!e||!t)return;const{startOfYear:o,endOfYear:a,eachYearOfInterval:i,getYear:l}=r,c=o(e),f=a(t),h=i({start:c,end:f});return s&&h.reverse(),h.map(p=>{const g=n.formatYearDropdown(p,r);return{value:l(p),label:g,disabled:!1}})}function Y6(e,t,n,r){let s=(r??new Gs(n)).format(e,"PPPP");return t.today&&(s=`Today, ${s}`),t.selected&&(s=`${s}, selected`),s}const Oxe=Y6;function Q6(e,t,n){return(n??new Gs(t)).formatMonthYear(e)}const Axe=Q6;function Pxe(e,t,n,r){let s=(r??new Gs(n)).format(e,"PPPP");return t?.today&&(s=`Today, ${s}`),s}function Dxe(e){return"Choose the Month"}function Fxe(){return""}function Lxe(e){return"Go to the Next Month"}function Mxe(e){return"Go to the Previous Month"}function Bxe(e,t,n){return(n??new Gs(t)).format(e,"cccc")}function jxe(e,t){return`Week ${e}`}function Uxe(e){return"Week Number"}function Wxe(e){return"Choose the Year"}const Vxe=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Axe,labelDay:Oxe,labelDayButton:Y6,labelGrid:Q6,labelGridcell:Pxe,labelMonthDropdown:Dxe,labelNav:Fxe,labelNext:Lxe,labelPrevious:Mxe,labelWeekNumber:jxe,labelWeekNumberHeader:Uxe,labelWeekday:Bxe,labelYearDropdown:Wxe},Symbol.toStringTag,{value:"Module"})),Fp=e=>e instanceof HTMLElement?e:null,Kx=e=>[...e.querySelectorAll("[data-animated-month]")??[]],zxe=e=>Fp(e.querySelector("[data-animated-month]")),Xx=e=>Fp(e.querySelector("[data-animated-caption]")),Yx=e=>Fp(e.querySelector("[data-animated-weeks]")),Gxe=e=>Fp(e.querySelector("[data-animated-nav]")),Hxe=e=>Fp(e.querySelector("[data-animated-weekdays]"));function qxe(e,t,{classNames:n,months:r,focused:s,dateLib:o}){const a=T.useRef(null),i=T.useRef(r),l=T.useRef(!1);T.useLayoutEffect(()=>{const c=i.current;if(i.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const f=o.isSameMonth(r[0].date,c[0].date),h=o.isAfter(r[0].date,c[0].date),p=h?n[Ls.caption_after_enter]:n[Ls.caption_before_enter],g=h?n[Ls.weeks_after_enter]:n[Ls.weeks_before_enter],y=a.current,x=e.current.cloneNode(!0);if(x instanceof HTMLElement?(Kx(x).forEach(_=>{if(!(_ instanceof HTMLElement))return;const I=zxe(_);I&&_.contains(I)&&_.removeChild(I);const A=Xx(_);A&&A.classList.remove(p);const M=Yx(_);M&&M.classList.remove(g)}),a.current=x):a.current=null,l.current||f||s)return;const v=y instanceof HTMLElement?Kx(y):[],S=Kx(e.current);if(S?.every(N=>N instanceof HTMLElement)&&v&&v.every(N=>N instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const N=Gxe(e.current);N&&(N.style.zIndex="1"),S.forEach((_,I)=>{const A=v[I];if(!A)return;_.style.position="relative",_.style.overflow="hidden";const M=Xx(_);M&&M.classList.add(p);const L=Yx(_);L&&L.classList.add(g);const W=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),N&&(N.style.zIndex=""),M&&M.classList.remove(p),L&&L.classList.remove(g),_.style.position="",_.style.overflow="",_.contains(A)&&_.removeChild(A)};A.style.pointerEvents="none",A.style.position="absolute",A.style.overflow="hidden",A.setAttribute("aria-hidden","true");const j=Hxe(A);j&&(j.style.opacity="0");const U=Xx(A);U&&(U.classList.add(h?n[Ls.caption_before_exit]:n[Ls.caption_after_exit]),U.addEventListener("animationend",W));const P=Yx(A);P&&P.classList.add(h?n[Ls.weeks_before_exit]:n[Ls.weeks_after_exit]),_.insertBefore(A,_.firstChild)})}})}function Kxe(e,t,n,r){const s=e[0],o=e[e.length-1],{ISOWeek:a,fixedWeeks:i,broadcastCalendar:l}=n??{},{addDays:c,differenceInCalendarDays:f,differenceInCalendarMonths:h,endOfBroadcastWeek:p,endOfISOWeek:g,endOfMonth:y,endOfWeek:x,isAfter:v,startOfBroadcastWeek:S,startOfISOWeek:N,startOfWeek:_}=r,I=l?S(s,r):a?N(s):_(s),A=l?p(o):a?g(y(o)):x(y(o)),M=f(A,I),L=h(o,s)+1,W=[];for(let P=0;P<=M;P++){const X=c(I,P);if(t&&v(X,t))break;W.push(X)}const U=(l?35:42)*L;if(i&&W.length<U){const P=U-W.length;for(let X=0;X<P;X++){const ae=c(W[W.length-1],1);W.push(ae)}}return W}function Xxe(e){const t=[];return e.reduce((n,r)=>{const s=r.weeks.reduce((o,a)=>o.concat(a.days.slice()),t.slice());return n.concat(s.slice())},t.slice())}function Yxe(e,t,n,r){const{numberOfMonths:s=1}=n,o=[];for(let a=0;a<s;a++){const i=r.addMonths(e,a);if(t&&i>t)break;o.push(i)}return o}function M4(e,t,n,r){const{month:s,defaultMonth:o,today:a=r.today(),numberOfMonths:i=1}=e;let l=s||o||a;const{differenceInCalendarMonths:c,addMonths:f,startOfMonth:h}=r;if(n&&c(n,l)<i-1){const p=-1*(i-1);l=f(n,p)}return t&&c(l,t)<0&&(l=t),h(l)}function Qxe(e,t,n,r){const{addDays:s,endOfBroadcastWeek:o,endOfISOWeek:a,endOfMonth:i,endOfWeek:l,getISOWeek:c,getWeek:f,startOfBroadcastWeek:h,startOfISOWeek:p,startOfWeek:g}=r,y=e.reduce((x,v)=>{const S=n.broadcastCalendar?h(v,r):n.ISOWeek?p(v):g(v),N=n.broadcastCalendar?o(v):n.ISOWeek?a(i(v)):l(i(v)),_=t.filter(L=>L>=S&&L<=N),I=n.broadcastCalendar?35:42;if(n.fixedWeeks&&_.length<I){const L=t.filter(W=>{const j=I-_.length;return W>N&&W<=s(N,j)});_.push(...L)}const A=_.reduce((L,W)=>{const j=n.ISOWeek?c(W):f(W),U=L.find(X=>X.weekNumber===j),P=new U6(W,v,r);return U?U.days.push(P):L.push(new Uve(j,[P])),L},[]),M=new jve(v,A);return x.push(M),x},[]);return n.reverseMonths?y.reverse():y}function Zxe(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:s,startOfDay:o,startOfMonth:a,endOfMonth:i,addYears:l,endOfYear:c,newDate:f,today:h}=t,{fromYear:p,toYear:g,fromMonth:y,toMonth:x}=e;!n&&y&&(n=y),!n&&p&&(n=t.newDate(p,0,1)),!r&&x&&(r=x),!r&&g&&(r=f(g,11,31));const v=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=a(n):p?n=f(p,0,1):!n&&v&&(n=s(l(e.today??h(),-100))),r?r=i(r):g?r=f(g,11,31):!r&&v&&(r=c(e.today??h())),[n&&o(n),r&&o(r)]}function Jxe(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o=1}=n,{startOfMonth:a,addMonths:i,differenceInCalendarMonths:l}=r,c=s?o:1,f=a(e);if(!t)return i(f,c);if(!(l(t,e)<o))return i(f,c)}function ewe(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:s,numberOfMonths:o}=n,{startOfMonth:a,addMonths:i,differenceInCalendarMonths:l}=r,c=s?o??1:1,f=a(e);if(!t)return i(f,-c);if(!(l(f,t)<=0))return i(f,-c)}function twe(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function J0(e,t){const[n,r]=T.useState(e);return[t===void 0?n:t,r]}function nwe(e,t){const[n,r]=Zxe(e,t),{startOfMonth:s,endOfMonth:o}=t,a=M4(e,n,r,t),[i,l]=J0(a,e.month?a:void 0);T.useEffect(()=>{const M=M4(e,n,r,t);l(M)},[e.timeZone]);const c=Yxe(i,r,e,t),f=Kxe(c,e.endMonth?o(e.endMonth):void 0,e,t),h=Qxe(c,f,e,t),p=twe(h),g=Xxe(h),y=ewe(i,n,e,t),x=Jxe(i,r,e,t),{disableNavigation:v,onMonthChange:S}=e,N=M=>p.some(L=>L.days.some(W=>W.isEqualTo(M))),_=M=>{if(v)return;let L=s(M);n&&L<s(n)&&(L=s(n)),r&&L>s(r)&&(L=s(r)),l(L),S?.(L)};return{months:h,weeks:p,days:g,navStart:n,navEnd:r,previousMonth:y,nextMonth:x,goToMonth:_,goToDay:M=>{N(M)||_(M.date)}}}var ba;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(ba||(ba={}));function B4(e){return!e[xn.disabled]&&!e[xn.hidden]&&!e[xn.outside]}function rwe(e,t,n,r){let s,o=-1;for(const a of e){const i=t(a);B4(i)&&(i[xn.focused]&&o<ba.FocusedModifier?(s=a,o=ba.FocusedModifier):r?.isEqualTo(a)&&o<ba.LastFocused?(s=a,o=ba.LastFocused):n(a.date)&&o<ba.Selected?(s=a,o=ba.Selected):i[xn.today]&&o<ba.Today&&(s=a,o=ba.Today))}return s||(s=e.find(a=>B4(t(a)))),s}function swe(e,t,n,r,s,o,a){const{ISOWeek:i,broadcastCalendar:l}=o,{addDays:c,addMonths:f,addWeeks:h,addYears:p,endOfBroadcastWeek:g,endOfISOWeek:y,endOfWeek:x,max:v,min:S,startOfBroadcastWeek:N,startOfISOWeek:_,startOfWeek:I}=a;let M={day:c,week:h,month:f,year:p,startOfWeek:L=>l?N(L,a):i?_(L):I(L),endOfWeek:L=>l?g(L):i?y(L):x(L)}[e](n,t==="after"?1:-1);return t==="before"&&r?M=v([r,M]):t==="after"&&s&&(M=S([s,M])),M}function Z6(e,t,n,r,s,o,a,i=0){if(i>365)return;const l=swe(e,t,n.date,r,s,o,a),c=!!(o.disabled&&di(l,o.disabled,a)),f=!!(o.hidden&&di(l,o.hidden,a)),h=l,p=new U6(l,h,a);return!c&&!f?p:Z6(e,t,p,r,s,o,a,i+1)}function owe(e,t,n,r,s){const{autoFocus:o}=e,[a,i]=T.useState(),l=rwe(t.days,n,r||(()=>!1),a),[c,f]=T.useState(o?l:void 0);return{isFocusTarget:x=>!!l?.isEqualTo(x),setFocused:f,focused:c,blur:()=>{i(c),f(void 0)},moveFocus:(x,v)=>{if(!c)return;const S=Z6(x,v,c,t.navStart,t.navEnd,e,s);S&&(e.disableNavigation&&!t.days.some(_=>_.isEqualTo(S))||(t.goToDay(S),f(S)))}}}function awe(e,t){const{selected:n,required:r,onSelect:s}=e,[o,a]=J0(n,s?n:void 0),i=s?n:o,{isSameDay:l}=t,c=g=>i?.some(y=>l(y,g))??!1,{min:f,max:h}=e;return{selected:i,select:(g,y,x)=>{let v=[...i??[]];if(c(g)){if(i?.length===f||r&&i?.length===1)return;v=i?.filter(S=>!l(S,g))}else i?.length===h?v=[g]:v=[...v,g];return s||a(v),s?.(v,g,y,x),v},isSelected:c}}function iwe(e,t,n=0,r=0,s=!1,o=ja){const{from:a,to:i}=t||{},{isSameDay:l,isAfter:c,isBefore:f}=o;let h;if(!a&&!i)h={from:e,to:n>0?void 0:e};else if(a&&!i)l(a,e)?n===0?h={from:a,to:e}:s?h={from:a,to:void 0}:h=void 0:f(e,a)?h={from:e,to:a}:h={from:a,to:e};else if(a&&i)if(l(a,e)&&l(i,e))s?h={from:a,to:i}:h=void 0;else if(l(a,e))h={from:a,to:n>0?void 0:e};else if(l(i,e))h={from:e,to:n>0?void 0:e};else if(f(e,a))h={from:e,to:i};else if(c(e,a))h={from:a,to:e};else if(c(e,i))h={from:a,to:e};else throw new Error("Invalid range");if(h?.from&&h?.to){const p=o.differenceInCalendarDays(h.to,h.from);r>0&&p>r?h={from:e,to:void 0}:n>1&&p<n&&(h={from:e,to:void 0})}return h}function lwe(e,t,n=ja){const r=Array.isArray(t)?t:[t];let s=e.from;const o=n.differenceInCalendarDays(e.to,e.from),a=Math.min(o,6);for(let i=0;i<=a;i++){if(r.includes(s.getDay()))return!0;s=n.addDays(s,1)}return!1}function j4(e,t,n=ja){return ci(e,t.from,!1,n)||ci(e,t.to,!1,n)||ci(t,e.from,!1,n)||ci(t,e.to,!1,n)}function uwe(e,t,n=ja){const r=Array.isArray(t)?t:[t];if(r.filter(i=>typeof i!="function").some(i=>typeof i=="boolean"?i:n.isDate(i)?ci(e,i,!1,n):q6(i,n)?i.some(l=>ci(e,l,!1,n)):$C(i)?i.from&&i.to?j4(e,{from:i.from,to:i.to},n):!1:H6(i)?lwe(e,i.dayOfWeek,n):V6(i)?n.isAfter(i.before,i.after)?j4(e,{from:n.addDays(i.after,1),to:n.addDays(i.before,-1)},n):di(e.from,i,n)||di(e.to,i,n):z6(i)||G6(i)?di(e.from,i,n)||di(e.to,i,n):!1))return!0;const a=r.filter(i=>typeof i=="function");if(a.length){let i=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let c=0;c<=l;c++){if(a.some(f=>f(i)))return!0;i=n.addDays(i,1)}}return!1}function cwe(e,t){const{disabled:n,excludeDisabled:r,selected:s,required:o,onSelect:a}=e,[i,l]=J0(s,a?s:void 0),c=a?s:i;return{selected:c,select:(p,g,y)=>{const{min:x,max:v}=e,S=p?iwe(p,c,x,v,o,t):void 0;return r&&n&&S?.from&&S.to&&uwe({from:S.from,to:S.to},n,t)&&(S.from=p,S.to=void 0),a||l(S),a?.(S,p,g,y),S},isSelected:p=>c&&ci(c,p,!1,t)}}function dwe(e,t){const{selected:n,required:r,onSelect:s}=e,[o,a]=J0(n,s?n:void 0),i=s?n:o,{isSameDay:l}=t;return{selected:i,select:(h,p,g)=>{let y=h;return!r&&i&&i&&l(h,i)&&(y=void 0),s||a(y),s?.(y,h,p,g),y},isSelected:h=>i?l(i,h):!1}}function fwe(e,t){const n=dwe(e,t),r=awe(e,t),s=cwe(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return s;default:return}}function U4(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new Rr(t.today,t.timeZone)),t.month&&(t.month=new Rr(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new Rr(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new Rr(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new Rr(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new Rr(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(lt=>new Rr(lt,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new Rr(t.selected.from,t.timeZone):void 0,to:t.selected.to?new Rr(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:r,labels:s,dateLib:o,locale:a,classNames:i}=T.useMemo(()=>{const lt={...T2,...t.locale};return{dateLib:new Gs({locale:lt,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:yxe(t.components),formatters:kxe(t.formatters),labels:{...Vxe,...t.labels},locale:lt,classNames:{..._C(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:l,mode:c,navLayout:f,numberOfMonths:h=1,onDayBlur:p,onDayClick:g,onDayFocus:y,onDayKeyDown:x,onDayMouseEnter:v,onDayMouseLeave:S,onNextClick:N,onPrevClick:_,showWeekNumber:I,styles:A}=t,{formatCaption:M,formatDay:L,formatMonthDropdown:W,formatWeekNumber:j,formatWeekNumberHeader:U,formatWeekdayName:P,formatYearDropdown:X}=r,ae=nwe(t,o),{days:ee,months:ie,navStart:le,navEnd:we,previousMonth:te,nextMonth:oe,goToMonth:pe}=ae,Y=mxe(ee,t,le,we,o),{isSelected:G,select:re,selected:ce}=fwe(t,o)??{},{blur:xe,focused:Ce,isFocusTarget:ye,moveFocus:Ee,setFocused:ke}=owe(t,ae,Y,G??(()=>!1),o),{labelDayButton:De,labelGridcell:Ze,labelGrid:ht,labelMonthDropdown:dt,labelNav:Rt,labelPrevious:Mr,labelNext:Br,labelWeekday:vr,labelWeekNumber:eo,labelWeekNumberHeader:aa,labelYearDropdown:ks}=s,ur=T.useMemo(()=>Rxe(o,t.ISOWeek),[o,t.ISOWeek]),$s=c!==void 0||g!==void 0,cr=T.useCallback(()=>{te&&(pe(te),_?.(te))},[te,pe,_]),xr=T.useCallback(()=>{oe&&(pe(oe),N?.(oe))},[pe,oe,N]),Ua=T.useCallback((lt,xt)=>Je=>{Je.preventDefault(),Je.stopPropagation(),ke(lt),re?.(lt.date,xt,Je),g?.(lt.date,xt,Je)},[re,g,ke]),Sn=T.useCallback((lt,xt)=>Je=>{ke(lt),y?.(lt.date,xt,Je)},[y,ke]),wr=T.useCallback((lt,xt)=>Je=>{xe(),p?.(lt.date,xt,Je)},[xe,p]),ia=T.useCallback((lt,xt)=>Je=>{const St={ArrowLeft:[Je.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[Je.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[Je.shiftKey?"year":"week","after"],ArrowUp:[Je.shiftKey?"year":"week","before"],PageUp:[Je.shiftKey?"year":"month","before"],PageDown:[Je.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(St[Je.key]){Je.preventDefault(),Je.stopPropagation();const[qt,ut]=St[Je.key];Ee(qt,ut)}x?.(lt.date,xt,Je)},[Ee,x,t.dir]),Wa=T.useCallback((lt,xt)=>Je=>{v?.(lt.date,xt,Je)},[v]),es=T.useCallback((lt,xt)=>Je=>{S?.(lt.date,xt,Je)},[S]),to=T.useCallback(lt=>xt=>{const Je=Number(xt.target.value),St=o.setMonth(o.startOfMonth(lt),Je);pe(St)},[o,pe]),Va=T.useCallback(lt=>xt=>{const Je=Number(xt.target.value),St=o.setYear(o.startOfMonth(lt),Je);pe(St)},[o,pe]),{className:ts,style:jr}=T.useMemo(()=>({className:[i[Qe.Root],t.className].filter(Boolean).join(" "),style:{...A?.[Qe.Root],...t.style}}),[i,t.className,t.style,A]),za=vxe(t),Ur=T.useRef(null);qxe(Ur,!!t.animate,{classNames:i,months:ie,focused:Ce,dateLib:o});const la={dayPickerProps:t,selected:ce,select:re,isSelected:G,months:ie,nextMonth:oe,previousMonth:te,goToMonth:pe,getModifiers:Y,components:n,classNames:i,styles:A,labels:s,formatters:r};return he.createElement(W6.Provider,{value:la},he.createElement(n.Root,{rootRef:t.animate?Ur:void 0,className:ts,style:jr,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...za},he.createElement(n.Months,{className:i[Qe.Months],style:A?.[Qe.Months]},!t.hideNavigation&&!f&&he.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[Qe.Nav],style:A?.[Qe.Nav],"aria-label":Rt(),onPreviousClick:cr,onNextClick:xr,previousMonth:te,nextMonth:oe}),ie.map((lt,xt)=>he.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:i[Qe.Month],style:A?.[Qe.Month],key:xt,displayIndex:xt,calendarMonth:lt},f==="around"&&!t.hideNavigation&&xt===0&&he.createElement(n.PreviousMonthButton,{type:"button",className:i[Qe.PreviousMonthButton],tabIndex:te?void 0:-1,"aria-disabled":te?void 0:!0,"aria-label":Mr(te),onClick:cr,"data-animated-button":t.animate?"true":void 0},he.createElement(n.Chevron,{disabled:te?void 0:!0,className:i[Qe.Chevron],orientation:t.dir==="rtl"?"right":"left"})),he.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:i[Qe.MonthCaption],style:A?.[Qe.MonthCaption],calendarMonth:lt,displayIndex:xt},l?.startsWith("dropdown")?he.createElement(n.DropdownNav,{className:i[Qe.Dropdowns],style:A?.[Qe.Dropdowns]},(()=>{const Je=l==="dropdown"||l==="dropdown-months"?he.createElement(n.MonthsDropdown,{key:"month",className:i[Qe.MonthsDropdown],"aria-label":dt(),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:to(lt.date),options:$xe(lt.date,le,we,r,o),style:A?.[Qe.Dropdown],value:o.getMonth(lt.date)}):he.createElement("span",{key:"month"},W(lt.date,o)),St=l==="dropdown"||l==="dropdown-years"?he.createElement(n.YearsDropdown,{key:"year",className:i[Qe.YearsDropdown],"aria-label":ks(o.options),classNames:i,components:n,disabled:!!t.disableNavigation,onChange:Va(lt.date),options:Ixe(le,we,r,o,!!t.reverseYears),style:A?.[Qe.Dropdown],value:o.getYear(lt.date)}):he.createElement("span",{key:"year"},X(lt.date,o));return o.getMonthYearOrder()==="year-first"?[St,Je]:[Je,St]})(),he.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},M(lt.date,o.options,o))):he.createElement(n.CaptionLabel,{className:i[Qe.CaptionLabel],role:"status","aria-live":"polite"},M(lt.date,o.options,o))),f==="around"&&!t.hideNavigation&&xt===h-1&&he.createElement(n.NextMonthButton,{type:"button",className:i[Qe.NextMonthButton],tabIndex:oe?void 0:-1,"aria-disabled":oe?void 0:!0,"aria-label":Br(oe),onClick:xr,"data-animated-button":t.animate?"true":void 0},he.createElement(n.Chevron,{disabled:oe?void 0:!0,className:i[Qe.Chevron],orientation:t.dir==="rtl"?"left":"right"})),xt===h-1&&f==="after"&&!t.hideNavigation&&he.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:i[Qe.Nav],style:A?.[Qe.Nav],"aria-label":Rt(),onPreviousClick:cr,onNextClick:xr,previousMonth:te,nextMonth:oe}),he.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":ht(lt.date,o.options,o)||void 0,className:i[Qe.MonthGrid],style:A?.[Qe.MonthGrid]},!t.hideWeekdays&&he.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:i[Qe.Weekdays],style:A?.[Qe.Weekdays]},I&&he.createElement(n.WeekNumberHeader,{"aria-label":aa(o.options),className:i[Qe.WeekNumberHeader],style:A?.[Qe.WeekNumberHeader],scope:"col"},U()),ur.map(Je=>he.createElement(n.Weekday,{"aria-label":vr(Je,o.options,o),className:i[Qe.Weekday],key:String(Je),style:A?.[Qe.Weekday],scope:"col"},P(Je,o.options,o)))),he.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:i[Qe.Weeks],style:A?.[Qe.Weeks]},lt.weeks.map(Je=>he.createElement(n.Week,{className:i[Qe.Week],key:Je.weekNumber,style:A?.[Qe.Week],week:Je},I&&he.createElement(n.WeekNumber,{week:Je,style:A?.[Qe.WeekNumber],"aria-label":eo(Je.weekNumber,{locale:a}),className:i[Qe.WeekNumber],scope:"row",role:"rowheader"},j(Je.weekNumber,o)),Je.days.map(St=>{const{date:qt}=St,ut=Y(St);if(ut[xn.focused]=!ut.hidden&&!!Ce?.isEqualTo(St),ut[Go.selected]=G?.(qt)||ut.selected,$C(ce)){const{from:It,to:an}=ce;ut[Go.range_start]=!!(It&&an&&o.isSameDay(qt,It)),ut[Go.range_end]=!!(It&&an&&o.isSameDay(qt,an)),ut[Go.range_middle]=ci(ce,qt,!0,o)}const Ga=_xe(ut,A,t.modifiersStyles),Ye=gxe(ut,i,t.modifiersClassNames),Nt=!$s&&!ut.hidden?Ze(qt,ut,o.options,o):void 0;return he.createElement(n.Day,{key:`${o.format(qt,"yyyy-MM-dd")}_${o.format(St.displayMonth,"yyyy-MM")}`,day:St,modifiers:ut,className:Ye.join(" "),style:Ga,role:"gridcell","aria-selected":ut.selected||void 0,"aria-label":Nt,"data-day":o.format(qt,"yyyy-MM-dd"),"data-month":St.outside?o.format(qt,"yyyy-MM"):void 0,"data-selected":ut.selected||void 0,"data-disabled":ut.disabled||void 0,"data-hidden":ut.hidden||void 0,"data-outside":St.outside||void 0,"data-focused":ut.focused||void 0,"data-today":ut.today||void 0},!ut.hidden&&$s?he.createElement(n.DayButton,{className:i[Qe.DayButton],style:A?.[Qe.DayButton],type:"button",day:St,modifiers:ut,disabled:ut.disabled||void 0,tabIndex:ye(St)?0:-1,"aria-label":De(qt,ut,o.options,o),onClick:Ua(St,ut),onBlur:wr(St,ut),onFocus:Sn(St,ut),onKeyDown:ia(St,ut),onMouseEnter:Wa(St,ut),onMouseLeave:es(St,ut)},L(qt,o.options,o)):!ut.hidden&&L(St.date,o.options,o))})))))))),t.footer&&he.createElement(n.Footer,{className:i[Qe.Footer],style:A?.[Qe.Footer],role:"status","aria-live":"polite"},t.footer)))}const hwe=$f;function pwe({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:r="label",buttonVariant:s="ghost",formatters:o,components:a,hideDefaultNav:i,...l}){const c=_C(),f={className:Ie("bg-background group/calendar [--cell-size:--spacing(8)]","[[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button_previous>svg]:rotate-180`,e),showOutsideDays:n,formatters:{formatMonthDropdown:h=>h.toLocaleString("default",{month:"short"}),...o},classNames:{root:Ie("w-fit",c.root),months:Ie("flex gap-4 flex-col md:flex-row relative",c.months),month:Ie("flex flex-col w-full gap-4",c.month),nav:Ie("flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",i&&"hidden",c.nav),button_previous:Ie(Cw({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_previous),button_next:Ie(Cw({variant:s}),"size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",c.button_next),month_caption:Ie("flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",c.month_caption),dropdowns:Ie("w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",c.dropdowns),dropdown_root:Ie("relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",c.dropdown_root),dropdown:Ie("absolute bg-popover inset-0 opacity-0",c.dropdown),caption_label:Ie("select-none font-medium",r==="label"?"text-sm":"rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",c.caption_label),table:"w-full border-collapse",weekdays:Ie("grid grid-cols-7 px-4",c.weekdays),weekday:Ie("text-muted-foreground rounded-md font-semibold text-[13px] select-none text-center",c.weekday),week:Ie("grid grid-cols-7 px-4 mt-1",c.week),week_number_header:Ie("select-none w-(--cell-size)",c.week_number_header),week_number:Ie("text-[0.8rem] select-none text-muted-foreground",c.week_number),day:Ie("relative p-0 text-center group/day aspect-square",c.day),range_start:Ie("rounded-l-md bg-accent",c.range_start),range_middle:Ie("rounded-none bg-accent",c.range_middle),range_end:Ie("rounded-r-md bg-accent",c.range_end),today:Ie("ring-1 ring-neutral-400 rounded-md",c.today),outside:Ie("text-neutral-400 aria-selected:text-neutral-400",c.outside),disabled:Ie("text-muted-foreground opacity-50",c.disabled),hidden:Ie("invisible",c.hidden),...t},components:{Root:({className:h,rootRef:p,...g})=>C.jsx("div",{"data-slot":"calendar",ref:p,className:Ie(h),...g}),Chevron:({className:h,orientation:p,...g})=>p==="left"?C.jsx(q8,{className:Ie("size-4",h),...g}):p==="right"?C.jsx(X8,{className:Ie("size-4",h),...g}):C.jsx(s2,{className:Ie("size-4",h),...g}),DayButton:mwe,...a},...l};if(a?.Caption){const{captionLayout:h,...p}=f;return C.jsx(U4,{...p})}return C.jsx(U4,{...f,captionLayout:r})}function mwe({className:e,day:t,modifiers:n,...r}){const s=_C(),o=T.useRef(null);return T.useEffect(()=>{n.focused&&o.current?.focus()},[n.focused]),C.jsx(vt,{ref:o,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,className:Ie("h-10 w-10 rounded-md text-sm leading-10 data-[selected-single=true]:bg-neutral-900 data-[selected-single=true]:text-white hover:bg-neutral-200/50 focus:bg-neutral-200/60 focus:outline-none",s.day,e),...r})}const J6=T.createContext(void 0);function gwe(){const e=T.useContext(J6);if(!e)throw new Error("useDateRange must be used within a DateRangeProvider");return e}function ywe({month:e}){const{goToMonth:t}=hwe(),{minDate:n,maxDate:r}=gwe(),s=zT(e,1),o=zh(e,1),a=zT(e,12),i=zh(e,12),l=h=>!!n&&hR(h,new Date(n.getFullYear(),n.getMonth(),1)),c=h=>!!r&&fR(h,new Date(r.getFullYear(),r.getMonth(),1)),f=({className:h,children:p,...g})=>C.jsx("button",{...g,className:Ie("h-8 w-8 rounded-md grid place-items-center text-[15px] font-semibold","hover:bg-neutral-200/50 focus:outline-none focus:ring-2 focus:ring-ring","disabled:opacity-40 disabled:pointer-events-none",h),children:p});return C.jsxs("div",{className:"flex items-center justify-between px-4 pt-3 pb-1.5",children:[C.jsxs("div",{className:"flex items-center gap-1 text-neutral-900",children:[" ",C.jsx(f,{"aria-label":"Previous year",onClick:()=>t(a),disabled:l(a),children:"«"}),C.jsx(f,{"aria-label":"Previous month",onClick:()=>t(s),disabled:l(s),children:"‹"})]}),C.jsxs("div",{className:"select-none flex items-baseline gap-6 text-neutral-900",children:[" ",C.jsx("span",{className:"text-base font-semibold tracking-wide",children:yi(e,"MMM")}),C.jsx("span",{className:"text-base font-bold",children:yi(e,"yyyy")})]}),C.jsxs("div",{className:"flex items-center gap-1 text-neutral-900",children:[" ",C.jsx(f,{"aria-label":"Next month",onClick:()=>t(o),disabled:c(o),children:"›"}),C.jsx(f,{"aria-label":"Next year",onClick:()=>t(i),disabled:c(i),children:"»"})]})]})}function vwe({label:e="Date of birth",required:t=!1,value:n,onChange:r,placeholder:s="Select your date of birth",minDate:o=new Date(1900,0,1),maxDate:a=NG(Id(new Date)),inputClassName:i,disabled:l=!1,id:c,hasError:f=!1}){const[h,p]=T.useState(n||void 0);T.useEffect(()=>{p(n||void 0)},[n]);const g=y=>{p(y),r?.(y??null)};return C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{htmlFor:c,className:"text-xs text-neutral-90 leading-5",children:[e," ",t&&C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsxs(L6,{children:[C.jsx(M6,{asChild:!0,children:C.jsxs(vt,{id:c,variant:"outline",className:Ie("h-10 px-4 py-2 rounded-lg border-2",f?"border-destructive":"border-neutral-40","bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 w-full justify-start text-left font-normal",!h&&"text-neutral-60",i,l&&"opacity-50 cursor-not-allowed"),disabled:l,children:[C.jsx(U8,{className:"mr-2 h-4 w-4"}),h?yi(h,"PPP"):C.jsx("span",{children:s})]})}),C.jsx(kC,{align:"start",className:"w-auto p-1.5 rounded-3xl shadow-lg border bg-white",children:C.jsx("div",{className:"rounded-3xl bg-neutral-100/60",children:C.jsx(J6.Provider,{value:{minDate:o,maxDate:a},children:C.jsx(pwe,{hideDefaultNav:!0,mode:"single",selected:h,onSelect:g,initialFocus:!0,showOutsideDays:!0,weekStartsOn:0,fromDate:o,toDate:a,defaultMonth:n??new Date(2001,0,1),components:{Caption:y=>C.jsx(ywe,{...y,month:y.month})},className:"rounded-3xl p-1.5",classNames:{nav:"hidden",months:"p-3",month:"space-y-2",head_row:"grid grid-cols-7 px-4",head_cell:"h-8 w-10 text-[13px] font-semibold text-neutral-600 text-center",row:"grid grid-cols-7 px-4",cell:"relative p-0 text-center",day:"h-10 w-10 rounded-md text-sm leading-10 hover:bg-neutral-200/50 focus:bg-neutral-200/60 focus:outline-none",day_selected:"bg-neutral-900 text-white",caption:"pb-1"}})})})})]})]})}function xwe(){const{jobId:e}=G_(),[t,n]=T.useState({fullName:"",dob:"",gender:"",domicile:"",phone:"",email:"",linkedin:"",photoUrl:"",countryDialCode:"+62"}),[r,s]=T.useState(!1),[o,a]=T.useState({}),i=T.useCallback(h=>{n(p=>({...p,countryDialCode:h}))},[]),l=h=>{n({...t,photoUrl:h})},c=z_(),f=async h=>{if(h.preventDefault(),a({}),!e){Ch({title:"Error",description:"Job ID is missing. Cannot submit application.",variant:"destructive"});return}try{const p={fullName:t.fullName,email:t.email,phone:t.countryDialCode+t.phone,dob:t.dob,domicile:t.domicile,gender:t.gender==="female"?"Female":"Male",linkedin:t.linkedin,photoUrl:t.photoUrl||void 0},g=await fetch(`/api/jobs/${e}/applications`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(g.status===422){const y=await g.json();a(y.fieldErrors),Ch({title:"Validation Error",description:"Please correct the highlighted fields.",variant:"destructive"})}else if(g.ok)Ch({title:"Application submitted",description:"Your application has been successfully submitted."}),c("/apply/success");else throw new Error(`HTTP error! status: ${g.status}`)}catch(p){console.error("Failed to submit form:",p),Ch({title:"Error",description:`Failed to submit application: ${p.message}`,variant:"destructive"})}};return C.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral-20",children:[C.jsx(ny,{}),C.jsx("main",{className:"flex-1 flex items-start justify-center py-[50px] px-4",children:C.jsxs("div",{className:"w-full max-w-[700px] bg-white border border-neutral-40 rounded-lg",children:[C.jsxs("div",{className:"p-10 flex flex-col gap-6",children:[C.jsxs("div",{className:"flex items-start gap-4",children:[C.jsx(vp,{to:"/",className:"inline-flex p-1 justify-center items-center gap-1 rounded-lg border border-neutral-40 bg-white shadow-[0_1px_2px_0_rgba(0,0,0,0.12)]",children:C.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C.jsx("path",{d:"M15.8332 10H4.1665",stroke:"#1D1F20",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),C.jsx("path",{d:"M9.99984 15.8337L4.1665 10.0003L9.99984 4.16699",stroke:"#333333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),C.jsxs("div",{className:"flex-1 flex items-start gap-2",children:[C.jsx("h1",{className:"flex-1 text-lg font-bold text-neutral-100 leading-7",children:"Apply Front End at Ugblue"}),C.jsx("p",{className:"text-sm text-neutral-90 leading-6",children:"ℹ️ This field required to fill"})]})]}),C.jsxs("form",{onSubmit:f,className:"px-6 flex flex-col gap-4",children:[C.jsx("p",{className:"text-xs font-bold text-destructive leading-5",children:"* Required"}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsx("label",{className:"text-xs font-bold text-neutral-90 leading-5",children:"Photo Profile"}),C.jsx("div",{className:`w-32 h-32 rounded-2xl bg-cover bg-center bg-neutral-40 ${o.photoUrl?"border-2 border-destructive":""}`,style:{backgroundImage:`url(${t.photoUrl||"/placeholder.svg"})`}}),C.jsx(q1e,{open:r,onOpenChange:s,onCapture:l,children:C.jsx(P2,{asChild:!0,children:C.jsxs("button",{type:"button",className:"inline-flex px-4 py-1 justify-center items-center gap-1 rounded-lg border border-neutral-40 bg-white shadow-[0_1px_2px_0_rgba(0,0,0,0.12)] w-fit",children:[C.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M2.6665 10.6663L2.6665 11.333C2.6665 12.4376 3.56193 13.333 4.6665 13.333L11.3332 13.333C12.4377 13.333 13.3332 12.4376 13.3332 11.333L13.3332 10.6663M10.6665 5.33301L7.99984 2.66634M7.99984 2.66634L5.33317 5.33301M7.99984 2.66634L7.99984 10.6663",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),C.jsx("span",{className:"text-sm font-bold text-neutral-100 leading-6",children:"Take a Picture"})]})})}),o.photoUrl&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.photoUrl})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Full name",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsx("input",{type:"text",placeholder:"Enter your full name",className:`h-10 px-4 py-2 rounded-lg border-2 ${o.fullName?"border-destructive":"border-neutral-40"} bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 focus:outline-none focus:border-primary`,value:t.fullName,onChange:h=>n({...t,fullName:h.target.value})}),o.fullName&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.fullName})]}),C.jsx(vwe,{id:"dob",label:"Date of birth",required:!0,value:t.dob?iG(t.dob):null,onChange:h=>n({...t,dob:h&&sR(h)?yi(h,"yyyy-MM-dd"):""}),hasError:!!o.dob}),o.dob&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.dob}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Pronoun (gender)",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsxs("div",{className:"flex gap-6",children:[C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"radio",name:"gender",value:"female",className:`w-6 h-6 accent-neutral-90 ${o.gender?"border-destructive":""}`,checked:t.gender==="female",onChange:h=>n({...t,gender:h.target.value})}),C.jsx("span",{className:"text-sm text-neutral-90 leading-6",children:"She/her (Female)"})]}),C.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[C.jsx("input",{type:"radio",name:"gender",value:"male",className:`w-6 h-6 accent-neutral-90 ${o.gender?"border-destructive":""}`,checked:t.gender==="male",onChange:h=>n({...t,gender:h.target.value})}),C.jsx("span",{className:"text-sm text-neutral-90 leading-6",children:"He/him (Male)"})]})]}),o.gender&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.gender})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Domicile",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsxs("div",{className:"relative",children:[C.jsx("input",{type:"text",placeholder:"Choose your domicile",className:`h-10 px-4 py-2 rounded-lg border-2 ${o.domicile?"border-destructive":"border-neutral-40"} bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 w-full focus:outline-none focus:border-primary`,value:t.domicile,onChange:h=>n({...t,domicile:h.target.value})}),C.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M4 6L8 10L12 6",stroke:"#1D1F20",strokeLinecap:"round",strokeLinejoin:"round"})})]}),o.domicile&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.domicile})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Phone number",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsxs("div",{className:`flex rounded-lg border-2 ${o.phone?"border-destructive":"border-neutral-40"} bg-white focus-within:border-primary`,children:[C.jsx(Ove,{onCountryChange:i,defaultDialCode:t.countryDialCode}),C.jsx("span",{className:"flex items-center pl-2 text-sm text-neutral-90 leading-6",children:t.countryDialCode}),C.jsx("input",{type:"tel",placeholder:"81XXXXXXXXX",className:"flex-1 h-10 px-2 py-2 bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 outline-none rounded-r-lg",value:t.phone,onChange:h=>n({...t,phone:h.target.value})})]}),o.phone&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.phone})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Email",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsx("input",{type:"email",placeholder:"Enter your email address",className:`h-10 px-4 py-2 rounded-lg border-2 ${o.email?"border-destructive":"border-neutral-40"} bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 focus:outline-none focus:border-primary`,value:t.email,onChange:h=>n({...t,email:h.target.value})}),o.email&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.email})]}),C.jsxs("div",{className:"flex flex-col gap-2",children:[C.jsxs("label",{className:"text-xs text-neutral-90 leading-5",children:["Link Linkedin",C.jsx("span",{className:"text-destructive",children:"*"})]}),C.jsx("input",{type:"url",placeholder:"https://linkedin.com/in/username",className:`h-10 px-4 py-2 rounded-lg border-2 ${o.linkedin?"border-destructive":"border-neutral-40"} bg-white text-sm text-neutral-90 placeholder:text-neutral-60 leading-6 focus:outline-none focus:border-primary`,value:t.linkedin,onChange:h=>n({...t,linkedin:h.target.value})}),o.linkedin&&C.jsx("p",{className:"text-xs text-destructive leading-5",children:o.linkedin})]})]})]}),C.jsx("div",{className:"px-10 py-6 border-t border-neutral-40 bg-white",children:C.jsx("button",{onClick:f,className:"w-full px-4 py-1.5 rounded-lg bg-primary shadow-[0_1px_2px_0_rgba(0,0,0,0.12)] text-base font-bold text-white leading-7 hover:bg-primary-hover transition-colors",children:"Submit"})})]})})]})}const yd=T.forwardRef(({className:e,type:t,...n},r)=>C.jsx("input",{type:t,className:Ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));yd.displayName="Input";const Lb=T.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ie("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Lb.displayName="Card";const e5=T.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ie("flex flex-col space-y-1.5 p-6",e),...t}));e5.displayName="CardHeader";const t5=T.forwardRef(({className:e,...t},n)=>C.jsx("h3",{ref:n,className:Ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));t5.displayName="CardTitle";const n5=T.forwardRef(({className:e,...t},n)=>C.jsx("p",{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));n5.displayName="CardDescription";const Mb=T.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ie("p-6 pt-0",e),...t}));Mb.displayName="CardContent";const wwe=T.forwardRef(({className:e,...t},n)=>C.jsx("div",{ref:n,className:Ie("flex items-center p-6 pt-0",e),...t}));wwe.displayName="CardFooter";var Qx={exports:{}},Zx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W4;function bwe(){if(W4)return Zx;W4=1;var e=Ay();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,a=e.useDebugValue;function i(h,p){var g=p(),y=r({inst:{value:g,getSnapshot:p}}),x=y[0].inst,v=y[1];return o(function(){x.value=g,x.getSnapshot=p,l(x)&&v({inst:x})},[h,g,p]),s(function(){return l(x)&&v({inst:x}),h(function(){l(x)&&v({inst:x})})},[h]),a(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function c(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:i;return Zx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Zx}var V4;function Swe(){return V4||(V4=1,Qx.exports=bwe()),Qx.exports}var Cwe=Swe();function Ewe(){return Cwe.useSyncExternalStore(Nwe,()=>!0,()=>!1)}function Nwe(){return()=>{}}var RC="Avatar",[Twe]=Fa(RC),[kwe,r5]=Twe(RC),s5=T.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,o]=T.useState("idle");return C.jsx(kwe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:C.jsx(ot.span,{...r,ref:t})})});s5.displayName=RC;var o5="AvatarImage",a5=T.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=e,a=r5(o5,n),i=$we(r,o),l=wo(c=>{s(c),a.onImageLoadingStatusChange(c)});return jn(()=>{i!=="idle"&&l(i)},[i,l]),i==="loaded"?C.jsx(ot.img,{...o,ref:t,src:r}):null});a5.displayName=o5;var i5="AvatarFallback",l5=T.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,o=r5(i5,n),[a,i]=T.useState(r===void 0);return T.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&o.imageLoadingStatus!=="loaded"?C.jsx(ot.span,{...s,ref:t}):null});l5.displayName=i5;function z4(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function $we(e,{referrerPolicy:t,crossOrigin:n}){const r=Ewe(),s=T.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,i]=T.useState(()=>z4(o,e));return jn(()=>{i(z4(o,e))},[o,e]),jn(()=>{const l=h=>()=>{i(h)};if(!o)return;const c=l("loaded"),f=l("error");return o.addEventListener("load",c),o.addEventListener("error",f),t&&(o.referrerPolicy=t),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",c),o.removeEventListener("error",f)}},[o,n,t]),a}var u5=s5,c5=a5,d5=l5;const cp=T.forwardRef(({className:e,...t},n)=>C.jsx(u5,{ref:n,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));cp.displayName=u5.displayName;const IC=T.forwardRef(({className:e,...t},n)=>C.jsx(c5,{ref:n,className:Ie("aspect-square h-full w-full",e),...t}));IC.displayName=c5.displayName;const dp=T.forwardRef(({className:e,...t},n)=>C.jsx(d5,{ref:n,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));dp.displayName=d5.displayName;function G4(e,[t,n]){return Math.min(n,Math.max(t,e))}var _we=T.createContext(void 0);function Rwe(e){const t=T.useContext(_we);return e||t||"ltr"}var Iwe=[" ","Enter","ArrowUp","ArrowDown"],Owe=[" ","Enter"],uc="Select",[e1,t1,Awe]=f$(uc),[_f]=Fa(uc,[Awe,rf]),n1=rf(),[Pwe,Ul]=_f(uc),[Dwe,Fwe]=_f(uc),f5=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:i,onValueChange:l,dir:c,name:f,autoComplete:h,disabled:p,required:g,form:y}=e,x=n1(t),[v,S]=T.useState(null),[N,_]=T.useState(null),[I,A]=T.useState(!1),M=Rwe(c),[L,W]=Vu({prop:r,defaultProp:s??!1,onChange:o,caller:uc}),[j,U]=Vu({prop:a,defaultProp:i,onChange:l,caller:uc}),P=T.useRef(null),X=v?y||!!v.closest("form"):!0,[ae,ee]=T.useState(new Set),ie=Array.from(ae).map(le=>le.props.value).join(";");return C.jsx(v_,{...x,children:C.jsxs(Pwe,{required:g,scope:t,trigger:v,onTriggerChange:S,valueNode:N,onValueNodeChange:_,valueNodeHasChildren:I,onValueNodeHasChildrenChange:A,contentId:js(),value:j,onValueChange:U,open:L,onOpenChange:W,dir:M,triggerPointerDownPosRef:P,disabled:p,children:[C.jsx(e1.Provider,{scope:t,children:C.jsx(Dwe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(le=>{ee(we=>new Set(we).add(le))},[]),onNativeOptionRemove:T.useCallback(le=>{ee(we=>{const te=new Set(we);return te.delete(le),te})},[]),children:n})}),X?C.jsxs(F5,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:j,onChange:le=>U(le.target.value),disabled:p,form:y,children:[j===void 0?C.jsx("option",{value:""}):null,Array.from(ae)]},ie):null]})})};f5.displayName=uc;var h5="SelectTrigger",p5=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,o=n1(n),a=Ul(h5,n),i=a.disabled||r,l=Mt(t,a.onTriggerChange),c=t1(n),f=T.useRef("touch"),[h,p,g]=M5(x=>{const v=c().filter(_=>!_.disabled),S=v.find(_=>_.value===a.value),N=B5(v,x,S);N!==void 0&&a.onValueChange(N.value)}),y=x=>{i||(a.onOpenChange(!0),g()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return C.jsx(jy,{asChild:!0,...o,children:C.jsx(ot.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":L5(a.value)?"":void 0,...s,ref:l,onClick:it(s.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&y(x)}),onPointerDown:it(s.onPointerDown,x=>{f.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(y(x),x.preventDefault())}),onKeyDown:it(s.onKeyDown,x=>{const v=h.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(v&&x.key===" ")&&Iwe.includes(x.key)&&(y(),x.preventDefault())})})})});p5.displayName=h5;var m5="SelectValue",g5=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...i}=e,l=Ul(m5,n),{onValueNodeHasChildrenChange:c}=l,f=o!==void 0,h=Mt(t,l.onValueNodeChange);return jn(()=>{c(f)},[c,f]),C.jsx(ot.span,{...i,ref:h,style:{pointerEvents:"none"},children:L5(l.value)?C.jsx(C.Fragment,{children:a}):o})});g5.displayName=m5;var Lwe="SelectIcon",y5=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return C.jsx(ot.span,{"aria-hidden":!0,...s,ref:t,children:r||"▼"})});y5.displayName=Lwe;var Mwe="SelectPortal",v5=e=>C.jsx(fp,{asChild:!0,...e});v5.displayName=Mwe;var cc="SelectContent",x5=T.forwardRef((e,t)=>{const n=Ul(cc,e.__scopeSelect),[r,s]=T.useState();if(jn(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?Zd.createPortal(C.jsx(w5,{scope:e.__scopeSelect,children:C.jsx(e1.Slot,{scope:e.__scopeSelect,children:C.jsx("div",{children:e.children})})}),o):null}return C.jsx(b5,{...e,ref:t})});x5.displayName=cc;var jo=10,[w5,Wl]=_f(cc),Bwe="SelectContentImpl",jwe=Wu("SelectContent.RemoveScroll"),b5=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:i,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:x,avoidCollisions:v,...S}=e,N=Ul(cc,n),[_,I]=T.useState(null),[A,M]=T.useState(null),L=Mt(t,ye=>I(ye)),[W,j]=T.useState(null),[U,P]=T.useState(null),X=t1(n),[ae,ee]=T.useState(!1),ie=T.useRef(!1);T.useEffect(()=>{if(_)return $2(_)},[_]),k2();const le=T.useCallback(ye=>{const[Ee,...ke]=X().map(ht=>ht.ref.current),[De]=ke.slice(-1),Ze=document.activeElement;for(const ht of ye)if(ht===Ze||(ht?.scrollIntoView({block:"nearest"}),ht===Ee&&A&&(A.scrollTop=0),ht===De&&A&&(A.scrollTop=A.scrollHeight),ht?.focus(),document.activeElement!==Ze))return},[X,A]),we=T.useCallback(()=>le([W,_]),[le,W,_]);T.useEffect(()=>{ae&&we()},[ae,we]);const{onOpenChange:te,triggerPointerDownPosRef:oe}=N;T.useEffect(()=>{if(_){let ye={x:0,y:0};const Ee=De=>{ye={x:Math.abs(Math.round(De.pageX)-(oe.current?.x??0)),y:Math.abs(Math.round(De.pageY)-(oe.current?.y??0))}},ke=De=>{ye.x<=10&&ye.y<=10?De.preventDefault():_.contains(De.target)||te(!1),document.removeEventListener("pointermove",Ee),oe.current=null};return oe.current!==null&&(document.addEventListener("pointermove",Ee),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ee),document.removeEventListener("pointerup",ke,{capture:!0})}}},[_,te,oe]),T.useEffect(()=>{const ye=()=>te(!1);return window.addEventListener("blur",ye),window.addEventListener("resize",ye),()=>{window.removeEventListener("blur",ye),window.removeEventListener("resize",ye)}},[te]);const[pe,Y]=M5(ye=>{const Ee=X().filter(Ze=>!Ze.disabled),ke=Ee.find(Ze=>Ze.ref.current===document.activeElement),De=B5(Ee,ye,ke);De&&setTimeout(()=>De.ref.current.focus())}),G=T.useCallback((ye,Ee,ke)=>{const De=!ie.current&&!ke;(N.value!==void 0&&N.value===Ee||De)&&(j(ye),De&&(ie.current=!0))},[N.value]),re=T.useCallback(()=>_?.focus(),[_]),ce=T.useCallback((ye,Ee,ke)=>{const De=!ie.current&&!ke;(N.value!==void 0&&N.value===Ee||De)&&P(ye)},[N.value]),xe=r==="popper"?Bb:S5,Ce=xe===Bb?{side:i,sideOffset:l,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:x,avoidCollisions:v}:{};return C.jsx(w5,{scope:n,content:_,viewport:A,onViewportChange:M,itemRefCallback:G,selectedItem:W,onItemLeave:re,itemTextRefCallback:ce,focusSelectedItem:we,selectedItemText:U,position:r,isPositioned:ae,searchRef:pe,children:C.jsx(Hy,{as:jwe,allowPinchZoom:!0,children:C.jsx(zy,{asChild:!0,trapped:N.open,onMountAutoFocus:ye=>{ye.preventDefault()},onUnmountAutoFocus:it(s,ye=>{N.trigger?.focus({preventScroll:!0}),ye.preventDefault()}),children:C.jsx(Jd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:ye=>ye.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:C.jsx(xe,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:ye=>ye.preventDefault(),...S,...Ce,onPlaced:()=>ee(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:it(S.onKeyDown,ye=>{const Ee=ye.ctrlKey||ye.altKey||ye.metaKey;if(ye.key==="Tab"&&ye.preventDefault(),!Ee&&ye.key.length===1&&Y(ye.key),["ArrowUp","ArrowDown","Home","End"].includes(ye.key)){let De=X().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(ye.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(ye.key)){const Ze=ye.target,ht=De.indexOf(Ze);De=De.slice(ht+1)}setTimeout(()=>le(De)),ye.preventDefault()}})})})})})})});b5.displayName=Bwe;var Uwe="SelectItemAlignedPosition",S5=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,o=Ul(cc,n),a=Wl(cc,n),[i,l]=T.useState(null),[c,f]=T.useState(null),h=Mt(t,L=>f(L)),p=t1(n),g=T.useRef(!1),y=T.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:S,focusSelectedItem:N}=a,_=T.useCallback(()=>{if(o.trigger&&o.valueNode&&i&&c&&x&&v&&S){const L=o.trigger.getBoundingClientRect(),W=c.getBoundingClientRect(),j=o.valueNode.getBoundingClientRect(),U=S.getBoundingClientRect();if(o.dir!=="rtl"){const Ze=U.left-W.left,ht=j.left-Ze,dt=L.left-ht,Rt=L.width+dt,Mr=Math.max(Rt,W.width),Br=window.innerWidth-jo,vr=G4(ht,[jo,Math.max(jo,Br-Mr)]);i.style.minWidth=Rt+"px",i.style.left=vr+"px"}else{const Ze=W.right-U.right,ht=window.innerWidth-j.right-Ze,dt=window.innerWidth-L.right-ht,Rt=L.width+dt,Mr=Math.max(Rt,W.width),Br=window.innerWidth-jo,vr=G4(ht,[jo,Math.max(jo,Br-Mr)]);i.style.minWidth=Rt+"px",i.style.right=vr+"px"}const P=p(),X=window.innerHeight-jo*2,ae=x.scrollHeight,ee=window.getComputedStyle(c),ie=parseInt(ee.borderTopWidth,10),le=parseInt(ee.paddingTop,10),we=parseInt(ee.borderBottomWidth,10),te=parseInt(ee.paddingBottom,10),oe=ie+le+ae+te+we,pe=Math.min(v.offsetHeight*5,oe),Y=window.getComputedStyle(x),G=parseInt(Y.paddingTop,10),re=parseInt(Y.paddingBottom,10),ce=L.top+L.height/2-jo,xe=X-ce,Ce=v.offsetHeight/2,ye=v.offsetTop+Ce,Ee=ie+le+ye,ke=oe-Ee;if(Ee<=ce){const Ze=P.length>0&&v===P[P.length-1].ref.current;i.style.bottom="0px";const ht=c.clientHeight-x.offsetTop-x.offsetHeight,dt=Math.max(xe,Ce+(Ze?re:0)+ht+we),Rt=Ee+dt;i.style.height=Rt+"px"}else{const Ze=P.length>0&&v===P[0].ref.current;i.style.top="0px";const dt=Math.max(ce,ie+x.offsetTop+(Ze?G:0)+Ce)+ke;i.style.height=dt+"px",x.scrollTop=Ee-ce+x.offsetTop}i.style.margin=`${jo}px 0`,i.style.minHeight=pe+"px",i.style.maxHeight=X+"px",r?.(),requestAnimationFrame(()=>g.current=!0)}},[p,o.trigger,o.valueNode,i,c,x,v,S,o.dir,r]);jn(()=>_(),[_]);const[I,A]=T.useState();jn(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const M=T.useCallback(L=>{L&&y.current===!0&&(_(),N?.(),y.current=!1)},[_,N]);return C.jsx(Vwe,{scope:n,contentWrapper:i,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:C.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:C.jsx(ot.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});S5.displayName=Uwe;var Wwe="SelectPopperPosition",Bb=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=jo,...o}=e,a=n1(n);return C.jsx(g2,{...a,...o,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Bb.displayName=Wwe;var[Vwe,OC]=_f(cc,{}),jb="SelectViewport",C5=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,o=Wl(jb,n),a=OC(jb,n),i=Mt(t,o.onViewportChange),l=T.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),C.jsx(e1.Slot,{scope:n,children:C.jsx(ot.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:it(s.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=a;if(p?.current&&h){const g=Math.abs(l.current-f.scrollTop);if(g>0){const y=window.innerHeight-jo*2,x=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),S=Math.max(x,v);if(S<y){const N=S+g,_=Math.min(y,N),I=N-_;h.style.height=_+"px",h.style.bottom==="0px"&&(f.scrollTop=I>0?I:0,h.style.justifyContent="flex-end")}}}l.current=f.scrollTop})})})]})});C5.displayName=jb;var E5="SelectGroup",[zwe,Gwe]=_f(E5),Hwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=js();return C.jsx(zwe,{scope:n,id:s,children:C.jsx(ot.div,{role:"group","aria-labelledby":s,...r,ref:t})})});Hwe.displayName=E5;var N5="SelectLabel",T5=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Gwe(N5,n);return C.jsx(ot.div,{id:s.id,...r,ref:t})});T5.displayName=N5;var Iy="SelectItem",[qwe,k5]=_f(Iy),$5=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=e,i=Ul(Iy,n),l=Wl(Iy,n),c=i.value===r,[f,h]=T.useState(o??""),[p,g]=T.useState(!1),y=Mt(t,N=>l.itemRefCallback?.(N,r,s)),x=js(),v=T.useRef("touch"),S=()=>{s||(i.onValueChange(r),i.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(qwe,{scope:n,value:r,disabled:s,textId:x,isSelected:c,onItemTextChange:T.useCallback(N=>{h(_=>_||(N?.textContent??"").trim())},[]),children:C.jsx(e1.ItemSlot,{scope:n,value:r,disabled:s,textValue:f,children:C.jsx(ot.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:it(a.onFocus,()=>g(!0)),onBlur:it(a.onBlur,()=>g(!1)),onClick:it(a.onClick,()=>{v.current!=="mouse"&&S()}),onPointerUp:it(a.onPointerUp,()=>{v.current==="mouse"&&S()}),onPointerDown:it(a.onPointerDown,N=>{v.current=N.pointerType}),onPointerMove:it(a.onPointerMove,N=>{v.current=N.pointerType,s?l.onItemLeave?.():v.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:it(a.onPointerLeave,N=>{N.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:it(a.onKeyDown,N=>{l.searchRef?.current!==""&&N.key===" "||(Owe.includes(N.key)&&S(),N.key===" "&&N.preventDefault())})})})})});$5.displayName=Iy;var Ih="SelectItemText",_5=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...o}=e,a=Ul(Ih,n),i=Wl(Ih,n),l=k5(Ih,n),c=Fwe(Ih,n),[f,h]=T.useState(null),p=Mt(t,S=>h(S),l.onItemTextChange,S=>i.itemTextRefCallback?.(S,l.value,l.disabled)),g=f?.textContent,y=T.useMemo(()=>C.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=c;return jn(()=>(x(y),()=>v(y)),[x,v,y]),C.jsxs(C.Fragment,{children:[C.jsx(ot.span,{id:l.textId,...o,ref:p}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Zd.createPortal(o.children,a.valueNode):null]})});_5.displayName=Ih;var R5="SelectItemIndicator",I5=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return k5(R5,n).isSelected?C.jsx(ot.span,{"aria-hidden":!0,...r,ref:t}):null});I5.displayName=R5;var Ub="SelectScrollUpButton",O5=T.forwardRef((e,t)=>{const n=Wl(Ub,e.__scopeSelect),r=OC(Ub,e.__scopeSelect),[s,o]=T.useState(!1),a=Mt(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let i=function(){const c=l.scrollTop>0;o(c)};const l=n.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?C.jsx(P5,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop-l.offsetHeight)}}):null});O5.displayName=Ub;var Wb="SelectScrollDownButton",A5=T.forwardRef((e,t)=>{const n=Wl(Wb,e.__scopeSelect),r=OC(Wb,e.__scopeSelect),[s,o]=T.useState(!1),a=Mt(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let i=function(){const c=l.scrollHeight-l.clientHeight,f=Math.ceil(l.scrollTop)<c;o(f)};const l=n.viewport;return i(),l.addEventListener("scroll",i),()=>l.removeEventListener("scroll",i)}},[n.viewport,n.isPositioned]),s?C.jsx(P5,{...e,ref:a,onAutoScroll:()=>{const{viewport:i,selectedItem:l}=n;i&&l&&(i.scrollTop=i.scrollTop+l.offsetHeight)}}):null});A5.displayName=Wb;var P5=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,o=Wl("SelectScrollButton",n),a=T.useRef(null),i=t1(n),l=T.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),jn(()=>{i().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[i]),C.jsx(ot.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:it(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:it(s.onPointerMove,()=>{o.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:it(s.onPointerLeave,()=>{l()})})}),Kwe="SelectSeparator",D5=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return C.jsx(ot.div,{"aria-hidden":!0,...r,ref:t})});D5.displayName=Kwe;var Vb="SelectArrow",Xwe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=n1(n),o=Ul(Vb,n),a=Wl(Vb,n);return o.open&&a.position==="popper"?C.jsx(y2,{...s,...r,ref:t}):null});Xwe.displayName=Vb;var Ywe="SelectBubbleInput",F5=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=T.useRef(null),o=Mt(r,s),a=D2(t);return T.useEffect(()=>{const i=s.current;if(!i)return;const l=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==t&&f){const h=new Event("change",{bubbles:!0});f.call(i,t),i.dispatchEvent(h)}},[a,t]),C.jsx(ot.select,{...n,style:{...y$,...n.style},ref:o,defaultValue:t})});F5.displayName=Ywe;function L5(e){return e===""||e===void 0}function M5(e){const t=wo(e),n=T.useRef(""),r=T.useRef(0),s=T.useCallback(a=>{const i=n.current+a;t(i),(function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(i)},[t]),o=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function B5(e,t,n){const s=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let a=Qwe(e,Math.max(o,0));s.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function Qwe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Zwe=f5,j5=p5,Jwe=g5,ebe=y5,tbe=v5,U5=x5,nbe=C5,W5=T5,V5=$5,rbe=_5,sbe=I5,z5=O5,G5=A5,H5=D5;const obe=Zwe,abe=Jwe,q5=T.forwardRef(({className:e,children:t,...n},r)=>C.jsxs(j5,{ref:r,className:Ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,C.jsx(ebe,{asChild:!0,children:C.jsx(s2,{className:"h-4 w-4 opacity-50"})})]}));q5.displayName=j5.displayName;const K5=T.forwardRef(({className:e,...t},n)=>C.jsx(z5,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(Q8,{className:"h-4 w-4"})}));K5.displayName=z5.displayName;const X5=T.forwardRef(({className:e,...t},n)=>C.jsx(G5,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:C.jsx(s2,{className:"h-4 w-4"})}));X5.displayName=G5.displayName;const Y5=T.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>C.jsx(tbe,{children:C.jsxs(U5,{ref:s,className:Ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[C.jsx(K5,{}),C.jsx(nbe,{className:Ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),C.jsx(X5,{})]})}));Y5.displayName=U5.displayName;const ibe=T.forwardRef(({className:e,...t},n)=>C.jsx(W5,{ref:n,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ibe.displayName=W5.displayName;const Hg=T.forwardRef(({className:e,children:t,...n},r)=>C.jsxs(V5,{ref:r,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[C.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:C.jsx(sbe,{children:C.jsx(r2,{className:"h-4 w-4"})})}),C.jsx(rbe,{children:t})]}));Hg.displayName=V5.displayName;const lbe=T.forwardRef(({className:e,...t},n)=>C.jsx(H5,{ref:n,className:Ie("-mx-1 my-1 h-px bg-muted",e),...t}));lbe.displayName=H5.displayName;const Q5=T.forwardRef(({className:e,...t},n)=>C.jsx("textarea",{className:Ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Q5.displayName="Textarea";const ube=({isOpen:e,onOpenChange:t,onSave:n})=>{const[r,s]=T.useState(""),[o,a]=T.useState(""),[i,l]=T.useState(""),[c,f]=T.useState(0),[h,p]=T.useState(""),[g,y]=T.useState(""),[x,v]=T.useState("mandatory"),[S,N]=T.useState("mandatory"),[_,I]=T.useState("mandatory"),[A,M]=T.useState("mandatory"),[L,W]=T.useState("mandatory"),j=(P,X)=>P===X?"bg-teal-500 text-white":"",U=()=>{n({title:r,type:o,description:i,numCandidates:c,salaryMin:h,salaryMax:g}),t(!1),s(""),a(""),l(""),f(0),p(""),y("")};return C.jsx(Ky,{open:e,onOpenChange:t,children:C.jsxs(Xy,{className:"sm:max-w-[600px] rounded-xl bg-white shadow-2xl max-h-[653px] overflow-y-auto",children:[C.jsxs(Yy,{children:[C.jsx(Qy,{className:"text-2xl font-bold",children:"Job Opening"}),C.jsx(Zy,{children:"Fill in the details to create a new job opening."})]}),C.jsxs("div",{className:"grid gap-4 py-4",children:[C.jsxs("div",{className:"grid gap-2",children:[C.jsxs(pr,{htmlFor:"jobName",className:"text-base font-semibold",children:["Job Name",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx(yd,{id:"jobName",placeholder:"Ex. Front End Engineer",value:r,onChange:P=>s(P.target.value)})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsxs(pr,{htmlFor:"jobType",className:"text-base font-semibold",children:["Job Type",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsxs(obe,{value:o,onValueChange:a,children:[C.jsx(q5,{children:C.jsx(abe,{placeholder:"Select job type"})}),C.jsxs(Y5,{children:[C.jsx(Hg,{value:"full-time",children:"Full-time"}),C.jsx(Hg,{value:"part-time",children:"Part-time"}),C.jsx(Hg,{value:"contract",children:"Contract"})]})]})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsxs(pr,{htmlFor:"jobDescription",className:"text-base font-semibold",children:["Job Description",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx(Q5,{id:"jobDescription",placeholder:"Write a brief description here...",value:i,onChange:P=>l(P.target.value)})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsxs(pr,{htmlFor:"numCandidates",className:"text-base font-semibold",children:["Number of Candidate Needed",C.jsx("span",{className:"text-red-500",children:"*"})]}),C.jsx(yd,{id:"numCandidates",type:"number",placeholder:"Ex. 2",value:c,onChange:P=>f(Number(P.target.value))})]}),C.jsxs("div",{className:"grid gap-2",children:[C.jsx(pr,{className:"text-base font-semibold",children:"Job Salary"}),C.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[C.jsxs("div",{className:"relative",children:[C.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Rp"}),C.jsx(yd,{className:"pl-9",placeholder:"7.000.000",value:h,onChange:P=>p(P.target.value)})]}),C.jsxs("div",{className:"relative",children:[C.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Rp"}),C.jsx(yd,{className:"pl-9",placeholder:"8.000.000",value:g,onChange:P=>y(P.target.value)})]})]})]}),C.jsxs("div",{className:"mt-6",children:[C.jsx("h3",{className:"text-lg font-bold mb-4",children:"Minimum Profile Information Required"}),C.jsxs("div",{className:"grid gap-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Full name"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",className:"bg-teal-500 text-white",children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Photo Profile"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",className:"bg-teal-500 text-white",children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Gender"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>v("mandatory"),className:j(x,"mandatory"),children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>v("optional"),className:j(x,"optional"),children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>v("off"),className:j(x,"off"),children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Domicile"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>N("mandatory"),className:j(S,"mandatory"),children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>N("optional"),className:j(S,"optional"),children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>N("off"),className:j(S,"off"),children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Email"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",className:"bg-teal-500 text-white",children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",disabled:!0,children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Phone number"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>I("mandatory"),className:j(_,"mandatory"),children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>I("optional"),className:j(_,"optional"),children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>I("off"),className:j(_,"off"),children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"LinkedIn Link"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>M("mandatory"),className:j(A,"mandatory"),children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>M("optional"),className:j(A,"optional"),children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>M("off"),className:j(A,"off"),children:"Off"})]})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx(pr,{className:"text-base",children:"Date of birth"}),C.jsxs("div",{className:"flex gap-2",children:[C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>W("mandatory"),className:j(L,"mandatory"),children:"Mandatory"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>W("optional"),className:j(L,"optional"),children:"Optional"}),C.jsx(vt,{variant:"outline",size:"sm",onClick:()=>W("off"),className:j(L,"off"),children:"Off"})]})]})]})]})]}),C.jsx(GR,{children:C.jsx(vt,{type:"button",onClick:U,className:"bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Publish Job"})})]})})},cbe=()=>{const[e,t]=T.useState(!1),[n,r]=T.useState([]),s=async()=>{try{const i=await fetch("/api/jobs");if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const l=await i.json();r(l.data)}catch(i){console.error("Failed to fetch jobs:",i)}};T.useEffect(()=>{s()},[]);const o=async i=>{try{const l=await fetch("/api/jobs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i.title,description:i.description,requirements:"",salaryMin:parseFloat(i.salaryMin.replace(/\./g,"").replace(",","."))||0,salaryMax:parseFloat(i.salaryMax.replace(/\./g,"").replace(",","."))||0,location:"Jakarta Selatan",jobType:i.type,jobStatus:"draft",company:"Rakamin"})});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);await l.json(),s()}catch(l){console.error("Failed to save job:",l)}},a=i=>{switch(i){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-yellow-100 text-yellow-800";default:return""}};return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsxs("header",{className:"w-full bg-white shadow-sm py-4 px-8 flex justify-between items-center",children:[C.jsx("h1",{className:"text-2xl font-bold",children:"Job List"}),C.jsxs(cp,{children:[C.jsx(IC,{src:"https://api.builder.io/api/v1/image/assets/TEMP/e8a36fb1d9f45dae7cb3c58860fad5ef79c0d4c5?width=56",alt:"User Avatar"}),C.jsx(dp,{children:"CN"})]})]}),C.jsxs("main",{className:"container mx-auto p-8 grid grid-cols-1 md:grid-cols-3 gap-8",children:[C.jsxs("div",{className:"md:col-span-2",children:[C.jsxs("div",{className:"relative mb-8",children:[C.jsx(yd,{type:"text",placeholder:"Search by job details",className:"pl-10 pr-4 py-2 rounded-md border border-gray-300 w-full"}),C.jsx(j$,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"})]}),C.jsx("div",{className:"flex flex-col gap-4",children:n.length>0?n.map(i=>C.jsx(Lb,{className:"p-4 shadow-md",children:C.jsxs(Mb,{className:"flex flex-col gap-2",children:[C.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[C.jsx("span",{className:`px-2 py-1 rounded-full font-semibold ${a(i.jobStatus?i.jobStatus.toLowerCase():"")}`,children:i.jobStatus}),C.jsx("span",{className:"text-gray-600",children:i.list_card.started_on_text})]}),C.jsx("h2",{className:"text-xl font-bold",children:i.title}),C.jsx("p",{className:"text-gray-700",children:i.salary_range.display_text}),C.jsxs("p",{className:"text-gray-500 text-sm",children:["ID: ",i.id]})," ",C.jsx("div",{className:"flex justify-end",children:C.jsx(vt,{asChild:!0,className:"bg-[#01959F] hover:bg-[#01959F]/90 text-white px-4 py-2 rounded-md",children:C.jsx(vp,{to:`/admin/manage-job/${i.id}`,onClick:()=>console.log("Navigating to job ID:",i.id),children:"Manage Job"})})})]})},i.id)):C.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[C.jsx("img",{src:"/kosong managejob.svg",alt:"No jobs",className:"max-w-xs mb-4"}),C.jsx("p",{className:"text-gray-500 text-lg",children:"No jobs available. Create a new job to get started!"})]})})]}),C.jsx("div",{className:"md:col-span-1",children:C.jsxs(Lb,{className:"bg-black text-white p-6 rounded-lg shadow-lg",children:[C.jsxs(e5,{children:[C.jsx(t5,{className:"text-2xl font-bold mb-2",children:"Recruit the best candidates"}),C.jsx(n5,{className:"text-gray-300",children:"Create jobs, invite, and hire with ease"})]}),C.jsx(Mb,{children:C.jsxs(Ky,{open:e,onOpenChange:t,children:[C.jsx(P2,{asChild:!0,children:C.jsx(vt,{type:"button",className:"bg-[#01959F] hover:bg-[#01959F]/90 text-white px-6 py-3 rounded-md w-full",children:"Create a new job"})}),C.jsx(ube,{isOpen:e,onOpenChange:t,onSave:o})]})})]})})]})]})};var r1="Checkbox",[dbe]=Fa(r1),[fbe,AC]=dbe(r1);function hbe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:o,form:a,name:i,onCheckedChange:l,required:c,value:f="on",internal_do_not_use_render:h}=e,[p,g]=Vu({prop:n,defaultProp:s??!1,onChange:l,caller:r1}),[y,x]=T.useState(null),[v,S]=T.useState(null),N=T.useRef(!1),_=y?!!a||!!y.closest("form"):!0,I={checked:p,disabled:o,setChecked:g,control:y,setControl:x,name:i,form:a,value:f,hasConsumerStoppedPropagationRef:N,required:c,defaultChecked:Sl(s)?!1:s,isFormControl:_,bubbleInput:v,setBubbleInput:S};return C.jsx(fbe,{scope:t,...I,children:pbe(h)?h(I):r})}var Z5="CheckboxTrigger",J5=T.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:o,value:a,disabled:i,checked:l,required:c,setControl:f,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:g,bubbleInput:y}=AC(Z5,e),x=Mt(s,f),v=T.useRef(l);return T.useEffect(()=>{const S=o?.form;if(S){const N=()=>h(v.current);return S.addEventListener("reset",N),()=>S.removeEventListener("reset",N)}},[o,h]),C.jsx(ot.button,{type:"button",role:"checkbox","aria-checked":Sl(l)?"mixed":l,"aria-required":c,"data-state":sB(l),"data-disabled":i?"":void 0,disabled:i,value:a,...r,ref:x,onKeyDown:it(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:it(n,S=>{h(N=>Sl(N)?!0:!N),y&&g&&(p.current=S.isPropagationStopped(),p.current||S.stopPropagation())})})});J5.displayName=Z5;var PC=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:o,required:a,disabled:i,value:l,onCheckedChange:c,form:f,...h}=e;return C.jsx(hbe,{__scopeCheckbox:n,checked:s,defaultChecked:o,disabled:i,required:a,onCheckedChange:c,name:r,form:f,value:l,internal_do_not_use_render:({isFormControl:p})=>C.jsxs(C.Fragment,{children:[C.jsx(J5,{...h,ref:t,__scopeCheckbox:n}),p&&C.jsx(rB,{__scopeCheckbox:n})]})})});PC.displayName=r1;var eB="CheckboxIndicator",tB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,o=AC(eB,n);return C.jsx(Ei,{present:r||Sl(o.checked)||o.checked===!0,children:C.jsx(ot.span,{"data-state":sB(o.checked),"data-disabled":o.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});tB.displayName=eB;var nB="CheckboxBubbleInput",rB=T.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:o,defaultChecked:a,required:i,disabled:l,name:c,value:f,form:h,bubbleInput:p,setBubbleInput:g}=AC(nB,e),y=Mt(n,g),x=D2(o),v=h2(r);T.useEffect(()=>{const N=p;if(!N)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"checked").set,M=!s.current;if(x!==o&&A){const L=new Event("click",{bubbles:M});N.indeterminate=Sl(o),A.call(N,Sl(o)?!1:o),N.dispatchEvent(L)}},[p,x,o,s]);const S=T.useRef(Sl(o)?!1:o);return C.jsx(ot.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??S.current,required:i,disabled:l,name:c,value:f,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});rB.displayName=nB;function pbe(e){return typeof e=="function"}function Sl(e){return e==="indeterminate"}function sB(e){return Sl(e)?"indeterminate":e?"checked":"unchecked"}const zb=T.forwardRef(({className:e,...t},n)=>C.jsx(PC,{ref:n,className:Ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:C.jsx(tB,{className:Ie("flex items-center justify-center text-current"),children:C.jsx(r2,{className:"h-4 w-4"})})}));zb.displayName=PC.displayName;const oB=T.forwardRef(({className:e,...t},n)=>C.jsx("div",{className:"relative w-full overflow-auto",children:C.jsx("table",{ref:n,className:Ie("w-full caption-bottom text-sm",e),...t})}));oB.displayName="Table";const aB=T.forwardRef(({className:e,...t},n)=>C.jsx("thead",{ref:n,className:Ie("[&_tr]:border-b",e),...t}));aB.displayName="TableHeader";const iB=T.forwardRef(({className:e,...t},n)=>C.jsx("tbody",{ref:n,className:Ie("[&_tr:last-child]:border-0",e),...t}));iB.displayName="TableBody";const mbe=T.forwardRef(({className:e,...t},n)=>C.jsx("tfoot",{ref:n,className:Ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));mbe.displayName="TableFooter";const Gb=T.forwardRef(({className:e,...t},n)=>C.jsx("tr",{ref:n,className:Ie("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Gb.displayName="TableRow";const Mo=T.forwardRef(({className:e,...t},n)=>C.jsx("th",{ref:n,className:Ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Mo.displayName="TableHead";const Bo=T.forwardRef(({className:e,...t},n)=>C.jsx("td",{ref:n,className:Ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Bo.displayName="TableCell";const gbe=T.forwardRef(({className:e,...t},n)=>C.jsx("caption",{ref:n,className:Ie("mt-4 text-sm text-muted-foreground",e),...t}));gbe.displayName="TableCaption";const ybe=({isOpen:e,onClose:t,candidate:n})=>n?C.jsx(Ky,{open:e,onOpenChange:t,children:C.jsxs(Xy,{className:"sm:max-w-[600px]",children:[C.jsxs(Yy,{children:[C.jsx(Qy,{children:"Candidate Details"}),C.jsxs(Zy,{children:["Detailed information about ",n.fullName,"."]})]}),C.jsxs("div",{className:"grid gap-4 py-4",children:[C.jsxs("div",{className:"flex items-center space-x-4",children:[n.photoUrl?C.jsx("img",{src:n.photoUrl,alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):C.jsx(cp,{className:"w-20 h-20",children:C.jsx(dp,{className:"text-3xl",children:n.fullName?n.fullName.charAt(0):"N/A"})}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-xl font-semibold",children:n.fullName}),C.jsx("p",{className:"text-gray-500",children:n.email})]})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[C.jsxs("div",{className:"col-span-1",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Phone Number:"}),C.jsx("p",{className:"text-base",children:n.phone||"N/A"})]}),C.jsxs("div",{className:"col-span-1",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Gender:"}),C.jsx("p",{className:"text-base",children:n.gender||"N/A"})]}),C.jsxs("div",{className:"col-span-1",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Date of Birth:"}),C.jsx("p",{className:"text-base",children:n.dob?yi(new Date(n.dob),"yyyy-MM-dd"):"N/A"})]}),C.jsxs("div",{className:"col-span-1",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Domicile:"}),C.jsx("p",{className:"text-base",children:n.domicile||"N/A"})]}),C.jsxs("div",{className:"col-span-2",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"LinkedIn:"}),n.linkedin?C.jsx("a",{href:n.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-base",children:n.linkedin}):C.jsx("p",{className:"text-base",children:"N/A"})]}),C.jsxs("div",{className:"col-span-2",children:[C.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Applied At:"}),C.jsx("p",{className:"text-base",children:yi(new Date(n.createdAt),"yyyy-MM-dd HH:mm")})]})]})]})]})}):null;function lB(e,t){return function(){return e.apply(t,arguments)}}const{toString:vbe}=Object.prototype,{getPrototypeOf:DC}=Object,{iterator:s1,toStringTag:uB}=Symbol,o1=(e=>t=>{const n=vbe.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),oa=e=>(e=e.toLowerCase(),t=>o1(t)===e),a1=e=>t=>typeof t===e,{isArray:Rf}=Array,Qd=a1("undefined");function Lp(e){return e!==null&&!Qd(e)&&e.constructor!==null&&!Qd(e.constructor)&&ws(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cB=oa("ArrayBuffer");function xbe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cB(e.buffer),t}const wbe=a1("string"),ws=a1("function"),dB=a1("number"),Mp=e=>e!==null&&typeof e=="object",bbe=e=>e===!0||e===!1,qg=e=>{if(o1(e)!=="object")return!1;const t=DC(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(uB in e)&&!(s1 in e)},Sbe=e=>{if(!Mp(e)||Lp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Cbe=oa("Date"),Ebe=oa("File"),Nbe=oa("Blob"),Tbe=oa("FileList"),kbe=e=>Mp(e)&&ws(e.pipe),$be=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ws(e.append)&&((t=o1(e))==="formdata"||t==="object"&&ws(e.toString)&&e.toString()==="[object FormData]"))},_be=oa("URLSearchParams"),[Rbe,Ibe,Obe,Abe]=["ReadableStream","Request","Response","Headers"].map(oa),Pbe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Rf(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(Lp(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let i;for(r=0;r<a;r++)i=o[r],t.call(null,e[i],i,e)}}function fB(e,t){if(Lp(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Du=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hB=e=>!Qd(e)&&e!==Du;function Hb(){const{caseless:e,skipUndefined:t}=hB(this)&&this||{},n={},r=(s,o)=>{const a=e&&fB(n,o)||o;qg(n[a])&&qg(s)?n[a]=Hb(n[a],s):qg(s)?n[a]=Hb({},s):Rf(s)?n[a]=s.slice():(!t||!Qd(s))&&(n[a]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&Bp(arguments[s],r);return n}const Dbe=(e,t,n,{allOwnKeys:r}={})=>(Bp(t,(s,o)=>{n&&ws(s)?e[o]=lB(s,n):e[o]=s},{allOwnKeys:r}),e),Fbe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Lbe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Mbe=(e,t,n,r)=>{let s,o,a;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)a=s[o],(!r||r(a,e,t))&&!i[a]&&(t[a]=e[a],i[a]=!0);e=n!==!1&&DC(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Bbe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},jbe=e=>{if(!e)return null;if(Rf(e))return e;let t=e.length;if(!dB(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ube=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&DC(Uint8Array)),Wbe=(e,t)=>{const r=(e&&e[s1]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Vbe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},zbe=oa("HTMLFormElement"),Gbe=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),H4=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Hbe=oa("RegExp"),pB=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Bp(n,(s,o)=>{let a;(a=t(s,o,e))!==!1&&(r[o]=a||s)}),Object.defineProperties(e,r)},qbe=e=>{pB(e,(t,n)=>{if(ws(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ws(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Kbe=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return Rf(e)?r(e):r(String(e).split(t)),n},Xbe=()=>{},Ybe=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Qbe(e){return!!(e&&ws(e.append)&&e[uB]==="FormData"&&e[s1])}const Zbe=e=>{const t=new Array(10),n=(r,s)=>{if(Mp(r)){if(t.indexOf(r)>=0)return;if(Lp(r))return r;if(!("toJSON"in r)){t[s]=r;const o=Rf(r)?[]:{};return Bp(r,(a,i)=>{const l=n(a,s+1);!Qd(l)&&(o[i]=l)}),t[s]=void 0,o}}return r};return n(e,0)},Jbe=oa("AsyncFunction"),e2e=e=>e&&(Mp(e)||ws(e))&&ws(e.then)&&ws(e.catch),mB=((e,t)=>e?setImmediate:t?((n,r)=>(Du.addEventListener("message",({source:s,data:o})=>{s===Du&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Du.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ws(Du.postMessage)),t2e=typeof queueMicrotask<"u"?queueMicrotask.bind(Du):typeof process<"u"&&process.nextTick||mB,n2e=e=>e!=null&&ws(e[s1]),ve={isArray:Rf,isArrayBuffer:cB,isBuffer:Lp,isFormData:$be,isArrayBufferView:xbe,isString:wbe,isNumber:dB,isBoolean:bbe,isObject:Mp,isPlainObject:qg,isEmptyObject:Sbe,isReadableStream:Rbe,isRequest:Ibe,isResponse:Obe,isHeaders:Abe,isUndefined:Qd,isDate:Cbe,isFile:Ebe,isBlob:Nbe,isRegExp:Hbe,isFunction:ws,isStream:kbe,isURLSearchParams:_be,isTypedArray:Ube,isFileList:Tbe,forEach:Bp,merge:Hb,extend:Dbe,trim:Pbe,stripBOM:Fbe,inherits:Lbe,toFlatObject:Mbe,kindOf:o1,kindOfTest:oa,endsWith:Bbe,toArray:jbe,forEachEntry:Wbe,matchAll:Vbe,isHTMLForm:zbe,hasOwnProperty:H4,hasOwnProp:H4,reduceDescriptors:pB,freezeMethods:qbe,toObjectSet:Kbe,toCamelCase:Gbe,noop:Xbe,toFiniteNumber:Ybe,findKey:fB,global:Du,isContextDefined:hB,isSpecCompliantForm:Qbe,toJSONObject:Zbe,isAsyncFn:Jbe,isThenable:e2e,setImmediate:mB,asap:t2e,isIterable:n2e};function ft(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ve.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const gB=ft.prototype,yB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yB[e]={value:e}});Object.defineProperties(ft,yB);Object.defineProperty(gB,"isAxiosError",{value:!0});ft.from=(e,t,n,r,s,o)=>{const a=Object.create(gB);ve.toFlatObject(e,a,function(f){return f!==Error.prototype},c=>c!=="isAxiosError");const i=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return ft.call(a,i,l,n,r,s),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const r2e=null;function qb(e){return ve.isPlainObject(e)||ve.isArray(e)}function vB(e){return ve.endsWith(e,"[]")?e.slice(0,-2):e}function q4(e,t,n){return e?e.concat(t).map(function(s,o){return s=vB(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function s2e(e){return ve.isArray(e)&&!e.some(qb)}const o2e=ve.toFlatObject(ve,{},null,function(t){return/^is[A-Z]/.test(t)});function i1(e,t,n){if(!ve.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ve.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,v){return!ve.isUndefined(v[x])});const r=n.metaTokens,s=n.visitor||f,o=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(t);if(!ve.isFunction(s))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(ve.isDate(y))return y.toISOString();if(ve.isBoolean(y))return y.toString();if(!l&&ve.isBlob(y))throw new ft("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(y)||ve.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function f(y,x,v){let S=y;if(y&&!v&&typeof y=="object"){if(ve.endsWith(x,"{}"))x=r?x:x.slice(0,-2),y=JSON.stringify(y);else if(ve.isArray(y)&&s2e(y)||(ve.isFileList(y)||ve.endsWith(x,"[]"))&&(S=ve.toArray(y)))return x=vB(x),S.forEach(function(_,I){!(ve.isUndefined(_)||_===null)&&t.append(a===!0?q4([x],I,o):a===null?x:x+"[]",c(_))}),!1}return qb(y)?!0:(t.append(q4(v,x,o),c(y)),!1)}const h=[],p=Object.assign(o2e,{defaultVisitor:f,convertValue:c,isVisitable:qb});function g(y,x){if(!ve.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(y),ve.forEach(y,function(S,N){(!(ve.isUndefined(S)||S===null)&&s.call(t,S,ve.isString(N)?N.trim():N,x,p))===!0&&g(S,x?x.concat(N):[N])}),h.pop()}}if(!ve.isObject(e))throw new TypeError("data must be an object");return g(e),t}function K4(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function FC(e,t){this._pairs=[],e&&i1(e,this,t)}const xB=FC.prototype;xB.append=function(t,n){this._pairs.push([t,n])};xB.toString=function(t){const n=t?function(r){return t.call(this,r,K4)}:K4;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function a2e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wB(e,t,n){if(!t)return e;const r=n&&n.encode||a2e;ve.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=ve.isURLSearchParams(t)?t.toString():new FC(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class X4{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ve.forEach(this.handlers,function(r){r!==null&&t(r)})}}const bB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},i2e=typeof URLSearchParams<"u"?URLSearchParams:FC,l2e=typeof FormData<"u"?FormData:null,u2e=typeof Blob<"u"?Blob:null,c2e={isBrowser:!0,classes:{URLSearchParams:i2e,FormData:l2e,Blob:u2e},protocols:["http","https","file","blob","url","data"]},LC=typeof window<"u"&&typeof document<"u",Kb=typeof navigator=="object"&&navigator||void 0,d2e=LC&&(!Kb||["ReactNative","NativeScript","NS"].indexOf(Kb.product)<0),f2e=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h2e=LC&&window.location.href||"http://localhost",p2e=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:LC,hasStandardBrowserEnv:d2e,hasStandardBrowserWebWorkerEnv:f2e,navigator:Kb,origin:h2e},Symbol.toStringTag,{value:"Module"})),Dr={...p2e,...c2e};function m2e(e,t){return i1(e,new Dr.classes.URLSearchParams,{visitor:function(n,r,s,o){return Dr.isNode&&ve.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function g2e(e){return ve.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function y2e(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function SB(e){function t(n,r,s,o){let a=n[o++];if(a==="__proto__")return!0;const i=Number.isFinite(+a),l=o>=n.length;return a=!a&&ve.isArray(s)?s.length:a,l?(ve.hasOwnProp(s,a)?s[a]=[s[a],r]:s[a]=r,!i):((!s[a]||!ve.isObject(s[a]))&&(s[a]=[]),t(n,r,s[a],o)&&ve.isArray(s[a])&&(s[a]=y2e(s[a])),!i)}if(ve.isFormData(e)&&ve.isFunction(e.entries)){const n={};return ve.forEachEntry(e,(r,s)=>{t(g2e(r),s,n,0)}),n}return null}function v2e(e,t,n){if(ve.isString(e))try{return(t||JSON.parse)(e),ve.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const jp={transitional:bB,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=ve.isObject(t);if(o&&ve.isHTMLForm(t)&&(t=new FormData(t)),ve.isFormData(t))return s?JSON.stringify(SB(t)):t;if(ve.isArrayBuffer(t)||ve.isBuffer(t)||ve.isStream(t)||ve.isFile(t)||ve.isBlob(t)||ve.isReadableStream(t))return t;if(ve.isArrayBufferView(t))return t.buffer;if(ve.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return m2e(t,this.formSerializer).toString();if((i=ve.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return i1(i?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),v2e(t)):t}],transformResponse:[function(t){const n=this.transitional||jp.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(ve.isResponse(t)||ve.isReadableStream(t))return t;if(t&&ve.isString(t)&&(r&&!this.responseType||s)){const a=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(i){if(a)throw i.name==="SyntaxError"?ft.from(i,ft.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Dr.classes.FormData,Blob:Dr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],e=>{jp.headers[e]={}});const x2e=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),w2e=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&x2e[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Y4=Symbol("internals");function Sh(e){return e&&String(e).trim().toLowerCase()}function Kg(e){return e===!1||e==null?e:ve.isArray(e)?e.map(Kg):String(e)}function b2e(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const S2e=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Jx(e,t,n,r,s){if(ve.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!ve.isString(t)){if(ve.isString(r))return t.indexOf(r)!==-1;if(ve.isRegExp(r))return r.test(t)}}function C2e(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function E2e(e,t){const n=ve.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,a){return this[r].call(this,t,s,o,a)},configurable:!0})})}let bs=class{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(i,l,c){const f=Sh(l);if(!f)throw new Error("header name must be a non-empty string");const h=ve.findKey(s,f);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=Kg(i))}const a=(i,l)=>ve.forEach(i,(c,f)=>o(c,f,l));if(ve.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(ve.isString(t)&&(t=t.trim())&&!S2e(t))a(w2e(t),n);else if(ve.isObject(t)&&ve.isIterable(t)){let i={},l,c;for(const f of t){if(!ve.isArray(f))throw TypeError("Object iterator must return a key-value pair");i[c=f[0]]=(l=i[c])?ve.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}a(i,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Sh(t),t){const r=ve.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return b2e(s);if(ve.isFunction(n))return n.call(this,s,r);if(ve.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Sh(t),t){const r=ve.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Jx(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(a){if(a=Sh(a),a){const i=ve.findKey(r,a);i&&(!n||Jx(r,r[i],i,n))&&(delete r[i],s=!0)}}return ve.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Jx(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return ve.forEach(this,(s,o)=>{const a=ve.findKey(r,o);if(a){n[a]=Kg(s),delete n[o];return}const i=t?C2e(o):String(o).trim();i!==o&&delete n[o],n[i]=Kg(s),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ve.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&ve.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Y4]=this[Y4]={accessors:{}}).accessors,s=this.prototype;function o(a){const i=Sh(a);r[i]||(E2e(s,a),r[i]=!0)}return ve.isArray(t)?t.forEach(o):o(t),this}};bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(bs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});ve.freezeMethods(bs);function ew(e,t){const n=this||jp,r=t||n,s=bs.from(r.headers);let o=r.data;return ve.forEach(e,function(i){o=i.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function CB(e){return!!(e&&e.__CANCEL__)}function If(e,t,n){ft.call(this,e??"canceled",ft.ERR_CANCELED,t,n),this.name="CanceledError"}ve.inherits(If,ft,{__CANCEL__:!0});function EB(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ft("Request failed with status code "+n.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function N2e(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function T2e(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,a;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),f=r[o];a||(a=c),n[s]=l,r[s]=c;let h=o,p=0;for(;h!==s;)p+=n[h++],h=h%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-a<t)return;const g=f&&c-f;return g?Math.round(p*1e3/g):void 0}}function k2e(e,t){let n=0,r=1e3/t,s,o;const a=(c,f=Date.now())=>{n=f,s=null,o&&(clearTimeout(o),o=null),e(...c)};return[(...c)=>{const f=Date.now(),h=f-n;h>=r?a(c,f):(s=c,o||(o=setTimeout(()=>{o=null,a(s)},r-h)))},()=>s&&a(s)]}const Oy=(e,t,n=3)=>{let r=0;const s=T2e(50,250);return k2e(o=>{const a=o.loaded,i=o.lengthComputable?o.total:void 0,l=a-r,c=s(l),f=a<=i;r=a;const h={loaded:a,total:i,progress:i?a/i:void 0,bytes:l,rate:c||void 0,estimated:c&&i&&f?(i-a)/c:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(h)},n)},Q4=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Z4=e=>(...t)=>ve.asap(()=>e(...t)),$2e=Dr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Dr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Dr.origin),Dr.navigator&&/(msie|trident)/i.test(Dr.navigator.userAgent)):()=>!0,_2e=Dr.hasStandardBrowserEnv?{write(e,t,n,r,s,o,a){if(typeof document>"u")return;const i=[`${e}=${encodeURIComponent(t)}`];ve.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),ve.isString(r)&&i.push(`path=${r}`),ve.isString(s)&&i.push(`domain=${s}`),o===!0&&i.push("secure"),ve.isString(a)&&i.push(`SameSite=${a}`),document.cookie=i.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function R2e(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function I2e(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function NB(e,t,n){let r=!R2e(t);return e&&(r||n==!1)?I2e(e,t):t}const J4=e=>e instanceof bs?{...e}:e;function dc(e,t){t=t||{};const n={};function r(c,f,h,p){return ve.isPlainObject(c)&&ve.isPlainObject(f)?ve.merge.call({caseless:p},c,f):ve.isPlainObject(f)?ve.merge({},f):ve.isArray(f)?f.slice():f}function s(c,f,h,p){if(ve.isUndefined(f)){if(!ve.isUndefined(c))return r(void 0,c,h,p)}else return r(c,f,h,p)}function o(c,f){if(!ve.isUndefined(f))return r(void 0,f)}function a(c,f){if(ve.isUndefined(f)){if(!ve.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function i(c,f,h){if(h in t)return r(c,f);if(h in e)return r(void 0,c)}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:i,headers:(c,f,h)=>s(J4(c),J4(f),h,!0)};return ve.forEach(Object.keys({...e,...t}),function(f){const h=l[f]||s,p=h(e[f],t[f],f);ve.isUndefined(p)&&h!==i||(n[f]=p)}),n}const TB=e=>{const t=dc({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:i}=t;if(t.headers=a=bs.from(a),t.url=wB(NB(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&a.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),ve.isFormData(n)){if(Dr.hasStandardBrowserEnv||Dr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ve.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([f,h])=>{c.includes(f.toLowerCase())&&a.set(f,h)})}}if(Dr.hasStandardBrowserEnv&&(r&&ve.isFunction(r)&&(r=r(t)),r||r!==!1&&$2e(t.url))){const l=s&&o&&_2e.read(o);l&&a.set(s,l)}return t},O2e=typeof XMLHttpRequest<"u",A2e=O2e&&function(e){return new Promise(function(n,r){const s=TB(e);let o=s.data;const a=bs.from(s.headers).normalize();let{responseType:i,onUploadProgress:l,onDownloadProgress:c}=s,f,h,p,g,y;function x(){g&&g(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function S(){if(!v)return;const _=bs.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),A={data:!i||i==="text"||i==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:_,config:e,request:v};EB(function(L){n(L),x()},function(L){r(L),x()},A),v=null}"onloadend"in v?v.onloadend=S:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(S)},v.onabort=function(){v&&(r(new ft("Request aborted",ft.ECONNABORTED,e,v)),v=null)},v.onerror=function(I){const A=I&&I.message?I.message:"Network Error",M=new ft(A,ft.ERR_NETWORK,e,v);M.event=I||null,r(M),v=null},v.ontimeout=function(){let I=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const A=s.transitional||bB;s.timeoutErrorMessage&&(I=s.timeoutErrorMessage),r(new ft(I,A.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,v)),v=null},o===void 0&&a.setContentType(null),"setRequestHeader"in v&&ve.forEach(a.toJSON(),function(I,A){v.setRequestHeader(A,I)}),ve.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),i&&i!=="json"&&(v.responseType=s.responseType),c&&([p,y]=Oy(c,!0),v.addEventListener("progress",p)),l&&v.upload&&([h,g]=Oy(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(f=_=>{v&&(r(!_||_.type?new If(null,e,v):_),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const N=N2e(s.url);if(N&&Dr.protocols.indexOf(N)===-1){r(new ft("Unsupported protocol "+N+":",ft.ERR_BAD_REQUEST,e));return}v.send(o||null)})},P2e=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(c){if(!s){s=!0,i();const f=c instanceof Error?c:this.reason;r.abort(f instanceof ft?f:new If(f instanceof Error?f.message:f))}};let a=t&&setTimeout(()=>{a=null,o(new ft(`timeout ${t} of ms exceeded`,ft.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),e=null)};e.forEach(c=>c.addEventListener("abort",o));const{signal:l}=r;return l.unsubscribe=()=>ve.asap(i),l}},D2e=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},F2e=async function*(e,t){for await(const n of L2e(e))yield*D2e(n,t)},L2e=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},e$=(e,t,n,r)=>{const s=F2e(e,t);let o=0,a,i=l=>{a||(a=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await s.next();if(c){i(),l.close();return}let h=f.byteLength;if(n){let p=o+=h;n(p)}l.enqueue(new Uint8Array(f))}catch(c){throw i(c),c}},cancel(l){return i(l),s.return()}},{highWaterMark:2})},t$=64*1024,{isFunction:Cg}=ve,M2e=(({Request:e,Response:t})=>({Request:e,Response:t}))(ve.global),{ReadableStream:n$,TextEncoder:r$}=ve.global,s$=(e,...t)=>{try{return!!e(...t)}catch{return!1}},B2e=e=>{e=ve.merge.call({skipUndefined:!0},M2e,e);const{fetch:t,Request:n,Response:r}=e,s=t?Cg(t):typeof fetch=="function",o=Cg(n),a=Cg(r);if(!s)return!1;const i=s&&Cg(n$),l=s&&(typeof r$=="function"?(y=>x=>y.encode(x))(new r$):async y=>new Uint8Array(await new n(y).arrayBuffer())),c=o&&i&&s$(()=>{let y=!1;const x=new n(Dr.origin,{body:new n$,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!x}),f=a&&i&&s$(()=>ve.isReadableStream(new r("").body)),h={stream:f&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!h[y]&&(h[y]=(x,v)=>{let S=x&&x[y];if(S)return S.call(x);throw new ft(`Response type '${y}' is not supported`,ft.ERR_NOT_SUPPORT,v)})});const p=async y=>{if(y==null)return 0;if(ve.isBlob(y))return y.size;if(ve.isSpecCompliantForm(y))return(await new n(Dr.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(y)||ve.isArrayBuffer(y))return y.byteLength;if(ve.isURLSearchParams(y)&&(y=y+""),ve.isString(y))return(await l(y)).byteLength},g=async(y,x)=>{const v=ve.toFiniteNumber(y.getContentLength());return v??p(x)};return async y=>{let{url:x,method:v,data:S,signal:N,cancelToken:_,timeout:I,onDownloadProgress:A,onUploadProgress:M,responseType:L,headers:W,withCredentials:j="same-origin",fetchOptions:U}=TB(y),P=t||fetch;L=L?(L+"").toLowerCase():"text";let X=P2e([N,_&&_.toAbortSignal()],I),ae=null;const ee=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let ie;try{if(M&&c&&v!=="get"&&v!=="head"&&(ie=await g(W,S))!==0){let Y=new n(x,{method:"POST",body:S,duplex:"half"}),G;if(ve.isFormData(S)&&(G=Y.headers.get("content-type"))&&W.setContentType(G),Y.body){const[re,ce]=Q4(ie,Oy(Z4(M)));S=e$(Y.body,t$,re,ce)}}ve.isString(j)||(j=j?"include":"omit");const le=o&&"credentials"in n.prototype,we={...U,signal:X,method:v.toUpperCase(),headers:W.normalize().toJSON(),body:S,duplex:"half",credentials:le?j:void 0};ae=o&&new n(x,we);let te=await(o?P(ae,U):P(x,we));const oe=f&&(L==="stream"||L==="response");if(f&&(A||oe&&ee)){const Y={};["status","statusText","headers"].forEach(xe=>{Y[xe]=te[xe]});const G=ve.toFiniteNumber(te.headers.get("content-length")),[re,ce]=A&&Q4(G,Oy(Z4(A),!0))||[];te=new r(e$(te.body,t$,re,()=>{ce&&ce(),ee&&ee()}),Y)}L=L||"text";let pe=await h[ve.findKey(h,L)||"text"](te,y);return!oe&&ee&&ee(),await new Promise((Y,G)=>{EB(Y,G,{data:pe,headers:bs.from(te.headers),status:te.status,statusText:te.statusText,config:y,request:ae})})}catch(le){throw ee&&ee(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,y,ae),{cause:le.cause||le}):ft.from(le,le&&le.code,y,ae)}}},j2e=new Map,kB=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:s}=t,o=[r,s,n];let a=o.length,i=a,l,c,f=j2e;for(;i--;)l=o[i],c=f.get(l),c===void 0&&f.set(l,c=i?new Map:B2e(t)),f=c;return c};kB();const MC={http:r2e,xhr:A2e,fetch:{get:kB}};ve.forEach(MC,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const o$=e=>`- ${e}`,U2e=e=>ve.isFunction(e)||e===null||e===!1;function W2e(e,t){e=ve.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let a=0;a<n;a++){r=e[a];let i;if(s=r,!U2e(r)&&(s=MC[(i=String(r)).toLowerCase()],s===void 0))throw new ft(`Unknown adapter '${i}'`);if(s&&(ve.isFunction(s)||(s=s.get(t))))break;o[i||"#"+a]=s}if(!s){const a=Object.entries(o).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=n?a.length>1?`since :
`+a.map(o$).join(`
`):" "+o$(a[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return s}const $B={getAdapter:W2e,adapters:MC};function tw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new If(null,e)}function a$(e){return tw(e),e.headers=bs.from(e.headers),e.data=ew.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$B.getAdapter(e.adapter||jp.adapter,e)(e).then(function(r){return tw(e),r.data=ew.call(e,e.transformResponse,r),r.headers=bs.from(r.headers),r},function(r){return CB(r)||(tw(e),r&&r.response&&(r.response.data=ew.call(e,e.transformResponse,r.response),r.response.headers=bs.from(r.response.headers))),Promise.reject(r)})}const _B="1.13.1",l1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{l1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const i$={};l1.transitional=function(t,n,r){function s(o,a){return"[Axios v"+_B+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,i)=>{if(t===!1)throw new ft(s(a," has been removed"+(n?" in "+n:"")),ft.ERR_DEPRECATED);return n&&!i$[a]&&(i$[a]=!0,console.warn(s(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,i):!0}};l1.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function V2e(e,t,n){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],a=t[o];if(a){const i=e[o],l=i===void 0||a(i,o,e);if(l!==!0)throw new ft("option "+o+" must be "+l,ft.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ft("Unknown option "+o,ft.ERR_BAD_OPTION)}}const Xg={assertOptions:V2e,validators:l1},wa=Xg.validators;let ju=class{constructor(t){this.defaults=t||{},this.interceptors={request:new X4,response:new X4}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=dc(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&Xg.assertOptions(r,{silentJSONParsing:wa.transitional(wa.boolean),forcedJSONParsing:wa.transitional(wa.boolean),clarifyTimeoutError:wa.transitional(wa.boolean)},!1),s!=null&&(ve.isFunction(s)?n.paramsSerializer={serialize:s}:Xg.assertOptions(s,{encode:wa.function,serialize:wa.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xg.assertOptions(n,{baseUrl:wa.spelling("baseURL"),withXsrfToken:wa.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&ve.merge(o.common,o[n.method]);o&&ve.forEach(["delete","get","head","post","put","patch","common"],y=>{delete o[y]}),n.headers=bs.concat(a,o);const i=[];let l=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(l=l&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let f,h=0,p;if(!l){const y=[a$.bind(this),void 0];for(y.unshift(...i),y.push(...c),p=y.length,f=Promise.resolve(n);h<p;)f=f.then(y[h++],y[h++]);return f}p=i.length;let g=n;for(;h<p;){const y=i[h++],x=i[h++];try{g=y(g)}catch(v){x.call(this,v);break}}try{f=a$.call(this,g)}catch(y){return Promise.reject(y)}for(h=0,p=c.length;h<p;)f=f.then(c[h++],c[h++]);return f}getUri(t){t=dc(this.defaults,t);const n=NB(t.baseURL,t.url,t.allowAbsoluteUrls);return wB(n,t.params,t.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(t){ju.prototype[t]=function(n,r){return this.request(dc(r||{},{method:t,url:n,data:(r||{}).data}))}});ve.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,i){return this.request(dc(i||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ju.prototype[t]=n(),ju.prototype[t+"Form"]=n(!0)});let z2e=class RB{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(i=>{r.subscribe(i),o=i}).then(s);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,i){r.reason||(r.reason=new If(o,a,i),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new RB(function(s){t=s}),cancel:t}}};function G2e(e){return function(n){return e.apply(null,n)}}function H2e(e){return ve.isObject(e)&&e.isAxiosError===!0}const Xb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Xb).forEach(([e,t])=>{Xb[t]=e});function IB(e){const t=new ju(e),n=lB(ju.prototype.request,t);return ve.extend(n,ju.prototype,t,{allOwnKeys:!0}),ve.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return IB(dc(e,s))},n}const In=IB(jp);In.Axios=ju;In.CanceledError=If;In.CancelToken=z2e;In.isCancel=CB;In.VERSION=_B;In.toFormData=i1;In.AxiosError=ft;In.Cancel=In.CanceledError;In.all=function(t){return Promise.all(t)};In.spread=G2e;In.isAxiosError=H2e;In.mergeConfig=dc;In.AxiosHeaders=bs;In.formToJSON=e=>SB(ve.isHTMLForm(e)?new FormData(e):e);In.getAdapter=$B.getAdapter;In.HttpStatusCode=Xb;In.default=In;const{Axios:iSe,AxiosError:lSe,CanceledError:uSe,isCancel:cSe,CancelToken:dSe,VERSION:fSe,all:hSe,Cancel:pSe,isAxiosError:mSe,spread:gSe,toFormData:ySe,AxiosHeaders:vSe,HttpStatusCode:xSe,formToJSON:wSe,getAdapter:bSe,mergeConfig:SSe}=In,q2e=()=>{const e=G_(),t=e.jobId;console.log("useParams() object:",e),console.log("Job ID from URL (extracted):",t);const[n,r]=T.useState([]),[s,o]=T.useState(!1),[a,i]=T.useState(null),{data:l,isLoading:c,error:f}=z9({queryKey:["job",t],queryFn:async()=>{console.log("Fetching job with ID:",t);try{const v=await In.get(`/api/jobs/${t}`);return console.log("API Response for job:",v.data),v.data}catch(v){throw console.error("Error fetching job:",v),v}},enabled:!!t}),h=v=>{r(S=>S.includes(v)?S.filter(N=>N!==v):[...S,v])},p=()=>{l&&n.length===l.applications.length?r([]):l&&r(l.applications.map(v=>v.id))},g=v=>{i(v),o(!0)},y=()=>{o(!1),i(null)};if(console.log("isLoading:",c),console.log("error:",f),console.log("job:",l),c)return C.jsx("div",{children:"Loading job details..."});if(f)return C.jsxs("div",{children:["Error: ",f.message]});if(!l)return C.jsx("div",{children:"Job not found"});console.log("Job data (after checks):",l),console.log("Applications data (after checks):",l.applications);const x=l.applications&&l.applications.length>0;return C.jsxs("div",{className:"min-h-screen bg-gray-50",children:[C.jsxs("header",{className:"w-full bg-white shadow-sm py-4 px-8 flex justify-between items-center",children:[C.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[C.jsx(vp,{to:"/admin",className:"hover:underline",children:"Job List"}),C.jsx("span",{children:">"}),C.jsx("span",{className:"font-semibold text-gray-900",children:"Manage Candidate"})]}),C.jsxs(cp,{children:[C.jsx(IC,{src:"https://api.builder.io/api/v1/image/assets/TEMP/e8a36fb1d9f45dae7cb3c58860fad5ef79c0d4c5?width=56",alt:"User Avatar"}),C.jsx(dp,{children:"CN"})]})]}),C.jsxs("main",{className:"container mx-auto p-8",children:[C.jsx("h1",{className:"text-2xl font-bold mb-6",children:l.title}),C.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:x?C.jsxs(oB,{children:[C.jsx(aB,{children:C.jsxs(Gb,{children:[C.jsx(Mo,{className:"whitespace-nowrap",children:C.jsx(zb,{checked:n.length===l.applications.length,onCheckedChange:p})}),C.jsx(Mo,{children:"PHOTO"}),C.jsx(Mo,{children:"FULL NAME"}),C.jsx(Mo,{children:"EMAIL"}),C.jsx(Mo,{children:"PHONE NUMBER"}),C.jsx(Mo,{children:"GENDER"}),C.jsx(Mo,{children:"DATE OF BIRTH"}),C.jsx(Mo,{children:"DOMICILE"}),C.jsx(Mo,{children:"LINKEDIN"}),C.jsx(Mo,{children:"APPLIED AT"})]})}),C.jsx(iB,{children:l.applications.map(v=>C.jsxs(Gb,{onClick:()=>g(v),className:"cursor-pointer hover:bg-gray-100",children:[C.jsxs(Bo,{onClick:S=>S.stopPropagation(),children:[" ",C.jsx(zb,{checked:n.includes(v.id),onCheckedChange:()=>h(v.id)})]}),C.jsx(Bo,{children:v.photoUrl?C.jsx("img",{src:v.photoUrl,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):C.jsx(cp,{children:C.jsx(dp,{children:v.fullName?v.fullName.charAt(0):"N/A"})})}),C.jsx(Bo,{className:"font-medium",children:v.fullName}),C.jsx(Bo,{children:v.email}),C.jsx(Bo,{children:v.phone||"N/A"}),C.jsx(Bo,{children:v.gender||"N/A"}),C.jsx(Bo,{children:v.dob?yi(new Date(v.dob),"yyyy-MM-dd"):"N/A"}),C.jsx(Bo,{children:v.domicile||"N/A"}),C.jsx(Bo,{children:v.linkedin?C.jsx("a",{href:v.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",onClick:S=>S.stopPropagation(),children:"LinkedIn"}):"N/A"}),C.jsx(Bo,{children:yi(new Date(v.createdAt),"yyyy-MM-dd HH:mm")})]},v.id))})]}):C.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[C.jsx("img",{src:"/Empty State.svg",alt:"No applications found",className:"max-w-xs mb-4"}),C.jsx("p",{className:"text-gray-500 text-lg",children:"No applications have been submitted for this job yet."})]})})]}),C.jsx(ybe,{isOpen:s,onClose:y,candidate:a})]})};function K2e(){const e=T.useRef(null),t=T.useRef(null),n=T.useRef(null),[r,s]=T.useState(null),[o,a]=T.useState(null),[i,l]=T.useState(!0),[c,f]=T.useState(!0),[h,p]=T.useState(0),[g,y]=T.useState(!1),x=T.useRef(null),{toast:v}=Zb(),S=2e3,N=()=>{const ee=T.useCallback(async()=>{s(null),a(null),y(!1),x.current&&(clearTimeout(x.current),x.current=null),console.log("[DebugCameraPage] Attempting to start webcam...");try{const le=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:1280},height:{ideal:720}},audio:!1});e.current&&(e.current.srcObject=le,e.current.play(),console.log("[DebugCameraPage] Webcam started successfully.")),n.current=le}catch(le){console.error("[DebugCameraPage] Error accessing webcam: ",le),s("Could not access webcam. Please ensure you have a webcam and granted permissions.")}},[]),ie=T.useCallback(()=>{n.current&&(n.current.getTracks().forEach(le=>le.stop()),n.current=null,console.log("[DebugCameraPage] Webcam stopped."))},[]);return{startWebcam:ee,stopWebcam:ie}},{startWebcam:_,stopWebcam:I}=N(),{pose:A,count:M,rawCount:L,ready:W,error:j,isRight:U,palmWidth:P}=pL({video:e.current,enabled:!0,fps:24,holdMs:500,smoothWindow:5,isMirrored:c}),X=c6(e,!0),ae=T.useCallback(()=>{if(e.current&&t.current){const ee=e.current,ie=t.current;ie.width=ee.videoWidth,ie.height=ee.videoHeight;const le=ie.getContext("2d");if(le){c&&(le.translate(ie.width,0),le.scale(-1,1)),le.drawImage(ee,0,0,ie.width,ie.height);const we=ie.toDataURL("image/png");a(we),p(Date.now()),v({description:"Photo captured!"}),console.log(`[DebugCameraPage] Frame captured. Image data length: ${we.length}`),I()}}},[c,v,I]);return T.useEffect(()=>(_(),()=>{I(),x.current&&(clearTimeout(x.current),x.current=null)}),[_,I]),T.useEffect(()=>{if(console.log("[DebugCameraPage] Auto-capture useEffect triggered. Current state:",{autoCaptureEnabled:i,detectorReady:W,cameraError:r,pose:A,lastCaptureTime:h,capturedImage:!!o}),!i||!W||r||o){console.log("[DebugCameraPage] Auto-capture conditions not met. Returning.");return}if(Date.now()-h<2500){y(!1),x.current&&(clearTimeout(x.current),x.current=null),console.log("[DebugCameraPage] In cooldown period. Returning.");return}x.current&&(clearTimeout(x.current),x.current=null),A===3?(y(!1),console.log("[DebugCameraPage] Pose 3 detected. Triggering capture."),ae()):A===1||A===2?(y(!0),console.log(`[DebugCameraPage] Wrong pose detected: ${A}. Expected: 3`),x.current=setTimeout(()=>{v({description:"Try again: show Pose 3",variant:"destructive"}),y(!1),console.log("[DebugCameraPage] Toast: Try again for Pose 3")},S)):A===0&&(console.log("[DebugCameraPage] No hand detected (pose 0)."),x.current=setTimeout(()=>{v({description:"Raise your hand for Pose 3",variant:"destructive"}),y(!1),console.log("[DebugCameraPage] Toast: Raise your hand for Pose 3")},S))},[i,W,r,A,h,o,ae,I,v]),T.useEffect(()=>{const ee=ie=>{(ie.key==="c"||ie.key==="C")&&!o&&!r&&(console.log("[DebugCameraPage] Manual capture triggered by 'C' key."),ae())};return window.addEventListener("keydown",ee),()=>{window.removeEventListener("keydown",ee)}},[o,r,ae]),T.useEffect(()=>(window.lastHandDebug={count:M,pose:A,isRight:U,isMirrored:c,palmWidth:P,rawCount:L},()=>{delete window.lastHandDebug}),[M,A,U,c,P,L]),C.jsxs("div",{className:"container mx-auto p-6",children:[C.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Debug Camera & Hand Pose Capture"}),C.jsxs("div",{className:"grid gap-4 py-4",children:[r?C.jsxs("div",{className:"flex flex-col items-center justify-center h-96 bg-muted rounded-xl border border-dashed text-red-500",children:[C.jsx("p",{className:"text-center",children:r}),C.jsx(vt,{onClick:_,className:"mt-4",children:"Retry Camera"})]}):o?C.jsxs("div",{className:"relative flex flex-col items-center justify-center h-96 bg-muted rounded-xl border",children:[C.jsx("img",{src:o,alt:"Captured",className:"max-w-full h-auto rounded-md object-contain"}),C.jsx(vt,{onClick:_,className:"mt-4",children:"Retake Photo"})]}):C.jsxs("div",{className:"relative flex items-center justify-center h-96 bg-muted rounded-xl border aspect-video",children:[C.jsx("video",{ref:e,className:"w-full h-full rounded-xl object-cover scale-x-[-1]",autoPlay:!0,playsInline:!0,muted:!0}),C.jsx("canvas",{ref:t,style:{display:"none"}}),X&&A!==0&&e.current&&C.jsx(d6,{handBox:X,pose:A,sequenceStep:A,isWrongPose:g,videoRef:e}),!W&&C.jsx("div",{className:"absolute bottom-4 right-4 bg-gray-800 text-white text-xs px-2 py-1 rounded-md",children:"Detecting hands..."}),j&&C.jsx("div",{className:"absolute bottom-4 left-4 text-red-500 text-xs px-2 py-1 rounded-md bg-gray-800",children:j}),C.jsxs("div",{className:"absolute top-4 left-4 bg-gray-800 text-white text-xs px-2 py-1 rounded-md",children:["Pose: ",A," (Raw: ",L,")"]})]}),C.jsxs("div",{className:"flex flex-col items-center mt-4",children:[C.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[C.jsx(sy,{id:"auto-capture-mode",checked:i,onCheckedChange:l}),C.jsx(pr,{htmlFor:"auto-capture-mode",children:"Auto-capture (Pose 3)"})]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsxs(vt,{onClick:ae,disabled:!!o||!!r,children:[C.jsx(V8,{className:"mr-2 h-4 w-4"})," Manual Capture (Press 'C')"]}),C.jsxs(vt,{onClick:_,disabled:!o&&!r,children:[C.jsx(rU,{className:"mr-2 h-4 w-4"})," Reset"]})]})]})]})]})}function X2e(){return C.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral-20",children:[C.jsx(ny,{}),C.jsx("main",{className:"flex-1 flex items-center justify-center py-[50px] px-4",children:C.jsxs("div",{className:"w-full max-w-[700px] bg-white border border-neutral-40 rounded-lg p-10 flex flex-col items-center text-center gap-6",children:[C.jsx("img",{src:"/sukses.svg",alt:"Success",className:"w-52 h-52"}),C.jsx("h1",{className:"text-2xl font-bold text-neutral-100 leading-8",children:"Application Submitted Successfully!"}),C.jsx("p",{className:"text-base text-neutral-90 leading-6",children:"Thank you for applying. We will review your application and get back to you soon."}),C.jsx(vp,{to:"/",className:"inline-flex px-6 py-2 justify-center items-center gap-2 rounded-lg bg-primary shadow-[0_1px_2px_0_rgba(0,0,0,0.12)] text-base font-bold text-white leading-7 hover:bg-primary-hover transition-colors",children:"Back to Home"})]})})]})}const Y2e=()=>{const e=yp();return T.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:C.jsxs("div",{className:"text-center",children:[C.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),C.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),C.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Q2e=new R9,Z2e=()=>C.jsx(O9,{client:Q2e,children:C.jsxs(o9,{children:[C.jsx(UU,{}),C.jsx(b7,{}),C.jsx(WV,{children:C.jsxs(DV,{children:[C.jsx(ol,{path:"/",element:C.jsx(HV,{})}),C.jsx(ol,{path:"/apply/:jobId",element:C.jsx(xwe,{})}),C.jsx(ol,{path:"/apply/success",element:C.jsx(X2e,{})})," ",C.jsx(ol,{path:"/admin",element:C.jsx(cbe,{})}),C.jsx(ol,{path:"/admin/manage-job/:jobId",element:C.jsx(q2e,{})})," ",C.jsx(ol,{path:"/debug/camera",element:C.jsx(K2e,{})})," ",C.jsx(ol,{path:"*",element:C.jsx(Y2e,{})})]})})]})});VU.createRoot(document.getElementById("root")).render(C.jsx(Z2e,{}));
